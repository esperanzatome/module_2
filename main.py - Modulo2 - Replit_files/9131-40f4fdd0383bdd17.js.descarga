"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9131],{70338:function(e,n,t){var r=t(34727),i=t(70655),o=t(15794);n.Z=function(){var e=(0,r.Z)((function(e,n){var t,r,a;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return e?(t=e.user,[3,4]):[3,1];case 1:return(r=n.getState().user)&&r.userInfo.isLoggedIn&&r.userInfo?(t=r.userInfo,[3,4]):[3,2];case 2:return[4,(0,o.LK)("/is_authenticated")];case 3:(a=i.sent()).success&&(t=a.user),i.label=4;case 4:return t&&(e&&(t=JSON.parse(JSON.stringify(t))),n.dispatch({type:"FETCH_USER_INFO_SUCCESS",user:t})),[2,{user:t}]}}))}));return function(n,t){return e.apply(this,arguments)}}()},55226:function(e,n,t){t.d(n,{Z:function(){return lt}});var r,i=t(34727),o=t(14251),a=t(70655),u=t(11887),s=t(34219);!function(e){e.USER_JOIN="USER_JOIN",e.USER_LEAVE="USER_LEAVE",e.USERS_UPDATE="USERS_UPDATE",e.USER_OPENED_FILE="USER_OPENED_FILE",e.FOLLOWED_USER_CHANGED="FOLLOWED_USER_CHANGED",e.FOLLOWING_USERS_CHANGED="FOLLOWING_USERS_CHANGED"}(r||(r={}));var c=t(69779),l=t(50055),f=t(80437),d=Object.values(f.Z.multiplayer);function p(e){var n={};return d.forEach((function(e){n[e]=0})),e.forEach((function(e){n[e.color]++})),Object.keys(n).sort((function(e,t){return n[e]-n[t]}))[0]}function h(e){var n=e.sessions.sort((function(e,n){return e.timestamp-n.timestamp})),t=!0,r=!1,i=void 0;try{for(var o,a=n[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var u=o.value;if(u.activeFile)return u.activeFile}}catch(s){r=!0,i=s}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return null}function E(e,n){var t=n.find((function(n){return n.sessions.some((function(n){return n.id===e}))}));if(!t)throw new Error("Expected user with session ID ".concat(e));return t}function m(e){var n=e.seconds,t=e.nanos;return Number(n||0)+(t||0)/1e9}var v=t(1672),g=t(73604),_=t(62991),b=t.n(_);function y(e){var n=e.container,t=function(e){b()(s,e)||(s=e,o.emit(r.FOLLOWED_USER_CHANGED,e))},o=(0,v.ZP)();o.setMaxListeners(1/0);var u=[],s=null,f=[],d={},_=null;function y(){return w.apply(this,arguments)}function w(){return(w=(0,i.Z)((function(){return(0,a.__generator)(this,(function(e){return _?[2,_]:[2,new Promise((function(e){o.once(r.USERS_UPDATE,(function(){if(!_)throw new Error("Expected presenceChannel to be set");e(_)}))}))]}))}))).apply(this,arguments)}function S(){return(S=(0,i.Z)((function(e){var n,r;return(0,a.__generator)(this,(function(i){switch(i.label){case 0:if((null===s||void 0===s?void 0:s.username)===e)throw new Error("Already following user with username ".concat(e));return s?[4,R()]:[3,2];case 1:i.sent(),i.label=2;case 2:return[4,y()];case 3:return n=i.sent(),(r=u.find((function(n){return n.username===e})))?(t(r),r.sessions.forEach((function(e){n.send({followUser:{session:e.id}})})),[2]):[2]}}))}))).apply(this,arguments)}function R(){return D.apply(this,arguments)}function D(){return(D=(0,i.Z)((function(){var e,n;return(0,a.__generator)(this,(function(r){switch(r.label){case 0:if(!s)throw new Error("No user to unfollow");return e=s,t(null),[4,y()];case 1:return n=r.sent(),e.sessions.forEach((function(e){n.send({unfollowUser:{session:e.id}})})),[2]}}))}))).apply(this,arguments)}return n.openChannel({service:"presence",name:"presencer"},(function(e){var n=e.channel;if(!e.error){if(!n)throw new Error("Expected channel");return n.onCommand((function(e){var n={cmd:e,emitter:o,activeUsers:u,userIdToFile:d,followedUser:s,setFollowedUser:t,followingUsers:f};switch(e.body){case"roster":!function(e){var n=e.cmd,t=e.emitter,i=e.activeUsers,o=e.userIdToFile,a=e.followedUser,u=e.followingUsers,s=e.setFollowedUser,l=n.roster;if(l){var f=l.user,d=l.files;if(f&&d){var E=new Set;if(i.splice(0,i.length),f.forEach((function(e){if(e.id&&e.name&&e.roles&&!E.has(e.id)){var n=d.filter((function(n){return n.userId===e.id})).map((function(e){if(!e.session||!e.timestamp)throw new Error("Expected session and associated with user");return{id:e.session,activeFile:e.file||null,timestamp:m(e.timestamp)}}));i.push({id:e.id,username:e.name,roles:e.roles,color:p(i),sessions:n}),E.add(e.id)}})),i.forEach((function(e){o[e.id]=h(e)})),t.emit(r.USERS_UPDATE,(0,c.Z)(i)),u.filter((function(e){return!i.some((function(n){return n.id===e.id}))})).forEach((function(e){var n=u.indexOf(e);-1!==n&&(u.splice(n,1),t.emit(r.FOLLOWING_USERS_CHANGED,{followingUsers:(0,c.Z)(u),user:e,type:"unfollow"}))})),a)if(i.some((function(e){return e.id===a.id}))){var v=o[a.id];t.emit(r.USER_OPENED_FILE,{user:a,file:v})}else s(null)}}}(n);break;case"join":!function(e){var n=e.cmd,t=e.emitter,i=e.activeUsers,o=e.userIdToFile,a=n.join;if(a.id&&a.name&&a.roles&&a.session){var u=i.find((function(e){return e.id===a.id})),s=Math.floor(Date.now()/1e3),f=m(l.google.protobuf.Timestamp.create({seconds:s}));if(u)u.sessions.push({id:a.session,activeFile:null,timestamp:f});else{var d={id:a.id,username:a.name,roles:a.roles,color:p(i),sessions:[{id:a.session,activeFile:null,timestamp:f}]};o[a.id]=null,i.push(d),t.emit(r.USER_JOIN,d),t.emit(r.USERS_UPDATE,(0,c.Z)(i))}}}(n);break;case"part":!function(e){var n=e.cmd,t=e.emitter,i=e.activeUsers,o=e.userIdToFile,a=e.followedUser,u=e.followingUsers,s=e.setFollowedUser;if(n.part&&n.part.id&&n.part.session){var l=n.part,f=l.id,d=l.session,p=i.findIndex((function(e){return e.id===f})),E=i[p];if(1===E.sessions.length){i.splice(p,1),delete o[E.id],t.emit(r.USER_LEAVE,E),t.emit(r.USERS_UPDATE,(0,c.Z)(i)),a&&s(null);var m=u.findIndex((function(e){return e.id===E.id}));-1!==m&&(u.splice(m,1),t.emit(r.FOLLOWING_USERS_CHANGED,{followingUsers:(0,c.Z)(u),user:E,type:"unfollow"}))}else{E.sessions=E.sessions.filter((function(e){return e.id!==d}));var v=h(E);o[E.id]!==v&&(o[E.id]=v,t.emit(r.USER_OPENED_FILE,{user:E,file:v}))}}}(n);break;case"fileOpened":!function(e){var n=e.emitter,t=e.cmd,i=e.activeUsers,o=e.userIdToFile;if(t.fileOpened){var a=t.fileOpened,u=a.userId,s=a.file,c=a.timestamp,l=a.session,f=s||null;if(!u||!c)throw new Error("Expected userId and timestamp associated with file opened command");var d=i.find((function(e){return e.id===u}));if(!d)throw new Error("Expected user with ID ".concat(u));var p=d.sessions.find((function(e){return e.id===l}));if(!p)throw new Error("Expected session with ID ".concat(p));p.activeFile=f,p.timestamp=m(c),o[u]=f,n.emit(r.USER_OPENED_FILE,{user:d,file:f})}}(n);break;case"followUser":!function(e){var n=e.cmd,t=e.emitter,i=e.activeUsers,o=e.followingUsers,a=n.followUser;if(!a.session)throw new Error("Expected session associated with follow user");var u=E(a.session,i);o.some((function(e){return e.id===u.id}))||(o.push(u),t.emit(r.FOLLOWING_USERS_CHANGED,{followingUsers:(0,c.Z)(o),user:u,type:"follow"}))}(n);break;case"unfollowUser":!function(e){var n=e.cmd,t=e.emitter,i=e.activeUsers,o=e.followingUsers,a=n.unfollowUser;if(!a.session)throw new Error("Expected session associated with follow user");var u=E(a.session,i),s=o.findIndex((function(e){return e.id===u.id}));-1!==s&&(o.splice(s,1),t.emit(r.FOLLOWING_USERS_CHANGED,{followingUsers:(0,c.Z)(o),user:u,type:"unfollow"}))}(n);break;case"sessionTimestampUpdated":!function(e){var n=e.cmd,t=e.emitter,i=e.activeUsers,o=e.userIdToFile,a=n.sessionTimestampUpdated;if(!a.session||!a.timestamp)throw new Error("Expected session and tiemstamp associated with update");var u=a.session,s=E(u,i),c=o[s.id],l=s.sessions.find((function(e){return e.id===u}));if(!l)throw new Error("Expected user ".concat(s.id," to have a session with ID ").concat(u));l.timestamp=m(a.timestamp);var f=l.activeFile;f!==c&&(o[s.id]=f,t.emit(r.USER_OPENED_FILE,{user:s,file:f}))}(n)}})),_=n,function(){_=null}}})),{onUserLeave:function(e){return o.on(r.USER_LEAVE,e),function(){o.removeListener(r.USER_LEAVE,e)}},onUserJoin:function(e){return o.on(r.USER_JOIN,e),function(){o.removeListener(r.USER_LEAVE,e)}},onActiveUsersChange:function(e){return o.on(r.USERS_UPDATE,e),function(){o.removeListener(r.USERS_UPDATE,e)}},onUserOpenedFile:function(e){return o.on(r.USER_OPENED_FILE,e),function(){o.removeListener(r.USER_OPENED_FILE,e)}},onFollowedUserChanged:function(e){return o.on(r.FOLLOWED_USER_CHANGED,e),function(){o.removeListener(r.FOLLOWED_USER_CHANGED,e)}},onFollowingUsersChanged:function(e){return o.on(r.FOLLOWING_USERS_CHANGED,e),function(){o.removeListener(r.FOLLOWING_USERS_CHANGED,e)}},getActiveFileForUser:function(e){var n=d[e];if("undefined"===typeof n)throw new Error("Expected file for user with ID ".concat(e," to be defined"));return n},updateOpenFile:function(e){return(0,i.Z)((function(){return(0,a.__generator)(this,(function(n){switch(n.label){case 0:return[4,y()];case 1:return n.sent().send({openFile:{file:e}}),[2]}}))}))()},updateSessionTimestamp:function(){return(0,i.Z)((function(){return(0,a.__generator)(this,(function(e){switch(e.label){case 0:return[4,y()];case 1:return e.sent().send({updateSessionTimestamp:{}}),[2]}}))}))()},followUser:function(e){return S.apply(this,arguments)},unfollowUser:R,getActiveUsers:function(){return u},getFollowedUser:function(){return s},getFollowingUsers:function(){return f},getUserIdToFile:function(){return d},getPathToUserIds:function(){var e=new Map;function n(t,r){var i;if(""!==t){e.has(t)||e.set(t,[]);var o=e.get(t);if(!o)throw new Error("Expected user Ids");o.some((function(e){return e===r}))||(null===(i=e.get(t))||void 0===i||i.push(r),n((0,g.Il)(t),r))}}return u.forEach((function(e){var t=e.id,r=d[t];r&&n(r,t)})),e}}}var w,S=t(52875);!function(e){e.COMMAND_BAR_TOGGLED="COMMAND_BAR_TOGGLED",e.DEEPLINK_CHANGED="DEEPLINK_CHANGED",e.EDITOR_FOCUSED="EDITOR_FOCUSED",e.SESSION_STATE_CHANGED="SESSION_STATE_CHANGED",e.PREVIEWED_FILE_CHANGED="PREVIEWED_FILE_CHANGED",e.FOLLOWING_USERS_CHANGED="FOLLOWING_USERS_CHANGED",e.CURSOR_POSITION_CHANGED="CURSOR_POSITION_CHANGED",e.CONFIG_FILE_VISIBILITY_TOGGLED="CONFIG_FILE_VISIBILITY_TOGGLED",e.RESOURCE_MONITORING_STATE_CHANGED="RESOURCE_MONITORING_STATE_CHANGED",e.TERMINAL_WRITE_CALLED="TERMINAL_WRITE_CALLED",e.TERMINAL_CLEAR_CALLED="TERMINAL_CLEAR_CALLED"}(w||(w={}));var R,D=t(52867);!function(e){e.MESSAGES_LOADED="MESSAGES_LOADED",e.MESSAGE_RECEIVED="MESSAGE_RECEIVED",e.MESSAGE_SENT="MESSAGE_SENT",e.USER_TYPING_UPDATED="USER_TYPING_UPDATED"}(R||(R={}));var I,T=t(46679),C=t(41847),N=t(64487),A=t(27373);!function(e){e.MESSAGE_RECEIVED="MESSAGE_RECEIVED"}(I||(I={}));var x=t(82378),O=t(48732),L=t(9941),P=t(39571),F=t(75815),k=t(21603),U="{".charCodeAt(0),G="}".charCodeAt(0),Z="[".charCodeAt(0),H="]".charCodeAt(0),M='"'.charCodeAt(0),q="\\".charCodeAt(0);var B=new TextEncoder,j=new TextDecoder,W="\r".charCodeAt(0),V="\n".charCodeAt(0);var J=function(){var e=/[a-z\d_-]+: [a-z\d_ :;.,/"'?!(){}[\]@<>=+*#$&`|~^%-]+/.source;return RegExp("(".concat(e,"\\r\\n)*(").concat(e,")$"),"i")}();function z(e,n,t){var r=j.decode(e.slice(0,n));try{return{json:JSON.parse(r),buffer:e.slice(n)}}catch(u){if((0,O.Z)(u,SyntaxError)&&"Unexpected end of JSON input"===u.message){k.kg.info("Failed to parse LSP message, falling back to json parsing",{buffer:e.toString(),length:n,msg:r,attempt:"original-length",headers:JSON.stringify(t)});var i=function(e,n){for(var t=0,r=0,i=!1,o=n;o<e.length+1;o++){if(o!==n&&!t&&!r&&!i)return o;var a=e[o];switch(a){case q:o++;continue;case M:i=!i;continue}if(!i)switch(a){case U:t++;break;case G:t--;break;case Z:r++;break;case H:r--}}return-1}(e,0);if(-1!==i){var o=e.slice(0,i),a=j.decode(o);try{return{json:JSON.parse(a),buffer:e.slice(i)}}catch(s){k.kg.error("Failed to parse LSP message",{givenError:s,buffer:e.toString(),length:n,msg:r,attempt:"recomputed-length"})}}}else k.kg.error("Failed to parse LSP message",{givenError:u,buffer:e.toString(),length:n,msg:r,attempt:"content-length"});return{json:void 0,buffer:e.slice(n)}}}var K=function(){function e(n){(0,F.Z)(this,e),this.onMessage=n,this.buffer=new Uint8Array,this.read=this.read.bind(this)}var n=e.prototype;return n.consumeHeaders=function(){var e=function(e){var n=e.findIndex((function(n,t){return n===W&&e[t+1]===V&&e[t+2]===W&&e[t+3]===V}));if(-1!==n){var t=j.decode(e.slice(0,n)),r=t.match(J);if(!r)throw k.kg.error("Failed to parse LSP header, no matches",{fragment:t}),new Error("Unable to match header, text: ".concat(t));var i=Object.create(null),o=r[0].split("\r\n"),a=!0,u=!1,s=void 0;try{for(var c,l=o[Symbol.iterator]();!(a=(c=l.next()).done);a=!0){var f=c.value,d=f.indexOf(":");if(-1===d)throw k.kg.error("Failed to parse LSP header, missing colon",{fragment:t}),new Error('Message header must separate key and value using ":"');var p=f.substr(0,d),h=f.substr(d+1).trim();if("Content-Length"===p){var E=parseInt(h,10);if(isNaN(E))throw k.kg.error("Failed to parse LSP header, NaN content length",{fragment:t}),new Error("Content-Length value must be a number.");i[p]=parseInt(h,10)}else i[p]=h}}catch(m){u=!0,s=m}finally{try{a||null==l.return||l.return()}finally{if(u)throw s}}if(null==i["Content-Length"])throw k.kg.error("Failed to parse LSP header, no Content-Length",{fragment:t}),new Error("Header must provide a Content-Length property.");return{headerLength:n,value:i}}}(this.buffer);if(e)return this.buffer=this.buffer.slice(e.headerLength+4),e},n.read=function(e){var n;for(this.buffer=function(e,n){var t=new Uint8Array(e.length+n.length);return t.set(e),t.set(n,e.length),t}(this.buffer,B.encode(e));null!==(n=this.headers)&&void 0!==n?n:this.headers=this.consumeHeaders();){var t=this.headers.value["Content-Length"];if(this.buffer.length<t)return;var r=z(this.buffer,t,this.headers),i=r.json,o=r.buffer;if(this.headers=void 0,this.buffer=o,void 0!==i)try{this.onMessage(i)}catch(a){N.Tb(a)}}},e}();function Y(e,n){var t;return(0,a.__generator)(this,(function(r){switch(r.label){case 0:if(e.length!==n.length)return[2];t=0,r.label=1;case 1:return t<e.length?[4,[e[t],n[t]]]:[3,4];case 2:r.sent(),r.label=3;case 3:return t++,[3,1];case 4:return[2]}}))}var $=t(48764).lW;function X(e){var n,t=e.channel,r=e.beforeRun,u=function(){f.current="terminated",d.current=[],p.current=[],E.current=null,g.handleDebugSessionEnded(),_.current=!1},s=function(e){return m.on("started",e),function(){m.removeListener("started",e)}},f=(0,x.u)("terminated"),d=(0,x.u)([]),p=(0,x.u)([]),h=(0,x.u)(new Map),E=(0,x.u)(null),m=(0,v.ZP)(),g=function(e,n){var t=function(){var e=new Map,n=new Set,t=!0,i=!1,o=void 0;try{for(var a,c=r.entries()[Symbol.iterator]();!(t=(a=c.next()).done);t=!0){var l=(0,L.Z)(a.value,2),f=l[0],d=l[1];if(0!==d.length){var p=[],h=!0,E=!1,m=void 0;try{for(var v,g=d[Symbol.iterator]();!(h=(v=g.next()).done);h=!0){var _=v.value;if(_.breakpointId&&_.line){var b=s.get(_.breakpointId),y=void 0===b?void 0:u.get(b);y&&n.add(b),p.push({dapId:b,pid1Id:_.breakpointId,line:y&&y.line||_.line,verified:Boolean(null===y||void 0===y?void 0:y.verified),logMessage:_.logMessage||void 0})}}}catch(j){E=!0,m=j}finally{try{h||null==g.return||g.return()}finally{if(E)throw m}}e.set(f,p)}}}catch(j){i=!0,o=j}finally{try{t||null==c.return||c.return()}finally{if(i)throw o}}var w=!0,S=!1,R=void 0;try{for(var D,I=u.entries()[Symbol.iterator]();!(w=(D=I.next()).done);w=!0){var T,C,N=(0,L.Z)(D.value,2),A=N[0],x=N[1];if(!n.has(A)){var O=(0,P.IT)((null===(T=x.source)||void 0===T?void 0:T.path)||(null===(C=x.source)||void 0===C?void 0:C.name)||""),F=x.line;if(O&&F){var k=e.get(O);k||(k=[],e.set(O,k));var U=!1,G=!0,Z=!1,H=void 0;try{for(var M,q=k[Symbol.iterator]();!(G=(M=q.next()).done);G=!0){var B=M.value;if(B.line===x.line){B.dapId=A,B.verified=x.verified,U=!0;break}}}catch(j){Z=!0,H=j}finally{try{G||null==q.return||q.return()}finally{if(Z)throw H}}U||k.push({dapId:A,line:F,verified:x.verified})}}}}catch(j){S=!0,R=j}finally{try{w||null==I.return||I.return()}finally{if(S)throw R}}return e},r=new Map,u=new Map,s=new Map;function c(){return(c=(0,i.Z)((function(n){var t,i,c,l,f,d,p;return(0,a.__generator)(this,(function(h){switch(h.label){case 0:t=!0,i=!1,c=void 0,h.label=1;case 1:h.trys.push([1,6,7,8]),l=function(){var t,r,i,c,l,f,h,E,m,v,g,_,b,y,w,S,R,D,I,T,C,N,A,x,O,P,F,k,U,G,Z,H,M,q,B;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return t=(0,L.Z)(d.value,2),r=t[0],i=t[1],void 0!==n&&n!==r?[2,"continue"]:[4,e({command:"setBreakpoints",arguments:{source:{name:r,path:r},breakpoints:i.map((function(e){return{line:e.line,logMessage:e.logMessage||void 0}}))}})];case 1:if(!(c=a.sent()).success)return[2,"continue"];l=!0,f=!1,h=void 0;try{for(E=u[Symbol.iterator]();!(l=(m=E.next()).done);l=!0){v=(0,L.Z)(m.value,2),g=v[0],_=v[1],(null===(b=_.source)||void 0===b?void 0:b.name)===r&&u.delete(g),y=!0,w=!1,S=void 0;try{for(R=s[Symbol.iterator]();!(y=(D=R.next()).done);y=!0)I=(0,L.Z)(D.value,2),T=I[0],I[1]===g&&s.delete(T)}catch(p){w=!0,S=p}finally{try{y||null==R.return||R.return()}finally{if(w)throw S}}}}catch(p){f=!0,h=p}finally{try{l||null==E.return||E.return()}finally{if(f)throw h}}C=c,N=!0,A=!1,x=void 0;try{for(O=C.body.breakpoints[Symbol.iterator]();!(N=(P=O.next()).done);N=!0)null!=(F=P.value).id&&u.set(F.id,(0,o.Z)({source:{name:r,path:r}},F))}catch(p){A=!0,x=p}finally{try{N||null==O.return||O.return()}finally{if(A)throw x}}k=!0,U=!1,G=void 0;try{for(Z=Y(i,C.body.breakpoints)[Symbol.iterator]();!(k=(H=Z.next()).done);k=!0)M=(0,L.Z)(H.value,2),q=M[0],B=M[1],q.breakpointId&&null!=B.id&&s.set(q.breakpointId,B.id)}catch(p){U=!0,G=p}finally{try{k||null==Z.return||Z.return()}finally{if(U)throw G}}return[2]}}))},f=r.entries()[Symbol.iterator](),h.label=2;case 2:return(t=(d=f.next()).done)?[3,5]:[5,(0,a.__values)(l())];case 3:h.sent(),h.label=4;case 4:return t=!0,[3,2];case 5:return[3,8];case 6:return p=h.sent(),i=!0,c=p,[3,8];case 7:try{t||null==f.return||f.return()}finally{if(i)throw c}return[7];case 8:return[2]}}))}))).apply(this,arguments)}return{findPathByBreakpointId:function(e){var n=!0,t=!1,i=void 0;try{for(var o,a=r.entries()[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var u=(0,L.Z)(o.value,2),s=u[0];if(u[1].some((function(n){return n.breakpointId===e})))return s}}catch(c){t=!0,i=c}finally{try{n||null==a.return||a.return()}finally{if(t)throw i}}return null},getBreakpoints:t,flush:function(e){return c.apply(this,arguments)},handleDAPBreakpointEvent:function(e){var r=e.body,i=r.reason,a=r.breakpoint,s=a.id;if(null!==s&&void 0!==s){switch(i){case"changed":case"new":u.set(s,(0,o.Z)({},u.get(s),a));break;case"removed":u.delete(s);break;default:return}n(t())}},handlePID1BreakpointEvent:function(e){var i=e.absolutePath?(0,P.IT)(e.absolutePath):null;i&&(r.set(i,e.breakpoints||[]),n(t()))},handleDebugSessionEnded:function(){u.clear(),s.clear();var e=!0,i=!1,o=void 0;try{for(var a,c=r.entries()[Symbol.iterator]();!(e=(a=c.next()).done);e=!0){var l=(0,L.Z)(a.value,2),f=l[0];0===l[1].length&&r.delete(f)}}catch(d){i=!0,o=d}finally{try{e||null==c.return||c.return()}finally{if(i)throw o}}n(t())}}}(I,(function(e){h.current=e})),_=(0,x.u)(!1),b=[],y=new K((function(e){if(b.push({time:Date.now(),direction:"in",data:e}),"event"===e.type)switch(e.event){case"continued":f.current="running";break;case"stopped":var n;f.current="paused",E.current=null!==(n=e.body.threadId)&&void 0!==n?n:null,m.emit("paused",e.body.reason),function(){A.apply(this,arguments)}();break;case"breakpoint":g.handleDAPBreakpointEvent(e)}else if("response"===e.type){var t=e,r=w.get(t.request_seq);r&&(w.delete(t.request_seq),r(e))}})),w=new Map,R=100,D=!1;function I(e){return T.apply(this,arguments)}function T(){return(T=(0,i.Z)((function(e){return(0,a.__generator)(this,(function(n){return[2,new Promise((function(n){var r=R++;w.set(r,n);var i=(0,S.Z)((0,o.Z)({},e),{type:"request",seq:r});b.push({time:Date.now(),direction:"out",data:i});var a={debugInput:{session:"main",adapterInput:Q(i)}};b.push({time:Date.now(),direction:"out",data:a}),t.send(a)}))]}))}))).apply(this,arguments)}function C(e){return N.apply(this,arguments)}function N(){return(N=(0,i.Z)((function(e){var n;return(0,a.__generator)(this,(function(r){switch(r.label){case 0:return b.push({time:Date.now(),direction:"out",data:e}),[4,t.request(e)];case 1:if(n=r.sent(),b.push({time:Date.now(),direction:"in",data:n}),n.error)throw n.error;return[2,n]}}))}))).apply(this,arguments)}function A(){return A=(0,i.Z)((function(){var e,n,t;return(0,a.__generator)(this,(function(r){switch(r.label){case 0:return d.current=[],p.current=[],[4,I({command:"stackTrace",arguments:{threadId:E.current}})];case 1:return(e=r.sent()).success?(d.current=e.body.stackFrames,0===d.current.length?[2]:[4,I({command:"scopes",arguments:{frameId:d.current[0].id}})]):[2];case 2:return(n=r.sent()).success?[4,Promise.all(n.body.scopes.map((function(e){return I({command:"variables",arguments:{variablesReference:e.variablesReference}}).then((function(n){return{response:n,parentVariableReference:e.variablesReference}}))})))]:[2];case 3:return t=r.sent(),p.current=t.filter((function(e){return e.response.success})).reduce((function(e,n){var t=n.response,r=n.parentVariableReference;return e.concat(t.body.variables.map((function(e){return(0,S.Z)((0,o.Z)({},e),{parentVariableReference:r})})))}),[]),[2]}}))})),A.apply(this,arguments)}function F(e){return k.apply(this,arguments)}function k(){return k=(0,i.Z)((function(e){var n,i,o,u,s,c,l;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:if("terminated"!==f.current)throw new Error("Cant start while debugger is already running");return f.current="preinitializing",d.current=[],[4,r()];case 1:return a.sent(),"stopping"===f.current?(f.current="terminated",[2]):(D=!0,f.current="initializing",o={session:"main",readOnly:!1},e&&(o.debuggerId=e.debuggerOption.id,e.filePath&&(o.filePath=e.filePath)),u={debugMain:o},b.push({time:Date.now(),direction:"out",data:u}),[4,t.request(u)]);case 2:return s=a.sent(),b.push({time:Date.now(),direction:"in",data:s}),s.error?(m.emit("output",s.error),f.current="terminated",[2]):[4,I({command:"initialize",arguments:{clientID:"replit",clientName:"replit.com",adapterID:"cppdbg",pathFormat:"path",linesStartAt1:!0,columnsStartAt1:!0,supportsEvaluateForHovers:!0,supportsVariableType:!0,supportsVariablePaging:!0,supportsRunInTerminalRequest:!1,locale:"en-us",supportsProgressReporting:!0,supportsInvalidatedEvent:!0}})];case 3:return(c=a.sent()).success?(_.current=Boolean(null===(n=c.body)||void 0===n?void 0:n.supportsStepBack),l=!(null===(i=c.body)||void 0===i?void 0:i.supportsConfigurationDoneRequest),[4,g.flush()]):(f.current="terminated",[2]);case 4:return a.sent(),l?[3,6]:[4,I({command:"configurationDone"})];case 5:a.sent(),a.label=6;case 6:return"initializing"===f.current&&(f.current="running"),m.emit("started",l),[2]}}))})),k.apply(this,arguments)}function U(e,n){return G.apply(this,arguments)}function G(){return G=(0,i.Z)((function(e,n){var t,r,i,o;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return t=n.line,r=n.otIndex,i=n.otVersion,o=n.logMessage,[4,C({debugAddBreakpointRequest:{path:(0,P.om)(e)||e,line:t,otIndex:r,otVersion:i,logMessage:o}})];case 1:return a.sent(),"terminated"===f.current?[3,3]:[4,g.flush(e)];case 2:a.sent(),a.label=3;case 3:return m.emit("breakpoint","added"),[2]}}))})),G.apply(this,arguments)}function Z(e){return H.apply(this,arguments)}function H(){return(H=(0,i.Z)((function(e){var n;return(0,a.__generator)(this,(function(t){switch(t.label){case 0:return n=g.findPathByBreakpointId(e),[4,C({debugRemoveBreakpointRequest:{breakpointId:e}})];case 1:return t.sent(),"terminated"!==f.current&&n?[4,g.flush(n)]:[3,3];case 2:t.sent(),t.label=3;case 3:return m.emit("breakpoint","removed"),[2]}}))}))).apply(this,arguments)}function M(){return(M=(0,i.Z)((function(e,n){var t;return(0,a.__generator)(this,(function(r){switch(r.label){case 0:return(t=g.findPathByBreakpointId(e))?[4,C({debugUpdateBreakpointRequest:{breakpointId:e,logMessage:n.logMessage}})]:[2];case 1:return r.sent(),"terminated"===f.current?[3,3]:[4,g.flush(t)];case 2:r.sent(),r.label=3;case 3:return m.emit("breakpoint","updated"),[2]}}))}))).apply(this,arguments)}function q(){return q=(0,i.Z)((function(e,n){var t,r,i;return(0,a.__generator)(this,(function(o){switch(o.label){case 0:return(i=null===(r=null===(t=h.current.get(e))||void 0===t?void 0:t.find((function(e){return e.line===n.line&&void 0!==e.pid1Id})))||void 0===r?void 0:r.pid1Id)?[4,Z(i)]:[3,2];case 1:return o.sent(),[3,4];case 2:return[4,U(e,n)];case 3:o.sent(),o.label=4;case 4:return[2]}}))})),q.apply(this,arguments)}return t.onCommand((function(e){var n,t;b.push({time:Date.now(),direction:"in",data:e});var r=e.debugOutput,i=e.debugState,o=e.debugBreakpointEvent,a=e.debugSessions;if(r){if("main"!==r.session)return;r.adapterOutput&&y.read(r.adapterOutput),r.output&&m.emit("output",r.output)}if(o&&g.handlePID1BreakpointEvent(o),i&&i.state===l.api.State.Stopped&&u(),(null===a||void 0===a||null===(n=a.sessions)||void 0===n?void 0:n.main)!==l.api.State.Running&&(null===i||void 0===i?void 0:i.state)!==l.api.State.Running||"terminated"===f.current&&F(),(null===a||void 0===a||null===(t=a.sessions)||void 0===t?void 0:t.main)===l.api.State.Stopped||(null===i||void 0===i?void 0:i.state)===l.api.State.Stopped){if(D)return void(D=!1);u()}})),{state:f,stackFrames:d,variables:p,breakpoints:h,supportsStepBack:_,onOutput:function(e){return m.on("output",e),function(){m.removeListener("output",e)}},onStarted:s,onPaused:function(e){return m.on("paused",e),function(){m.removeListener("paused",e)}},onBreakpoint:function(e){return m.on("breakpoint",e),function(){m.removeListener("breakpoint",e)}},sendInput:function(e){return(0,i.Z)((function(){var n,r;return(0,a.__generator)(this,(function(i){switch(i.label){case 0:return n={debugInput:{session:"main",input:e}},b.push({time:Date.now(),direction:"out",data:n}),[4,t.request(n)];case 1:if(r=i.sent(),b.push({time:Date.now(),direction:"in",data:r}),r.error)throw r.error;return[2]}}))}))()},fetchVariables:function(e){return(0,i.Z)((function(){var n;return(0,a.__generator)(this,(function(t){switch(t.label){case 0:return[4,I({command:"variables",arguments:{variablesReference:e}})];case 1:if((n=t.sent()).success)return[2,n.body.variables.map((function(n){return(0,S.Z)((0,o.Z)({},n),{parentVariableReference:e})}))];throw new Error(n.message)}}))}))()},evaluate:function(e){var t=e.frameId,r=void 0===t?null===(n=d.current[0])||void 0===n?void 0:n.id:t,o=e.expression,u=e.context;return(0,i.Z)((function(){return(0,a.__generator)(this,(function(e){switch(e.label){case 0:return[4,I({command:"evaluate",arguments:{frameId:r,expression:o,context:u}})];case 1:return[2,e.sent()]}}))}))()},addBreakpoint:U,removeBreakpoint:Z,updateBreakpoint:function(e,n){return M.apply(this,arguments)},toggleBreakpoint:function(e,n){return q.apply(this,arguments)},start:F,continue:function(){return(0,i.Z)((function(){return(0,a.__generator)(this,(function(e){switch(e.label){case 0:return d.current=[],f.current="running",[4,I({command:"continue",arguments:{threadId:E.current}})];case 1:return e.sent(),[2]}}))}))()},reverseContinue:function(){return(0,i.Z)((function(){return(0,a.__generator)(this,(function(e){switch(e.label){case 0:return d.current=[],f.current="running",[4,I({command:"reverseContinue",arguments:{threadId:E.current}})];case 1:return e.sent(),[2]}}))}))()},back:function(){return(0,i.Z)((function(){return(0,a.__generator)(this,(function(e){switch(e.label){case 0:return f.current="running",[4,I({command:"stepBack",arguments:{threadId:E.current}})];case 1:return e.sent(),[2]}}))}))()},next:function(){return(0,i.Z)((function(){return(0,a.__generator)(this,(function(e){switch(e.label){case 0:return f.current="running",[4,I({command:"stepIn",arguments:{threadId:E.current}})];case 1:return e.sent(),[2]}}))}))()},skip:function(){return(0,i.Z)((function(){return(0,a.__generator)(this,(function(e){switch(e.label){case 0:return f.current="running",[4,I({command:"next",arguments:{threadId:E.current,granularity:"line"}})];case 1:return e.sent(),[2]}}))}))()},stepOut:function(){return(0,i.Z)((function(){return(0,a.__generator)(this,(function(e){switch(e.label){case 0:return f.current="running",[4,I({command:"stepOut",arguments:{threadId:E.current}})];case 1:return e.sent(),[2]}}))}))()},stop:function(){return(0,i.Z)((function(){var e,n,r,i;return(0,a.__generator)(this,(function(o){switch(o.label){case 0:if("terminated"===f.current)throw new Error("Debugger already terminated");return e=f.current,f.current="stopping","preinitializing"===e?[2]:"initializing"!==e?[3,2]:(n=[],[4,Promise.race([new Promise((function(e){n.push(f.subscribe((function(){return e()})))})),new Promise((function(e){n.push(s((function(){return e()})))}))])]);case 1:if(o.sent(),n.forEach((function(e){return e()})),"terminated"===f.current)return[2];o.label=2;case 2:return r={debugStop:{session:"main"}},b.push({time:Date.now(),direction:"out",data:r}),[4,t.request(r)];case 3:if(i=o.sent(),b.push({time:Date.now(),direction:"in",data:i}),i.error)throw new Error("Failed to stop debugger "+i.error);return[2]}}))}))()},getSource:function(e){return(0,i.Z)((function(){var n;return(0,a.__generator)(this,(function(t){switch(t.label){case 0:return[4,I({command:"source",arguments:{source:{path:e}}})];case 1:if(!(n=t.sent()).success)throw new Error(n.message);return[2,n.body.content]}}))}))()},getDebugLogs:function(){return Object.entries({state:f,stackFrames:d,variables:p,breakpoints:h,threadId:E}).map((function(e){var n=(0,L.Z)(e,2),t=n[0],r=n[1];return"".concat(t," = ").concat(JSON.stringify((0,O.Z)(r.current,Map)?(0,c.Z)(r.current):r.current,void 0,2))})).join("\n")+"\n\n"+b.map((function(e){return[new Date(e.time).toLocaleString(),"in"===e.direction?"->":"<-",JSON.stringify(e.data)].join(" ")})).join("\n")}}}function Q(e){var n=JSON.stringify(e);return"Content-Length: ".concat($.byteLength(n),"\r\n\r\n").concat(n)}var ee=t(38863),ne=t(81516),te=t(32692),re=t(31230);function ie(){var e=(0,te.Z)(['\n  query GitHubAuth {\n    currentUser {\n      id\n      gitHubInfo {\n        accessToken\n      }\n      isAllowed: gate(feature: "git-in-the-shell")\n    }\n  }\n']);return ie=function(){return e},e}var oe,ae=(0,re.Ps)(ie());function ue(){return se.apply(this,arguments)}function se(){return(se=(0,i.Z)((function(){var e;return(0,a.__generator)(this,(function(n){switch(n.label){case 0:if(!ne.l)throw new Error("Expected apollo");return[4,ne.l.query({query:ae})];case 1:if(!(null===(e=n.sent().data)||void 0===e?void 0:e.currentUser))throw new Error("Expected current user");return[2,e.currentUser]}}))}))).apply(this,arguments)}!function(e){e.OUTPUT="OUTPUT",e.ERROR="ERROR",e.STATE_CHANGED="STATE_CHANGED",e.CHANNEL_OPENED="CHANNEL_OPENED"}(oe||(oe={}));var ce,le=t(8415),fe=t(15519),de=t(44747),pe=t(24920),he=t(6725),Ee=function(e){var n=e.configurationSupport;return{textDocument:{synchronization:{dynamicRegistration:!0,didSave:!0},signatureHelp:{dynamicRegistration:!0,signatureInformation:{documentationFormat:["markdown","plaintext"]}},publishDiagnostics:{relatedInformation:!0},formatting:{dynamicRegistration:!0},documentSymbol:{dynamicRegistration:!0,hierarchicalDocumentSymbolSupport:!0,symbolKind:{valueSet:he.Z}},definition:{dynamicRegistration:!0},typeDefinition:{dynamicRegistration:!0},implementation:{dynamicRegistration:!0},references:{dynamicRegistration:!0},rename:{dynamicRegistration:!0,prepareSupport:!0},completion:{dynamicRegistration:!0,completionItem:{documentationFormat:["markdown","plaintext"],snippetSupport:!0}},codeAction:{dynamicRegistration:!0,codeActionLiteralSupport:{codeActionKind:{valueSet:Object.values(pe.CodeActionKind)}}},hover:{dynamicRegistration:!0,contentFormat:["markdown","plaintext"]}},workspace:{applyEdit:!0,didChangeConfiguration:n.clientToServer?{dynamicRegistration:!0}:void 0,configuration:n.serverToClient,executeCommand:{dynamicRegistration:!0},workspaceEdit:{documentChanges:!0,resourceOperations:[pe.ResourceOperationKind.Create,pe.ResourceOperationKind.Delete,pe.ResourceOperationKind.Rename]}}}},me=t(29208),ve=t.n(me),ge=t(11625),_e=t(48764).lW;function be(e,n){return(0,ge.D)(e,n)||n}function ye(e,n){return e.line<n.line||e.line===n.line&&e.character<=n.character}function we(){return Math.floor(Math.random()*(Math.pow(2,31)-1))}function Se(e){var n=JSON.stringify((0,S.Z)((0,o.Z)({},e),{jsonrpc:"2.0"})),t=_e.byteLength(n,"utf8");return"Content-Length: ".concat(t,"\r\n\r\n").concat(n)}function Re(e){var n=e.connection,t=e.isSupportedFile,r=e.clientId,u=e.getWorkspaceConfiguration,s=e.onWorkspaceConfigurationChange,c=function(e){if(!_)throw new Error("Expected rootUri");return decodeURIComponent(e.slice(_.length+1))},l=function(e){if(!_)throw new Error("Expected rootUri");if(e.startsWith("/"))throw new Error("Path must be relative. Got: ".concat(e));return _+"/"+e},f=function(e){b!==e&&(b=e,g.emit(ce.SERVER_STATE_CHANGE,b))},d=function(e){g.emit(ce.SEND_NOTIFICATION,e),n.write(Se(e))},p=function(e){var t=e.options,r=void 0===t?{}:t,i=r.id,a=void 0===i?we():i,u=r.signal,s=r.tap,c=(0,de.Z)(e,["options"]);if(!Number.isInteger(a))throw new Error("Request ID must be an integer");if(n.didClose())return Promise.resolve({result:null,cancelled:!0});g.emit(ce.REQUEST,{id:a,data:c}),null===u||void 0===u||u.addEventListener("abort",(function(){E(a)}),{once:!0}),n.write(Se((0,S.Z)((0,o.Z)({},c),{id:a})));var l=new Promise((function(e){D.set(a,e)}));return s&&s(l),l},h=function(e,t){n.write(Se((0,S.Z)((0,o.Z)({},t),{id:e})))},E=function(e){var n=D.get(e);n&&(g.emit(ce.CANCEL_REQUEST,e),n({result:null,cancelled:!0}),D.delete(e),d({method:"$/cancelRequest",params:{id:e}}))},m=function(e){if(!y)throw new Error("Expected client to be initialized");if(!y[e])throw new Error("LSP Server does not support ".concat(e.replace(/Provider$/,"")));return y[e]},g=(0,v.ZP)(),_=null,b=le.a.OFFLINE,y=null,w=!1,R=new Map,D=new Map,I=new K((function(e){if(e.id&&D.has(e.id)){var n=D.get(e.id);D.delete(e.id);var t=e.result,i=e.error;if((void 0!==t||i)&&g.emit(ce.RESPONSE,e),"undefined"!==typeof t)return void n({result:t,cancelled:!1});if(i){var a=i.code,s=i.message,l=i.data;return k.kg.error("LSP request failed",{code:a,lspId:r,errorMessage:s,data:JSON.stringify(l)}),void n({error:i})}throw k.kg.error("LSP response message contained neither error nor result"),new Error("Expected either message or error in LSP response")}var f=e.method;if("client/registerCapability"!==f)if("workspace/applyEdit"!==f){if("textDocument/publishDiagnostics"===f){var d=c(e.params.uri),p=R.get(d);if(!p)return;var E=e.params.diagnostics;return p.diagnostics=E,R.set(d,p),void g.emit(ce.DIAGNOSTICS,{path:d,diagnostics:E})}if("workspace/configuration"===f){var m,v=e.params,_=Array(v.items.length).fill(null),b=null!==(m=null===u||void 0===u?void 0:u())&&void 0!==m?m:null;b&&(_=v.items.map((function(e){return e.section?ve()(b,e.section):b}))),h(e.id,{result:_,cancelled:!1})}}else g.emit(ce.WORKSPACE_EDIT,(0,o.Z)({id:e.id},e.params));else{var w=e.params.registrations;if(!w||!Array.isArray(w))throw new Error("Expected registrations array");w.forEach((function(e){var n=e.method;if(!n)throw new Error("Expected registration method");if(!y)throw new Error("Expected server capabilities");var t=e.registerOptions||!0;switch(n){case"textDocument/definition":y.definitionProvider=!0;break;case"textDocument/typeDefinition":y.typeDefinitionProvider=!0;break;case"textDocument/implementation":y.implementationProvider=!0;break;case"textDocument/references":y.referencesProvider=!0;break;case"textDocument/hover":y.hoverProvider=!0;break;case"textDocument/completion":y.completionProvider=t;break;case"textDocument/formatting":y.documentFormattingProvider=t;break;case"textDocument/rename":y.renameProvider=t;break;case"textDocument/codeAction":y.codeActionProvider=t;break;case"textDocument/signatureHelp":y.signatureHelpProvider=t;break;case"textDocument/didSave":if("number"===typeof y.textDocumentSync)break;y.textDocumentSync=(0,S.Z)((0,o.Z)({},y.textDocumentSync||{}),{save:t});break;case"textDocument/willSaveWaitUntil":if("number"===typeof y.textDocumentSync)break;y.textDocumentSync=(0,S.Z)((0,o.Z)({},y.textDocumentSync||{}),{willSave:!0});break;case"textDocument/didChange":if("number"===typeof y.textDocumentSync)break;y.textDocumentSync=(0,S.Z)((0,o.Z)({},y.textDocumentSync||{}),{change:t});break;case"textDocument/didOpen":case"textDocument/didClose":if("number"===typeof y.textDocumentSync)break;y.textDocumentSync=(0,S.Z)((0,o.Z)({},y.textDocumentSync||{}),{openClose:!0});break;case"workspace/executeCommand":y.executeCommandProvider=t;break;default:k.kg.info("Unexpected dynamically registered capability in LSP client",{method:n})}g.emit(ce.SERVER_CAPABILITIES_CHANGE,y)}))}}));n.read(I.read);var T=function(){};return{initialize:function(e){var n=e.pwd,t=e.initializationOptions;return(0,i.Z)((function(){var e,r;return(0,a.__generator)(this,(function(i){switch(i.label){case 0:return f(le.a.INITIALIZING),_="file://".concat(n),[4,p({method:"initialize",params:{initializationOptions:t,capabilities:Ee({configurationSupport:{serverToClient:Boolean(u),clientToServer:Boolean(s)}}),processId:null,rootUri:_,workspaceFolders:[{name:_,uri:_}]}})];case 1:if("error"in(e=i.sent()))throw new Error("Something went wrong initializing the LSP client: ".concat(e.error.message));if(e.cancelled)throw new Error("Initialize request cancelled");if(!e.result)throw new Error("Expected result in initialize request");return d({method:"initialized",params:{}}),y=e.result.capabilities,g.emit(ce.SERVER_CAPABILITIES_CHANGE,y),f(le.a.INITIALIZED),s&&(T=s((function(e){d({method:"workspace/didChangeConfiguration",params:{settings:e}})})),u&&(r=u(),d({method:"workspace/didChangeConfiguration",params:{settings:r}}))),[2]}}))}))()},generateId:we,notify:{didOpen:function(e,n){if(!t(e))throw new Error("Path not supported");var i,o=R.get(e);if(o&&0!==o.buffers)return o.buffers++,void R.set(e,o);var a=null!==(i=null===o||void 0===o?void 0:o.version)&&void 0!==i?i:0;R.set(e,{version:a,buffers:1,diagnostics:[]}),d({method:"textDocument/didOpen",params:{textDocument:{uri:l(e),languageId:be(e,r),text:n,version:a}}})},didChange:function(e,n){var t=R.get(e);if(!t)throw new Error('Document for "'.concat(e,'" is not open'));t.version++,d({method:"textDocument/didChange",params:{textDocument:{uri:l(e),version:t.version},contentChanges:n}})},didSave:function(e){if(!R.get(e))throw new Error('Document for "'.concat(e,'" is not open'));m("textDocumentSync"),d({method:"textDocument/didSave",params:{textDocument:{uri:l(e)}}})},didClose:function(e){var n=R.get(e);if(!n)throw new Error('Document for "'.concat(e,'" is not open'));n.buffers--,n.buffers>0||(d({method:"textDocument/didClose",params:{textDocument:{uri:l(e)}}}),R.delete(e))},cancelRequest:function(e){E(e)}},request:{completion:function(e,n,t){return m("completionProvider"),p({method:"textDocument/completion",params:{textDocument:{uri:l(e)},position:n,context:t}})},resolveCompletionItem:function(e){if(!m("completionProvider").resolveProvider)throw new Error("LSP Server does not support resolving completion items");return p({method:"completionItem/resolve",params:e})},signatureHelp:function(e,n){return p({method:"textDocument/signatureHelp",params:{textDocument:{uri:l(e)},position:n}})},hover:function(e,n){return p({method:"textDocument/hover",params:{textDocument:{uri:l(e)},position:n}})},codeActions:function(e,n){var t=R.get(e);if(!t)throw new Error("Document for path ".concat(e," is not open."));var r=t.diagnostics.filter((function(e){return t=e.range,r=n,ye(t.start,r.end)&&ye(r.start,t.end);var t,r}));return p({method:"textDocument/codeAction",params:{textDocument:{uri:l(e)},range:n,context:{diagnostics:r}}})},executeCommand:function(e,n){return p({method:"workspace/executeCommand",params:{command:e,arguments:n}})},format:function(e,n){return m("documentFormattingProvider"),p({method:"textDocument/formatting",params:{textDocument:{uri:l(e)},options:n}})},findDefinitions:function(e,n,t){return(0,i.Z)((function(){var r;return(0,a.__generator)(this,(function(i){switch(i.label){case 0:return m("definitionProvider"),[4,p({options:t,method:"textDocument/definition",params:{textDocument:{uri:l(e)},position:n}})];case 1:return"result"in(r=i.sent())&&r.result&&!Array.isArray(r.result)?[2,{result:[r.result],cancelled:!1}]:[2,r]}}))}))()},findTypeDefinitions:function(e,n,t){return(0,i.Z)((function(){var r;return(0,a.__generator)(this,(function(i){switch(i.label){case 0:return m("typeDefinitionProvider"),[4,p({options:t,method:"textDocument/typeDefinition",params:{textDocument:{uri:l(e)},position:n}})];case 1:return"result"in(r=i.sent())&&r.result&&!Array.isArray(r.result)?[2,{result:[r.result],cancelled:!1}]:[2,r]}}))}))()},findImplementations:function(e,n,t){return(0,i.Z)((function(){var r;return(0,a.__generator)(this,(function(i){switch(i.label){case 0:return m("implementationProvider"),[4,p({options:t,method:"textDocument/implementation",params:{textDocument:{uri:l(e)},position:n}})];case 1:return"result"in(r=i.sent())&&r.result&&!Array.isArray(r.result)?[2,{result:[r.result],cancelled:!1}]:[2,r]}}))}))()},findReferences:function(e,n,t){return m("referencesProvider"),p({method:"textDocument/references",params:{textDocument:{uri:l(e)},position:n,context:t}})},rename:function(e,n,t,r){return m("renameProvider"),p({options:r,method:"textDocument/rename",params:{textDocument:{uri:l(e)},position:n,newName:t}})},prepareRename:function(e,n){var t=m("renameProvider");if("boolean"===typeof t||!t.prepareProvider)throw new Error("LSP server does not support prepare rename");return p({method:"textDocument/prepareRename",params:{textDocument:{uri:l(e)},position:n}})},documentHighlights:function(e,n,t){return(0,i.Z)((function(){return(0,a.__generator)(this,(function(r){switch(r.label){case 0:return[4,p({options:t,method:"textDocument/documentHighlight",params:{position:n,textDocument:{uri:l(e)}}})];case 1:return[2,r.sent()]}}))}))()},documentSymbol:function(e,n){return(0,i.Z)((function(){var t;return(0,a.__generator)(this,(function(r){switch(r.label){case 0:return[4,p({options:n,method:"textDocument/documentSymbol",params:{textDocument:{uri:l(e)}}})];case 1:return"result"in(t=r.sent())?t.result?[2,{result:t.result,cancelled:!1}]:[2]:[2,t]}}))}))()}},onDiagnostics:(0,v.JV)(g,ce.DIAGNOSTICS),onWorkspaceEdit:function(e){return(0,v.NH)(g,ce.WORKSPACE_EDIT,(function(n){var t=e(n);h(n.id,{result:t,cancelled:!1})}))},onServerStateChange:(0,v.JV)(g,ce.SERVER_STATE_CHANGE),onServerCapabilitiesChange:(0,v.JV)(g,ce.SERVER_CAPABILITIES_CHANGE),onRequest:(0,v.JV)(g,ce.REQUEST),onResponse:(0,v.JV)(g,ce.RESPONSE),onCancelRequest:(0,v.JV)(g,ce.CANCEL_REQUEST),onSendNotification:(0,v.JV)(g,ce.SEND_NOTIFICATION),shutdown:function(){for(var e in f(le.a.EXITING),R.clear(),D)E(Number(e));T(),p({method:"shutdown"}).then((function(){d({method:"exit"}),f(le.a.EXITED),g.removeAllListeners()}))},isDestroyed:function(){return w},destroy:function(){for(var e in w=!0,R.clear(),D)E(Number(e));T(),f(le.a.EXITED),g.removeAllListeners()},getServerState:function(){return b},getServerCapabilities:function(){return y},getDiagnostics:function(e){var n=R.get(e);if(!n)throw new Error("File with path ".concat(e," is not open."));return n.diagnostics},isOpen:function(e){return R.has(e)},documentUriToPath:c,pathToDocumentURI:l,isSupportedFile:t,getLanguageId:function(e){return be(e,r)}}}!function(e){e.INITIALIZED="INITIALIZED",e.DIAGNOSTICS="DIAGNOSTICS",e.WORKSPACE_EDIT="WORKSPACE_EDIT",e.SERVER_STATE_CHANGE="SERVER_STATE_CHANGE",e.SERVER_CAPABILITIES_CHANGE="SERVER_CAPABILITIES_CHANGE",e.REQUEST="REQUEST",e.RESPONSE="RESPONSE",e.CANCEL_REQUEST="CANCEL_REQUEST",e.SEND_NOTIFICATION="SEND_NOTIFICATION"}(ce||(ce={}));var De,Ie=["typescript","javascript","javascriptreact","typescriptreact"];!function(e){e.ON_CLIENT="ON_CLIENT"}(De||(De={}));var Te=t(5743),Ce=t(41951),Ne=t(9556),Ae=t(83633),xe=t.n(Ae);function Oe(e){var n=e.container,t=e.beforeRun,r=(0,v.ZP)(),o=Ne.Z.Idle,u=new Date(0),s=!1;r.on(Ne.z.TEST_RESULT,(function(e){s=s&&"passed"===e.body}));var c=function(e){r.emit(Ne.z.STATE_CHANGED,e),o=e},f=function(){var e=(0,i.Z)((function(e,n){var t,i,o,u,s,f,d,p,h,E,m;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:if(t=Ce.api.Payload.fromObject(n),i=Ce.api.Payload.verify(t))throw i;return o=new(xe())((function(e){var n=Ce.api.Response.fromObject(e),i=Ce.api.Response.verify(n);if(i)N.Tb(new TypeError("invalid payload received"),(function(r){return r.setExtras({validationError:i,payload:t,message:e,response:n})}));else switch(n.body){case"error":return r.emit(Ne.z.ERROR,n.error);case"instructionResult":return r.emit(Ne.z.INSTRUCTION_RESULT,n.instructionResult);case"testResult":return r.emit(Ne.z.TEST_RESULT,n.testResult);case"status":switch(n.status){case Ce.api.Status.Ready:return c(Ne.Z.Ready);case Ce.api.Status.Building:return c(Ne.Z.Building);case Ce.api.Status.Running:return c(Ne.Z.Running)}}})),u=e.onCommand((function(e){if(e.output)try{o.submit(e.output)}catch(p){N.Tb(new SyntaxError("invalid response received from i/o testing binary"),(function(r){return r.setExtras({err:p,payload:t,cmd:e})}))}})),s=e.request({exec:{args:["io-tester"],splitStderr:!0,lifecycle:l.api.Exec.Lifecycle.STDIN,splitLogs:!0}}),[4,new Promise((function(e,n){var t,i=function(){t(),e()};r.once(Ne.z.STATE_CHANGED,i);var o=setTimeout((function(){t(),n(new Error("timeout while waiting for iotester to start"))}),2e4);t=function(){clearTimeout(o),r.off(Ne.z.STATE_CHANGED,i)}}))];case 1:return a.sent(),[4,e.request({input:JSON.stringify(t)+"\n"})];case 2:if(!(f=a.sent()).ok)throw p=new Error(null!==(d=f.error)&&void 0!==d?d:"unexpected error occurred while sending input to i/o testing binary"),N.Tb(p,(function(e){return e.setExtra("status",f)})),p;return[4,s];case 3:return(h=a.sent()).ok||(m=new Error(null!==(E=h.error)&&void 0!==E?E:"unexpected error occurred while executing i/o testing binary"),N.Tb(m,(function(e){return e.setExtra("result",h)}))),u(),[2]}}))}));return function(n,t){return e.apply(this,arguments)}}();return{run:function(e){if(o!==Ne.Z.Idle)throw new Error("iotester already running");return c(Ne.Z.Starting),u=new Date,s=!0,t().then((function(){return new Promise((function(t,r){var i=n.openChannel({service:"exec"},(function(n){if(n.error)return r(n.error),i;var o="",a="",u=n.channel.onCommand((function(e){e.log?o+=e.log:e.stderr&&(a+=e.stderr)}));return t(f(n.channel,e).finally((function(){u(),i(),(a||o)&&N.Tb(new Error("logs received from io tseter"),(function(n){return n.setExtras({logs:o,stderr:a,payload:e})}))}))),i}))}))})).catch((function(e){return s=!1,Promise.reject(e)})).finally((function(){return c(Ne.Z.Idle)}))},get lastRunAt(){return u},get state(){return o},get lastRunDidPass(){return s},onInstructionResult:function(e){return r.on(Ne.z.INSTRUCTION_RESULT,e),function(){r.off(Ne.z.INSTRUCTION_RESULT,e)}},onStateChanged:function(e){return r.on(Ne.z.STATE_CHANGED,e),function(){r.off(Ne.z.STATE_CHANGED,e)}},onTestResult:function(e){return r.on(Ne.z.TEST_RESULT,e),function(){r.off(Ne.z.TEST_RESULT,e)}},onError:function(e){return r.on(Ne.z.ERROR,e),function(){r.off(Ne.z.ERROR,e)}}}}var Le=t(67034),Pe=t(81700),Fe=t.n(Pe);function ke(e,n){return Fe()(e,{extended:!0,globstar:!0}).test(n)}function Ue(e,n){return e&&n?e.globPattern===n.globPattern&&(JSON.stringify(e.startCommand)===JSON.stringify(n.startCommand)&&(JSON.stringify(e.startCommand)===JSON.stringify(n.startCommand)&&(e.initializationOptionsJson===n.initializationOptionsJson&&e.configurationJson===n.configurationJson))):Boolean(e)===Boolean(n)}function Ge(e,n){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,i.Z)((function(e,n){var t;return(0,a.__generator)(this,(function(r){switch(r.label){case 0:return[4,e.exec("pwd")];case 1:return null!==(t=r.sent()).error?n()?[2,Ge(e,n)]:[2,{error:new Error("LSPNix: Could not get working directory "+t.error),workingDirectory:null}]:[2,{error:null,workingDirectory:t.output.replace("\n","")}]}}))}))).apply(this,arguments)}var He,Me=t(67573),qe=t(78194);function Be(e){if(!function(e){if("object"!==typeof e||null===e)return!1;var n=Object.getPrototypeOf(e);return null!==n&&null===Object.getPrototypeOf(n)}(e))throw new Error("encodeBareStruct must be called with a plain object");return{fields:Object.entries(e).reduce((function(e,n){var t=(0,L.Z)(n,2),r=t[0],i=t[1];return void 0===i||"object"===typeof i&&i&&0===Object.keys(i).length?e:(0,S.Z)((0,o.Z)({},e),(0,Me.Z)({},r,je(i)))}),{})}}function je(e){switch("undefined"===typeof e?"undefined":(0,qe.Z)(e)){case"string":return{kind:"stringValue",stringValue:e};case"number":return{kind:"numberValue",numberValue:e};case"boolean":return{kind:"boolValue",boolValue:e};case"object":return null===e?{kind:"nullValue",nullValue:null}:Array.isArray(e)?{kind:"listValue",listValue:{values:e.map(je)}}:{kind:"structValue",structValue:Be(e)};default:throw new Error("Unexpected value: ".concat(e))}}!function(e){e.CHANNEL_OPENED="CHANNEL_OPENED",e.EVENT_SENT="EVENT_SENT"}(He||(He={}));var We=t(96486),Ve=function(){function e(n,t){(0,F.Z)(this,e),this.cache=new Map,this.lastInvalidation=0,this.ttl=n,this.debounceTime=t}var n=e.prototype;return n.has=function(e){return this.cache.has(e)},n.get=function(e){var n=this.cache.get(e);if(!n)throw new Error("No value found for key: ".concat(e));return n.result},n.set=function(e,n){var t=this,r=this.cache.get(e);r&&(clearTimeout(r.timeout),this.cache.delete(e));var i={result:n,timeout:setTimeout((function(){return t.cache.delete(e)}),this.ttl),pending:!0};n.finally((function(){return i.pending=!1})),this.cache.set(e,i)},n.invalidate=function(){if(!(Date.now()-this.lastInvalidation<this.debounceTime)){var e=new Map,n=!0,t=!1,r=void 0;try{for(var i,o=this.cache[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=(0,L.Z)(i.value,2),u=a[0],s=a[1];s.pending?e.set(u,s):clearTimeout(s.timeout)}}catch(c){t=!0,r=c}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}this.cache=e,this.lastInvalidation=Date.now()}},n.clear=function(){var e=!0,n=!1,t=void 0;try{for(var r,i=this.cache.values()[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var o=r.value;clearTimeout(o.timeout)}}catch(a){n=!0,t=a}finally{try{e||null==i.return||i.return()}finally{if(n)throw t}}this.cache.clear(),this.lastInvalidation=0},e}(),Je=t(23053),ze=t(65206);function Ke(e,n){return Ye.apply(this,arguments)}function Ye(){return(Ye=(0,i.Z)((function(e,n){var t,r,i,o,u,s;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return t=n.startsWith("refs/heads/"),r=n.startsWith("refs/remotes/"),t?[3,2]:(i=r?n:"refs/remotes/".concat(n),[4,e("git show-ref --verify ".concat(i))]);case 1:if(!(o=a.sent()).error)return[2,{exists:!0,ref:(0,ze.L)(i),error:null}];if(o.error!==Je.aq.INVALID_REFERENCE)return[2,o];a.label=2;case 2:return r?[3,4]:(u=t?n:"refs/heads/".concat(n),[4,e("git show-ref --verify ".concat(u))]);case 3:if(!(s=a.sent()).error)return[2,{exists:!0,ref:(0,ze.L)(u),error:null}];if(s.error!==Je.aq.INVALID_REFERENCE)return[2,s];a.label=4;case 4:return[2,{exists:!1,ref:null,error:null}]}}))}))).apply(this,arguments)}var $e=t(82135),Xe="grep -c -m 1 -e '^+<* \\.our$' | cat";function Qe(e,n,t){return en.apply(this,arguments)}function en(){return(en=(0,i.Z)((function(e,n,t){var r,i,o,u,s;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return n=(0,$e.Gw)(n),t=(0,$e.Gw)(t),r="git merge-base ".concat(n," ").concat(t),i='git merge-tree "$('.concat(r,')" ').concat(n," ").concat(t),o='out="$('.concat(i,')" && echo -n "$out"'),u="".concat(o," | ").concat(Xe),[4,e(u)];case 1:return(s=a.sent()).error?[2,s]:[2,{canMerge:"0"===s.output,error:null}]}}))}))).apply(this,arguments)}function nn(e){var n,t=e.message,r=e.files,i=["--allow-empty","--allow-empty-message","--cleanup=whitespace","--no-edit","--quiet","-m ".concat((0,$e.Gw)(t))];r&&(n=i).push.apply(n,["--only","--"].concat((0,c.Z)(r.map($e.Gw))));return"git --literal-pathspecs commit ".concat(i.join(" "))}function tn(e,n){return rn.apply(this,arguments)}function rn(){return(rn=(0,i.Z)((function(e,n){var t;return(0,a.__generator)(this,(function(r){switch(r.label){case 0:return[4,e(nn(n))];case 1:return(t=r.sent()).error?[2,t]:[2,{error:null}]}}))}))).apply(this,arguments)}function on(e,n){return an.apply(this,arguments)}function an(){return(an=(0,i.Z)((function(e,n){var t,r,i,o,u,s;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return[4,Ke(e,n)];case 1:return(t=a.sent()).error?[2,t]:t.exists?(r=["--quiet","--no-guess"],t.ref.type!==ze.l.REMOTE_BRANCH?[3,3]:(i=t.ref.branch,o=t.ref.name,[4,Ke(e,"refs/heads/".concat(i))])):[2,{error:Je.aq.INVALID_REFERENCE}];case 2:return(u=a.sent()).error?[2,u]:(u.exists?r.push((0,$e.Gw)(i),"--"):r.push("-t","-b",(0,$e.Gw)(i),(0,$e.Gw)(o),"--"),[3,4]);case 3:r.push((0,$e.Gw)(t.ref.name),"--"),a.label=4;case 4:return[4,e("git checkout ".concat(r.join(" ")))];case 5:return(s=a.sent()).error?[2,s]:[2,{error:null}]}}))}))).apply(this,arguments)}function un(e,n){return sn.apply(this,arguments)}function sn(){return(sn=(0,i.Z)((function(e,n){var t,r,i,o,u,s,c,l,f,d,p;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return t=n.name,r=n.startPoint,i=void 0===r?"HEAD":r,o=n.track,u=n.checkout,s=void 0!==u&&u,t=(0,$e.C)(t),[4,Ke(e,t)];case 1:if((c=a.sent()).error)return[2,c];if(c.exists)return[2,{error:Je.aq.BRANCH_ALREADY_EXISTS}];if("HEAD"===i){if(!0===o)return[2,{error:Je.aq.INVALID_REFERENCE}];o=!1}return!1===o?[3,3]:[4,Ke(e,i)];case 2:if((l=a.sent()).error)return[2,l];if(!l.exists&&!0===o)return[2,{error:Je.aq.INVALID_REFERENCE}];l.exists&&l.ref.type===ze.l.REMOTE_BRANCH&&void 0===o&&(o=!0),a.label=3;case 3:return f=["--quiet",o?"--track":"--no-track",(0,$e.Gw)(t),(0,$e.Gw)(i)],[4,e("git branch ".concat(f.join(" ")))];case 4:return(d=a.sent()).error?[2,d]:s?[4,on(e,t)]:[3,6];case 5:if((p=a.sent()).error)return[2,p];a.label=6;case 6:return[2,{error:null}]}}))}))).apply(this,arguments)}function cn(e){return ln.apply(this,arguments)}function ln(){return ln=(0,i.Z)((function(e){var n,t,r,i,o=arguments;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},t=["--quiet"],n.depth&&(r=n.deepen?"--deepen":"--depth",t.push("".concat(r,"=").concat(n.depth))),n.remote?t.push((0,$e.Gw)(n.remote)):t.push("--all"),[4,e("git fetch ".concat(t.join(" ")))];case 1:return(i=a.sent()).error?[2,i]:[2,{error:null}]}}))})),ln.apply(this,arguments)}var fn='\nif [ -f ".git/refs/remotes/$remote/HEAD" ]; then\n  echo "$(sed -e "s/^ref: refs\\/remotes\\/$remote\\///" < .git/refs/remotes/$remote/HEAD)"\nelse\n  remote_result="$(git ls-remote --symref "$remote" HEAD)"\n  if [ -z "$remote_result" ]; then\n    echo ""\n  else\n    echo "$(\n      echo "$remote_result" | \\\n      head -1 | \\\n      awk \'{print $2}\' | \\\n      sed -e "s/^refs\\/heads\\///"\n    )"\n  fi\nfi\n'.trim(),dn=["main","master","trunk","dev","develop","development","staging","prod","production"].map((function(e){return'if [ $(git rev-parse --verify --quiet "heads/'.concat(e,'") ]; then\n      echo "refs/heads/').concat(e,'"\n    fi')})).join("\n"),pn='\ngit remote | while IFS= read -r remote; do\n  if [ -z "$remote" ]; then continue; fi\n  branch="$('.concat(fn,')"\n  if [ -z "$branch" ]; then continue; fi\n  echo "refs/remotes/$remote/$branch"\n  if [ $(git rev-parse --verify --quiet "heads/$branch") ]; then\n    echo "refs/heads/$branch"\n  fi\ndone\n').concat(dn,"\n").trim();function hn(e){return En.apply(this,arguments)}function En(){return(En=(0,i.Z)((function(e){var n;return(0,a.__generator)(this,(function(t){switch(t.label){case 0:return[4,e(pn)];case 1:return(n=t.sent()).error?[2,n]:[2,{refs:(0,c.Z)(new Set((0,$e.so)(n.output,"\n"))).map((function(e){return(0,ze.L)(e)})),error:null}]}}))}))).apply(this,arguments)}function mn(e,n){return vn.apply(this,arguments)}function vn(){return(vn=(0,i.Z)((function(e,n){var t,r,i,o,u;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return t=n.path,r=n.revision,i=void 0===r?"":r,o=(0,$e.Gw)("".concat(i,":").concat(t)),[4,e("git --no-pager show --textconv ".concat(o))];case 1:return(u=a.sent()).error?u.error===Je.aq.PATH_MATCHED_NO_FILES?[2,{content:null,error:null}]:[2,u]:[2,{content:u.output,error:null}]}}))}))).apply(this,arguments)}function gn(e){return _n.apply(this,arguments)}function _n(){return(_n=(0,i.Z)((function(e){var n,t,r,i,o,u,s,c,l,f,d,p,h,E;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return[4,e("git remote -v")];case 1:if((n=a.sent()).error)return[2,n];if(""===n.output)return[2,{remotes:new Map,error:null}];t=new Map,r=!0,i=!1,o=void 0;try{for(u=(0,$e.so)(n.output,"\n")[Symbol.iterator]();!(r=(s=u.next()).done);r=!0)c=s.value,l=(0,L.Z)(c.split(/\s+/),3),f=l[0],d=l[1],p=l[2],f&&d&&p&&(E=null!==(h=t.get(f))&&void 0!==h?h:{name:f,fetch:"",push:""},"(fetch)"===p?(E.fetch=d,""===E.push&&(E.push=d),t.set(f,E)):"(push)"===p&&(E.push=d,""===E.fetch&&(E.fetch=d),t.set(f,E)))}catch(m){i=!0,o=m}finally{try{r||null==u.return||u.return()}finally{if(i)throw o}}return[2,{remotes:t,error:null}]}}))}))).apply(this,arguments)}function bn(e){return yn.apply(this,arguments)}function yn(){return(yn=(0,i.Z)((function(e){var n;return(0,a.__generator)(this,(function(t){switch(t.label){case 0:return[4,e("git rev-parse --is-inside-work-tree")];case 1:return(n=t.sent()).error?n.error===Je.aq.NOT_INITIALIZED?[2,{initialized:!1,error:null}]:[2,n]:[2,{initialized:"true"===n.output,error:null}]}}))}))).apply(this,arguments)}function wn(e){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,i.Z)((function(e){var n,t,r;return(0,a.__generator)(this,(function(i){switch(i.label){case 0:return[4,bn(e)];case 1:return(n=i.sent()).error?[2,n]:n.initialized?[2,{error:null}]:[4,e('[ -d ".git" ]')];case 2:return t=null===i.sent().error,[4,e("git init","git checkout -b main")];case 3:return(r=i.sent()).error?t?[3,5]:[4,e('[ -d ".git" ] && rm -rf .git')]:[3,6];case 4:i.sent(),i.label=5;case 5:return[2,r];case 6:return[2,{error:null}]}}))}))).apply(this,arguments)}var Rn=t(79803),Dn="\0",In='--format="format:'+["%D","%H","%P","%an","%ae","%at","%cn","%ce","%ct","%s","%b"].join("%x1f")+'"';function Tn(e){var n=(0,L.Z)(e.trimStart().split("\x1f"),11),t=n[0],r=n[1],i=n[2],o=n[3],a=n[4],u=n[5],s=n[6],c=n[7],l=n[8],f=n[9],d=n[10],p=[],h=i?i.split(" "):null,E=!1,m=!0,v=!1,g=void 0;try{for(var _,b=(0,$e.so)(t,",")[Symbol.iterator]();!(m=(_=b.next()).done);m=!0){var y=_.value;"grafted"!==y?p.push((0,ze.L)(y)):E=!0}}catch(w){v=!0,g=w}finally{try{m||null==b.return||b.return()}finally{if(v)throw g}}return{refs:p,hash:r,parents:h,grafted:E,author:{name:o,email:a,date:1e3*parseInt(u,10)},committer:{name:s,email:c,date:1e3*parseInt(l,10)},subject:f?f.trim():"",body:d?d.trim():""}}function Cn(e){var n=e.max,t=void 0===n?25:n,r=e.skip,i=e.revRange,o=e.path,a=["-z","--decorate=full","--full-history",In];return t=Math.max(1,Math.min(t,200)),a.push("-n ".concat(t)),r&&a.push("--skip ".concat(r)),i&&a.push(i),a.push("--"),o&&a.push(o),"git log ".concat(a.join(" "))}function Nn(e){return An.apply(this,arguments)}function An(){return An=(0,i.Z)((function(e){var n,t,r=arguments;return(0,a.__generator)(this,(function(i){switch(i.label){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},[4,e(Cn(n))];case 1:return(t=i.sent()).error?t.error===Je.aq.NO_COMMITS?[2,{commits:[],error:null}]:[2,t]:[2,{commits:(0,$e.so)(t.output,Dn).map(Tn),error:null}]}}))})),An.apply(this,arguments)}function xn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=[];return e.cached&&n.push("--cached"),e.deleted&&n.push("--deleted"),e.modified&&n.push("--modified"),e.others&&n.push("--others"),e.ignored&&n.push("--ignored"),e.directory&&n.push("--directory"),e.noEmptyDirectory&&n.push("--no-empty-directory"),"git ls-files ".concat(n.join(" "))}function On(e){return Ln.apply(this,arguments)}function Ln(){return Ln=(0,i.Z)((function(e){var n,t,r=arguments;return(0,a.__generator)(this,(function(i){switch(i.label){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},[4,e(xn(n))];case 1:return(t=i.sent()).error?[2,t]:[2,{files:t.output.split("\n").filter((function(e){return e.length>0})),error:null}]}}))})),Ln.apply(this,arguments)}var Pn=t(53014),Fn=t(16047);function kn(e){return Un.apply(this,arguments)}function Un(){return Un=(0,i.Z)((function(e){var n,t,r,i,o,u,s,c,l,f,d,p=arguments;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return n=p.length>1&&void 0!==p[1]?p[1]:{},[4,(0,Fn.Z)(e)];case 1:return(t=a.sent()).error?[2,t]:t.branch?(r=null,i=null,n.publish?t.upstream?[2,{error:Je.aq.BRANCH_ALREADY_EXISTS}]:(r=n.publish.remote,i=null!==(o=n.publish.name)&&void 0!==o?o:t.branch,r=(0,$e.C)(r),i=(0,$e.C)(i),u="refs/remotes/".concat(r,"/").concat(i),[4,Ke(e,u)]):[3,3]):[2,{error:Je.aq.HEAD_DETACHED}];case 2:return(s=a.sent()).error?[2,s]:s.exists&&s.ref.type===ze.l.REMOTE_BRANCH?[2,{error:Je.aq.BRANCH_ALREADY_EXISTS}]:[3,4];case 3:if(!t.upstream)return[2,{error:Je.aq.UPSTREAM_NOT_SET}];if(!n.force&&t.upstream.behind>0)return[2,{error:Je.aq.PUSH_REJECTED}];c=(0,L.Z)((0,$e.Tg)(t.upstream.branch),2),r=c[0],i=c[1],a.label=4;case 4:return r&&i?(l=["--quiet"],n.force&&!n.publish&&l.push("--force-with-lease"),n.publish&&l.push("--set-upstream"),f="refs/heads/".concat(t.branch,":refs/heads/").concat(i),l.push((0,$e.Gw)(r),(0,$e.Gw)(f)),[4,e("git push ".concat(l.join(" ")))]):[2,{error:Je.aq.UPSTREAM_NOT_SET}];case 5:return(d=a.sent()).error?[2,d]:[2,{error:null}]}}))})),Un.apply(this,arguments)}function Gn(e){if("all"in e)return e.all?["git add -A"]:["git reset -q -- ."];var n=e.add,t=e.reset;if(!(null===n||void 0===n?void 0:n.length)&&!(null===t||void 0===t?void 0:t.length))return null;var r=[];if(n){var i=n.map($e.Gw).join(" ");r.push("git --literal-pathspecs add -- ".concat(i))}if(t){var o=t.map($e.Gw).join(" ");r.push("git --literal-pathspecs reset -q -- ".concat(o))}return r}function Zn(e,n){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,i.Z)((function(e,n){var t,r;return(0,a.__generator)(this,(function(i){switch(i.label){case 0:return(t=Gn(n))?[4,e.apply(void 0,(0,c.Z)(t))]:[2,{error:null}];case 1:return(r=i.sent()).error?[2,r]:[2,{error:null}]}}))}))).apply(this,arguments)}var Mn=t(55607);function qn(){var e=(0,te.Z)(['\n  fragment GitServiceGitHubUser on CurrentUser {\n    image\n    username\n    email\n    gitHubInfo {\n      accessToken\n      userInfo {\n        name\n        email\n        avatarUrl\n      }\n    }\n    repositories(count: 1, after: "0") {\n      ... on RepositoryConnection {\n        items {\n          id\n        }\n      }\n    }\n  }\n']);return qn=function(){return e},e}function Bn(){var e=(0,te.Z)(["\n  query GitServiceCurrentUser {\n    currentUser {\n      id\n      ...GitServiceGitHubUser\n    }\n  }\n  ","\n"]);return Bn=function(){return e},e}var jn=(0,re.Ps)(qn()),Wn=(0,re.Ps)(Bn(),jn);function Vn(e){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,i.Z)((function(e){var n,t,r,i,o,u,s,c,l,f,d,p,h,E,m,v,g,_,b,y;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return n=e.defaultUsername,t=e.defaultUserId,r=e.onProfiles,c=new Map,[4,null===ne.l||void 0===ne.l?void 0:ne.l.query({query:Wn})];case 1:return l=a.sent(),d=null!==(f=null===l||void 0===l||null===(i=l.data)||void 0===i?void 0:i.currentUser)&&void 0!==f?f:{username:n,id:t},p=d.id,h=d.username,p&&h&&(g={provider:Je.rG.REPLIT_DEFAULT,email:"".concat(p,"-").concat(h,"@users.noreply.replit.com"),username:h,avatar:null!==(v=null===l||void 0===l||null===(E=l.data)||void 0===E||null===(m=E.currentUser)||void 0===m?void 0:m.image)&&void 0!==v?v:null},c.set(g.provider,g)),(_=null===l||void 0===l||null===(o=l.data)||void 0===o||null===(u=o.currentUser)||void 0===u||null===(s=u.gitHubInfo)||void 0===s?void 0:s.userInfo)&&_.email&&_.name&&(y={provider:Je.rG.GITHUB,email:_.email,username:_.name,avatar:null!==(b=_.avatarUrl)&&void 0!==b?b:null},c.set(y.provider,y)),r(c),[2]}}))}))).apply(this,arguments)}var zn="replit-git-askpass";function Kn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.author,t=e.committer,r={GIT_AUTHOR_NAME:"",GIT_AUTHOR_EMAIL:"",GIT_COMMITTER_NAME:"",GIT_COMMITTER_EMAIL:"",GIT_ASKPASS:zn,GIT_PAGER:"",GIT_EDITOR:"",PAGER:"",EDITOR:""};if(n){r.GIT_AUTHOR_NAME=n.username,r.GIT_COMMITTER_NAME=n.username;var i=Yn(n);r.GIT_AUTHOR_EMAIL=i,r.GIT_COMMITTER_EMAIL=i,t&&(r.GIT_COMMITTER_NAME=t.username,r.GIT_COMMITTER_EMAIL=Yn(t))}return r}function Yn(e){if("id"in e)return"".concat(e.id,"-").concat(e.username,"@users.noreply.replit.com");if("email"in e)return e.email;throw new Error("Invalid user")}var $n=/^(fatal: |error: |CONFLICT \([^)]+\): )/im;function Xn(e){return new RegExp("^fatal: ".concat(e.source),"im")}function Qn(e){return new RegExp("^error: ".concat(e.source),"im")}var et,nt=[{error:Je.aq.NOT_INITIALIZED,match:[Xn(/not a git repository/)]},{error:Je.aq.UNAUTHENTICATED,match:[Xn(/Authentication failed/),Xn(/unable to access/),Xn(/repository \S+ not found/),Xn(/could not read Username/),Xn(/could not read Password/),Xn(/Could not read from remote/)]},{error:Je.aq.INDEX_FILE_CORRUPT,match:[Xn(/index file corrupt/),Xn(/index file smaller than expected/),Qn(/index file .*?\.idx is too small/)]},{error:Je.aq.UNKNOWN_REMOTE,match:[Xn(/No such remote/)]},{error:Je.aq.INDEX_LOCKED,match:[Xn(/Unable to create .*?\.git\/index\.lock/)]},{error:Je.aq.NO_COMMITS,match:[Xn(/your current branch '.*?' does not have any commits yet/)]},{error:Je.aq.PATH_MATCHED_NO_FILES,match:[Xn(/pathspec '.*?' did not match any files/),Xn(/pathspec '.*?' did not match any file\(s\) known to git/),Xn(/path '.*?' does not exist/),Xn(/path '.*?' exists on disk, but not in/)]},{error:Je.aq.USER_NOT_CONFIGURED,match:[Xn(/unable to auto-detect email address/),Xn(/unable to auto-detect name/),Xn(/empty ident name \(for <.*?>\) not allowed/)]},{error:Je.aq.INVALID_REFERENCE,match:[Xn(/invalid reference: .*?$/),Xn(/'.*?' - not a valid ref/)]},{error:Je.aq.BRANCH_ALREADY_EXISTS,match:[Xn(/A branch named '.*?' already exists/)]},{error:Je.aq.MERGE_CONFLICT,match:[Xn(/Not possible to fast-forward, aborting/),Xn(/refusing to merge unrelated histories/),Xn(/Exiting because of an unresolved conflict/),Xn(/Exiting because of unfinished merge/),Qn(/Failed to merge in the changes/),(et=/Merge conflict in/,new RegExp("^CONFLICT \\([^\\)]+\\): ".concat(et.source),"im"))]},{error:Je.aq.UPSTREAM_NOT_SET,match:[Xn(/The current branch \S+ has no upstream branch/),Xn(/No configured push destination/)]},{error:Je.aq.HEAD_DETACHED,match:[Xn(/HEAD does not point to a branch/),Xn(/ref HEAD is not a symbolic ref/)]},{error:Je.aq.DIRTY_WORKTREE,match:[Qn(/Your local changes to the following files would be overwritten/),Qn(/The following untracked working tree files would be overwritten/),Qn(/\S+ is not possible because you have unmerged files/),Qn(/cannot rebase: You have unstaged changes/)]},{error:Je.aq.PUSH_REJECTED,match:[Qn(/failed to push some refs to/)]}];function tt(e){if($n.test(e)){for(var n=0;n<nt.length;n++)for(var t=0;t<nt[n].match.length;t++)if(nt[n].match[t].test(e))return nt[n].error;return Je.aq.UNKNOWN}return Je.aq.UNKNOWN_NOT_GIT}var rt=t(83569),it=t(89224),ot=".git";function at(e,n,t){var r=function(){if(!o){o=!0;var t=!0;n.watchDir(ot,{onChange:function(){t?t=!1:s()},onMoveOrDelete:function(){o=!1,s()},onError:function(n,t){return e.unrecoverableError(n,t)}})}},o=!1,u=!1,s=function(e,n){var t,r=n.wait,i=n.cooldown,o=n.maxWait,a=null,u=!1,s=(0,We.debounce)((function(n){return a=setTimeout((function(){return a=null}),i),u=!1,t=e.apply(void 0,(0,c.Z)(n))}),r,{maxWait:o}),l=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return null!==a?t:(u||(u=!0),s(n))};return l.cancel=function(){null!==a?(clearTimeout(a),a=null):(s.cancel(),u=!1)},l.flush=function(){return null!==a?(clearTimeout(a),a=null,t):s.flush()},l.isPending=function(){return u},l.isInCooldown=function(){return null!==a},l}((function(){return t.emit(Je.dq.FS_CHANGE)}),{wait:1e3,cooldown:5e3,maxWait:5e3});function l(){return l=(0,i.Z)((function(){var t;return(0,a.__generator)(this,(function(i){return t=!0,n.watchDir(rt.Ql,{onChange:function(e){o||e.find((function(e){return e.filename===ot&&e.type===it.Tv.Directory}))&&(r(),t||s());t&&(t=!1)},onError:function(n,t){return e.unrecoverableError(n,t)}}),[2]}))})),l.apply(this,arguments)}!function(){l.apply(this,arguments)}(),n.onStatusChange((function(e){o&&(e===it.kO.Syncing&&s.isInCooldown()?u=!0:e===it.kO.Clean&&(u||s(),u=!1))}))}var ut=t(38418),st=t(63309),ct=t(27178);function lt(e){var n=e.runnerMode,t=void 0===n?"shellrunner":n,r=e.onUnrecoverableError,f=e.openFile,d=e.onFirewallDenied,p=e.enableUserEvents,h=void 0!==p&&p,E=(0,u.ZP)({onUnrecoverableError:r,onFirewallDenied:d}),m=function(e){var n=e.container,t=e.enabled,r=e.onEventSent,u=(0,v.ZP)();r&&u.on(He.EVENT_SENT,r);var s=null;function c(e,n){return l.apply(this,arguments)}function l(){return(l=(0,i.Z)((function(e,r){var i,s,c,l,d,p,h,E,m;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return t?[4,f()]:[2];case 1:return c=a.sent(),l=n.getContext(),d=null===l||void 0===l||null===(i=l.currentUser)||void 0===i?void 0:i.id,p=null===l||void 0===l||null===(s=l.repl)||void 0===s?void 0:s.id,h=window.location.href,E=Be((0,o.Z)({userId:d,replId:p,url:h},r)),m={userEvent:{eventName:e,eventData:E}},"open"!==c.status?(N.$e((function(e){e.setTag("service","user-events"),e.setExtra("command",m),e.setExtra("userId",d),e.setExtra("replId",p),e.setExtra("url",h),e.setExtra("channelId",c.id),N.Tb(new Error("UserEvents channel is not open: ".concat(c.status)))})),[2]):(u.emit(He.EVENT_SENT,e,r),c.send(m),[2])}}))}))).apply(this,arguments)}function f(){return d.apply(this,arguments)}function d(){return(d=(0,i.Z)((function(){return(0,a.__generator)(this,(function(e){return s?[2,s]:[2,new Promise((function(e){u.once(He.CHANNEL_OPENED,(function(n){e(n)}))}))]}))}))).apply(this,arguments)}return c("meta:start",{}),n.openChannel({service:"null",skip:function(){return!t}},(function(e){var n=e.channel;if(!e.error){if(!n)throw new Error("Expected channel");return c("meta:ready",{}),s=n,u.emit(He.CHANNEL_OPENED,n),function(e){e.willReconnect||(s=null)}}})),{emit:c}}({container:E,enabled:Boolean(h)}),g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=function(e){b()(E,e)||(E=e,s.emit(w.SESSION_STATE_CHANGED,E))},t=function(e){c!==e&&(c=e,s.emit(w.PREVIEWED_FILE_CHANGED,e))},r=function(e){b()(e,h)||(h=e,s.emit(w.CURSOR_POSITION_CHANGED,e))},i=function(e){d!==e&&(d=e,s.emit(w.COMMAND_BAR_TOGGLED,d))},a=function(e){p!==e&&(p=e,s.emit(w.CONFIG_FILE_VISIBILITY_TOGGLED,p))},u=function(e,n){var t=n||E.openFiles.length;if(e<0||e>=t||!Number.isInteger(e))throw new Error("Invalid index: ".concat(e,". Index must be an integer between 0 and ").concat(t))},s=(0,v.ZP)();s.setMaxListeners(1e3);var c=null,l=null,f=[],d=!1,p=!1,h={column:1,lineNumber:1,offset:0},E={openFiles:[],activeTab:0};return{onSessionStateChanged:function(e){return s.on(w.SESSION_STATE_CHANGED,e),function(){s.removeListener(w.SESSION_STATE_CHANGED,e)}},onPreviewedFileChanged:function(e){return s.on(w.PREVIEWED_FILE_CHANGED,e),function(){s.removeListener(w.PREVIEWED_FILE_CHANGED,e)}},onCursorPositionChanged:function(e){return s.on(w.CURSOR_POSITION_CHANGED,e),function(){s.removeListener(w.CURSOR_POSITION_CHANGED,e)}},onCommandBarToggled:function(e){return s.on(w.COMMAND_BAR_TOGGLED,e),function(){s.removeListener(w.COMMAND_BAR_TOGGLED,e)}},onHiddenFileVisibilityToggled:function(e){return s.on(w.CONFIG_FILE_VISIBILITY_TOGGLED,e),function(){s.removeListener(w.CONFIG_FILE_VISIBILITY_TOGGLED,e)}},onDeeplinkUpdated:function(e){return s.on(w.DEEPLINK_CHANGED,e),l&&(e(l),l=null),function(){s.removeListener(w.DEEPLINK_CHANGED,e)}},onEditorFocused:function(e){return s.on(w.EDITOR_FOCUSED,e),function(){s.removeListener(w.EDITOR_FOCUSED,e)}},openFile:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e.openFile)e.openFile({path:t,newTab:r.newTab,col:r.col,line:r.line});else{var i=r.tabIndex,a=r.newTab,s=f.indexOf(t);if(-1!==s?(f.splice(s),f.unshift(t)):(f.unshift(t),f.length>5&&f.pop()),void 0===i)if(E.openFiles.includes(t))n((0,S.Z)((0,o.Z)({},E),{activeTab:E.openFiles.indexOf(t)}));else{var c=E.openFiles.slice();if(a){var l=0===c.length?0:E.activeTab+1;return c.splice(l,0,t),void n({openFiles:c,activeTab:l})}var d=E.activeTab;c.splice(d,1,t),n({openFiles:c,activeTab:d})}else{u(i,E.openFiles.length+1);var p=E.openFiles.slice(),h=E.openFiles.indexOf(t);if(-1===h)return p.splice(i,1,t),void n({openFiles:p,activeTab:p.indexOf(t)});if(h===i)return void n((0,S.Z)((0,o.Z)({},E),{activeTab:p.indexOf(t)}));p.splice(h,1),p.splice(i,0,t);var m=p.indexOf(t);n({openFiles:p,activeTab:m})}}},updateDeeplink:function(e){s.emit(w.DEEPLINK_CHANGED,e),l=e},focusEditor:function(){s.emit(w.EDITOR_FOCUSED)},writeToTerminal:function(e){s.emit(w.TERMINAL_WRITE_CALLED,e)},clearTerminal:function(){s.emit(w.TERMINAL_CLEAR_CALLED)},onTerminalWrite:function(e){return s.on(w.TERMINAL_WRITE_CALLED,e),function(){s.off(w.TERMINAL_WRITE_CALLED,e)}},onTerminalClear:function(e){return s.on(w.TERMINAL_CLEAR_CALLED,e),function(){s.off(w.TERMINAL_CLEAR_CALLED,e)}},getActiveFile:function(){var e=E.openFiles,n=E.activeTab;if(0!==e.length)return e[n]},getCursorPosition:function(){return h},getRecentFiles:function(){return f},setPreviewedFile:t,setCursorPosition:r,setIsCommandBarOpen:i,setAreHiddenFilesVisible:a,getPreviewedFile:function(){return c},getIsCommandBarOpen:function(){return d},getAreHiddenFilesVisible:function(){return p},getState:function(){return E}}}({openFile:f}),_=(0,T.Z)({container:E}),O=y({container:E}),P=(0,ee.Z)({container:E,fs:_}),F=function(e){var n=e.container,t=(0,v.ZP)(),r=null;function o(){return u.apply(this,arguments)}function u(){return(u=(0,i.Z)((function(){return(0,a.__generator)(this,(function(e){return r&&"open"===r.status?[2,r]:[2,new Promise((function(e){t.once(oe.CHANNEL_OPENED,(function(n){e(n)}))}))]}))}))).apply(this,arguments)}function s(){return c.apply(this,arguments)}function c(){return c=(0,i.Z)((function(){return(0,a.__generator)(this,(function(e){return[2,new Promise((function(e,t){var r=!1,i=n.openChannel({service:"nix"},(function(n){var o=n.channel,a=n.error;if(r)throw new Error("getAnonymousChannel fulfilled but openChannelCb called again");if(!a)return e([o,i]),function(e){e.willReconnect&&i(),r||(r=!0,t(new Error("Expected getAnonymousChannel promise to be fulfilled when closing")))};t(a)}))}))]}))})),c.apply(this,arguments)}n.openChannel({service:"nix"},(function(e){var n=e.channel;if(!e.error){if(!n)throw new Error("No channel returned, channel expected");return r=n,t.emit(oe.CHANNEL_OPENED,n),function(){r=null}}}));var l={searchPackages:function(){var e=(0,i.Z)((function(e){var n,t,r,i;return(0,a.__generator)(this,(function(o){switch(o.label){case 0:return[4,s()];case 1:return n=L.Z.apply(void 0,[o.sent(),2]),t=n[0],r=n[1],[4,t.request({nixPackageSearchRequest:{query:e}})];case 2:return(i=o.sent()).channelClosed?[2,{error:"Channel closed",packages:null}]:(r(),i.error?[2,{error:i.error,packages:null}]:i.nixPackageSearchResponse?[2,{packages:i.nixPackageSearchResponse.packages,error:null}]:[2,{error:"Response expected but none received",packages:null}])}}))}));return function(n){return e.apply(this,arguments)}}(),listPackages:(0,i.Z)((function(){var e,n,t,r;return(0,a.__generator)(this,(function(i){switch(i.label){case 0:return[4,s()];case 1:return e=L.Z.apply(void 0,[i.sent(),2]),n=e[0],t=e[1],[4,n.request({nixPackageListRequest:{}})];case 2:return(r=i.sent()).channelClosed?[2,{error:"Channel closed",packages:null}]:(t(),r.error?[2,{error:r.error,packages:null}]:r.nixPackageListResponse?[2,{packages:r.nixPackageListResponse.packages,error:null}]:[2,{error:"Response expected but none received",packages:null}])}}))})),getChannels:(0,i.Z)((function(){var e,n,t,r;return(0,a.__generator)(this,(function(i){switch(i.label){case 0:return[4,s()];case 1:return e=L.Z.apply(void 0,[i.sent(),2]),n=e[0],t=e[1],[4,n.request({nixChannelsRequest:{}})];case 2:return(r=i.sent()).channelClosed?[2,{error:"Channel closed",channels:null}]:(t(),r.error?[2,{error:r.error,channels:null}]:r.nixChannelsResponse?[2,{channels:r.nixChannelsResponse.channels,error:null}]:[2,{error:"Response expected but none received",channels:null}])}}))})),getLatestStableChannel:(0,i.Z)((function(){var e,n,t,r;return(0,a.__generator)(this,(function(i){switch(i.label){case 0:return[4,s()];case 1:return e=L.Z.apply(void 0,[i.sent(),2]),n=e[0],t=e[1],[4,n.request({nixChannelLatestStableRequest:{}})];case 2:return(r=i.sent()).channelClosed?[2,{error:"Channel closed",channel:null}]:(t(),r.error?[2,{error:r.error,channel:null}]:r.nixChannelLatestStableResponse?[2,{channel:r.nixChannelLatestStableResponse.channel,error:null}]:[2,{error:"Response expected but none received",channel:null}])}}))})),addPackages:function(){var e=(0,i.Z)((function(e){var n;return(0,a.__generator)(this,(function(t){switch(t.label){case 0:return[4,o()];case 1:return[4,t.sent().request({nixPackageAddRequest:{packages:e}})];case 2:return(n=t.sent()).channelClosed?[2,"channel closed"]:n.error?[2,n.error]:n.nixPackageAddResponse?[2,null]:[2,"response expected but non received"]}}))}));return function(n){return e.apply(this,arguments)}}(),removePackages:function(){var e=(0,i.Z)((function(e){var n;return(0,a.__generator)(this,(function(t){switch(t.label){case 0:return[4,o()];case 1:return[4,t.sent().request({nixPackageRemoveRequest:{packages:e}})];case 2:return(n=t.sent()).channelClosed?[2,"channel closed"]:n.error?[2,n.error]:n.nixPackageRemoveResponse?[2,null]:[2,"response expected but non received"]}}))}));return function(n){return e.apply(this,arguments)}}()};return l}({container:E}),U=(0,s.Z)({container:E,dotReplit:P}),G=function(e){var n=e.container,t=(0,v.ZP)(),r=null,o=[],u=[];function s(){return c.apply(this,arguments)}function c(){return(c=(0,i.Z)((function(){return(0,a.__generator)(this,(function(e){return r?[2,r]:[2,new Promise((function(e){t.once(R.MESSAGES_LOADED,(function(){e(r)}))}))]}))}))).apply(this,arguments)}return n.openChannel({service:"chat",name:"chatter"},(function(e){var n=e.channel;if(!e.error){if(!n)throw new Error("Expected channel");return n.onCommand((function(e){switch(e.body){case"chatMessage":var i=e.chatMessage;if(!i||!i.username||!i.text)throw new Error("expected a chat message in the response");o.push(i),t.emit(R.MESSAGE_RECEIVED,{text:i.text,username:i.username});break;case"chatTyping":var a=e.chatTyping;if(!a||!a.username)return;var s=a.username,c=a.typing;c&&!u.includes(s)&&u.push(s),!c&&u.includes(s)&&u.splice(u.indexOf(s),1),t.emit(R.USER_TYPING_UPDATED,{username:s,isTyping:Boolean(c)});break;case"chatScrollback":var l=e.chatScrollback;if(!(null===l||void 0===l?void 0:l.scrollback))return;l.scrollback.forEach((function(e){return o.push(e)})),r=n,t.emit(R.MESSAGES_LOADED,o)}})),function(){r=null}}})),{sendMessage:function(e){return(0,i.Z)((function(){var n;return(0,a.__generator)(this,(function(r){switch(r.label){case 0:return[4,s()];case 1:return n=r.sent(),o.push(e),n.send({chatMessage:e}),t.emit(R.MESSAGE_SENT,e),[2]}}))}))()},onMessageReceived:function(e){return t.on(R.MESSAGE_RECEIVED,e),function(){t.removeListener(R.MESSAGE_RECEIVED,e)}},onMessageSent:function(e){return t.on(R.MESSAGE_SENT,e),function(){t.removeListener(R.MESSAGE_SENT,e)}},updateUserTyping:function(e){return(0,i.Z)((function(){var n,t,r;return(0,a.__generator)(this,(function(i){switch(i.label){case 0:return[4,s()];case 1:return n=i.sent(),t=e.username,r=e.isTyping,n.send({chatTyping:{username:t,typing:r}}),[2]}}))}))()},onUserTypingUpdated:function(e){return t.on(R.USER_TYPING_UPDATED,e),function(){t.removeListener(R.USER_TYPING_UPDATED,e)}},onMessagesLoaded:function(e){return t.on(R.MESSAGES_LOADED,e),function(){t.removeListener(R.MESSAGES_LOADED,e)}},getMessages:function(){return o},getUsersTyping:function(){return u}}}({container:E}),Z=function(e){var n=e.container,t=e.fs,r=e.openFile,o=e.waitForFileClose,u=null,s=!1;return n.openChannel({service:"git"},(function(e){var n=e.error,c=e.channel;if(!n)return c.onCommand(function(){var e=(0,i.Z)((function(e){var n,i,l,f,d,p,h,E;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:switch(e.body){case"replspaceApiOpenFile":return[3,1];case"replspaceApiGetGitHubToken":return[3,7]}return[3,9];case 1:if(!e.replspaceApiOpenFile)throw new Error("Expected replspaceApiOpenFile");return n=e.replspaceApiOpenFile,i=n.file,l=n.waitForClose,f=n.nonce,r?[3,3]:i.endsWith(".git/COMMIT_EDITMSG")?(d=window.prompt("Enter a commit message"),[4,t.writeFile(i,null!==d&&void 0!==d?d:"")]):(l&&c.send({replspaceApiCloseFile:{file:i,nonce:f}}),window.alert("tried to open ".concat(i," but failed")),[2]);case 2:return a.sent(),l?[3,5]:[2];case 3:return r({path:i,newPane:!0}),l?[4,o(i)]:[2];case 4:a.sent(),a.label=5;case 5:return[4,t.flush()];case 6:return a.sent(),"open"!==c.status||c.send({replspaceApiCloseFile:{file:i,nonce:f}}),[2];case 7:if(!e.replspaceApiGetGitHubToken)throw new Error("Expected replspaceApiGetGitHubToken");return p=function(){var n;"open"===c.status&&c.send({replspaceApiGitHubToken:{token:"",nonce:null===(n=e.replspaceApiGetGitHubToken)||void 0===n?void 0:n.nonce}})},[4,ue()];case 8:return(h=a.sent()).isAllowed?null==h.gitHubInfo?(p(),[2]):u?(E=function(){var n,t;"open"===c.status&&c.send({replspaceApiGitHubToken:{token:null===(n=h.gitHubInfo)||void 0===n?void 0:n.accessToken,nonce:null===(t=e.replspaceApiGetGitHubToken)||void 0===t?void 0:t.nonce}})},s?(E(),[2]):(u((function(e){e?(s=e,E()):p()})),[2])):(p(),k.kg.error("Got a replspaceApiGetGitHubToken command but no confirm listener is set up"),[2]):(p(),[2]);case 9:return[2]}}))}));return function(n){return e.apply(this,arguments)}}()),function(){};k.kg.info("Failed to open Git Shell service channel for replspaceapi")})),{onConfirmSendToken:function(e){return u=e,function(){u=null}}}}({container:E,fs:_,openFile:f,waitForFileClose:function(e){return new Promise((function(n,t){var r=ut.e.sub(st.S6,(0,i.Z)((function(){var t;return(0,a.__generator)(this,(function(i){return void 0===(null===(t=ut.e.get(st.S6))||void 0===t?void 0:t.find((function(n){var t=ut.e.get(n.data);return void 0!==t&&(0,ct.DQ)(t)===e})))&&(n(),r()),[2]}))})))}))}}),H=function(){var e=(0,i.Z)((function(e,n){var r,i,u,s,c;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return[4,P.getRunConfig()];case 1:return r=a.sent(),i=r.interp,u=r.run,s=r.config,m.emit("user:run:prerun",(0,o.Z)({runnerMode:t,interp:null===i||void 0===i?void 0:i.toJSON(),run:null===u||void 0===u?void 0:u.toJSON(),config:s},n)),[4,_.flush()];case 2:return a.sent(),e&&e("prerun flush finished"),[4,(0,Te.Z)(E,P)];case 3:return a.sent()?[4,U.installPackages()]:[3,5];case 4:c=a.sent(),e&&e("prerun packager install finished",{success:c}),a.label=5;case 5:return m.emit("user:run:initiate",{}),[2]}}))}));return function(n,t){return e.apply(this,arguments)}}(),M=(0,D.Z)({mode:t,container:E,beforeRun:H}),q=function(e){var n=e.container,t=e.beforeRun,r=(0,x.u)(null);return{mainClient:r,connect:function(){return new Promise((function(e,i){r.current||n.openChannel({service:"debugger"},(function(n){if(!n.error)return r.current=X({channel:n.channel,beforeRun:t}),e(null),function(){r.current=null};i(n.error)}))}))}}}({container:E,beforeRun:H}),B=function(e){var n,t=e.container,r=(0,v.ZP)(),o=new Promise((function(e){return n=e})),u=null;return t.openChannel({service:"chat",name:"broadcaster"},(function(e){if(!e.error){var t=e.channel,i=e.context;if(!t)throw new Error("Expected channel");return i.currentUser&&(u=i.currentUser.username),t.onCommand((function(e){if("chatMessage"===e.body){var n=e.chatMessage;if(!n||!n.username||!n.text)throw new Error("unexpected broadcast without a message");r.emit(I.MESSAGE_RECEIVED,{text:n.text,username:n.username})}})),n(t),function(){o=new Promise((function(e){return n=e}))}}})),{broadcastMessage:function(e){var n=e.text;return(0,i.Z)((function(){var e;return(0,a.__generator)(this,(function(t){switch(t.label){case 0:return[4,o];case 1:if(e=t.sent(),!u)throw new Error("Cannot broadcast without as username. Is currentUser in context?");return e.send({chatMessage:{text:n,username:u}}),[2]}}))}))()},onBroadcastReceived:function(e){return r.on(I.MESSAGE_RECEIVED,e),function(){r.removeListener(I.MESSAGE_RECEIVED,e)}}}}({container:E}),j=function(e){var n=e.container,t=function(e){i!==e&&(i=e,r.emit(De.ON_CLIENT,i))},r=(0,v.ZP)(),i=null,o=!1,a=0,u=null,s=function(){t(null)},c=!1,f={start:function(){c||(c=!0,s=n.openChannel({service:"lsp",skip:function(e){if(e.repl.language.startsWith("nix")||e.repl.language.startsWith("html"))return!0;var n=fe.Z.get(e.repl.language).entrypoint;return!(0,ge.D)(n,e.repl.language)||!fe.Z.supportsLSP(e.repl.language)}},(function(e){var r=e.error,i=e.channel,s=e.context;if(!r){var c=!1,d=function(){},p=fe.Z.get(s.repl.language).entrypoint,h=(0,ge.D)(p,s.repl.language);if(!h)throw new Error("Expected languageId");var E=Re({connection:{read:function(e){"open"===i.status&&i.onCommand((function(n){n.output&&e(n.output)}))},write:function(e){"open"===i.status&&i.send({input:e})},didClose:function(){return"open"!==i.status}},clientId:"legacy-"+h,isSupportedFile:function(e){var n=(0,ge.D)(e,h);return n===h||!(!Ie.includes(h)||!Ie.includes(n||""))}});n.exec("pwd").then((function(e){if(!c){var n=e.output?e.output.replace(/\n/,""):null;if(!n)throw new Error("Expected pwd");if(!E)throw new Error("Expected client");E.initialize({pwd:n}),d=E.onServerStateChange((function(e){c||e===le.a.INITIALIZED&&t(E)}))}}));var m=i.onCommand((function(e){e.output||e.state===l.api.State.Stopped&&(k.kg.error("LSP server unexpectedly disconnected",{lspId:h,appService:"lsp"}),a++,f.stop(),u=setTimeout((function(){return f.start()}),1e3*Math.pow(2,a)))}));return function(){E&&(E.destroy(),t(null)),c=!0,d(),m(),o&&(o=!1)}}})))},getClient:function(){return(null===i||void 0===i?void 0:i.getServerState())===le.a.EXITED?null:i},onClient:function(e){return(0,v.NH)(r,De.ON_CLIENT,e)},stop:function(){if(o=!0,c=!1,null!==u&&clearTimeout(u),i){var e=i.onServerStateChange((function(n){n===le.a.EXITED&&(e(),s())}));return i.destroy(),void t(null)}s()}};return f}({container:E}),W=function(e){var n=e.container,t=e.dotReplit,r=e.allowNonNix,i=void 0!==r&&r,a=function(e){var n=f[e];if(!n)throw new Error("LSPNix: removeLanguage called with configId never configured");var t=n.client;if(t){n.client=null,t.destroy();var r=!0,i=!1,o=void 0;try{for(var a,u=s[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var l=(0,L.Z)(a.value,2),d=l[0],p=l[1];if(c.get(d)===t){c.delete(d);var h=!0,E=!1,m=void 0;try{for(var v,g=p[Symbol.iterator]();!(h=(v=g.next()).done);h=!0)(0,v.value)(null)}catch(_){E=!0,m=_}finally{try{h||null==g.return||g.return()}finally{if(E)throw m}}}}}catch(_){i=!0,o=_}finally{try{r||null==u.return||u.return()}finally{if(i)throw o}}}n.closeChannel(),delete f[e]},u=function(e,n){if(f[e])throw new Error("LSPNix: addLanguage called with configId already configured");f[e]=(0,o.Z)({client:null,closeChannel:function(){}},n),d&&p(e)},s=new Map,c=new Map,f=Object.create(null),d=!0;function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!d)throw new Error("LSPNix: Called startClient while not enabled");if(!f[e])throw new Error("LSPNix: No config found for language: ".concat(e));var r=f[e],o=r.client,a=(r.closeChannel,(0,de.Z)(r,["client","closeChannel"]));if(o)throw new Error("LSPNix: A previous client is already set for language: ".concat(e));var u=new Date,h=[],E=n.openChannel({service:"lsp2",skip:function(e){if(i)return!1;var n=e.repl.language;return!n.startsWith("nix")&&!n.startsWith("html")}},(function(r){var i=r.channel;if(i){var o=null,m=function(){var n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];h.forEach((function(e){return e()})),null===o||void 0===o||o.destroy(),f[e]&&f[e].client===o&&(f[e].client=null),n&&d||E();var t=!0,r=!1,i=void 0;try{for(var a,u=s[Symbol.iterator]();!(t=(a=u.next()).done);t=!0){var l=(0,L.Z)(a.value,2),p=l[0],m=l[1];if(c.get(p)===o){c.delete(p);var v=!0,g=!1,_=void 0;try{for(var b,y=m[Symbol.iterator]();!(v=(b=y.next()).done);v=!0){(0,b.value)(null)}}catch(w){g=!0,_=w}finally{try{v||null==y.return||y.return()}finally{if(g)throw _}}}}}catch(w){r=!0,i=w}finally{try{t||null==u.return||u.return()}finally{if(r)throw i}}};return i.request({startLSP:{language:e}}).then((function(r){if(r.ok&&d&&f[e]){h.push(i.onCommand((function(n){if(n.state===l.api.State.Stopped){if(k.kg.error("LSP server unexpectedly disconnected",{lspId:e,appService:"lspnix"}),m(),!d)return;if((new Date).getTime()-u.getTime()<5e3)if(t<3){var r=1e3*Math.pow(2,t),i=setTimeout((function(){d&&f[e]&&p(e,t+1)}),r);h.push((function(){return clearTimeout(i)}))}else k.kg.error("LSP server is crash-looping. Giving up.",{lspId:e,appService:"lspnix"});else p(e)}})));var E=0;Ge(n,(function(){return E++<5&&d&&Ue(f[e],a)&&"open"===i.status})).then((function(n){if(Ue(f[e],a)&&"open"===i.status&&!n.error){var t;if(o=Re({connection:{read:function(e){"open"===i.status&&i.onCommand((function(n){n.output&&e(n.output)}))},write:function(e){"open"===i.status?i.send({input:e}):(null===o||void 0===o?void 0:o.isDestroyed())&&k.kg.error("LSPNix: tried to write to channel but the lsp client is already destroyed")},didClose:function(){return"open"!==i.status}},clientId:e,isSupportedFile:function(e){return ke(a.globPattern,e)},getWorkspaceConfiguration:function(){if(!a.configurationJson)return null;var e=null;try{e=JSON.parse(a.configurationJson)}catch(n){k.kg.error("Failed to parse LSP workspace configuration",{configurationJson:a.configurationJson})}return e}}),a.initializationOptionsJson)try{t=JSON.parse(a.initializationOptionsJson)}catch(r){k.kg.error("Failed to parse LSP initializationOptions",{initializationOptionsJson:a.initializationOptionsJson})}o.initialize({pwd:n.workingDirectory,initializationOptions:t}).catch((function(e){if("Initialize request cancelled"!==e.message)throw e})),h.push(o.onServerStateChange((function(n){if("open"===i.status&&o&&Ue(f[e],a))if(n!==le.a.EXITED){if(n===le.a.INITIALIZED){f[e].client=o;var t=!0,r=!1,u=void 0;try{for(var l,d=s[Symbol.iterator]();!(t=(l=d.next()).done);t=!0){var p=(0,L.Z)(l.value,2),h=p[0],E=p[1];if(ke(a.globPattern,h)&&!c.has(h)){c.set(h,o);var v=!0,g=!1,_=void 0;try{for(var b,y=E[Symbol.iterator]();!(v=(b=y.next()).done);v=!0)(0,b.value)(o)}catch(w){g=!0,_=w}finally{try{v||null==y.return||y.return()}finally{if(g)throw _}}}}}catch(w){r=!0,u=w}finally{try{t||null==d.return||d.return()}finally{if(r)throw u}}}}else m()})))}}))}})),function(e){var n=e.willReconnect;m(n)}}}));f[e].closeChannel=E}return t.watch((function(e){if(e.error){if(e.error===Le.Yt.NotFound){var n=!0,t=!1,r=void 0;try{for(var i,o=Object.keys(f)[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var s=i.value;a(s)}}catch(q){t=!0,r=q}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}}}else if(e.config.languages){var c={},l=!0,d=!1,p=void 0;try{for(var h,E=Object.entries(e.config.languages)[Symbol.iterator]();!(l=(h=E.next()).done);l=!0){var m,v,g=(0,L.Z)(h.value,2),_=g[0],b=g[1];b.pattern&&b.languageServer&&b.languageServer.startCommand&&(c[_]={globPattern:b.pattern,startCommand:b.languageServer.startCommand,initializationOptionsJson:null!==(m=b.languageServer.initializationOptionsJson)&&void 0!==m?m:void 0,configurationJson:null!==(v=b.languageServer.configurationJson)&&void 0!==v?v:void 0})}}catch(q){d=!0,p=q}finally{try{l||null==E.return||E.return()}finally{if(d)throw p}}var y=!0,w=!1,S=void 0;try{for(var R,D=Object.keys(f)[Symbol.iterator]();!(y=(R=D.next()).done);y=!0){var I=R.value;c[I]||a(I)}}catch(q){w=!0,S=q}finally{try{y||null==D.return||D.return()}finally{if(w)throw S}}var T=!0,C=!1,N=void 0;try{for(var A,x=Object.keys(c)[Symbol.iterator]();!(T=(A=x.next()).done);T=!0){var O=A.value,P=f[O],F=c[O];P?Ue(P,F)||(a(O),u(O,F)):u(O,F)}}catch(q){C=!0,N=q}finally{try{T||null==x.return||x.return()}finally{if(C)throw N}}}else{var k=!0,U=!1,G=void 0;try{for(var Z,H=Object.keys(f)[Symbol.iterator]();!(k=(Z=H.next()).done);k=!0){var M=Z.value;a(M)}}catch(q){U=!0,G=q}finally{try{k||null==H.return||H.return()}finally{if(U)throw G}}}})),{disable:function(){if(d){d=!1;var e=!0,n=!1,t=void 0;try{for(var r,i=Object.values(f)[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var o,a=r.value;a.closeChannel(),null===(o=a.client)||void 0===o||o.destroy(),a.client=null;var u=!0,l=!1,p=void 0;try{for(var h,E=s[Symbol.iterator]();!(u=(h=E.next()).done);u=!0){var m=(0,L.Z)(h.value,2),v=m[0],g=m[1];if(c.has(v)){c.delete(v);var _=!0,b=!1,y=void 0;try{for(var w,S=g[Symbol.iterator]();!(_=(w=S.next()).done);_=!0)(0,w.value)(null)}catch(R){b=!0,y=R}finally{try{_||null==S.return||S.return()}finally{if(b)throw y}}}}}catch(R){l=!0,p=R}finally{try{u||null==E.return||E.return()}finally{if(l)throw p}}}}catch(R){n=!0,t=R}finally{try{e||null==i.return||i.return()}finally{if(n)throw t}}}},enable:function(){if(!d){d=!0;var e=!0,n=!1,t=void 0;try{for(var r,i=Object.keys(f)[Symbol.iterator]();!(e=(r=i.next()).done);e=!0)p(r.value)}catch(o){n=!0,t=o}finally{try{e||null==i.return||i.return()}finally{if(n)throw t}}}},onClient:function(e,n){var t;s.has(e)||s.set(e,[]),null===(t=s.get(e))||void 0===t||t.push(n);var r=c.get(e);if(r)n(r);else{var i=!0,o=!1,a=void 0;try{for(var u,l=Object.values(f)[Symbol.iterator]();!(i=(u=l.next()).done);i=!0){var d=u.value;if(ke(d.globPattern,e)){d.client&&n(d.client);break}}}catch(p){o=!0,a=p}finally{try{i||null==l.return||l.return()}finally{if(o)throw a}}}return function(){var t,r=null!==(t=s.get(e))&&void 0!==t?t:[];s.set(e,r.filter((function(e){return e!==n})))}}}}({container:E,dotReplit:P}),V=Oe({container:E,beforeRun:H}),J=function(e){var n,t,r=e.container,o=e.fs,u=e.provideProfiles,s=void 0===u?Vn:u,l=function(e,n){if("function"!==typeof e)throw new Error("Expected a function");var t=T;return"read"===n?t=C:"write"===n&&(t=N),function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];p.update((function(e){return e+1}));var o=e.apply(void 0,[t].concat((0,c.Z)(r)));return o.finally((function(){p.update((function(e){return e-1}))})),o}},f=(0,v.ZP)(),d=new Ve(3e4,2e3),p=(0,x.u)(0),h=null,E=null,m=Kn(),g=!1,_=new Map,b=null,y=r.getContext(),w=s({defaultUsername:null===y||void 0===y||null===(n=y.currentUser)||void 0===n?void 0:n.username,defaultUserId:null===y||void 0===y||null===(t=y.currentUser)||void 0===t?void 0:t.id,onProfiles:function(e){var n=!0,t=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var a=(0,L.Z)(i.value,2),u=a[0],s=a[1];_.set(u,s),f.emit(Je.dq.NEW_PROFILE)}}catch(d){t=!0,r=d}finally{try{n||null==o.return||o.return()}finally{if(t)throw r}}var c=_.get(Je.rG.REPLIT_DEFAULT),l=_.get(Je.rG.GITHUB);if(l)b=l;else{if(!c)return;b=c}f.emit(Je.dq.CHANGED_PROFILE)}});function S(){return R.apply(this,arguments)}function R(){return R=(0,i.Z)((function(){var e;return(0,a.__generator)(this,(function(n){switch(n.label){case 0:return h?[4,h]:[3,2];case 1:if("open"===(e=n.sent()).status)return[2,e];n.label=2;case 2:return h=new Promise((function(e){r.openChannel({service:"exec"},(function(n){var t=n.error,r=n.channel;if(t||!r)throw new Error("Failed to open Git channel");e(r)}))})),[4,h];case 3:return[2,n.sent()]}}))})),R.apply(this,arguments)}function D(e){return I.apply(this,arguments)}function I(){return I=(0,i.Z)((function(e){var n,t,r,i,o,u,s,c;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return[4,w];case 1:return a.sent(),n=Date.now(),[4,S()];case 2:t=a.sent(),a.label=3;case 3:return E?[4,E.catch()]:[3,5];case 4:return a.sent(),[3,3];case 5:r="",i=t.onCommand((function(e){null!=e.output&&(r+=e.output)})),o=null,a.label=6;case 6:return a.trys.push([6,8,,9]),s=t.request({exec:{env:m,args:e,blocking:!0}}),E=s,[4,s];case 7:return c=a.sent(),i(),E=null,c.error?(u="".concat(c.error,"\n").concat(r),o=tt(u)):u=r,[3,9];case 8:return a.sent(),E=null,i(),u=r,o=Je.aq.UNKNOWN_NOT_GIT,[3,9];case 9:return(0,Mn.J)(e,{output:u,error:o},!1,n),[2,o?{error:o}:{output:u,error:o}]}}))})),I.apply(this,arguments)}f.on(Je.dq.CHANGED_PROFILE,(function(){null!=b&&(m=Kn({author:{username:b.username,email:b.email}}))})),f.on(Je.dq.FS_CHANGE,(function(){return d.invalidate()})),f.on(Je.dq.FORCED_REFRESH,(function(){return d.invalidate()})),f.on(Je.dq.CHANGED_PROFILE,(function(){return d.invalidate()}));var T=function(){var e=(0,i.Z)((function(){var e,n,t,r,i=arguments;return(0,a.__generator)(this,(function(o){switch(o.label){case 0:for(e=i.length,n=new Array(e),t=0;t<e;t++)n[t]=i[t];if(0===n.length)throw new Error("Expected at least one command");return[4,D(["bash","-c",n.join(" && ")])];case 1:return(r=o.sent()).error?[2,r]:[2,{output:r.output.trim(),error:null}]}}))}));return function(){return e.apply(this,arguments)}}(),C=function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];if(0===n.length)throw new Error("Expected at least one command");var r=n.join(" && ");if(d.has(r)){var i=d.get(r);return i.then((function(e){(0,Mn.J)(n,e,!0)})),i}var o=T(r);return d.set(r,o),o},N=function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return d.clear(),T.apply(void 0,(0,c.Z)(n))};return{getProfiles:function(){return Array.from(_.values())},hasProfile:function(e){return _.has(e)},getProfile:function(e){var n=_.get(e);if(!n)throw new Error("Fetched a profile that has not been setup!");return n},addProfile:function(e){_.set(e.provider,e),f.emit(Je.dq.NEW_PROFILE)},getCurrentProfile:function(){return b},setCurrentProfile:function(e){var n=_.get(e);if(!n)throw new Error("Can't set a non-existent profile!");b=n,m=Kn({author:{username:n.username,email:n.email}}),f.emit(Je.dq.CHANGED_PROFILE)},onProfileAdded:function(e){var n=function(){var n=Array.from(_.values());e(n)};return f.on(Je.dq.NEW_PROFILE,n),function(){f.off(Je.dq.NEW_PROFILE,n)}},onCurrentProfileChanged:function(e){var n=function(){e(b)};return f.on(Je.dq.CHANGED_PROFILE,n),function(){f.off(Je.dq.CHANGED_PROFILE,n)}},onRefresh:function(e){g||(at(r,o,f),g=!0);var n=function(){return e(Je.dq.FS_CHANGE)},t=function(){return e(Je.dq.FORCED_REFRESH)},i=function(){return e(Je.dq.CHANGED_PROFILE)};return f.on(Je.dq.FS_CHANGE,n),f.on(Je.dq.FORCED_REFRESH,t),f.on(Je.dq.CHANGED_PROFILE,i),function(){f.off(Je.dq.FS_CHANGE,n),f.off(Je.dq.FORCED_REFRESH,t),f.off(Je.dq.CHANGED_PROFILE,i)}},forceRefresh:function(){f.emit(Je.dq.FORCED_REFRESH)},isBusy:function(){return p.current>0},onBusyChange:function(e){var n=!1,t=(0,We.debounce)(e,200);return p.subscribe((function(e){n&&0===e?(t(!1),n=!1):!n&&e>0&&(t(!0),n=!0)}))},init:l(wn,"write"),isInitialized:l(bn,"read"),lsFiles:l(On,"read"),status:l(Fn.Z,"read"),log:l(Nn,"read"),findDefaultBranches:l(hn,"read"),listBranches:l(Rn.Z,"read"),stageFiles:l(Zn,"write"),commit:l(tn,"write"),switchBranch:l(on,"write"),branchExists:l(Ke,"read"),createBranch:l(un,"write"),getRemotes:l(gn,"read"),fetch:l(cn,"write"),canMergeBranches:l(Qe,"read"),pull:l(Pn.Z,"write"),push:l(kn,"write"),getFileContents:l(mn,"read")}}({container:E,fs:_}),z=function(e){var n,t=e.container,r=e.nixService;function o(e){return u.apply(this,arguments)}function u(){return u=(0,i.Z)((function(e){return(0,a.__generator)(this,(function(t){switch(t.label){case 0:return e&&(n=void 0),n||(n=new Promise(function(){var e=(0,i.Z)((function(e){var n,t;return(0,a.__generator)(this,(function(i){switch(i.label){case 0:return[4,r.listPackages()];case 1:return(null===(t=i.sent())||void 0===t||null===(n=t.packages)||void 0===n?void 0:n.some((function(e){return"pkgs.postgresql"===e.name})))?[3,3]:[4,r.addPackages(["pkgs.postgresql"])];case 2:return i.sent(),e(),[3,4];case 3:e(),i.label=4;case 4:return[2]}}))}));return function(n){return e.apply(this,arguments)}}())),[4,n];case 1:return t.sent(),[2]}}))})),u.apply(this,arguments)}return{ensureNixPsqlPackageInstalled:o,run:function(){var e=(0,i.Z)((function(e){var n,r,i,u,s,c,f,d,p,h,E,m,v;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return n=e.query,r=e.connectionString,[4,o()];case 1:a.sent(),i=(0,C.Z)({container:t}),u=[],s=null,c=new A.t((function(e){return u.push(e)})),f=null,d=!1,p=new Promise((function(e){var n=i.onStateChanged((function(t){var r=t.state,i=t.stderrBuffer;r!==l.api.State.Running?d&&(f=i,n(),e()):d=!0}))})),i.onOutput((function(e){try{c.process(e)}catch(n){s||(s=n,N.Tb(n,(function(n){return n.setExtra("chunk",e)})))}})),a.label=2;case 2:return a.trys.push([2,,5,6]),[4,i.request({args:["psql",r,"--csv","--command",n],splitStderr:!0})];case 3:return h=a.sent(),[4,p];case 4:return a.sent(),h.error&&!f&&(f=h.error),c.flush(),[3,6];case 5:return i.dispose(),[7];case 6:return f?[2,{columns:c.headers(),rows:u,error:f}]:s?(E=s.message,[2,{columns:null!==(m=c.headers())&&void 0!==m?m:[],rows:u,error:E}]):[2,{columns:null!==(v=c.headers())&&void 0!==v?v:[],rows:u,error:null}]}}))}));return function(n){return e.apply(this,arguments)}}()}}({container:E,nixService:F}),K=function(e){var n=e.container,t=e.dotReplit,r=(0,x.u)(null),o=(0,x.u)(null);return n.openChannel({service:"toolchain"},(function(e){var n=e.error,t=e.channel;if(!n){if(!t)throw new Error("Expected channel");var i=t.onCommand((function(e){e.toolchainChanged?r.current=e.toolchainChanged.configs:e.nixModulesChanged&&(o.current=e.nixModulesChanged.modules)}));return t.request({toolchainGetRequest:{}}).then((function(e){var n;r.current=(null===(n=e.toolchainGetResponse)||void 0===n?void 0:n.configs)||null})),t.request({nixModulesGetRequest:{}}).then((function(e){var n;o.current=(null===(n=e.nixModulesGetResponse)||void 0===n?void 0:n.modules)||null})),function(){i()}}})),{configs:r,modules:o,addModule:function(e){return(0,i.Z)((function(){var n,r,i;return(0,a.__generator)(this,(function(o){switch(o.label){case 0:return r=[],[4,t.getConfig()];case 1:if((i=o.sent()).error&&i.error!==Le.Yt.NotFound)throw new Error("Failed to read .replit"+i.error);return-1!==(r=(null===(n=i.config)||void 0===n?void 0:n.modules)||[]).indexOf(e)?[3,3]:(r.push(e),[4,t.updateDotReplit([{op:"add",path:"modules",value:JSON.stringify(r)}])]);case 2:o.sent(),o.label=3;case 3:return[2]}}))}))()},removeModule:function(e){return(0,i.Z)((function(){var n,r,i,o;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return r=[],[4,t.getConfig()];case 1:if((i=a.sent()).error&&i.error!==Le.Yt.NotFound)throw new Error("Failed to read .replit"+i.error);return r=(null===(n=i.config)||void 0===n?void 0:n.modules)||[],(o=r.filter((function(n){var t=n.match(/^(.+)\.nix$/);return(t&&t[1])!==e}))).length===r.length?[2]:[4,t.updateDotReplit([{op:"add",path:"modules",value:JSON.stringify(o)}])];case 2:return a.sent(),[2]}}))}))()}}}({container:E,dotReplit:P});return{session:g,presence:O,packager:U,container:E,fs:_,chat:G,runner:M,debuggest:q,broadcast:B,dotReplit:P,nixService:F,lsp:j,lspnix:W,iotester:V,git:J,psql:z,userEvents:m,replspaceApi:Z,toolchain:K}}},82135:function(e,n,t){t.d(n,{C:function(){return u},Gw:function(){return a},Tg:function(){return s},so:function(){return i},tc:function(){return o}});var r=t(93456);function i(e,n){for(var t=[],r=e.split(n),i=0;i<r.length;i++){var o=r[i].trim();""!==o&&t.push(o)}return t}function o(e){return e.replace(/^<|>$/g,"")}function a(e){return"'".concat(e.replace(/'/g,"'\\''"),"'")}function u(e){return e.replace(/^refs\/(?:heads|remotes)\//,"")}function s(e){if(-1===e.indexOf("/"))return[null,null];if(e.startsWith("refs/heads/"))return[null,null];if(e.startsWith("refs/remotes/")){var n=(0,r.Z)(e.split("/"));return[n[2],n.slice(3).join("/")]}var t=(0,r.Z)(e.split("/"));return[t[0],t.slice(1).join("/")]}},65206:function(e,n,t){t.d(n,{L:function(){return d},l:function(){return r}});var r,i=t(9941),o=t(93456),a="HEAD -> ",u="refs/heads/",s="refs/remotes/",c="tag: ",l="refs/tags/",f=/^refs\/remotes\/([^/]+)\/HEAD$/;function d(e){switch(function(e){return"HEAD"===e||"refs/HEAD"===e||e.startsWith(a)?r.HEAD:e.startsWith(u)?r.BRANCH:e.startsWith(s)?f.test(e)?r.REMOTE_HEAD:r.REMOTE_BRANCH:e.startsWith(l)||e.startsWith(c)?r.TAG:r.BRANCH}(e)){case r.HEAD:return e.startsWith(a)?e.endsWith("(detached)")?{type:r.HEAD,name:"HEAD",detached:!0,ref:null}:{type:r.HEAD,name:"HEAD",detached:!1,ref:d(e.slice(a.length))}:{type:r.HEAD,name:"HEAD",detached:!1,ref:null};case r.REMOTE_HEAD:var n=e.slice(s.length),t=(0,i.Z)(n.split("/"),1)[0];return{type:r.REMOTE_HEAD,name:"HEAD",remote:t};case r.BRANCH:return{type:r.BRANCH,name:e.startsWith(u)?e.slice(u.length):e};case r.REMOTE_BRANCH:var p=e.slice(s.length),h=(0,o.Z)(p.split("/")),E=h[0],m=h.slice(1).join("/");return{type:r.REMOTE_BRANCH,name:p,remote:E,branch:m};case r.TAG:return e.startsWith(c)&&(e=e.slice(c.length)),e.startsWith(l)&&(e=e.slice(l.length)),{type:r.TAG,name:e}}}!function(e){e.HEAD="HEAD",e.REMOTE_HEAD="REMOTE_HEAD",e.BRANCH="BRANCH",e.REMOTE_BRANCH="REMOTE_BRANCH",e.TAG="TAG"}(r||(r={}))},79803:function(e,n,t){t.d(n,{H:function(){return r},Z:function(){return h}});var r,i=t(34727),o=t(9941),a=t(69779),u=t(70655),s=t(82135),c=t(65206),l='--format="'+["%(refname)","%(push)","%(objectname)","%(authorname)","%(authoremail)","%(authordate:unix)"].join("%09")+'"';function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!1===e.local&&!1===e.remote)throw new Error("Cannot specify both local and remote as false");var n,t,r=[];return r.push(l),e.max&&r.push("--count=".concat(e.max)),(null===(n=e.local)||void 0===n||n)&&r.push("refs/heads"),(null===(t=e.remote)||void 0===t||t)&&r.push("refs/remotes"),"git for-each-ref ".concat(r.join(" "))}function d(e){var n=(0,o.Z)(e.split("\t"),6),t=n[0],i=n[1],a=n[2],u=n[3],l=n[4],f=n[5],d=(0,c.L)(t),p={hash:a,author:{name:u,email:(0,s.tc)(l),date:1e3*parseInt(f,10)}};if(d.type===c.l.BRANCH){var h=i?(0,c.L)(i):null,E=!h||h.type!==c.l.REMOTE_BRANCH&&h.type!==c.l.BRANCH?null:h;return{type:r.LOCAL,name:d.name,push:E,remote:null,tracking:null,commit:p}}return d.type===c.l.REMOTE_BRANCH?{type:r.REMOTE,name:d.branch,remote:d.remote,push:null,tracking:null,commit:p}:null}function p(e){var n=[],t=[],i=!0,o=!1,u=void 0;try{for(var s,l=e[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var f=s.value;f.type===r.LOCAL?n.push(f):f.type===r.REMOTE&&t.push(f)}}catch(y){o=!0,u=y}finally{try{i||null==l.return||l.return()}finally{if(o)throw u}}var d=new Set,p=[],h=!0,E=!1,m=void 0;try{for(var v,g=function(){var e=v.value,t=n.find((function(n){return n.push&&n.push.type===c.l.REMOTE_BRANCH&&n.push.remote===e.remote&&n.push.branch===e.name&&n.name===e.name}));t&&(d.add(e),d.add(t),p.push({type:r.TRACKED,name:t.name,remote:e.remote,push:t.push,tracking:e,commit:t.commit}))},_=t[Symbol.iterator]();!(h=(v=_.next()).done);h=!0)g()}catch(y){E=!0,m=y}finally{try{h||null==_.return||_.return()}finally{if(E)throw m}}var b=e.filter((function(e){return!d.has(e)}));return(0,a.Z)(b).concat((0,a.Z)(p))}function h(e){return E.apply(this,arguments)}function E(){return E=(0,i.Z)((function(e){var n,t,r,i,o,a=arguments;return(0,u.__generator)(this,(function(u){switch(u.label){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:{},t=f(n),[4,e(t)];case 1:return(r=u.sent()).error?[2,r]:(i=(0,s.so)(r.output,"\n").map(d).filter((function(e){return null!==e})),(o=p(i)).sort((function(e,n){return n.commit.author.date-e.commit.author.date})),[2,{branches:o,error:null}])}}))})),E.apply(this,arguments)}!function(e){e.LOCAL="LOCAL",e.REMOTE="REMOTE",e.TRACKED="TRACKED"}(r||(r={}))},53014:function(e,n,t){t.d(n,{T:function(){return r},Z:function(){return l}});var r,i=t(34727),o=t(9941),a=t(70655),u=t(23053),s=t(82135),c=t(16047);function l(e){return f.apply(this,arguments)}function f(){return f=(0,i.Z)((function(e){var n,t,i,l,f,d,p,h,E,m=arguments;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return n=m.length>1&&void 0!==m[1]?m[1]:{},[4,(0,c.Z)(e)];case 1:if((t=a.sent()).error)return[2,t];if(!t.branch)return[2,{error:u.aq.HEAD_DETACHED}];if(!t.upstream)return[2,{error:u.aq.UPSTREAM_NOT_SET}];if(i=(0,o.Z)((0,s.Tg)(t.upstream.branch),2),l=i[0],f=i[1],!l||!f)return[2,{error:u.aq.UPSTREAM_NOT_SET}];if(t.changes.length>0)return[2,{error:u.aq.DIRTY_WORKTREE}];if((p=null!==(d=n.mode)&&void 0!==d?d:r.FF_ONLY)===r.FF_ONLY&&t.upstream.ahead>0)return[2,{error:u.aq.MERGE_CONFLICT}];switch(p!==r.FF_ONLY&&0===t.upstream.ahead&&(p=r.FF_ONLY),h=["--quiet","--no-edit"],p){case r.FF_ONLY:h.push("--no-rebase","--ff-only");break;case r.MERGE:h.push("--no-rebase","--ff");break;case r.REBASE:h.push("--rebase")}return h.push((0,s.Gw)(l),(0,s.Gw)(f)),[4,e("git pull ".concat(h.join(" ")))];case 2:if(!(E=a.sent()).error)return[3,8];switch(p){case r.MERGE:return[3,3];case r.REBASE:return[3,5]}return[3,7];case 3:return[4,e("git merge --abort")];case 4:case 6:return a.sent(),[3,7];case 5:return[4,e("git rebase --abort")];case 7:return[2,E];case 8:return[2,{error:null}]}}))})),f.apply(this,arguments)}!function(e){e.FF_ONLY="FF_ONLY",e.MERGE="MERGE",e.REBASE="REBASE"}(r||(r={}))},16047:function(e,n,t){t.d(n,{Z:function(){return v},h:function(){return i}});var r,i,o=t(34727),a=t(9941),u=t(70655),s=t(82135),c="# branch.oid ",l="# branch.head ",f="# branch.upstream ",d="# branch.ab ",p="# stash ",h=/^(\S)(\S) (\S{4}) (\S+) (\S+) (\S+) (\S+) (\S+) (.*)$/,E=/^([RC])([0-9]+) (.+?)\t(.+)$/,m=/^(\S)(\S) (\S{4}) (\S+) (\S+) (\S+) (\S+) (\S+) (\S+) (\S+) (.*)$/;function v(e){return g.apply(this,arguments)}function g(){return(g=(0,o.Z)((function(e){var n,t,r,i,o,h,E,m,v,g,b,y,w,S,R,D,I,T,C,N;return(0,u.__generator)(this,(function(u){switch(u.label){case 0:return n=null,t=null,r=null,i=0,o=[],[4,e("git status -z --porcelain=v2 --branch --show-stash")];case 1:if((h=u.sent()).error)return[2,h];E=(0,s.so)(h.output,"\0"),m=!0,v=!1,g=void 0;try{for(b=E[Symbol.iterator]();!(m=(y=b.next()).done);m=!0)(w=y.value).startsWith("#")?w.startsWith(c)?"(initial)"!==(S=w.substring(c.length))&&(n=S):w.startsWith(l)?"(detached)"!==(R=w.substring(l.length))&&(t=R):w.startsWith(f)?"(not queried)"!==(D=w.substring(f.length))&&(r={branch:D,ahead:0,behind:0}):w.startsWith(d)?r&&(I=(0,a.Z)(w.substring(d.length).split(" ").map((function(e){return Math.abs(parseInt(e,10))})),2),T=I[0],C=I[1],r.ahead=T,r.behind=C):w.startsWith(p)&&(i=parseInt(w.substring(p.length),10)):null!==(N=_(w))&&o.push(N)}catch(A){v=!0,g=A}finally{try{m||null==b.return||b.return()}finally{if(v)throw g}}return[2,{commit:n,branch:t,upstream:r,stashes:i,changes:o,error:null}]}}))}))).apply(this,arguments)}function _(e){var n=e[0];switch(e=e.substring(2),n){case r.IGNORED:return null;case r.UNTRACKED:return{type:{index:i.UNTRACKED,worktree:i.UNTRACKED},path:e,staged:!1,unmerged:!1};case r.UNMERGED:var t=e.match(m);if(!t)return null;var o=(0,a.Z)(t,12),u=o[1],s=o[2],c=o[11],l=b(u);return{type:{index:l,worktree:b(s)},path:c,staged:l!==i.UNMODIFIED,unmerged:!0};case r.ORDINARY:case r.RENAMED_OR_COPIED:var f=e.match(h);if(!f)return null;var d=(0,a.Z)(f,10),p=d[1],v=d[2],g=d[9],_=b(p),w=b(v),S=_!==i.UNMODIFIED;if(n===r.ORDINARY)return{type:{index:_,worktree:w},path:g,staged:S,unmerged:!1};if(n===r.RENAMED_OR_COPIED){var R=g.match(E);if(!R)return null;var D=(0,a.Z)(R,5),I=D[1],T=D[2],C=D[3],N=D[4];return{type:{index:_,worktree:w},path:C,staged:S,unmerged:!1,source:{type:y(I),score:parseInt(T,10),path:N}}}return null;default:return null}}function b(e){switch(e){case".":default:return i.UNMODIFIED;case"M":return i.MODIFIED;case"T":return i.TYPE_CHANGED;case"A":return i.ADDED;case"D":return i.DELETED;case"R":return i.RENAMED;case"C":return i.COPIED;case"U":return i.UNMERGED}}function y(e){switch(e){case"R":default:return i.RENAMED;case"C":return i.COPIED}}!function(e){e.ORDINARY="1",e.RENAMED_OR_COPIED="2",e.UNMERGED="u",e.UNTRACKED="?",e.IGNORED="!"}(r||(r={})),function(e){e.UNTRACKED="UNTRACKED",e.UNMODIFIED="UNMODIFIED",e.MODIFIED="MODIFIED",e.TYPE_CHANGED="TYPE_CHANGED",e.ADDED="ADDED",e.DELETED="DELETED",e.RENAMED="RENAMED",e.COPIED="COPIED",e.UNMERGED="UNMERGED"}(i||(i={}))},55607:function(e,n,t){t.d(n,{J:function(){return i},e:function(){return r}});var r=(0,t(82378).u)(null);function i(e,n,t){var i,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Date.now(),a=null!==(i=n.output)&&void 0!==i?i:"",u=n.error,s=t?o:Date.now(),c="".concat(o,"-").concat(Math.random());r.set({input:e,output:a,error:u,start:o,end:s,cached:t,key:c})}},23053:function(e,n,t){var r,i,o;t.d(n,{aq:function(){return r},dq:function(){return i},rG:function(){return o}}),function(e){e.UNKNOWN_NOT_GIT="UNKNOWN_NOT_GIT",e.UNKNOWN="UNKNOWN",e.NOT_INITIALIZED="NOT_INITIALIZED",e.UNAUTHENTICATED="UNAUTHENTICATED",e.INDEX_FILE_CORRUPT="INDEX_FILE_CORRUPT",e.UNKNOWN_REMOTE="UNKNOWN_REMOTE",e.INDEX_LOCKED="INDEX_LOCKED",e.NO_COMMITS="NO_COMMITS",e.PATH_MATCHED_NO_FILES="PATH_MATCHED_NO_FILES",e.USER_NOT_CONFIGURED="USER_NOT_CONFIGURED",e.INVALID_REFERENCE="INVALID_REFERENCE",e.BRANCH_ALREADY_EXISTS="BRANCH_ALREADY_EXISTS",e.MERGE_CONFLICT="MERGE_CONFLICT",e.UPSTREAM_NOT_SET="UPSTREAM_NOT_SET",e.HEAD_DETACHED="HEAD_DETACHED",e.DIRTY_WORKTREE="DIRTY_WORKTREE",e.PUSH_REJECTED="PUSH_REJECTED"}(r||(r={})),function(e){e.FS_CHANGE="FS_CHANGE",e.FORCED_REFRESH="FORCED_REFRESH",e.NEW_PROFILE="NEW_PROFILE",e.CHANGED_PROFILE="CHANGED_PROFILE"}(i||(i={})),function(e){e.REPLIT_DEFAULT="REPLIT_DEFAULT",e.GITHUB="GITHUB"}(o||(o={}))},9556:function(e,n,t){var r,i;t.d(n,{Z:function(){return i},z:function(){return r}}),function(e){e.INSTRUCTION_RESULT="INSTRUCTION_RESULT",e.TEST_RESULT="TEST_RESULT",e.ERROR="ERROR",e.STATE_CHANGED="STATE_CHANGED"}(r||(r={})),function(e){e[e.Idle=0]="Idle",e[e.Starting=1]="Starting",e[e.Ready=2]="Ready",e[e.Building=3]="Building",e[e.Running=4]="Running"}(i||(i={}))},11625:function(e,n,t){t.d(n,{D:function(){return o}});var r=t(1864),i=[{id:"abap",extensions:[".abap"]},{id:"aes",extensions:[".aes"]},{id:"apex",extensions:[".cls"]},{id:"azcli",extensions:[".azcli"]},{id:"bat",extensions:[".bat",".cmd"]},{id:"bibtex",extensions:[".bib",".bbl"]},{id:"bicep",extensions:[".bicep"]},{id:"c",extensions:[".c",".h"]},{id:"cameligo",extensions:[".mligo"]},{id:"clojure",extensions:[".clj",".cljs",".cljc",".edn"]},{id:"coffeescript",extensions:[".coffee"]},{id:"cpp",extensions:[".cpp",".cc",".cxx",".hpp",".hh",".hxx"]},{id:"csharp",extensions:[".cs",".csx",".cake"]},{id:"css",extensions:[".css"]},{id:"d",extensions:[".d"]},{id:"dart",extensions:[".dart"]},{id:"diff",extensions:[".diff",".patch"]},{id:"dockerfile",extensions:[".dockerfile"],filenames:["Dockerfile"]},{id:"ecl",extensions:[".ecl"]},{id:"ejs",extensions:[".ejs"]},{id:"elisp",extensions:[".el"]},{id:"elixir",extensions:[".ex",".exs"]},{id:"elm",extensions:[".elm"]},{id:"erlang",extensions:[".erl",".hrl"]},{id:"flow9",extensions:[".flow"]},{id:"forth",extensions:[".fth"]},{id:"fortran",extensions:[".f",".for",".f90"]},{id:"freemarker2",extensions:[".ftl",".ftlh",".ftlx"]},{id:"fsharp",extensions:[".fs",".fsi",".ml",".mli",".fsx",".fsscript"]},{id:"gitignore"},{id:"glsl",extensions:[".vert",".tesc",".tese",".geom",".frag",".comp",".glsl",".glslv",".glslf",".glslg"]},{id:"go",extensions:[".go"]},{id:"graphql",extensions:[".graphql",".gql"]},{id:"groovy",extensions:[".groovy",".gvy",".gy",".gsh"]},{id:"handlebars",extensions:[".handlebars",".hbs"]},{id:"haskell",extensions:[".hs",".lhs"]},{id:"hcl",extensions:[".tf",".tfvars",".hcl"]},{id:"html",extensions:[".html",".htm",".shtml",".xhtml",".mdoc",".jsp",".asp",".aspx",".jshtm"]},{id:"erb",extensions:[".erb",".rhtml",".rhtm"]},{id:"ini",extensions:[".ini",".properties",".gitconfig"],filenames:["config",".gitattributes",".gitconfig",".editorconfig"]},{id:"jade",extensions:[".jade",".pug"]},{id:"java",extensions:[".java",".jav"]},{id:"javascript",extensions:[".js",".es6",".jsx",".mjs",".cjs"],filenames:["jakefile"]},{id:"javascriptreact",extensions:[".jsx"]},{id:"json",extensions:[".json",".bowerrc",".jshintrc",".jscsrc",".eslintrc",".babelrc",".har"]},{id:"julia",extensions:[".jl"]},{id:"kotlin",extensions:[".kt",".kts"]},{id:"latext",extensions:[".tex"]},{id:"less",extensions:[".less"]},{id:"lexon",extensions:[".lex"]},{id:"liquid",extensions:[".liquid"]},{id:"lisp",extensions:[".lisp",".lsp",".l",".fasl"]},{id:"lua",extensions:[".lua"]},{id:"m3",extensions:[".m3",".i3",".mg",".ig"]},{id:"makefile",filenames:["Makefile","makefile","GNUmakefile"],extensions:[".mak",".MAKE"]},{id:"markdown",extensions:[".md",".markdown",".mdown",".mkdn",".mkd",".mdwn",".mdtxt",".mdtext"]},{id:"mips",extensions:[".s"]},{id:"msdax",extensions:[".dax",".msdax"]},{id:"nim",extensions:[".nim"]},{id:"objective-c",extensions:[".m"]},{id:"objective-cpp",extensions:[".mm"]},{id:"ocaml",extensions:[".ml",".mli"]},{id:"pascal",extensions:[".pas",".p",".pp"]},{id:"pascaligo",extensions:[".ligo"]},{id:"perl",extensions:[".pl"]},{id:"perl6",extensions:[".pl6",".p6",".pm6",".pod6",".t6",".raku",".rakumod",".rakutest"]},{id:"php",extensions:[".php",".php4",".php5",".phtml",".ctp"]},{id:"pla",extensions:[".pla"]},{id:"plaintext",extensions:[".txt"]},{id:"postiats",extensions:[".dats",".sats",".hats"]},{id:"powerquery",extensions:[".pq",".pqm"]},{id:"powershell",extensions:[".ps1",".psm1",".psd1"]},{id:"processing",extensions:[".pde"]},{id:"prolog",extensions:[".pro",".plg"]},{id:"proto",extensions:[".proto"]},{id:"python",extensions:[".py",".rpy",".pyw",".cpy",".gyp",".gypi"]},{id:"qsharp",extensions:[".qs"]},{id:"r",extensions:[".r",".rhistory",".rmd",".rprofile",".rt"]},{id:"razor",extensions:[".cshtml"]},{id:"reason",extensions:[".re",".rei"]},{id:"redis",extensions:[".redis"]},{id:"restructuredtext",extensions:[".rst"]},{id:"ruby",extensions:[".rb",".rbx",".rjs",".gemspec",".pp"],filenames:["rakefile","Gemfile"]},{id:"rust",extensions:[".rs",".rlib"]},{id:"sass",extensions:[".sass"]},{id:"sb",extensions:[".sb"]},{id:"scala",extensions:[".scala",".sc",".sbt"]},{id:"scheme",extensions:[".scm",".ss",".sch",".rkt"]},{id:"scss",extensions:[".scss"]},{id:"shellscript",extensions:[".sh",".bash"]},{id:"sol",extensions:[".sol"]},{id:"sparql",extensions:[".rq"]},{id:"sql",extensions:[".sql"]},{id:"st",extensions:[".st",".iecst",".iecplc",".lc3lib"]},{id:"svelte",extensions:[".svelte"]},{id:"swift",extensions:[".swift"]},{id:"systemverilog",extensions:[".sv",".svh"]},{id:"tcl",extensions:[".tcl"]},{id:"toml",extensions:[".toml"]},{id:"twig",extensions:[".twig"]},{id:"typescript",extensions:[".ts"]},{id:"typescriptreact",extensions:[".tsx"]},{id:"vb",extensions:[".vb"]},{id:"verilog",extensions:[".v",".vh"]},{id:"vue",extensions:[".vue"]},{id:"xml",extensions:[".xml",".dtd",".ascx",".csproj",".config",".wxi",".wxl",".wxs",".xaml",".svg",".svgz",".opf",".xsl"]},{id:"yaml",extensions:[".yaml",".yml"]}],o=function(e,n){var t=(0,r.extname)(e),o=(0,r.basename)(e),a=i.filter((function(e){var n,r;return(null===(n=e.extensions)||void 0===n?void 0:n.includes(t))||(null===(r=e.filenames)||void 0===r?void 0:r.includes(o))}));if(n){var u=a.find((function(e){return e.id===n.toLowerCase()}));if(u)return u.id}return a.length>0?a[0].id:null}},6725:function(e,n,t){var r=t(91674);n.Z=[r.cR.Array,r.cR.Boolean,r.cR.Class,r.cR.Constant,r.cR.Constructor,r.cR.Enum,r.cR.EnumMember,r.cR.Event,r.cR.Field,r.cR.File,r.cR.Function,r.cR.Interface,r.cR.Key,r.cR.Method,r.cR.Module,r.cR.Namespace,r.cR.Object,r.cR.Operator,r.cR.Package,r.cR.Property,r.cR.String,r.cR.Struct,r.cR.TypeParameter,r.cR.Variable]},8415:function(e,n,t){var r;t.d(n,{a:function(){return r}}),function(e){e.OFFLINE="OFFLINE",e.INITIALIZING="INITIALIZING",e.INITIALIZED="INITIALIZED",e.EXITING="EXITING",e.EXITED="EXITED"}(r||(r={}))},80437:function(e,n){n.Z={brand:{darkBlue:"#0D101E",lightBlue:"#68CDEE",gray:"#6D7D84"},main:{green:{dark:"#0A6640",default:"#0F9960",light:"#3DCC91",25:"rgba(15,153,96,0.25)",15:"rgba(15,153,96,0.15)"},red:{dark:"#A82A2A",default:"#DB3737",light:"#FF7373",25:"rgba(219, 55, 55, 0.25)",15:"rgba(219, 55, 55, 0.15)"},blue:{dark:"#0068AD",default:"#0097FB",light:"#73C4FA",25:"rgba(0, 151, 251, 0.25)",15:"rgba(0, 151, 251, 0.15)"},orange:{dark:"#A14809",default:"#E16D1A",light:"#FC9C58",25:"rgba(225, 109, 26, 0.25)",15:"rgba(225, 109, 26, 0.15)"},purple:{dark:"#6213B1",default:"#9D43F7",light:"#BF80FF",25:"rgba(98, 19, 177, 0.25)",15:"rgba(98, 19, 177, 0.15)"},gold:{dark:"#A67908",default:"#D99E0B",light:"#FFC940",25:"rgba(217, 158, 11, 0.25)",15:"rgba(217, 158, 11, 0.15)"}},neutrals:{black:"#21242C",white:"#FFFFFF",offWhite:"#F7F8FA",black64:"rgba(33, 36, 44, 0.64)",black50:"rgba(33, 36, 44, 0.50)",black16:"rgba(33, 36, 44, 0.16)",black8:"rgba(33, 36, 44, 0.08)",white64:"rgba(255, 255, 255, 0.64)",white50:"rgba(255, 255, 255, 0.50)",white16:"rgba(255, 255, 255, 0.16)",white8:"rgba(255, 255, 255, 0.08)"},multiplayer:{green:"#1BC47D",red:"#EF5533",blue:"#18A0FB",purple:"#907CFF",teal:"#00B5CE",pink:"#EE46D3"},languages:{java:"#b07219",scheme:"#1e4aec",clojure:"#db5855",haskell:"#5e5086",lua:"#000080",ruby:"#701516",python:"#3572A5",go:"#00ADD8",cpp:"#f34b7d",c:"#555555","c#":"#178600","f#":"#b845fc",rust:"#dea584",swift:"#ffac45",r:"#198CE7",bash:"#000000",crystal:"#000100",julia:"#a270ba",elixir:"#6e4a7e",nim:"#37775b",dart:"#00B4AB",erlang:"#B83998",typescript:"#2b7489",elisp:"#c065db",sql:"#e34c26",php:"#4F5D95",html:"#e34c26",css:"#563d7c",javascript:"#f1e05a"},brands:{github:"#181717",twitter:"#00A8FF",discord:"#7289DA",facebook:"#3B5998",linkedin:"#0077B5"}}},6695:function(e,n,t){t.d(n,{s:function(){return u}});var r=t(32692),i=t(31230),o=t(16092);function a(){var e=(0,r.Z)(["\n  fragment WorkspaceHeaderReplMetadataRepl on Repl {\n    id\n    title\n    iconUrl\n    user {\n      id\n      ...UserLinkUser\n    }\n  }\n  ","\n"]);return a=function(){return e},e}var u=(0,i.Ps)(a(),o._)},39571:function(e,n,t){function r(e){return e.startsWith("/")?e:null}function i(e){var n=r(e);if(null===n)throw new Error("Expected an absolute path but got ".concat(e));return n}function o(e){return e.startsWith("/home/runner/")?e.split("/").slice(4).join("/"):null}t.d(n,{IT:function(){return r},ZF:function(){return i},om:function(){return o}})},8347:function(e,n,t){t.d(n,{m:function(){return r}});var r=function(e){return e&&e.args?(e.args&&e.args.length>=3&&"sh"===e.args[0]&&"-c"===e.args[1]?e.args.slice(2):e.args).join(" "):""}},58523:function(e,n,t){t.d(n,{$0:function(){return h},D3:function(){return o},EX:function(){return c},If:function(){return i},Jk:function(){return E},KQ:function(){return r},MY:function(){return u},SD:function(){return f},cU:function(){return s},lw:function(){return d},qR:function(){return a},w2:function(){return p},xz:function(){return l}});var r=function(e){return{op:"add",path:"run",value:JSON.stringify(e)}},i=function(e){return{op:"add",path:"entrypoint",value:JSON.stringify(e)}},o=function(e){return{op:"add",path:"compile",value:JSON.stringify(e)}},a=function(e){return{op:"add",path:"onBoot",value:JSON.stringify(e)}},u=function(e){return{op:"add",path:"unitTest/language",value:JSON.stringify(e)}},s=function(e){return{op:"add",path:"nix/channel",value:JSON.stringify(e)}},c=function(e){return{op:"add",path:"env",value:JSON.stringify(e)}},l=function(e){return{op:"remove",path:"string"===typeof e?e:e.join("/"),value:""}},f=function(e){return{op:"add",path:"debugger",value:JSON.stringify(e)}},d=function(e){return{op:"add",path:"interpreter",value:JSON.stringify(e)}},p=function(e){return{op:"add",path:"packager",value:JSON.stringify(e)}},h=function(e){return{op:"add",path:"auth/pageEnabled",value:JSON.stringify(e)}},E=function(e){return{op:"add",path:"auth/buttonEnabled",value:JSON.stringify(e)}}},41847:function(e,n,t){t.d(n,{Z:function(){return s}});var r,i=t(34727),o=t(70655);!function(e){e.CHANNEL_OPENED="CHANNEL_OPENED",e.OUTPUT_RECEIVED="OUTPUT_RECEIVED",e.STDERR_RECEIVED="STDERR_RECEIVED",e.STATE_CHANGED="STATE_CHANGED"}(r||(r={}));var a=t(1672),u=t(50055);function s(e){var n=e.container,t=(0,a.ZP)(),s=null,c=!1;function l(){return f.apply(this,arguments)}function f(){return(f=(0,i.Z)((function(){return(0,o.__generator)(this,(function(e){if(c)throw new Error("closed");return s?[2,s]:[2,new Promise((function(e){t.once(r.CHANNEL_OPENED,(function(n){e(n)}))}))]}))}))).apply(this,arguments)}var d="",p="",h=n.openChannel({service:"exec"},(function(e){var n=e.error,i=e.channel;if(!n){if(!i)throw new Error("Expected channel");var o=!1;return i.onCommand((function(e){if(null!=e.output)d+=e.output,t.emit(r.OUTPUT_RECEIVED,e.output);else if(null!=e.stderr)p+=e.stderr,t.emit(r.STDERR_RECEIVED,e.stderr);else if(null!=e.state){if(!o)return void(o=!0);t.emit(r.STATE_CHANGED,{state:e.state,outputBuffer:d,stderrBuffer:p}),e.state===u.api.State.Stopped&&(d="",p="")}})),s=i,t.emit(r.CHANNEL_OPENED,i),function(){s=null}}}));return{request:function(){var e=(0,i.Z)((function(e){var n,t,r,i;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return n=e.env,t=e.args,r=e.splitStderr,i=void 0!==r&&r,[4,l()];case 1:return[2,o.sent().request({exec:{env:n,args:t,lifecycle:u.api.Exec.Lifecycle.BLOCKING,splitStderr:i}})]}}))}));return function(n){return e.apply(this,arguments)}}(),onOutput:function(e){return t.on(r.OUTPUT_RECEIVED,e),function(){t.off(r.OUTPUT_RECEIVED,e)}},onStderr:function(e){return t.on(r.STDERR_RECEIVED,e),function(){t.off(r.STDERR_RECEIVED,e)}},onStateChanged:function(e){return t.on(r.STATE_CHANGED,e),function(){t.off(r.STATE_CHANGED,e)}},getStatus:function(){return s?s.status:"closed"},dispose:function(){c=!0,h(),s=null}}}}}]);
//# sourceMappingURL=9131-40f4fdd0383bdd17.js.map