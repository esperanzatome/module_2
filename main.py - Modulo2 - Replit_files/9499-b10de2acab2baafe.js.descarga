"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9499,3699],{65632:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(35944),i=n(60357),o=n.n(i),a=(n(67294),n(94184)),l=n.n(a);function c(e){var t=e.unreadDot,n=e.size,i=void 0===n?12:n,a=e.count,c=void 0===a?null:a,s=c&&c>99,u=s?"99+":null===c||void 0===c?void 0:c.toString();return(0,r.BX)("span",{className:"jsx-1c7f3b9066c4c334",children:[(0,r.tZ)("svg",{width:i,height:i,viewBox:"0 0 24 24",fill:"none",style:{color:"currentColor"},xmlns:"http://www.w3.org/2000/svg",className:"jsx-1c7f3b9066c4c334",children:(0,r.tZ)("path",{d:"M21 15C21 15.5304 20.7893 16.0391 20.4142 16.4142C20.0391 16.7893 19.5304 17 19 17H7L3 21V5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H19C19.5304 3 20.0391 3.21071 20.4142 3.58579C20.7893 3.96086 21 4.46957 21 5V15Z",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",className:"jsx-1c7f3b9066c4c334"})}),t?(0,r.tZ)("div",{className:"jsx-1c7f3b9066c4c334 unread-indicator"}):null,Boolean(c)&&(0,r.tZ)("div",{className:"jsx-1c7f3b9066c4c334 "+(l()("count",{overflow:s})||""),children:u}),(0,r.tZ)(o(),{id:"1c7f3b9066c4c334",children:"span.jsx-1c7f3b9066c4c334{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex}.unread-indicator.jsx-1c7f3b9066c4c334{width:5px;height:5px;-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:10px;background-color:var(--accent-red-default);-webkit-transform:translate(8px,-1px);-moz-transform:translate(8px,-1px);-ms-transform:translate(8px,-1px);-o-transform:translate(8px,-1px);transform:translate(8px,-1px);position:absolute}.count.jsx-1c7f3b9066c4c334{-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:10px;background-color:var(--accent-negative-default);-webkit-transform:translate(50%,-50%);-moz-transform:translate(50%,-50%);-ms-transform:translate(50%,-50%);-o-transform:translate(50%,-50%);transform:translate(50%,-50%);position:absolute;min-width:16px;padding:2px 3px;height:16px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;color:white;font-size:var(--font-size-small)}.overflow.jsx-1c7f3b9066c4c334{-webkit-transform:translate(25%,-50%);-moz-transform:translate(25%,-50%);-ms-transform:translate(25%,-50%);-o-transform:translate(25%,-50%);transform:translate(25%,-50%)}"})]})}},6801:function(e,t,n){n.d(t,{AS:function(){return _},Hj:function(){return B},Rp:function(){return D},Tt:function(){return U},gE:function(){return P},j7:function(){return C},xT:function(){return T},yi:function(){return S}});var r=n(14251),i=n(32692),o=n(31230),a=n(37887),l=n(50319),c=n(75436);function s(){var e=(0,i.Z)(["\n  fragment AnnotationsUser on User {\n    id\n    username\n    image\n  }\n"]);return s=function(){return e},e}function u(){var e=(0,i.Z)(["\n  fragment AnnotationMessageContent on MessageContentType {\n    __typename\n    ... on TextMessageContentType {\n      text\n    }\n    ... on PreviewMessageContentType {\n      preview\n    }\n    ... on StatusMessageContentType {\n      status\n    }\n  }\n"]);return u=function(){return e},e}function d(){var e=(0,i.Z)(["\n  fragment AnnotationsUIMessage on AnnotationMessage {\n    id\n    user {\n      id\n      ...AnnotationsUser\n    }\n    anchor {\n      id\n    }\n    timeCreated\n    content {\n      __typename\n      ...AnnotationMessageContent\n    }\n    currentUserIsAuthor\n    seen\n  }\n  ","\n  ","\n"]);return d=function(){return e},e}function f(){var e=(0,i.Z)(["\n  fragment AnnotationsUIAnchor on AnnotationAnchor {\n    id\n    user {\n      id\n      ...AnnotationsUser\n    }\n    path\n    otVersion\n    indexStart\n    indexEnd\n    isResolved\n    isGeneral\n    messages {\n      id\n      ...AnnotationsUIMessage\n    }\n  }\n  ","\n  ","\n"]);return f=function(){return e},e}function p(){var e=(0,i.Z)(["\n  query AnnotationAnchorsByRepl($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        annotationAnchors {\n          id\n          ...AnnotationsUIAnchor\n        }\n      }\n    }\n    currentUser {\n      id\n      username\n      image\n    }\n  }\n  ","\n"]);return p=function(){return e},e}function h(){var e=(0,i.Z)(["\n  mutation CreateAnnotationAnchor(\n    $annotationAnchor: AnnotationAnchorInput!\n    $annotationMessage: AnnotationMessageInput\n    $highlight: AnnotationHighlightInput\n  ) {\n    createAnnotationAnchor(\n      annotationAnchor: $annotationAnchor\n      annotationMessage: $annotationMessage\n      highlight: $highlight\n    ) {\n      ... on UserError {\n        message\n      }\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n    }\n  }\n  ","\n"]);return h=function(){return e},e}function v(){var e=(0,i.Z)(["\n  mutation UpdateAnnotationAnchor(\n    $id: String!\n    $changes: AnnotationAnchorChangesInput!\n  ) {\n    updateAnnotationAnchor(id: $id, changes: $changes) {\n      ... on UserError {\n        message\n      }\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n    }\n  }\n  ","\n"]);return v=function(){return e},e}function m(){var e=(0,i.Z)(["\n  mutation CreateAnnotationMessage(\n    $replId: String!\n    $anchorId: String!\n    $annotationMessage: AnnotationMessageInput!\n    $highlight: AnnotationHighlightInput\n  ) {\n    createAnnotationMessage(\n      replId: $replId\n      anchorId: $anchorId\n      annotationMessage: $annotationMessage\n      highlight: $highlight\n    ) {\n      ... on UserError {\n        message\n      }\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n    }\n  }\n  ","\n"]);return m=function(){return e},e}function g(){var e=(0,i.Z)(["\n  mutation updateThreadPreview(\n    $threadId: String!\n    $messageId: String!\n    $message: String\n  ) {\n    updateThreadPreview(\n      threadId: $threadId\n      messageId: $messageId\n      message: $message\n    )\n  }\n"]);return g=function(){return e},e}function y(){var e=(0,i.Z)(["\n  subscription AnnotationUpdates($replId: String!) {\n    updatedAnnotation: annotationUpdatesByRepl(replId: $replId) {\n      id\n      ...AnnotationsUIAnchor\n    }\n  }\n  ","\n"]);return y=function(){return e},e}function Z(){var e=(0,i.Z)(["\n  subscription MessagePreview($threadId: String!) {\n    threadPreview(threadId: $threadId) {\n      userId\n      messageId\n      message\n    }\n  }\n"]);return Z=function(){return e},e}var b={},w=(0,o.Ps)(s()),x=(0,o.Ps)(u()),E=(0,o.Ps)(d(),w,x),C=(0,o.Ps)(f(),w,E),S=(0,o.Ps)(p(),C);function T(e){var t=(0,r.Z)({},b,e);return a.a(S,t)}var k=(0,o.Ps)(h(),C);function _(e){var t=(0,r.Z)({},b,e);return l.D(k,t)}var R=(0,o.Ps)(v(),C);function D(e){var t=(0,r.Z)({},b,e);return l.D(R,t)}var I=(0,o.Ps)(m(),C);function P(e){var t=(0,r.Z)({},b,e);return l.D(I,t)}var G=(0,o.Ps)(g());function B(e){var t=(0,r.Z)({},b,e);return l.D(G,t)}var A=(0,o.Ps)(y(),C);function U(e){var t=(0,r.Z)({},b,e);return c.m(A,t)}Z()},24957:function(e,t,n){n.d(t,{Ft:function(){return f},Vy:function(){return v},kL:function(){return h}});var r=n(34727),i=n(9941),o=n(70655),a=n(67294),l=n(64487),c=n(78120);function s(e,t,n){return u.apply(this,arguments)}function u(){return(u=(0,r.Z)((function(e,t,n){var r;return(0,o.__generator)(this,(function(i){switch(i.label){case 0:return e.path&&"number"===typeof e.indexStart&&"number"===typeof e.indexEnd&&e.otVersion?n===e.otVersion?[2,{path:e.path,indexStart:e.indexStart,indexEnd:e.indexEnd,otVersion:e.otVersion}]:[4,t({indexStart:e.indexStart,indexEnd:e.indexEnd,versionFrom:e.otVersion,versionTo:n})]:[2];case 1:return r=i.sent(),[2,{path:e.path,indexStart:r.indexStart,indexEnd:r.indexEnd,otVersion:n}]}}))}))).apply(this,arguments)}var d=n(99408);function f(e){return p.apply(this,arguments)}function p(){return(p=(0,r.Z)((function(e){var t,n,r,i,a;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return t=e.anchor,n=e.version,r=e.transformSelection,i=e.content,t.path?[4,s(t,r,n)]:[2,null];case 1:return(a=o.sent())?[2,{anchor:t,newSelection:a,newPosition:undefined,getHighlight:function(){if(a){var e=a.indexStart,t=a.indexEnd;try{var n=c.xv.of(i.split("\n")),r=n.lineAt(e),o=n.lineAt(t),s=n.sliceString(n.line(Math.max(r.number-2,1)).from,e),u=n.sliceString(t,n.line(Math.min(o.number+2,n.lines)).to);return{precode:s,code:n.sliceString(e,t),postcode:u}}catch(d){l.Tb(d)}}},getSnippet:function(){try{for(var e=c.xv.of(i.split("\n")),t=e.lineAt(a.indexStart),n=e.lineAt(a.indexEnd),r=[],o=t.number===n.number?Math.max(0,t.number-1):t.number,s=Math.min(e.lines,n.number+1),u=o;u<=s;u++)r.push(e.line(u).text);return{startLineNumber:o,lines:r}}catch(d){l.Tb(d)}}}]:[2,null]}}))}))).apply(this,arguments)}function h(e){var t=(0,d.Z)().fs,n=a.useRef(null),r=a.useRef(null),o=(0,i.Z)(a.useState(!1),2),l=o[0],c=o[1];return a.useEffect((function(){if(e){var i=function(){r.current=null,c(!1)},o=t.watchTextFile(e,{onReady:function(e){var t=e.transformSelection,i=e.initialContent;n.current=i.toString(),r.current=t,c(!0)},onMoveOrDelete:function(){i()},onError:function(){i()},onChange:function(e){var t=e.latestContent;n.current=t}});return function(){i(),o()}}}),[e,t]),{contentRef:n,transformSelectionRef:r,loadedFile:l}}function v(e){var t=(0,d.Z)().fs,n=(0,i.Z)(a.useState(null),2),r=n[0],o=n[1],l=h(null===e||void 0===e?void 0:e.path),c=l.contentRef,s=l.loadedFile,u=l.transformSelectionRef;return a.useEffect((function(){(null===e||void 0===e?void 0:e.path)&&s&&u.current&&null!==c.current&&f({anchor:e,version:t.getOTVersion(e.path),transformSelection:u.current,content:c.current}).then((function(e){o(e)})).catch((function(){o(null)}))}),[t,e,s]),r}},20934:function(e,t,n){n.d(t,{Q:function(){return o},c:function(){return i}});var r=n(7182),i=(0,r.cn)(!1),o=(0,r.cn)(null)},36764:function(e,t,n){n.d(t,{n:function(){return u}});var r=n(14251),i=n(32692),o=n(31230),a=n(50319);function l(){var e=(0,i.Z)(["\n  mutation MarkMessagesAsSeen(\n    $replId: String!\n    $threadId: String\n    $messageIds: [String!]\n  ) {\n    markMessagesAsSeen(\n      replId: $replId\n      threadId: $threadId\n      messageIds: $messageIds\n    ) {\n      ... on AnnotationMessageList {\n        messages {\n          id\n          seen\n        }\n      }\n    }\n  }\n"]);return l=function(){return e},e}var c={},s=(0,o.Ps)(l());function u(e){var t=(0,r.Z)({},c,e);return a.D(s,t)}},83223:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(9941),i=n(67294),o=n(63377),a=n(36764);function l(e){var t=(0,o.Z)(),n=(0,r.Z)((0,a.n)(),1)[0];i.useEffect((function(){if(e){var r=e.messages.filter((function(e){return!e.seen})).map((function(e){return e.id}));0!==r.length&&n({variables:{replId:t,threadId:e.id,messageIds:r},optimisticResponse:{markMessagesAsSeen:{messages:r.map((function(e){return{id:e,seen:!0,__typename:"AnnotationMessage"}})),__typename:"AnnotationMessageList"}}})}}),[t,e,n])}},30827:function(e,t,n){n.d(t,{Z:function(){return d}});var r=n(14251),i=n(32692),o=n(31230),a=n(37887);function l(){var e=(0,i.Z)(["\n  query ThreadReplCollaborators($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        owner {\n          ... on User {\n            id\n            username\n            image\n          }\n          ... on Team {\n            id\n            username\n            image\n          }\n        }\n        permissions {\n          id\n          user {\n            id\n            username\n            image\n          }\n        }\n      }\n    }\n  }\n"]);return l=function(){return e},e}var c={},s=(0,o.Ps)(l());var u=n(63377);function d(){var e,t=function(e){var t=(0,r.Z)({},c,e);return a.a(s,t)}({variables:{replId:(0,u.Z)()}}).data;if("Repl"!==(null===t||void 0===t?void 0:t.repl.__typename))return[];var n=[];(null===(e=t.repl.owner)||void 0===e?void 0:e.username)&&"User"===t.repl.owner.__typename&&n.push(t.repl.owner);var i=!0,o=!1,l=void 0;try{for(var d,f=t.repl.permissions[Symbol.iterator]();!(i=(d=f.next()).done);i=!0){var p,h=d.value;(null===(p=h.user)||void 0===p?void 0:p.username)&&n.push(h.user)}}catch(v){o=!0,l=v}finally{try{i||null==f.return||f.return()}finally{if(o)throw l}}return n}},50119:function(e,t,n){n.d(t,{s:function(){return v},t:function(){return g}});var r=n(35944),i=n(73935),o=n(19353),a=n(98547),l=n(85062),c=n(2428),s=n(24888),u=n(91082),d=n(46038),f=n(90328),p=n(62260),h=n(65967),v=(0,n(48444)._C)({keyword:o.Z,constant:a.Z,class:d.Z,interface:f.Z,function:l.Z,method:l.Z,variable:c.Z,file:s.Z,field:s.Z,property:u.Z,type:p.Z,namespace:h.Z});function m(e){var t=e.size;return(0,r.tZ)("span",{css:{width:t,height:t},children:"\xa0"})}var g={render:function(e){var t,n=document.createElement("span"),o=null!==(t=v.get(e.type))&&void 0!==t?t:m;return i.render((0,r.tZ)("span",{className:"cm-autocomplete-replit-icon",children:(0,r.tZ)(o,{size:12})}),n),n},position:20}},47860:function(e,t,n){n.d(t,{S:function(){return o}});var r=n(58823),i=n(91674);function o(e,t,n){if(i.mY.is(e))t.request.executeCommand(e.command,e.arguments);else{var o=e.edit,a=e.command;if(o&&(0,r.w)({edit:o,fs:n,client:t}),a&&"java.apply.workspaceEdit"===a.command&&a.arguments){var l=!0,c=!1,s=void 0;try{for(var u,d=a.arguments[Symbol.iterator]();!(l=(u=d.next()).done);l=!0){var f=u.value;i.Db.is(f)&&(0,r.w)({edit:f,fs:n,client:t})}}catch(p){c=!0,s=p}finally{try{l||null==d.return||d.return()}finally{if(c)throw s}}}a&&t.request.executeCommand(a.command,a.arguments)}}},95984:function(e,t,n){n.d(t,{R$:function(){return ee},Wo:function(){return Q},D2:function(){return z},XZ:function(){return ne},JJ:function(){return Y},sN:function(){return ie},ZP:function(){return re},s3:function(){return J}});var r=n(67573),i=n(14251),o=n(52875),a=n(9941),l=n(35944),c=n(67294),s=n(81255),u=n(1144),d=n(69346),f=n(17556),p=n(7286),h=n(87653),v=n(64080),m=n(88808),g=n(86514),y=n(75026),Z=n(96659),b=n(41034),w=n(8527),x=n(46702),E=n(93160),C=n(33279),S=n(43530),T=n(17713),k=n(87514),_=n(79688),R=n(64487),D=n(60977),I=n(44044),P=n(55528),G=n(99408),B=n(77365),A=n(29163),U=n(51995),O=n(8941),N=n(40381),L=n(41656),F=n(93058),X=n(15682),M=n(44676),W=n(37424),j=n(47860);function H(e){var t=e.view,n=e.metadata,r=e.closeMenu,i=n.text,o=n.icon,f=(0,F.Z)().showError,p=c.useRef(!1),h=(0,a.Z)(c.useState(!1),2),v=h[0],m=h[1],g=(0,a.Z)(c.useState(null),2),y=g[0],Z=g[1],b=(0,G.Z)().fs,w=(0,N.Z)(),x=(0,P.Z)(w||""),E=(0,W.H)(),C=E("label"),S=E("menu"),T=c.useRef(null),k=(0,a.Z)((0,X.XZ)(T,!1),4),_=(k[0],k[1]),H=k[2],z=k[3];return(0,X.Ym)(_,T),c.useEffect((function(){if(x&&w&&v&&x.isOpen(w)&&!p.current){var e=t.state,n=e.selection.main,r={start:(0,L.s)(e.doc,n.from),end:(0,L.s)(e.doc,n.to)};p.current=!0,x.request.codeActions(w,r).then((function(e){if((0,D.j)(D.U3.EDITOR_CONTEXT_MENU_CODE_ACTIONS_REQUESTED,{success:!("error"in e),numActions:"result"in e&&e.result?e.result.length:null}),"error"in e)return p.current=!1,Z([]),f("Something went wrong fetching code actions"),void R.Tb(new Error(e.error.message));null!==e.result&&0!==e.result.length?Z(e.result):Z([])}))}}),[x,v,w,y,t,f]),(0,l.BX)(d.G,{tag:"li",onClick:function(e){e.stopPropagation(),m((function(e){return!e}))},children:[(0,l.BX)(d.G,{css:[I.gU.listItem,s.l0.p(8),s.l0.flex.row,s.l0.align.center],children:[o,(0,l.tZ)(d.G,{css:[s.l0.pl(8)],children:(0,l.tZ)(u.x,{id:C,children:i})}),(0,l.tZ)(d.G,{css:[s.l0.position.absolute,s.l0.right(4)],children:(0,l.tZ)(A.h,{alt:"Toggle Code Actions",tooltipHidden:!0,"aria-expanded":v,"aria-controls":S,onClick:function(){z(),m((function(e){return!e}))},innerRef:T,onKeyDown:H,children:(0,l.tZ)(O.Z,{rotate:v?90:0,style:{transition:"200ms ease"}})})})]}),v&&!y?(0,l.BX)(d.G,{css:[s.l0.p(8),s.l0.flex.row,s.l0.align.center],children:[(0,l.tZ)(u.x,{color:"dimmer",children:"Loading actions..."}),(0,l.tZ)(d.G,{css:[s.l0.align.center,s.l0.justify.center,s.l0.position.absolute,s.l0.right(4),s.l0.width(24),s.l0.height(24)],children:(0,l.tZ)(B.Z,{})})]}):null,v&&y&&x?(0,l.BX)(d.G,{tag:"ul",role:"menubar","aria-orientation":"vertical","aria-labelledby":C,id:S,children:[y.map((function(e,t){return(0,l.tZ)(M.Z,{onClick:function(){(0,j.S)(e,x,b),r()},children:(0,l.tZ)(d.G,{css:[I.gU.listItem,s.l0.p(8),s.l0.flex.row,s.l0.align.center],children:(0,l.BX)(d.G,{css:[s.l0.flex.row,s.l0.justify.spaceBetween,s.l0.width("100%")],children:[(0,l.tZ)(u.x,{css:[s.l0.maxWidth("90%")],children:e.title}),(0,l.tZ)(d.G,{tag:"span",children:(0,l.tZ)(U.Z,{size:12})})]})})},t)})),0===y.length?(0,l.tZ)(d.G,{css:[s.l0.p(8),s.l0.flex.row,s.l0.align.center],children:(0,l.tZ)(u.x,{color:"dimmer",children:"No actions available"})}):null]}):null]})}var z,V,q=n(77836),K=n(7474),$=n(15085),Y="Divider";!function(e){e.Cut="Cut",e.Copy="Copy",e.Paste="Paste",e.JumpToDefinition="JumpToDefinition",e.JumpToTypeDefinition="JumpToTypeDefinition",e.JumpToImplementation="JumpToImplementation",e.FindReferences="FindReferences",e.Rename="Rename",e.SelectAllOccurrences="SelectAllOccurrences",e.CodeActions="CodeActions",e.CopyLinkToPos="CopyLinkToPos",e.ToggleBreakpoint="ToggleBreakpoint",e.StartThread="StartThread",e.ExplainCode="ExplainCode",e.GenerateCode="GenerateCode",e.TransformCode="TransformCode",e.SearchCode="SearchCode"}(z||(z={}));var Q=(V={},(0,r.Z)(V,z.Cut,{text:"Cut",icon:(0,l.tZ)(Z.Z,{}),keyboardShortcut:{cmdOrCtrlKey:!0,key:"X"}}),(0,r.Z)(V,z.Copy,{text:"Copy",icon:(0,l.tZ)(b.Z,{}),keyboardShortcut:{cmdOrCtrlKey:!0,key:"C"}}),(0,r.Z)(V,z.Paste,{text:"Paste",icon:(0,l.tZ)(w.Z,{}),keyboardShortcut:{cmdOrCtrlKey:!0,key:"V"}}),(0,r.Z)(V,z.JumpToDefinition,{text:"Jump to definition",icon:(0,l.tZ)(x.Z,{}),keyboardShortcut:{cmdOrCtrlKey:!0,key:"F12"}}),(0,r.Z)(V,z.JumpToTypeDefinition,{text:"Jump to type definition",icon:(0,l.tZ)(k.Z,{})}),(0,r.Z)(V,z.JumpToImplementation,{text:"Jump to implementation",icon:(0,l.tZ)(_.Z,{})}),(0,r.Z)(V,z.FindReferences,{text:"Find references",icon:(0,l.tZ)(h.Z,{}),keyboardShortcut:{shiftKey:!0,key:"F12"}}),(0,r.Z)(V,z.Rename,{text:"Rename all occurrences",icon:(0,l.tZ)(v.Z,{}),keyboardShortcut:{key:"F2"}}),(0,r.Z)(V,z.SelectAllOccurrences,{text:"Select all occurrences",icon:(0,l.tZ)(p.Z,{}),keyboardShortcut:{key:"F2",cmdOrCtrlKey:!0}}),(0,r.Z)(V,z.CodeActions,{text:"Code actions",icon:(0,l.tZ)(T.Z,{}),keyboardShortcut:{key:".",cmdOrCtrlKey:!0}}),(0,r.Z)(V,z.CopyLinkToPos,{text:"Copy link to position",icon:(0,l.tZ)(m.Z,{})}),(0,r.Z)(V,z.ToggleBreakpoint,{text:"Toggle breakpoint",icon:(0,l.tZ)(g.Z,{})}),(0,r.Z)(V,z.StartThread,{text:"Start thread",icon:(0,l.tZ)(y.Z,{}),keyboardShortcut:{key:"/",altKey:!0}}),(0,r.Z)(V,z.ExplainCode,{text:"Explain code",icon:(0,l.tZ)(S.Z,{})}),(0,r.Z)(V,z.GenerateCode,{text:"Generate code",icon:(0,l.tZ)(q.Z,{}),keyboardShortcut:{key:"g",altKey:!0}}),(0,r.Z)(V,z.TransformCode,{text:"Transform code",icon:(0,l.tZ)(K.Z,{}),keyboardShortcut:{key:"t",altKey:!0}}),(0,r.Z)(V,z.SearchCode,{text:"Search code",icon:(0,l.tZ)(h.Z,{})}),V);function J(e){return e===Y}var ee=35;function te(e){var t=e.dom,n=e.verticalOffset,r=e.coords,i=r.x,o=r.y,a=t.getBoundingClientRect().bottom,l=document.documentElement.clientWidth;if(i+275>l&&(i=l-275-5),o+n>a){var c=o-n;return c<0?{x:i+5,y:0}:{x:i,y:c}}return{x:i,y:o}}function ne(e){var t=e.view,n=e.coords,r=e.closeMenu,i=e.verticalOffset,o=e.children,u=e.width,p=void 0===u?275:u,h=t.dom,v=(0,f.Z)(r,[]),m=(0,a.Z)(c.useState((function(){return te({dom:h,verticalOffset:i,coords:n})})),2),g=m[0],y=g.x,Z=g.y,b=m[1];return c.useEffect((function(){b(te({dom:h,verticalOffset:i,coords:n}))}),[n,i,h]),(0,l.tZ)(E.T,{innerRef:v,background:"higher",className:"cm-custom-context-menu",css:[s.l0.position.fixed,s.l0.flex.column,s.l0.justify.center,s.l0.borderRadius(8),s.l0.shadow(1),s.l0.width(p),s.l0.zIndex(101),{border:"1px solid ".concat(s.TV.outlineDimmest)},{left:y,top:Z}],children:(0,l.tZ)($.ZP,{children:(0,l.tZ)(X.uP,{options:{direction:"vertical"},children:(0,l.tZ)(d.G,{tag:"ul",role:"menubar","aria-orientation":"vertical","aria-label":"Context",children:o})})})})}function re(e){var t=e.view,n=e.closeMenu,r=e.actions,a=e.onAction,c=r.filter((function(e){switch(e){case z.TransformCode:case z.ExplainCode:return!t.state.selection.main.empty;case z.StartThread:return 0!==t.state.doc.length;default:return!0}})),s=c.map((function(e){return J(e)?1:ee})).reduce((function(e,t){return e+t}),0);return(0,l.tZ)(ne,(0,o.Z)((0,i.Z)({verticalOffset:s},e),{children:c.map((function(e,r){return J(e)?(0,l.tZ)(d.G,{css:[{borderBottom:"1px solid var(--background-highest)"}]},r):e===z.CodeActions?(0,l.tZ)(H,{view:t,closeMenu:n,metadata:Q[e]},e):(0,l.tZ)(M.Z,{onClick:function(){a(e),n()},isFirst:0===r,isLast:r===c.length-1,children:(0,l.tZ)(oe,{item:e,isFirst:0===r,isLast:r===c.length-1})},e)}))}))}function ie(e){var t=e.children,n=e.isFirst,r=e.isLast,i=e.item;return(0,l.tZ)(d.G,{"data-cy":i?"context-menu-".concat(i):null,css:[s.l0.p(8),s.l0.flex.row,s.l0.align.center,n&&{borderRadius:"inherit"},r&&{borderRadius:"inherit"}],children:t})}function oe(e){var t=e.item,n=e.isFirst,r=e.isLast,i=Q[t],o=i.text,a=i.icon,c=i.keyboardShortcut;return(0,l.BX)(ie,{item:t,isFirst:n,isLast:r,children:[a,(0,l.tZ)(d.G,{css:[s.l0.px(8)],children:(0,l.tZ)(u.x,{children:o})}),c?(0,l.tZ)(d.G,{css:[s.l0.position.absolute,s.l0.right(4)],children:(0,l.tZ)(C.Z,{shortcut:c,small:!0,hideBorder:!0})}):null]})}},44676:function(e,t,n){var r=n(9941),i=n(35944),o=n(15682),a=n(59641),l=n(67294),c=a.KD.button;t.Z=function(e){var t=e.onClick,n=e.children,s=e.isFirst,u=e.isLast,d=l.useRef(null),f=(0,r.Z)((0,o.XZ)(d,!1),4),p=f[0],h=f[1],v=f[2],m=f[3];return(0,o.Ym)(h,d),(0,i.tZ)(c,{ref:d,role:"menuitem",css:[a.l0.reset.button,a.gU.listItem,s&&{borderTopLeftRadius:4,borderTopRightRadius:4},u&&{borderBottomLeftRadius:4,borderBottomRightRadius:4}],onClick:function(e){m(),t(e)},onKeyDown:v,tabIndex:p,children:n})}},29542:function(e,t,n){n.d(t,{v:function(){return p}});var r=n(43186),i=n(90694),o=n(58222),a=n(14251),l=n(32692),c=n(31230),s=n(37887);function u(){var e=(0,l.Z)(['\n  query ChatEngine {\n    currentUser {\n      id\n      defaultEngine: gateVariation(feature: "flag-ghostwriter-chat-engine")\n      hasOverride: gate(feature: "flag-ghostwriter-chat-engine-override")\n    }\n  }\n']);return u=function(){return e},e}var d={},f=(0,c.Ps)(u());function p(){var e,t,n,l=(0,r.Z)().preferences,c=function(e){var t=(0,a.Z)({},d,e);return s.a(f,t)}().data,u=null===c||void 0===c||null===(e=c.currentUser)||void 0===e?void 0:e.hasOverride,p=null===l||void 0===l?void 0:l.chatEngine;return u&&p&&i.ce.includes(p)?p:null!==(n=null===c||void 0===c||null===(t=c.currentUser)||void 0===t?void 0:t.defaultEngine)&&void 0!==n?n:o.Fp}},50908:function(e,t,n){n.d(t,{B2:function(){return s},NX:function(){return f},PE:function(){return u},PY:function(){return d},Pz:function(){return l},_7:function(){return c},co:function(){return r},ed:function(){return o},jr:function(){return i},vq:function(){return a}});var r=225,i=4,o=4e3,a=100,l=125,c=30,s=[50,1200],u=new Set(["bash","c","css","c#","c++","go","java","javascript","php","python","ruby","rust","typescript","html","r","sql","perl","json","yaml","toml","xml"]),d="self-hosted-large",f=new Set(["python"])},67329:function(e,t,n){n.d(t,{L:function(){return p}});var r=n(43186),i=n(71443),o=n(50908),a=n(14251),l=n(32692),c=n(31230),s=n(37887);function u(){var e=(0,l.Z)(['\n  query CompleteCodeEngine {\n    currentUser {\n      id\n      defaultEngine: gateVariation(feature: "flag-ghostwriter-complete-engine")\n      hasOverride: gate(feature: "flag-code-suggestion-engine")\n    }\n  }\n']);return u=function(){return e},e}var d={},f=(0,c.Ps)(u());function p(){var e,t,n,l=(0,r.Z)().preferences,c=function(e){var t=(0,a.Z)({},d,e);return s.a(f,t)}().data,u=null===l||void 0===l?void 0:l.completeCodeEngine;if(u&&(null===c||void 0===c||null===(e=c.currentUser)||void 0===e?void 0:e.hasOverride)&&i.v.has(u))return{engine:u,settings:i.U[u]};var p=null!==(n=null===c||void 0===c||null===(t=c.currentUser)||void 0===t?void 0:t.defaultEngine)&&void 0!==n?n:o.PY;return{engine:p,settings:i.U[p]}}},23956:function(e,t,n){function r(e){return e.split("").reverse().join("")}function i(e){if(!e[0]||1===e.length)return e[0]||"";for(var t=0;e[0][t]&&e.every((function(n){return n[t]===e[0][t]}));)t++;return e[0].substring(0,t)}function o(e){return r(i(e.map(r)))}function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:12,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(e.length<1)return{halt:!1};for(var i=e[e.length-1],o=null!==r?i.split(r):e,a=1;a<=n;a++){var l=!1;if(o.length<a+t)break;for(var c=t;c>0;c--)if(o[o.length-c]!==o[o.length-c-a]){l=!0;break}if(!l)return{halt:!0,truncateLine:e.length-1}}return{halt:!1}}function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;if(e.length<t)return{halt:!1};if(e[e.length-1].trim().length<n)return{halt:!1};var r=e[e.length-1]===e[e.length-t-1];return r?{halt:!0,truncateLine:e.length-t}:{halt:!1}}n.d(t,{cx:function(){return g},Hy:function(){return v}});var c=function(e,t){return e.length<t.length},s=function(e,t){var n=""===e?1:parseInt(e,10),r=parseInt(t,10);return!isNaN(n)&&!isNaN(r)&&n+1===r};function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:c,l=e;if(l.length<t)return{halt:!1};var s=l.slice(-1*t),u=i(s),d=o(s);if(u.length<n||d.length<r)return{halt:!1};for(var f=null,p=0;p<t;p++){var h=s[p].substring(u.length),v=h.substring(0,h.length-d.length);if(f&&!a(f,v))return{halt:!1};f=v}return{halt:!0,truncateLine:l.length-t}}var d=n(19613),f=n(84159);function p(e,t){return e.filter((function(e){return!function(e,t){var n=(0,d.LX)(t);return!!e.startsWith(n)||!!e.startsWith((0,f.Z)(t,"Language: "))||!!e.startsWith((0,f.Z)(t,"Path: "))}(e,t)}))}var h=[function(e){return function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,r=1;r<t;r++){var i=l(e,r,n);if(i.halt)return i}return{halt:!1}}(e,8,3)},function(e){return u(e,3,6,3,c)},function(e){return u(e,3,6,1,s)},function(e){return a(e,12,12," ")},function(e){return a(e,8,16,"")}];function v(e,t){return{replacementSuggestion:p(e.split("\n"),t).join("\n")}}var m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h;return function(t){for(var n=t.split("\n"),r=n.slice(0,-1),i=0;i<e.length;i++){var o=e[i](n);if(o.halt)return{haltAfter:!0,replacementSuggestion:n.slice(0,o.truncateLine).join("\n")};var a=e[i](r);if(a.halt)return{haltAfter:!0,replacementSuggestion:r.slice(0,a.truncateLine).join("\n")}}return{haltAfter:!1}}}();function g(e){return m(e)}},31248:function(e,t,n){var r=n(78120).q6.define();t.Z=r},50936:function(e,t,n){n.d(t,{X:function(){return u},f:function(){return a}});var r=n(69779),i=n(59119),o=n(69052),a=new Set(["Body","Block","FunctionDeclaration","ClassBody","CatchClause"]),l=new Set((0,r.Z)(a).concat(["ArgList","ArrayPattern","ArrayExpression","ForSpec","FormalParameters","ParamList","ParenthesizedExpression","String","JSXAttributeValue","JSXEndTag","JSXEscape","JSXOpenTag","ObjectExpression","ObjectPattern","ImportGroup","ExportGroup","TemplateString","TypeParamList","ArgumentList","ArrayInitializer","Dimension","InferredParameters","TypeParameters","CompoundStatement","LambdaCaptureSpecifier","ParameterList","PropertyName","SystemLibString","FieldDeclarationList"]));function c(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(l.has(t.type.name)){var r={from:t.to-1,to:t.to},i=e.sliceString(r.from,r.to);if(!o.T.has(i))return;return{start:{from:t.from,to:t.from+1},end:r,bracket:i}}if(n){var a=t.parent();if(a)return c(e,t)}}var s=new Set(["(","[","{","<","`",'"',"'"]);function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.selection.main.head,n=e.doc.sliceString(t-1,t),r=(0,i.qz)(e),o=c(e.doc,r.cursorAt(t),!s.has(n));if(o)return o;var a=(0,i.Um)(e,t-1,1);return(null===a||void 0===a?void 0:a.end)?{start:a.start,end:a.end,bracket:e.doc.sliceString(a.end.from,a.end.to)}:void 0}},69052:function(e,t,n){n.d(t,{T:function(){return r}});var r=new Set(['"',")","}","]",";",">","'","`"])},89935:function(e,t,n){n.d(t,{R3:function(){return a},dp:function(){return l},he:function(){return i},t8:function(){return o}});var r=n(78120),i=r.Py.define(),o=r.Py.define(),a=r.Py.define(),l=r.Py.define()},97908:function(e,t,n){n.d(t,{G0:function(){return B},yn:function(){return k},gT:function(){return G},_n:function(){return P},$o:function(){return D}});var r=n(78120),i=n(67459),o=n(14456),a=n(59641),l=n(89935),c=n(75815),s=n(18352),u=n(14251),d=n(52875),f=n(44747),p=n(90132),h=n(48270);function v(e,t){var n=new m(e);return{widget:n,range:o.p.widget({widget:n,side:1}).range(t)}}var m=function(e){(0,p.Z)(n,e);var t=(0,h.Z)(n);function n(e){var r;return(0,c.Z)(this,n),(r=t.call(this)).code=e,r}var r=n.prototype;return r.hide=function(){this.dom&&(this.dom.style.display="none")},r.toDOM=function(){var e=document.createElement("span");return e.className="gray-text",e.dataset.cy="ghost-text-line",this.updateDOM(e),e},r.updateDOM=function(e){if(this.dom=e,e.style.display="",e.innerText=this.code,!e.childNodes.length||"BR"!==e.childNodes[0].nodeName)return!0;var t=new Set,n=!0,r=!1,i=void 0;try{for(var o,a=e.childNodes[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;if(l.nodeType===Node.TEXT_NODE){var c=document.createElement("span");t.add(c),c.textContent=l.nodeValue,l.replaceWith(c)}}}catch(s){r=!0,i=s}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return!0},r.ignoreEvent=function(){return!1},n}(o.l9),g=n(31005),y=n(50936),Z=n(59119),b=n(69052),w=n(50908),x=function(){function e(t){(0,c.Z)(this,e),Object.assign(this,t)}return e.prototype.update=function(t){return new e((0,u.Z)({},this,t))},e}(),E=function(){function e(t){(0,c.Z)(this,e),Object.assign(this,t)}var t=e.prototype;return t.updateOnInput=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.selection.main.head,r=this,i=r.activeTextIndex,o=r.activeTextCursor,a=r.activeText,l=a.text.slice(o);if(a.text[o]===t[0]&&["()","[]","{}",'""',"''"].includes(t)){var c=t[1],s=e.update({changes:{from:n,insert:a.text.slice(o)}}),u=s.state,d=(0,y.X)(u,n+1);if(!(null===d||void 0===d?void 0:d.end))return null;var f=d.end.to-a.startPos,p=[new x({text:a.text.slice(0,f-1),endBracket:c,startPos:a.startPos}),new x({text:a.text.slice(f),startPos:n+t.length,endBracket:a.endBracket})];return this.updateCursor((function(e){return e+1})).updateTexts((function(e,n){return n===i?p:n>i?e.update({startPos:e.startPos+t.length}):e}))}return l.startsWith(t)?this.updateCursor((function(e){return e+t.length})).updateTexts((function(e,n){return n>i?e.update({startPos:e.startPos+t.length}):e})):t?null:this},t.containsCursor=function(e){var t=this.activeText.startPos,n=t+this.activeTextCursor;return e>=t&&e<=n},t.update=function(t){return new e((0,u.Z)({},this,t))},t.updateCursor=function(e){return this.update({activeTextCursor:e(this.activeTextCursor)})},t.updateTexts=function(t){return e.of((0,d.Z)((0,u.Z)({},this),{texts:this.texts.flatMap(t).filter(Boolean)}))},t.asEffect=function(){return e.set.of(this)},t.asSpec=function(){return{effects:[this.asEffect()]}},t.asDecoration=function(){var e=this;return this.texts.map((function(t,n){var r=t.text,i=t.startPos;return n<e.activeTextIndex||!r?null:n===e.activeTextIndex?v(r.slice(e.activeTextCursor),i+e.activeTextCursor):v(r,i)})).filter(Boolean)},e.of=function(t){var n=t.texts,r=t.activeTextIndex,i=(0,f.Z)(t,["texts","activeTextIndex"]);return n=n.filter((function(e){return e.text.length})),r=Math.min(r,n.length-1),n.length?new e((0,d.Z)((0,u.Z)({},i),{texts:n,activeTextIndex:r})):null},e.fromCodeSuggestion=function(t){var n=t.inherits,r=t.editorState,i=t.codeSuggestion,o=t.cursor,a=void 0===o?r.selection.main.head:o,l=(0,u.Z)({activeTextCursor:0,activeTextIndex:0,complete:!1},n),c=(0,g._)(r,i,{excludeEndBracket:w.NX.has(l.language)});if(l.infill)return e.of((0,d.Z)((0,u.Z)({},l),{source:i,texts:[new x({text:c,startPos:a})]}));var s=e.of((0,d.Z)((0,u.Z)({},l),{source:i,texts:[new x({text:c,startPos:a})]})),f=(0,y.X)(r,a);if(!f)return s;var p=r.update({changes:{from:a,to:r.doc.length,insert:c}}).state,h=function(){var e=(0,Z.Um)(p,f.start.from,1);if(['"',"'"].includes(f.bracket)&&!(null===e||void 0===e?void 0:e.end)){var t=function(e,t){var n=-1;for(;-1!==(n=e.indexOf(t,n+1));)if("\\"!==e[n-1])return n;return-1}(p.sliceDoc(a),f.bracket);return-1===t?void 0:{from:a+t,to:a+t+1}}return null===e||void 0===e?void 0:e.end}();if(!h)return s;var v=h.from-a;if(c.length===v+f.bracket.length)return e.of((0,d.Z)((0,u.Z)({},l),{source:i,texts:[new x({text:c.slice(0,v).trimEnd(),startPos:a,endBracket:f.bracket})]}));for(var m=c.slice(v),E=f.end.to-1;E<r.doc.length;E++){if(r.sliceDoc(E,E+1)!==m[0])break;m=m.slice(1)}var C=r.sliceDoc(E,E+1);if(b.T.has(C)){var S=m.indexOf(C);-1!==S&&(m=m.slice(0,S))}var T=[new x({text:c.slice(0,v),startPos:a,endBracket:f.bracket}),new x({text:m,startPos:E})];return r.doc.lineAt(E).number-r.doc.lineAt(a).number>3&&T.pop(),T[0].text.trim().length?e.of((0,d.Z)((0,u.Z)({},l),{source:i,texts:T})):null},(0,s.Z)(e,[{key:"activeText",get:function(){return this.texts[this.activeTextIndex]}}]),e}();E.set=r.Py.define(),E.clearState=E.set.of(null);var C=n(31248),S=o.tk.baseTheme({".gray-text":{color:a.TV.foregroundDimmer,opacity:.75}}),T=new WeakMap,k=r.QQ.define({create:function(){return null},update:function(e,t){var n=!0,r=!1,i=void 0;try{for(var o,a=t.effects[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var c=o.value;c.is(E.set)?e=c.value:c.is(l.t8)?e=null==c.value?null:E.fromCodeSuggestion({editorState:t.state,codeSuggestion:c.value.code,inherits:{infill:c.value.infill,language:c.value.language}}):c.is(l.R3)?e=(null===e||void 0===e?void 0:e.source)?E.fromCodeSuggestion({inherits:e,editorState:t.state,codeSuggestion:e.source+c.value,cursor:e.texts[0].startPos}):null:c.is(l.dp)&&e&&(e=e.update({complete:c.value}))}}catch(s){r=!0,i=s}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return e},provide:function(e){return o.tk.decorations.from(e,(function(e){return function(t){var n,r;null===(n=T.get(t))||void 0===n||n.forEach((function(e){return e.hide()}));var i=null!==(r=null===e||void 0===e?void 0:e.asDecoration())&&void 0!==r?r:[];return T.set(t,i.map((function(e){return e.widget}))),i.length?o.p.set(i.map((function(e){return e.range})).sort((function(e,t){return e.from-t.from}))):o.p.none}}))}}),_=o.tk.updateListener.of((function(e){var t=e.view,n=t.state.field(k),r=e.state.selection.main;r.empty&&(null===n||void 0===n?void 0:n.containsCursor(r.head))||(e.docChanged?t.dispatch({effects:[E.set.of(null),l.he.of((0,i.G)(t.state,e.changes))]}):e.selectionSet&&t.dispatch({effects:[E.set.of(null),l.he.of(i.z.Stop)]}))})),R=r.yy.transactionExtender.of((function(e){var t=[];if(e.isUserEvent("delete.backward")){var n=e.startState.field(k);if(!n)return null;t.push(E.set.of(function(e){var t=e.activeTextCursor,n=e.activeTextIndex,r=e.texts;return t>0?e.updateCursor((function(e){return e-1})).updateTexts((function(e,t){return t>n?e.update({startPos:e.startPos-1}):e})):0===n?null:e.update({activeTextIndex:n-1,activeTextCursor:e.texts[e.activeTextIndex-1].text.length}).updateTexts((function(e,t){return t<n-1?e:t===n-1?e.update({text:e.text+(e.endBracket||"")+r[n].text,endBracket:r[n].endBracket}):t===n?null:e.update({startPos:e.startPos-1})}))}(n)))}else if(e.isUserEvent("input")){var o=e.startState.field(k);if(!o)return null;e.changes.iterChanges((function(n,r,a,c,s){if(o){var u=o.updateOnInput(e.state,s.toString(),a);u!==o?(t.push(E.set.of(u)),o=u):null===u&&(t.push(E.clearState,l.he.of(i.z.Enqueue)),o=null)}}))}else e.docChanged&&!e.annotation(r.YW.remote)&&t.push(E.clearState);return(t=t.filter(Boolean)).length?{effects:t}:null})),D=function(e){var t=e.state.field(k);if(!t)return!1;t.complete||e.dispatch({effects:l.he.of(i.z.Stop)});var n=t.activeTextCursor,r=t.activeTextIndex,o=t.texts,a=e.state.changes(o.map((function(e,t){return t<r?null:t===r?{from:e.startPos+n,insert:e.text.slice(n)}:{from:e.startPos,insert:e.text}})).filter(Boolean)),c=0;return a.iterChangedRanges((function(e,t,n,r){c=r})),e.dispatch({changes:a,selection:{anchor:c},scrollIntoView:!0,sequential:!0,effects:l.t8.of(null),annotations:C.Z.of(!0)}),!0},I=o.tk.inputHandler.of((function(e,t,n,r){var i=e.state.field(k);if(!i)return!1;var o=i.activeTextIndex,a=i.activeTextCursor,l=i.texts[o];if(l.text.length===a&&r===l.endBracket){var c=i.update({activeTextCursor:0,activeTextIndex:o+1});e.dispatch({effects:c.activeTextIndex>=c.texts.length?E.clearState:c.asEffect()})}return!1})),P=function(e){var t=e.state,n=e.dispatch,r=t.field(k);return!!r&&(n(t.update({effects:[l.t8.of(null),!r.complete&&l.he.of(i.z.Stop)].filter(Boolean)})),!0)},G=function(e){var t=e.state,n=e.dispatch,r=t.field(k);if(!r)return!1;var i=r.activeTextIndex,o=r.activeTextCursor,a=r.texts;if(!a[i])return!1;var l=a[i].text.slice(o).match(/^\n\s*/);return!!l&&(n(t.update(t.replaceSelection(l[0]),r.updateCursor((function(e){return e+l[0].length})).updateTexts((function(e,t){return t>i?e.update({startPos:e.startPos+l[0].length}):e})).asSpec())),!0)};function B(){return[_,R,k,S,r.Wl.high(I)]}},31005:function(e,t,n){n.d(t,{_:function(){return d},i:function(){return s}});var r=n(75815),i=n(18352),o=n(59119),a=n(50936),l=n(23956);function c(e){var t;return(null===(t=e.match(/^\s*/))||void 0===t?void 0:t[0].length)||0}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.selection.main.head,n=(0,o.qz)(e).resolveInner(t);return!!a.f.has(n.type.name)&&!e.sliceDoc(n.from+1,n.to-1).trim().length}var u=function(){function e(t,n,i){(0,r.Z)(this,e),this.state=t,this.suggestion=n,this.options=i}var t=e.prototype;return t.cutAtFirstLine=function(){return(this.suggestion+"\n").slice(0,this.suggestion.indexOf("\n"))},t.cutSuggestion=function(){var e,t;return s(this.state)?null!==(e=this.findLineWithLowerIndent())&&void 0!==e?e:this.suggestion:this.state.doc.sliceString(this.currentLine.from,this.cursorPos).trim().length?this.cutAtFirstLine():null!==(t=this.findLineWithLowerIndent())&&void 0!==t?t:this.cutAtFirstLine()},t.findLineWithLowerIndent=function(){var e=this.currentIndent,t=this.suggestion,n=t.split("\n").map((function(e,t,n){return e+(t===n.length-1?"":"\n")})),r=n.findIndex((function(t,n){return n>0&&c(t)<e||0===n&&/^\s*[)\]};]+\n?$/.test(t)}));if(-1!==r)return r===n.length-1?t:n.slice(0,r+(this.options.excludeEndBracket?0:1)).join("").slice(0,-1)},(0,i.Z)(e,[{key:"cursorPos",get:function(){return this.state.selection.main.head}},{key:"currentLine",get:function(){return this.state.doc.lineAt(this.cursorPos)}},{key:"currentIndent",get:function(){return c(this.currentLine.text)}}]),e}();function d(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r="";t=t.trimEnd().replace(/^\n*/,(function(e){return r=e,""})),r&&0===e.doc.lineAt(e.selection.main.head).text.length&&(r=r.slice(1));var i=new u(e,t,n).cutSuggestion().trimEnd(),o=(0,l.cx)(i).replacementSuggestion,a=i;return o&&(a=o),a?r+a:""}},25385:function(e,t,n){n.d(t,{Md:function(){return T},hy:function(){return _}});var r=n(34727),i=n(9941),o=n(69779),a=n(70655),l=n(23384),c=n(89224),s=n(73604),u=n(99408),d=n(67294),f=n(57418);function p(e,t,n){var r=(0,f.Sf)(t),i=e.split("\n");return{code:i.slice(Math.max(0,i.length-n)).join("\n"),language:r,filePath:t}}function h(e,t,n){var r=(0,f.Sf)(t);return{code:e.substring(0,n),language:r,filePath:t}}var v=n(22274),m=n(63309),g=n(58222),y=n(8288),Z=n(14965),b=n(83569);function w(e,t,n){var i=(0,d.useState)([]),o=i[0],l=i[1],c=(0,d.useState)(!1),s=c[0],u=c[1];return(0,d.useEffect)((function(){e&&(u(!0),(0,r.Z)((function(){var i;return(0,a.__generator)(this,(function(o){switch(o.label){case 0:return[4,Promise.all(e.map(function(){var e=(0,r.Z)((function(e){var r,i;return(0,a.__generator)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,n(e)];case 1:return(r=o.sent()).error?[2,!1]:(i=r.content.toString(),[2,t(i,e)]);case 2:return o.sent(),[2,!1];case 3:return[2]}}))}));return function(t){return e.apply(this,arguments)}}()))];case 1:return i=o.sent().filter(Boolean),u(!1),l(i),[2]}}))}))())}),[e,n,t]),{cachedFiles:o,loading:s}}var x={javascript:["javascript","typescript"],python:["python","python3"],python3:["python","python3"],typescript:["javascript","typescript"]},E=["json"];function C(e,t){var n=e.toLowerCase(),r=t.toLowerCase();return n===r||(!!E.includes(n)||!!x[n]&&x[n].includes(r))}function S(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,r=(0,l.D)({controlName:"flag-ghostwriter-neighboring-context"}),i=(0,m.Bx)(),o=(0,d.useState)(null),a=o[0],c=o[1];return(0,d.useEffect)((function(){c(r?i.filter((function(n){return C((0,f.Sf)(n),e)&&n!==t&&(0,s.Mb)(n)})).slice(0,n):null)}),[e,t,r,n,i]),a}function T(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10,o=(0,u.Z)().fs,l=S(e,t,i),c=w(l,(0,d.useCallback)((function(e,t){return p(e,t,n)}),[n]),(0,d.useCallback)(function(){var e=(0,r.Z)((function(e){return(0,a.__generator)(this,(function(t){switch(t.label){case 0:return[4,o.readFile(e)];case 1:return[2,t.sent()]}}))}));return function(t){return e.apply(this,arguments)}}(),[o])).cachedFiles;return null!==c&&void 0!==c?c:[]}function k(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,r=(0,i.Z)((0,Z.nu)(),1),o=r[0],a=(0,m.Bx)(),c=(0,i.Z)((0,v.Cv)(),2),u=c[1],f=(0,l.D)({controlName:"flag-ghostwriter-chat-file-context"});(0,d.useEffect)((function(){if(f){var r=Array(),i=function(e){var i=!0,o=!1,a=void 0;try{for(var l,c=e[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var u=l.value;if(r.length>=n)break;R(u)||(0,y.lv)(u,t)||!(0,s.Mb)(u)||r.includes(u)||r.push(u)}}catch(d){o=!0,a=d}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}};e&&i([e]),i(a),i(o),u(r.slice(0,n))}}),[n,a,u,e,t,f,o])}function _(e,t,n){var f=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2e3,p=arguments.length>4&&void 0!==arguments[4]?arguments[4]:4,m=(0,u.Z)().fs,g=(0,i.Z)((0,Z.nu)(),2),y=g[1],x=(0,i.Z)((0,v.vY)(),2),E=x[1],C=(0,l.D)({controlName:"flag-ghostwriter-chat-file-context"});(0,d.useEffect)((function(){if(t&&C){var e=(0,s.Il)(t);return m.watchDir(""===e?b.Ql:e,{onChange:function(t){var n=""===e?"":e+"/";y(t.filter((function(e){return e.type===c.Tv.File&&!R(n+e.filename)})).map((function(e){return n+e.filename})))},onMoveOrDelete:function(){y([])},onError:function(){y([])}})}}),[C,t,m,y]),k(e,n,p);var S=(0,i.Z)((0,v.Cv)(),1),T=S[0],_=Boolean(e&&T.includes(e)),D=(0,d.useState)(null),I=D[0],P=D[1];(0,d.useEffect)((function(){if(e&&_&&C)return m.watchFile(e,{onChange:function(t){P(h(t.toString(),e,f))},onError:function(){P(null)}})}),[e,_,C,m,f,P]);var G=(0,d.useState)([]),B=G[0],A=G[1];(0,d.useEffect)((function(){A(_?T.slice(1):T)}),[_,T]);var U=w(B,(0,d.useCallback)((function(e,t){return h(e,t,f)}),[f]),(0,d.useCallback)(function(){var e=(0,r.Z)((function(e){return(0,a.__generator)(this,(function(t){switch(t.label){case 0:return[4,m.readFile(e)];case 1:return[2,t.sent()]}}))}));return function(t){return e.apply(this,arguments)}}(),[m])).cachedFiles;(0,d.useEffect)((function(){if(C){var e,t=Array();if(_&&I&&t.push(I),U)(e=t).push.apply(e,(0,o.Z)(U));E(t)}}),[U,E,C,I,_])}function R(e){var t=(0,s.r6)(e),n=g.hI.some((function(t){return e.endsWith(t)})),r=g.HH.some((function(t){return e.endsWith(t)})),i=g.Fv.some((function(t){return e.split("/").some((function(e){return e.includes(t)}))}));return!t||n||r||i}},67459:function(e,t,n){var r;function i(e,t){var n=e.doc.lineAt(e.selection.main.head);if(e.doc.sliceString(e.selection.main.head,n.to).replace(/[\s)\]}"'`]/g,"").length)return r.Stop;var i="";return t.iterChanges((function(e,t,n,r,o){i=o.toString()})),i?[":","(","[","{",'"',"'"].includes(i[0])?r.Now:r.Enqueue:r.Stop}n.d(t,{G:function(){return i},z:function(){return r}}),function(e){e[e.Stop=0]="Stop",e[e.Enqueue=1]="Enqueue",e[e.Now=2]="Now"}(r||(r={}))},44796:function(e,t,n){n.d(t,{Z:function(){return fe},S:function(){return de}});var r=n(27322),i=n(33346),o=n(13211),a=n(70655),l=n(59006),c=n(43186),s=n(63377),u=n(21131),d=n(21603),f=n(58502),p=n(99408),h=n(60864),v=n(67294),m=n(57418),g=n(75815),y=n(18352),Z=function e(t,n){(0,g.Z)(this,e),this.next=null,this.prev=null,this.key=t,this.data=n},b=function(){function e(){(0,g.Z)(this,e),this.size_=0,this.head=null,this.tail=null}var t=e.prototype;return t.addFront=function(e){this.tail||(this.tail=e),this.head&&(this.head.prev=e),e.next=this.head,this.head=e,this.size_++},t.popBack=function(){if(!this.tail)return null;var e=this.tail;return this.tail=e.prev,this.size_--,e.prev&&(e.prev.next=null,e.prev=null),e},t.moveToFront=function(e){this.head!==e&&(this.tail===e&&(this.tail=e.prev),e.next&&(e.next.prev=e.prev,e.next=null),e.prev&&(e.prev.next=e.next,e.prev=null),this.size_--,this.addFront(e))},(0,y.Z)(e,[{key:"size",get:function(){return this.size_}}]),e}(),w=function(){function e(t){(0,g.Z)(this,e),this.items=Object.create(null),this.evictList=new b,this.maxSize=t}var t=e.prototype;return t.update=function(e,t){var n=this.items[e];if(n)return this.evictList.moveToFront(n),n.data=t(n.data),n.data;for(;this.evictList.size>=this.maxSize;){var r=this.evictList.popBack();if(!r)throw new Error("invariant violation: could not pop back of the list");delete this.items[r.key]}var i=new Z(e,t());return this.evictList.addFront(i),this.items[e]=i,i.data},t.getOrAdd=function(e,t){return this.update(e,(function(e){return null!==e&&void 0!==e?e:t}))},t.set=function(e,t){this.update(e,(function(){return t}))},t.get=function(e){var t=this.items[e];return t?t.data:null},t.has=function(e){return e in this.items},(0,y.Z)(e,[{key:"size",get:function(){return this.evictList.size}}]),e}(),x=n(50908),E=function(){function e(){(0,g.Z)(this,e),this.cache=new w(x.vq)}var t=e.prototype;return t.has=function(e){return this.cache.has(e)},t.get=function(e){return this.cache.get(e)},t.set=function(e,t){this.cache.set(e,t)},t.setSuggestion=function(e,t){this.cache.set(e,JSON.stringify({text:t})+"\n")},e}(),C=n(34727),S=n(14251),T=n(52875),k=n(64487),_=n(14456),R=n(78120),D=n(59119),I=n(91296),P=n.n(I),G=n(60977);var B=n(34790),A=n(410);function U(e){var t=e.onComplete,n=e.onEscape,r=null,i=null;return _.tk.domEventHandlers({touchstart:function(e){i=null,r=e.targetTouches[0].clientX},touchmove:function(e){i=e.targetTouches[0].clientX},touchend:function(e,o){if(r&&i)return r-i<-50&&t(o),n(o),!0}})}var O,N=n(97908),L=n(67459),F=n(89935),X=n(31005),M=n(9941),W=n(35944),j=n(3083),H=n(48821),z=n(93058),V=n(35642),q=n(59641),K=n(10982),$=function(e){var t=e.onClose,n=(0,z.Z)(),r=n.showNotice,i=n.hideMessage,o=(0,M.Z)(v.useState(!1),2),a=o[0],l=o[1];return(0,v.useEffect)((function(){var e=function(){l(!0),i(t)},t=r((0,W.BX)(q.G7,{css:[q.l0.rowWithGap(4),q.l0.align.center],children:[(0,W.tZ)(K.Info,{}),(0,W.BX)(q.xv,{css:{fontSize:"calc(".concat(q.TV.fontSizeSubheadDefault," - 1px)"),"@media (max-width: 768px)":q.l0.fontSize(14)},children:["Thanks for trying Ghostwriter!",(0,W.tZ)("a",{role:"button",tabIndex:0,css:{color:"inherit",textDecoration:"underline",marginLeft:"3px"},onKeyPress:function(t){"Enter"!==t.key&&" "!==t.key||(t.preventDefault(),e())},onClick:function(t){t.preventDefault(),e()},children:"Give feedback"})]})]}),0,{color:q.TV.accentPrimaryStrongest,fontWeight:q.TV.fontWeightRegular})}),[i,r,t]),(0,W.tZ)(H.b5,{children:(0,W.tZ)(q.u_,{isOpen:a,onRequestClose:function(){l(!1)},children:(0,W.tZ)(j.Z,{setFeedbackFormOpen:l,feature:j.l.GhostWriter})})})};!function(e){e.Acceptance="ghostWriter.acceptance",e.Rejection="ghostWriter.rejection"}(O||(O={}));var Y=n(25108);function Q(e){var t=e.language,n=e.infill,i=e.completeCode,o=e.decorations,l=e.metadata,c=function(){var e;return{abort:function(){null===e||void 0===e||e.abort()},requestSignal:function(){var t=new AbortController;return null===e||void 0===e||e.abort(),e=t,t.signal}}}(),s=null,u=P()(function(){var e=(0,C.Z)((function(e){var o,u,d,f,p,h,v,m,g,y,Z,b,w,E,C,_,R,I,P,B;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:if(u=e.state,d=u.doc,f=u.selection,0===(p=f.main.head))return[2];if(h=d.sliceString(p-1,p),[";",")","}","]","{"].includes(h))return[2];if(!(v=d.sliceString(Math.max(0,p-x.ed),p))||v.length<x.jr)return[2];s=v.length,v=e.state.facet(D.c)+"\n"+v,m=n?function(e){for(var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.split("\n"),r=0;r<n.length;r++){var i=n[r];if(i[0]&&i[0].match(/\S/))return t?n.slice(0,r).join("\n")+"\n":n.slice(0,r+1).join("\n")}return e}(d.sliceString(p),x.NX.has(t)):void 0,g=(0,X.i)(e.state)?x.Pz:x._7,y=null===(o=v.match(/[^\s]([ \t]+)$/))||void 0===o?void 0:o[1],a.label=1;case 1:a.trys.push([1,14,,15]),Z=!0,b=!1,w=!1,a.label=2;case 2:a.trys.push([2,7,8,13]),C=(0,r.Z)(i({code:y?v.slice(0,-y.length):v,suffix:m,maxTokens:g,signal:c.requestSignal()})),a.label=3;case 3:return[4,C.next()];case 4:if(!(b=!(_=a.sent()).done))return[3,6];if(R=_.value,I=R,Z&&y){if(!I.startsWith(y))return c.abort(),[3,6];I=I.slice(y.length)}Z&&(k.n_({category:"ghostwriter",message:"Suggestion presented",level:"debug"}),(0,G.j)(G.U3.CODE_SUGGESTION_USED,(0,T.Z)((0,S.Z)({type:"suggestionPresented"},l),{prefixLength:s}))),e.dispatch({effects:Z?F.t8.of({code:I,language:t,infill:n}):F.R3.of(I)}),Z=!1,a.label=5;case 5:return b=!1,[3,3];case 6:return[3,13];case 7:return P=a.sent(),w=!0,E=P,[3,13];case 8:return a.trys.push([8,,11,12]),b&&null!=C.return?[4,C.return()]:[3,10];case 9:a.sent(),a.label=10;case 10:return[3,12];case 11:if(w)throw E;return[7];case 12:return[7];case 13:return!1!==Z?(k.n_({category:"ghostwriter",message:"Exited completeCode iteration with no suggestion.",level:"info"}),e.dispatch({effects:F.t8.of(null)}),[2]):(k.n_({category:"ghostwriter",message:"Suggestion completely presented",level:"debug"}),(0,G.j)(G.U3.CODE_SUGGESTION_USED,(0,T.Z)((0,S.Z)({type:"suggestionCompletelyPresented"},l),{prefixLength:s})),e.dispatch({effects:F.dp.of(!0)}),[3,15]);case 14:return"AbortError"===(null===(B=a.sent())||void 0===B?void 0:B.name)?[2]:(k.$e((function(e){e.setExtra("prefix",v),e.setExtra("maxTokens",g),e.setExtra("language",t),e.setExtra("selection-head",p),e.setExtra("previous-character",h),e.setExtras(l),e.setTag("ghostwriter",!0),k.Tb(B)})),Y.error("CodeSuggestionExtension"),Y.error(B),[3,15]);case 15:return[2]}}))}));return function(t){return e.apply(this,arguments)}}(),x.co),d=function(e){var t=function(){e.update((function(e){return e.delete("feedback")}))},n=function(){var n,r,i=(null!==(n=V.Z.get("ghostWriter.acceptance","number"))&&void 0!==n?n:0)+(null!==(r=V.Z.get("ghostWriter.rejection","number"))&&void 0!==r?r:0);x.B2.includes(i)?e.update((function(e){return e.set("feedback",(0,W.tZ)($,{onClose:t}))})):t()};return{recordAccept:function(){V.Z.update("ghostWriter.acceptance","number",(function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)+1})),n()},recordReject:function(){V.Z.update("ghostWriter.rejection","number",(function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)+1})),n()}}}(o),f=function(e){return!!(0,N.$o)(e)&&((0,G.j)(G.U3.CODE_SUGGESTION_USED,(0,T.Z)((0,S.Z)({type:"suggestionAccepted"},l),{prefixLength:s})),k.n_({category:"ghostwriter",message:"Suggestion accepted",level:"info"}),d.recordAccept(),(0,B._B)(e),!0)};return[R.Wl.high(_.$f.of([{key:"Tab",run:f},{key:"Escape",run:function(e){return!!(0,N._n)(e)&&(c.abort(),(0,G.j)(G.U3.CODE_SUGGESTION_USED,(0,T.Z)((0,S.Z)({type:"suggestionDismissed"},l),{prefixLength:s})),k.n_({category:"ghostwriter",message:"Suggestion explicitly dismissed",level:"info"}),d.recordReject(),!0)}},{key:"Enter",run:N.gT}])),_.tk.domEventHandlers({blur:function(e,t){setTimeout((function(){t.dispatch({effects:F.t8.of(null)})}),100),c.abort()}}),_.tk.updateListener.of((function(e){(0,A.j)(e,F.he,(function(t){var n,r;t.value?(n=e.view,r=t.value,c.abort(),u(n),r===L.z.Now&&u.flush()):c.abort()}))})),(0,N.G0)(),U({onComplete:f,onEscape:N._n})]}var J=n(23956),ee=n(32692),te=n(31230),ne=n(37887);function re(){var e=(0,ee.Z)(['\n  query CompleteCode {\n    currentUser {\n      id\n      userPowerUpsByType {\n        __typename\n        ... on UnauthorizedError {\n          message\n        }\n        ... on UserPowerUpsTypes {\n          ghostwriter {\n            active\n          }\n        }\n      }\n      hasKillswitch: gate(feature: "flag-killswitch-ghostwriter")\n    }\n  }\n']);return re=function(){return e},e}var ie={},oe=(0,te.Ps)(re());var ae=n(67329),le=n(25385),ce=n(23384),se=n(78241);function ue(){var e,t,n,r=function(e){var t=(0,S.Z)({},ie,e);return ne.a(oe,t)}().data,i=de();return!("UserPowerUpsTypes"!==(null===r||void 0===r||null===(e=r.currentUser)||void 0===e||null===(t=e.userPowerUpsByType)||void 0===t?void 0:t.__typename)||!(null===r||void 0===r?void 0:r.currentUser.userPowerUpsByType.ghostwriter.active))&&(!(null===r||void 0===r||null===(n=r.currentUser)||void 0===n?void 0:n.hasKillswitch)&&i)}function de(){var e=(0,p.Z)().presence,t=(0,f.Z)({presence:e});return!!(0,ce.D)({controlName:"flag-code-suggestion-multiplayer"})||t.length<=1}function fe(e){var t,n=e.filePath,f=e.view,p=e.decorations,g=(0,s.Z)(),y=(0,m.Sf)(n),Z=(0,c.Z)().preferences,b=(0,ae.L)(),w=b.engine,C=null!==(t=b.settings.infill)&&void 0!==t&&t,S=ue(),T=(0,l.Z)({view:f}),_=(0,u.Z)((function(){return new E}),[y,n,g]);(0,v.useEffect)((function(){h.YX.toggle(Boolean(Z.codeSuggestion))}),[Z.codeSuggestion]);var R=(0,le.Md)(y,n);(0,v.useEffect)((function(){if(f&&S){if(Z.codeSuggestion&&x.PE.has(y)){var e=function(){var e=(0,o.Z)((function(e){var t,l,c,s,u,f,p,v,m,Z,b,x,E,S,T,D,I,P,G,B,A,U,O,N,L,F,X,M,W,j,H;return(0,a.__generator)(this,(function(z){switch(z.label){case 0:return t=e.code,l=e.suffix,c=e.signal,s=e.maxTokens,t?(k.n_({category:"ghostwriter",message:"Called completeCode: "+w,level:"debug"}),u=d.kg.timeStart({language:y,engine:w,replid:g,codeLength:t.length}),f={language:y,code:t,suffix:C?l:void 0,replId:g,filePath:n,engine:w,maxTokens:s,additionalContext:R,stop:["\n\n"]},p=h.YX.add(f),c.addEventListener("abort",(function(){h.YX.abort(p)})),null==(m=_.get(t))?[3,1]:(v=(0,o.Z)((function(){return(0,a.__generator)(this,(function(e){switch(e.label){case 0:return[4,m];case 1:return e.sent(),[2]}}))})),[3,5])):[2];case 1:return[4,(0,i.Z)(fetch("/ai/complete",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},signal:c,body:JSON.stringify(f)}))];case 2:return Z=z.sent(),b=Z.body,200===(x=Z.status)?[3,4]:(E=Error.bind,T=(S="Error (".concat(x,") response from /ai/complete: ")).concat,[4,(0,i.Z)(Z.text())]);case 3:throw new(E.apply(Error,[void 0,T.apply(S,[z.sent()])]));case 4:if(!b)throw new Error("No body in response");v=function(){return(0,se.n)(b)},z.label=5;case 5:D="",I="",P=!0,G=!1,B=!1,A=!1,z.label=6;case 6:z.trys.push([6,14,15,20]),O=(0,r.Z)(v()),z.label=7;case 7:return[4,(0,i.Z)(O.next())];case 8:if(!(B=!(N=z.sent()).done))return[3,13];L=N.value,I+=L,F=void 0,z.label=9;case 9:return-1===(F=I.indexOf("\n"))?[3,12]:(X=JSON.parse(I.substring(0,F)),M=X.text,I=I.substring(F+1),W=(0,J.Hy)(M,y),j=W.replacementSuggestion,D+=j,G?[3,11]:[4,j]);case 10:z.sent(),z.label=11;case 11:return P&&(k.n_({category:"ghostwriter",message:"Suggestion emitted: "+j,level:"debug"}),u("code suggestion",{type:"success"}),P=!1),(0,J.cx)(D).haltAfter&&(G=!0),[3,9];case 12:return B=!1,[3,7];case 13:return[3,20];case 14:return H=z.sent(),A=!0,U=H,[3,20];case 15:return z.trys.push([15,,18,19]),B&&null!=O.return?[4,O.return()]:[3,17];case 16:z.sent(),z.label=17;case 17:return[3,19];case 18:if(A)throw U;return[7];case 19:return[7];case 20:return D.trim().length&&!_.has(t)&&_.setSuggestion(t,D),G||!I?[3,22]:[4,I];case 21:z.sent(),z.label=22;case 22:return h.YX.complete(p,{__typename:"CompleteCodeResult",id:Date.now().toString(),code:D}),[2]}}))}));return function(t){return e.apply(this,arguments)}}(),t={filePath:n,language:y,engine:w,additionalContextCount:R.length,additionalContextLength:R.reduce((function(e,t){return e+t.code.length}),0)};return f.dispatch({effects:T.reconfigure(Q({language:y,infill:C,completeCode:e,decorations:p,metadata:t}))}),function(){f.dispatch({effects:T.reconfigure([])})}}k.n_({category:"ghostwriter",message:"Explicitly skipped useCompleteCode effect.",level:"info"})}}),[f,_,S,T,n,y,g,p,w,Z.codeSuggestion,C,R])}},51894:function(e,t,n){n.d(t,{R1:function(){return u},wB:function(){return d}});var r=n(14251),i=n(32692),o=n(31230),a=n(73359);function l(){var e=(0,i.Z)(["\n  query GenerateCode($input: GenerateCodeInput!) {\n    currentUser {\n      id\n      isAdmin: hasRole(role: ADMIN)\n    }\n    generateCode(input: $input) {\n      ... on GenerateCodeResult {\n        id\n        code\n        metadata\n      }\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n"]);return l=function(){return e},e}function c(){var e=(0,i.Z)(["\n  query GenerateCodeModalCurrentUser {\n    currentUser {\n      id\n      userPowerUpsByType {\n        __typename\n        ... on UserPowerUpsTypes {\n          ghostwriter {\n            active\n          }\n        }\n      }\n    }\n  }\n"]);return c=function(){return e},e}var s={},u=(0,o.Ps)(l());function d(e){var t=(0,r.Z)({},s,e);return a.t(u,t)}c()},57418:function(e,t,n){n.d(t,{Sf:function(){return l},UP:function(){return c},eC:function(){return a}});var r=n(73604),i={js:"javascript",jsx:"javascript",ts:"typescript",tsx:"typescript",py:"python",go:"go"},o={rs:"rust",lsp:"lisp",sh:"bash",cpp:"c++",hs:"haskell",go:"go",rb:"ruby"};function a(e){if(!e)return!1;var t=(0,r.r6)(e);return Boolean(i[t])}function l(e){var t=(0,r.r6)(e);return i[t]?i[t]:o[t]?o[t]:t}function c(e){var t=(0,r.r6)(e);return i[t]?i[t]:"unknown"}},69355:function(e,t,n){n.d(t,{Z:function(){return u}});var r=n(11163),i=n(67294),o=n(34790),a=n(50119),l=n(59006),c=n(15902),s=n(43186);function u(e){var t=e.view,n=(0,r.useRouter)(),u=(0,s.Z)().preferences.codeIntelligence,d=(0,c.Vg)(n)||!u,f=(0,l.Z)({view:t});(0,i.useEffect)((function(){if(t&&!d)return t.dispatch({effects:f.reconfigure([(0,o.ys)({defaultKeymap:!1,icons:!1,addToOptions:[a.t]})])}),function(){t.dispatch({effects:f.reconfigure([])})}}),[t,f,d])}},51059:function(e,t,n){n.d(t,{M:function(){return l}});var r=n(69779),i=n(67294),o=n(16965),a=n(78120);function l(e,t,n){var l=(0,i.useState)((function(){return new a.F6}))[0],c=(0,o.Z)(e);(0,i.useEffect)((function(){if(n){var e=c.current();if(e){var t=void 0===l.get(n.state)?a.Py.appendConfig.of(l.of(e)):l.reconfigure(e);return n.dispatch({effects:t}),function(){n.dispatch({effects:l.reconfigure([])})}}}}),[n,l,c].concat((0,r.Z)(t)))}},43439:function(e,t,n){n.d(t,{EE:function(){return h},Gj:function(){return a},ZF:function(){return v},_j:function(){return l},f3:function(){return f},fI:function(){return p},gm:function(){return d},yK:function(){return s}});var r=n(9941),i=n(85212),o=n(31557),a={regexp:/-?\b\d+\.?\d*\b/g,cursor:"ew-resize",onDrag:function(e,t,n){var r=Number(e)+n.movementX;isNaN(r)||t(r.toString())}},l={regexp:/true|false/g,cursor:"pointer",onClick:function(e,t){switch(e){case"true":return t("false");case"false":return t("true")}}};function c(e){var t=new RegExp("".concat(e,"\\(-?\\b\\d+\\.?\\d*\\b\\s*(,\\s*-?\\b\\d+\\.?\\d*\\b)?"),"g"),n=new RegExp("".concat(e,"\\((?<x>-?\\b\\d+\\.?\\d*\\b)\\s*(,\\s*(?<y>-?\\b\\d+\\.?\\d*\\b))?"));return{regexp:t,cursor:"move",onDrag:function(t,r,i){var o,a,l=n.exec(t),c=Number(null===l||void 0===l||null===(o=l.groups)||void 0===o?void 0:o.x),s=Number(null===l||void 0===l||null===(a=l.groups)||void 0===a?void 0:a.y);isNaN(c)||(isNaN(s)&&(s=c),r("".concat(e,"(").concat(c+i.movementX,", ").concat(s+i.movementY)))}}}var s=c("vec2");c("ellipse"),c("circle"),c("point"),c("rect"),c("square"),c("vertex");function u(e){var t=new RegExp("".concat(e,"\\(.*\\)"),"g"),n=new RegExp("".concat(e,"\\((?<r>\\d+)\\s*,\\s*(?<g>\\d+)\\s*,\\s*(?<b>\\d+)\\)"));return{regexp:t,cursor:"pointer",onClick:function(t,o){var a,l,c,s=n.exec(t),u=Number(null===s||void 0===s||null===(a=s.groups)||void 0===a?void 0:a.r),d=Number(null===s||void 0===s||null===(l=s.groups)||void 0===l?void 0:l.g),f=Number(null===s||void 0===s||null===(c=s.groups)||void 0===c?void 0:c.b),p=document.createElement("input");p.type="color",isNaN(u+d+f)||(p.value=(0,i.C)(u,d,f)),p.addEventListener("input",(function(t){var n=t.target;if(n.value){var a=(0,r.Z)((0,i.w)(n.value),3),l=a[0],c=a[1],s=a[2];o("".concat(e,"(").concat(l,", ").concat(c,", ").concat(s,")"))}})),p.click()}}}var d=u("rgb"),f=u("background"),p=u("fill"),h=u("stroke"),v={regexp:/https?:\/\/[^\s)"]+/g,cursor:"pointer",onClick:function(e){(0,o.Z)(e)&&window.open(e,"_blank")}}},7756:function(e,t,n){n.d(t,{Iq:function(){return u},Lh:function(){return s}});var r=n(9941),i=n(35944),o=n(67294),a=n(82378),l=n(68122),c=n(21131);n(25674),n(35390);function s(){var e=o.useRef((0,a.u)(new Map)).current,t=o.useCallback((function(t){var n=new Map(e.current);t(n),e.current=n}),[e]),n=o.useCallback((function(){e.current=new Map}),[e]);return(0,c.Z)((function(){return{observable:e,update:t,unmount:n}}),[t,e,n])}var u=function(e){var t=e.source,n=(0,l.Z)(t);return(0,i.tZ)(i.HY,{children:Array.from(n,(function(e){var t=(0,r.Z)(e,2),n=t[0],a=t[1];return(0,i.tZ)(o.Fragment,{children:a},n)}))})}},25674:function(e,t,n){n.d(t,{w:function(){return A},h:function(){return B}});var r,i=n(34727),o=n(14251),a=n(52875),l=n(69779),c=n(70655),s=n(35944),u=n(78120),d=n(14456),f=n(41656),p=n(4862),h=n(67573),v=n(44747),m=n(9941),g=n(58142),y=n(98284),Z=n(17556),b=n(93160),w=n(1144),x=n(81255),E=n(69346),C=n(55528),S=n(99408),T=n(6951),k=n(67629),_=n(77365),R=n(67294),D=n(73935);function I(e){var t=e.dom,n=(0,v.Z)(e,["dom"]);return D.createPortal((0,s.tZ)(G,(0,o.Z)({},n)),t)}function P(e){var t=e.matchesMap,n=e.fileToContents,i=e.type,o=e.onClose,a=e.currentFile,l=Object.keys(t),c=(0,S.Z)().session;if(0===l.length){var u=i===r.REFERENCES?"No references found":"No definitions found";return(0,s.tZ)(w.x,{color:"dimmer",css:[x.l0.pl(4),x.l0.py(8)],children:u})}return(0,s.tZ)(E.G,{children:l.map((function(e){var r=function(t,n){e===a?c.updateDeeplink({path:e,line:t,col:n}):c.openFile(e,{line:t,col:n})},i=t[e],u=n[e],d=(0,g.Z)(i,u);return(0,s.tZ)(E.G,{css:[x.l0.p(4)],children:(0,s.tZ)(y.Vw,{path:e,extensions:[d],doc:u,numMatches:i.length,initiallyExpanded:1===l.length,onNavigateToCode:function(e){if(null!==e)r(e.line+1,e.character);else{var t=(0,m.Z)(i,1)[0],n=u.lineAt(t.from),a=t.from-n.from;r(n.number,a)}o()}})},e)}))})}function G(e){var t=e.files,n=e.onClose,a=e.references,d=e.definitions,f=e.currentFile,p=e.currentFileContents,v=function(e,t){if(!y)throw new Error("Expected LSP Client");var n=y.documentUriToPath(e.uri),r=e.range,i=r.start,o=r.end;n in t||(t[n]=[]);var a=G[n],l=a.line(i.line+1),c=a.line(o.line+1);t[n].push({from:l.from+i.character,to:c.from+o.character})},g=(0,S.Z)().fs,y=(0,C.Z)(f),D=(0,Z.Z)(n,[]),I=(0,m.Z)(R.useState((0,h.Z)({},f,u.xv.of(p.split("\n")))),2),G=I[0],B=I[1];R.useEffect((function(){if(t.length){var e=!1;return function(){n.apply(this,arguments)}(),function(){e=!0}}function n(){return n=(0,i.Z)((function(){var n;return(0,c.__generator)(this,(function(r){switch(r.label){case 0:return n={},[4,Promise.all(t.map(function(){var e=(0,i.Z)((function(e){var t;return(0,c.__generator)(this,(function(r){switch(r.label){case 0:return[4,g.readFile(e)];case 1:if((t=r.sent()).error)throw new Error("Something went wrong reading file with path ".concat(e,". Received error: ").concat(t.error));return n[e]=u.xv.of(t.content.toString().split("\n")),[2]}}))}));return function(t){return e.apply(this,arguments)}}()))];case 1:return r.sent(),e?[2]:(B((function(e){return(0,o.Z)({},e,n)})),[2])}}))})),n.apply(this,arguments)}}),[g,t]);var A=(0,l.Z)(a).concat((0,l.Z)(d));if(!y||A.some((function(e){return!(y.documentUriToPath(e.uri)in G)})))return(0,s.tZ)(E.G,{style:{width:x.TV.space128,height:x.TV.space128,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,s.tZ)(_.Z,{size:32})});var U={},O={};return a.forEach((function(e){v(e,U)})),d.forEach((function(e){v(e,O)})),(0,s.BX)(b.T,{innerRef:D,elevated:!0,css:[x.l0.minWidth("375px"),x.l0.maxWidth("500px"),x.l0.pt(4)],children:[(0,s.tZ)(E.G,{css:{borderBottom:"1px solid var(--background-highest)"},children:(0,s.BX)(E.G,{css:[x.l0.p(4)],children:[(0,s.BX)(E.G,{css:[x.l0.flex.row,x.l0.justify.spaceBetween,x.l0.align.center,x.l0.pr(4)],children:[(0,s.tZ)(w.h,{level:2,variant:"subheadDefault",css:[x.l0.p(4),x.l0.pl(8)],children:"Definitions"}),(0,s.tZ)(T.Z,{filled:!1,border:!1,onClick:n,children:(0,s.tZ)(k.Z,{})})]}),(0,s.tZ)(P,{matchesMap:O,fileToContents:G,type:r.DEFINITION,onClose:n,currentFile:f})]})}),(0,s.tZ)(E.G,{children:(0,s.BX)(E.G,{css:[x.l0.p(4)],children:[(0,s.tZ)(w.h,{level:2,variant:"subheadDefault",css:[x.l0.p(4),x.l0.pl(8)],children:"References"}),(0,s.tZ)(P,{matchesMap:U,fileToContents:G,type:r.REFERENCES,onClose:n,currentFile:f})]})})]})}!function(e){e.DEFINITION="DEFINITION",e.REFERENCES="REFERENCES"}(r||(r={}));var B=u.Py.define();function A(e){var t=e.setDecoration,n=e.lspClient,r=e.path,h=u.Py.define(),v=u.Py.define(),m=d.tk.updateListener.of(function(){var e=(0,i.Z)((function(e){var t,i,o,a,s,u,d,m,g,y,Z,b,w,x,E,C,S,T,k,_,R,D,I,P,G,A,U,O,N,L,F;return(0,c.__generator)(this,(function(c){switch(c.label){case 0:t=null,i=!0,o=!1,a=void 0;try{for(s=e.transactions[Symbol.iterator]();!(i=(u=s.next()).done);i=!0){d=u.value,m=!0,g=!1,y=void 0;try{for(Z=d.effects[Symbol.iterator]();!(m=(b=Z.next()).done);m=!0)(w=b.value).is(B)&&(t=w.value)}catch(X){g=!0,y=X}finally{try{m||null==Z.return||Z.return()}finally{if(g)throw y}}}}catch(X){o=!0,a=X}finally{try{i||null==s.return||s.return()}finally{if(o)throw a}}return t?(x=(0,p.Z)(n),E=e.state.doc,C=(0,f.s)(E,t),x.isFindReferencesSupported?[4,n.request.findReferences(r,C,{includeDeclaration:!1})]:[3,2]):[2];case 1:return T=c.sent(),[3,3];case 2:T={result:null},c.label=3;case 3:return S=T,x.isFindDefinitionSupported?[4,n.request.findDefinitions(r,C)]:[3,5];case 4:return _=c.sent(),[3,6];case 5:_={result:null},c.label=6;case 6:if(k=_,"error"in S)throw new Error("Something went wrong fetching references: ".concat(S.error.message));if("error"in k)throw new Error("Something went wrong fetching definition: ".concat(k.error.message));return R=S.result,D=k.result,I=R&&R.length>0,P=D&&D.length>0,I||P?(G=[],A=[],R&&R.length>0&&(U=G).push.apply(U,(0,l.Z)(R)),D&&D.length>0&&(O=A).push.apply(O,(0,l.Z)(D)),N=(0,l.Z)(G).concat((0,l.Z)(A)).map((function(e){return n.documentUriToPath(e.uri)})).filter((function(e){return e!==r})),L=(0,l.Z)(new Set(N)),F=E.toJSON().join("\n"),e.view.dispatch({effects:h.of({references:G,definitions:A,currentFile:r,currentFileContents:F,files:L})}),[2]):(e.view.dispatch({effects:v.of(null)}),[2])}}))}));return function(t){return e.apply(this,arguments)}}());return[m,u.QQ.define({create:function(){return null},update:function(e,t){var n=e,r=!0,i=!1,o=void 0;try{for(var a,l=t.effects[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value;c.is(h)&&(n=c.value),c.is(v)&&(n=null)}}catch(s){i=!0,o=s}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return n},provide:function(e){return d.hJ.compute([e],(function(n){var r=n.field(e);if(!r)return t(null),null;var i=n.selection.asSingle().main;return{pos:i.from,end:i.to,create:function(e){var n=document.createElement("div");return n.classList.add("cm-lsp-tooltip"),n.classList.add("replit-tooltip"),n.style.padding="0",t((0,s.tZ)(I,(0,a.Z)((0,o.Z)({},r),{onClose:function(){e.dispatch({effects:v.of(null)})},dom:n}))),{dom:n}}}}))}})]}},35390:function(e,t,n){n.d(t,{J:function(){return E},n:function(){return x}});var r=n(35944),i=n(78120),o=n(14456),a=n(14251),l=n(44747),c=n(67294),s=n(73935),u=n(81255),d=n(69346),f=n(17556),p=n(27206),h=n(30992),v=n(61756),m=n(29163),g=n(1144),y=n(67629),Z=n(88075);function b(e){var t=e.dom,n=(0,l.Z)(e,["dom"]);return s.createPortal((0,r.tZ)(w,(0,a.Z)({},n)),t)}function w(e){var t=e.onRename,n=e.closeInput,i=e.variable,o=(0,f.Z)(n,[]),a=c.useRef(null),l=(0,h.Y)(i,(function(e){return e?e===i?{message:"Must pick a new name"}:void 0:{message:"New name can't be empty"}}));return c.useEffect((function(){var e=function(e){"Escape"===e.key&&n()};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[n]),(0,r.tZ)(d.G,{innerRef:o,css:[u.l0.backgroundColor.backgroundDefault,u.l0.flex.column,u.l0.justify.center,u.l0.borderRadius(4),u.l0.shadow(2),u.l0.width(200)],children:(0,r.tZ)("form",{onSubmit:function(e){e.preventDefault(),l.error||(n(),t(l.value))},children:(0,r.BX)(d.G,{css:[u.l0.justify.center],children:[(0,r.BX)(d.G,{css:[u.l0.flex.row,u.l0.align.center,u.l0.pr(4)],children:[(0,r.tZ)(g.h,{level:2,variant:"subheadDefault",css:[u.l0.p(4),u.l0.pl(8)],children:"Rename"}),(0,r.tZ)(g.h,{level:2,variant:"subheadDefault",color:"dimmer",css:[u.l0.maxWidth(100),u.l0.overflow("hidden"),{whiteSpace:"nowrap",textOverflow:"ellipsis"}],children:i}),(0,r.tZ)(m.h,{alt:"Close rename input",tooltipHidden:!0,onClick:n,css:[u.l0.position.absolute,u.l0.top(4),u.l0.right(4)],children:(0,r.tZ)(y.Z,{})})]}),(0,r.tZ)(d.G,{css:[u.l0.justify.center,u.l0.align.center,u.l0.p(8),u.l0.pt(4)],children:(0,r.tZ)(p.ZP,{name:"rename",ref:a,onBlur:l.handleBlur,onChange:function(e){return l.setValue(e.target.value)},value:l.value,placeholder:"New name",autoFocus:!0,autoCorrect:"off",autoCapitalize:"off",autoComplete:"off",validationResults:l.error?[{message:l.error.message,state:"error"}]:void 0,style:{padding:u.TV.space4,borderRadius:u.TV.borderRadius4}})}),(0,r.tZ)(d.G,{css:[u.l0.flex.rowReverse,u.l0.p(8),u.l0.pt(0)],children:(0,r.tZ)(v.zx,{type:"submit",text:"Rename",colorway:"primary",iconLeft:(0,r.tZ)(Z.Z,{}),disabled:Boolean(l.error)||!l.value})})]})})})}var x=i.Py.define();function E(e){var t=e.setDecoration,n=e.hook;return i.QQ.define({create:function(){return null},update:function(e,t){var n=e,r=!0,i=!1,o=void 0;try{for(var a,l=t.effects[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value;c.is(x)&&(n=c.value)}}catch(s){i=!0,o=s}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return n},provide:function(e){return o.hJ.compute([e],(function(i){var o=i.field(e);if(null===o)return t(null),null;if(o>i.doc.length)return null;var a=i.wordAt(o);return a?{pos:o,create:function(){var e=document.createElement("div");e.classList.add("cm-lsp-rename-tooltip"),e.classList.add("replit-tooltip"),e.style.padding="0";var l=i.sliceDoc(a.from,a.to);return t((0,r.tZ)(b,{variable:l,dom:e,onRename:function(e){return n.onRename(e,o)},closeInput:n.closeRenameInput})),{dom:e}}}:null}))}})}},76951:function(e,t,n){n.d(t,{Z:function(){return E}});var r=n(9941),i=n(35944),o=(n(67294),n(59641)),a=n(67629),l=n(39372),c=n(27533),s=n(68424),u=n(54969),d=n(14251),f=n(32692),p=n(31230),h=n(50319);function v(){var e=(0,f.Z)(["\n  mutation AIFeedback($input: CodexFeedback2Input!) {\n    giveCodexFeedback2(input: $input) {\n      ... on CodexFeedback2 {\n        __typename\n      }\n      ... on UnauthorizedError {\n        __typename\n      }\n      ... on NotFoundError {\n        __typename\n      }\n    }\n  }\n"]);return v=function(){return e},e}var m={},g=(0,p.Ps)(v());var y=n(60977),Z=n(62794),b=n(3083),w=function(e){var t=e.provideFeedback;return(0,i.BX)(o.G7,{css:[o.l0.rowWithGap(8),o.l0.justify.start,o.l0.align.center],children:[(0,i.tZ)(o.hU,{alt:"Helpful",colorway:"positive",children:(0,i.tZ)(c.Z,{css:{"&:not(:hover)":[o.l0.color.foregroundDimmer]},onClick:function(){return t(u.TY.Yes)}})}),(0,i.tZ)(o.hU,{alt:"Unhelpful",colorway:"negative",children:(0,i.tZ)(s.Z,{css:{"&:not(:hover)":[o.l0.color.foregroundDimmer]},onClick:function(){return t(u.TY.No)}})})]})},x=function(e){var t=e.provideFeedback;return(0,i.BX)(o.G7,{css:[o.l0.rowWithGap(8),o.l0.justify.start,o.l0.align.center],children:[(0,i.tZ)(o.zx,{text:"Yes",onClick:function(){return t(u.TY.Yes)},small:!0,colorway:"positive",iconLeft:(0,i.tZ)(l.Z,{}),css:{backgroundColor:o.TV.backgroundHighest,":hover":{backgroundColor:o.TV.accentPositiveDimmest}}}),(0,i.tZ)(o.zx,{text:"No",onClick:function(){return t(u.TY.No)},colorway:"negative",small:!0,iconLeft:(0,i.tZ)(a.Z,{}),css:{backgroundColor:o.TV.backgroundHighest,":hover":{backgroundColor:o.TV.accentNegativeDimmest}}})]})};function E(e){var t=e.inferenceId,n=e.language,a=e.inferenceClass,c=e.feedbackFeature,s=(0,r.Z)(function(e){var t=(0,d.Z)({},m,e);return h.D(g,t)}(),2),f=s[0],p=s[1],v=p.data,E=p.error,S=p.called,T=function(e){a===u.Sg.Generation?(0,y.j)(y.U3.CODEX_FEEDBACK_SUBMITTED,{feedback:e,language:n,feature:"generation"}):a===u.Sg.Search?(0,y.j)(y.U3.SEMANTIC_SEARCH_FEEDBACK_SUBMITTED,{feedback:e,language:n,feature:"search"}):a===u.Sg.Chat&&(0,y.j)(y.U3.GHOSTWRITER_CHAT_FEEDBACK_SUBMITTED,{feedback:e}),f({variables:{input:{feedback:e,inferenceClass:a,inferenceId:t}}})};return(0,i.tZ)(o.G7,{css:[o.l0.flex.row,o.l0.align.center,o.l0.justify.start,o.l0.rowWithGap(4),o.l0.width("100%"),o.l0.color.foregroundDimmer],children:S&&"NotFoundError"!==(null===v||void 0===v?void 0:v.giveCodexFeedback2.__typename)&&"UnauthorizedError"!==(null===v||void 0===v?void 0:v.giveCodexFeedback2.__typename)&&!E?(0,i.BX)(i.HY,{children:[(0,i.tZ)(l.Z,{}),(0,i.tZ)(o.xv,{variant:"small",children:"Thanks for the feedback!"})]}):(0,i.tZ)(i.HY,{children:(0,i.BX)(o.G7,{css:[o.l0.flex.grow(1),o.l0.flex.row,o.l0.align.center,o.l0.maxWidth("100%"),o.l0.flex.wrap,o.l0.justify.spaceBetween,o.l0.fontSize(12),{gap:"4px"}],children:[(0,i.tZ)(o.xv,{variant:"small",color:"dimmer",children:C(a)}),(0,i.tZ)(o.G7,{css:[o.l0.rowWithGap(8),o.l0.justify.start,o.l0.align.center],children:a===u.Sg.Chat?(0,i.tZ)(w,{provideFeedback:T}):(0,i.tZ)(x,{provideFeedback:T})}),c?(0,i.tZ)(Z.Z,{feature:b.l.AI}):null]})})})}function C(e){switch(e){case u.Sg.Explanation:return"Is this a good explanation?";case u.Sg.Chat:return"";default:return"Is this code valuable?"}}},98284:function(e,t,n){n.d(t,{Fy:function(){return E},Vw:function(){return C}});var r=n(9941),i=n(35944),o=n(60357),a=n.n(o),l=n(67294),c=n(24561),s=n(70806),u=(n(57731),n(94184)),d=n.n(u),f=n(14456),p=n(63736),h=n(69346),v=n(81255),m=n(29163),g=n(48869),y=n(1144),Z=n(34847),b=n(59006),w=n(41656);function x(e){var t=e.height,n=e.loading;return(0,i.BX)("div",{className:a().dynamic([["5a8d0f5b84417a3b",[t]]])+" "+(d()("loader",{loading:n})||""),children:[(0,i.BX)(c.ZP,{viewBox:"0 0 100 36",backgroundColor:v.TV.backgroundHighest,foregroundColor:v.TV.backgroundHigher,children:[(0,i.tZ)("rect",{x:"0",y:"0",rx:"3",ry:"3",width:"4",height:"4",className:a().dynamic([["5a8d0f5b84417a3b",[t]]])}),(0,i.tZ)("rect",{x:"6",y:"0",rx:"2",ry:"2",width:"92",height:"4",className:a().dynamic([["5a8d0f5b84417a3b",[t]]])})]}),(0,i.tZ)(a(),{id:"5a8d0f5b84417a3b",dynamic:[t],children:".loader.__jsx-style-dynamic-selector{padding:var(--space-8);display:none}.loader.loading.__jsx-style-dynamic-selector{height:".concat(t,";display:block}")})]})}function E(e){var t=e.maxHeight,n=e.minHeight,o=e.extensions,c=void 0===o?[]:o,u=e.allowScroll,p=void 0===u||u,h=e.fontSize,m=e.hideGutter,g=e.path,y=e.snippet,Z=e.style,E=e.elevation,C=e.onNavigateToCode,S=(0,s.Z)({hideGutter:m,filePath:g,fontSize:h,readOnly:!0}),T=S.view,k=S.ref,_=(0,r.Z)(l.useState(!1),2),R=_[0],D=_[1],I=l.useRef(v.TV.backgroundDefault),P=(0,b.Z)({view:T});return l.useEffect((function(){if(T&&y&&g){var e="lines"in y?y.lines.join("\n"):y.doc;T.dispatch({changes:{from:0,to:T.state.doc.length,insert:e},effects:P.reconfigure([(0,f.Eu)({formatNumber:function(e,t){for(var n=String(t.doc.lines).length,r=String(e+y.startLineNumber-1);n>r.length;)r="\xa0"+r;return r}}),c])});var t,n={root:v.TV.backgroundRoot,higher:v.TV.backgroundHigher,highest:v.TV.backgroundHighest,default:v.TV.backgroundDefault};return I.current=E&&null!==(t=n[E])&&void 0!==t?t:v.TV.backgroundDefault,D(!0),function(){T.dispatch({effects:P.reconfigure([])})}}}),[T,y,g,P,c,E]),(0,i.BX)("div",{style:Z,className:a().dynamic([["7371a85c4a264eca",[t||"10em",n,I.current,I.current]]]),children:[(0,i.tZ)("div",{ref:k,onClick:function(e){if(C&&T){var t=e.clientX,n=e.clientY,r=T.posAtCoords({x:t,y:n}),i=null!==r?(0,w.s)(T.state.doc,r):null;C(i)}},className:a().dynamic([["7371a85c4a264eca",[t||"10em",n,I.current,I.current]]])+" "+(d()("snippet-editor",{"no-scroll":!p,loading:!R})||"")}),(0,i.tZ)(x,{loading:!R,height:t}),(0,i.tZ)(a(),{id:"7371a85c4a264eca",dynamic:[t||"10em",n,I.current,I.current],children:".snippet-editor.__jsx-style-dynamic-selector .cm-scroller{max-height:".concat(t||"10em",";min-height:").concat(n,";scrollbar-width:thin;outline:none}.snippet-editor.__jsx-style-dynamic-selector .cm-content{padding-bottom:0}.snippet-editor.__jsx-style-dynamic-selector .cm-editor{background-color:").concat(I.current,"}.snippet-editor.loading.__jsx-style-dynamic-selector{display:none}.snippet-editor.no-scroll.__jsx-style-dynamic-selector .cm-scroller{overflow:hidden}.snippet-editor.__jsx-style-dynamic-selector ::-webkit-scrollbar{width:4px}.snippet-editor.__jsx-style-dynamic-selector .cm-gutters{min-width:unset;background-color:").concat(I.current,"}")})]})}function C(e){var t=e.path,n=e.doc,o=e.extensions,a=void 0===o?[]:o,c=e.numMatches,s=e.onNavigateToCode,u=e.initiallyExpanded,d=(0,r.Z)(l.useState(u),2),f=d[0],b=d[1],w=f?"block":"none",x=f?180:0,C=f?"Collapse snippet":"Expand snippet";return(0,i.BX)(h.G,{children:[(0,i.BX)(h.G,{css:[v.l0.width("100%"),v.l0.p(4),v.l0.rowWithGap(8),{alignItems:"center"}],children:[(0,i.tZ)(p.Z,{path:t}),(0,i.tZ)(y.x,{title:t,css:[v.l0.flex.shrink(1),{textOverflow:"ellipsis"}],children:t}),(0,i.tZ)(y.x,{color:"dimmest",children:(0,Z.Z)("match",c,!0)}),(0,i.tZ)(h.G,{css:v.l0.flex.grow(1)}),(0,i.tZ)(m.h,{alt:C,tooltipHidden:!0,onClick:function(){return b((function(e){return!e}))},children:(0,i.tZ)(g.Z,{rotate:x,style:{transition:"200ms ease"}})})]}),(0,i.tZ)(h.G,{css:[v.l0.p(4),{display:w}],children:(0,i.tZ)(E,{path:t,snippet:{doc:n,startLineNumber:1},extensions:a,maxHeight:"max-content",allowScroll:!0,hideGutter:!0,onNavigateToCode:s})})]})}},58142:function(e,t,n){n.d(t,{Z:function(){return h}});var r=n(75815),i=n(90132),o=n(48270),a=n(14456),l=n(78120),c=n(81255),s=n(34847),u=new(function(e){(0,i.Z)(n,e);var t=(0,o.Z)(n);function n(){var e;return(0,r.Z)(this,n),(e=t.call(this)).elementClass="cm-gutterElement-hidden",e}return n.prototype.toDOM=function(){var e=document.createElement("span");e.classList.add("cm-hidden-lines-gutter");var t=document.createElement("span");return t.classList.add("cm-dot"),e.appendChild(t),e},n}(a.SJ)),d=function(e){(0,i.Z)(n,e);var t=(0,o.Z)(n);function n(e){var i;return(0,r.Z)(this,n),(i=t.call(this)).numLines=e,i}var a=n.prototype;return a.eq=function(e){return e.numLines===this.numLines},a.toDOM=function(){var e=document.createElement("span");return e.textContent="".concat(this.numLines," hidden ").concat((0,s.Z)("line",this.numLines)),e.className="cm-hidden-lines",e},n}(a.l9),f=a.p.mark({class:"cm-searchResultMatch"}),p=a.tk.baseTheme({".cm-hidden-lines":{color:"var(--foreground-dimmer)",backgroundColor:"var(--background-highest)",display:"inline-block",width:"100%"},".cm-gutterElement-hidden":{backgroundColor:"var(--background-highest)"},".cm-hidden-lines-gutter":{backgroundColor:"var(--background-highest)",display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%"},".cm-dot":{height:"5px",width:"5px",backgroundColor:"var(--foreground-dimmest)",borderRadius:"50%",display:"inline-block"},".cm-tooltip .cm-scroller":{border:"2px solid var(--background-highest)",borderRadius:"var(--border-radius-4)"},".cm-tooltip .cm-scroller:hover":{border:"2px solid var(--accent-primary-dimmest)",boxShadow:"var(--shadow-1)",cursor:"pointer"},".cm-searchResultMatch":{color:c.TV.foregroundDefault,backgroundColor:c.TV.accentPrimaryDimmest,outline:c.TV.accentPrimaryDimmer+" solid 1px"},".cm-searchResultMatch span":{color:c.TV.foregroundDefault},".cm-tooltip .cm-searchResultMatch:hover":{opacity:.8},".cm-tooltip .cm-gutterElement":{display:"flex",marginTop:0,textAlign:"center",alignItems:"center",justifyContent:"center",lineHeight:"21px"},".cm-tooltip .cm-line":{padding:0},".cm-tooltip .cm-gutters":{padding:0},".cm-tooltip .cm-content":{paddingTop:0},".cm-tooltip .cm-lineWrapping":{whiteSpace:"pre"},".cm-tooltip .cm-cursor":{display:"none"},".cm-tooltip .cm-selectionBackground":{display:"none"}});function h(e,t){var n=e.sort((function(e,t){return e.from-t.from})),r=n.map((function(e){var t=e.from,n=e.to;return f.range(t,n)})),i=a.lg.define((function(){return{}}),{decorations:function(){return a.p.set(r)}}),o=function(e,t){var n=[],r=1;e.forEach((function(i,o){var a=t.lineAt(i.from),l=t.lineAt(i.to);r<a.number-2&&n.push({startLine:r,endLine:a.number-2}),r=l.number+2,o===e.length-1&&r<t.lines&&n.push({startLine:r,endLine:t.lines})}));var i=n.map((function(e){var n=t.line(e.startLine),r=t.line(e.endLine);return a.p.replace({widget:new d(e.endLine-e.startLine+1)}).range(n.from,r.to)})),o=n.map((function(e){var n=t.line(e.startLine);return a.p.line({class:"cm-line-hidden"}).range(n.from)})),c=l.QQ.define({create:function(){return a.p.set(i)},update:function(e){return e},provide:function(e){return a.tk.decorations.from(e)}}),s=l.QQ.define({create:function(){return a.p.set(o)},update:function(e){return e},provide:function(e){return a.tk.decorations.from(e)}}),f=n.map((function(e){var n=t.line(e.startLine);return u.range(n.from)})),h=a.p2.of(l.Xs.of(f));return[c,s,p,h]}(n,t);return[i,o]}},60523:function(e,t,n){var r=n(67294).createContext(null);t.Z=r},67992:function(e,t,n){n.d(t,{nE:function(){return Q},OQ:function(){return K},qi:function(){return W},UQ:function(){return j},YM:function(){return V},PQ:function(){return Y},ZS:function(){return $},eR:function(){return z},QO:function(){return te},zj:function(){return ee},cR:function(){return q}});var r=n(75815),i=n(67573),o=n(90132),a=n(14251),l=n(52875),c=n(48270),s=n(35944),u=n(78120),d=n(410),f=n(59641),p=n(14456),h=n(73935),v=n(65632),m=n(67294),g=n(7463),y=n(53768),Z=function(e){var t=e.isOpen,n=e.threadId,r=(0,m.useState)(!1),i=r[0],o=r[1],a=(0,g.GD)({variables:{id:n}});(0,m.useEffect)((function(){var e;if(a&&!a.error){var t=null===(e=a.data)||void 0===e?void 0:e.thread;t&&o("AnnotationAnchor"===(null===t||void 0===t?void 0:t.__typename)&&(null===t||void 0===t?void 0:t.messages.some((function(e){return!e.seen}))))}}),[a]);var l={alt:{default:"View threads",close:"Dismiss thread"}};return(0,s.tZ)(f.hU,{alt:t?l.alt.close:l.alt.default,size:24,className:"thread-indicator",css:[f.l0.width(20),f.l0.height(20),f.l0.transition.snappy,f.l0.cursor.pointer,f.l0.display.flex,f.l0.borderRadius(8),f.l0.position.relative,f.l0.overflow("visible"),t?f.l0.color.accentPrimaryStrongest:f.l0.color.foregroundDimmest,{borderWidth:f.TV.borderWidthDefault,borderStyle:"solid",borderColor:t?f.TV.accentPrimaryDefault:"transparent",backgroundColor:t?f.TV.accentPrimaryDimmer:f.TV.backgroundHigher,outline:0},{":hover":{borderColor:t?f.TV.accentPrimaryStronger:f.TV.outlineDimmer,color:t?f.TV.accentPrimaryStrongest:f.TV.foregroundDimmer,background:t?f.TV.accentPrimaryDefault+" !important":f.TV.backgroundHighest},svg:{width:12,height:12}}],children:(0,s.BX)(s.HY,{children:[i?(0,s.tZ)("div",{css:[f.l0.width(8),f.l0.height(8),f.l0.backgroundColor.redStronger,f.l0.position.absolute,f.l0.top(-1),f.l0.left(-1),f.l0.borderRadius("full")]}):null,(0,s.tZ)(v.Z,{})]})})},b=function(e){return e.apolloClient?(0,s.tZ)(y.e,{client:e.apolloClient,children:(0,s.tZ)(Z,(0,a.Z)({},e))}):null},w=n(34528),x=function(e){(0,o.Z)(n,e);var t=(0,c.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}var i=n.prototype;return i.compare=function(e){return this==e||this.constructor==e.constructor&&this.eq(e)},i.eq=function(e){return!1},i.destroy=function(e){},n}(u.uU);x.prototype.elementClass="",x.prototype.toDOM=void 0,x.prototype.mapMode=u.gc.TrackBefore,x.prototype.startSide=x.prototype.endSide=-1,x.prototype.point=!0;var E=u.r$.define(),C={class:"",renderEmptyElements:!1,elementStyle:"",markers:function(){return u.Xs.empty},lineMarker:function(){return null},lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},S=u.r$.define();var T=u.r$.define({combine:function(e){return e.some((function(e){return e}))}});function k(e){var t=[_];return e&&!1===e.fixed&&t.push(T.of(!0)),t}var _=p.lg.fromClass(function(){function e(t){(0,r.Z)(this,e),this.view=t,this.prevViewport=t.viewport,this.dom=document.createElement("div"),this.dom.className="cm-right-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.width="0px",this.dom.style.minHeight=this.view.contentHeight+"px",this.gutters=t.state.facet(S).map((function(e){return new P(t,e)}));var n=!0,i=!1,o=void 0;try{for(var a,l=this.gutters[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var c=a.value;this.dom.appendChild(c.dom)}}catch(s){i=!0,o=s}finally{try{n||null==l.return||l.return()}finally{if(i)throw o}}this.fixed=!t.state.facet(T),this.fixed&&(this.dom.style.position="sticky",this.dom.style.right="0"),this.syncGutters(!1),t.scrollDOM.insertBefore(this.dom,t.contentDOM.nextSibling)}var t=e.prototype;return t.update=function(e){if(this.updateGutters(e)){var t=this.prevViewport,n=e.view.viewport,r=Math.min(t.to,n.to)-Math.max(t.from,n.from);this.syncGutters(r<.8*(n.to-n.from))}e.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(T)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=e.view.viewport},t.syncGutters=function(e){var t=this,n=this.dom.nextSibling;e&&this.dom.remove();var r=u.Xs.iter(this.view.state.facet(E),this.view.viewport.from),i=[],o=this.gutters.map((function(e){return new I(e,t.view.viewport,-t.view.documentPadding.top)})),a=!0,l=!1,c=void 0;try{for(var s,d=this.view.viewportLineBlocks[Symbol.iterator]();!(a=(s=d.next()).done);a=!0){var f=s.value,h=void 0;if(Array.isArray(f.type)){var v=!0,m=!1,g=void 0;try{for(var y,Z=f.type[Symbol.iterator]();!(v=(y=Z.next()).done);v=!0){var b=y.value;if(b.type==p.kH.Text){h=b;break}}}catch(B){m=!0,g=B}finally{try{v||null==Z.return||Z.return()}finally{if(m)throw g}}}else h=f.type==p.kH.Text?f:void 0;if(h){i.length&&(i=[]),D(r,i,f.from);var w=!0,x=!1,C=void 0;try{for(var S,T=o[Symbol.iterator]();!(w=(S=T.next()).done);w=!0){S.value.line(this.view,h,i)}}catch(B){x=!0,C=B}finally{try{w||null==T.return||T.return()}finally{if(x)throw C}}}}}catch(B){l=!0,c=B}finally{try{a||null==d.return||d.return()}finally{if(l)throw c}}var k=!0,_=!1,R=void 0;try{for(var P,G=o[Symbol.iterator]();!(k=(P=G.next()).done);k=!0){P.value.finish()}}catch(B){_=!0,R=B}finally{try{k||null==G.return||G.return()}finally{if(_)throw R}}e&&this.view.scrollDOM.insertBefore(this.dom,n)},t.updateGutters=function(e){var t=e.startState.facet(S),n=e.state.facet(S),r=e.docChanged||e.heightChanged||e.viewportChanged||!u.Xs.eq(e.startState.facet(E),e.state.facet(E),e.view.viewport.from,e.view.viewport.to);if(t==n){var i=!0,o=!1,a=void 0;try{for(var l,c=this.gutters[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){l.value.update(e)&&(r=!0)}}catch(G){o=!0,a=G}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}}else{r=!0;var s=[],d=!0,f=!1,p=void 0;try{for(var h,v=n[Symbol.iterator]();!(d=(h=v.next()).done);d=!0){var m=h.value,g=t.indexOf(m);g<0?s.push(new P(this.view,m)):(this.gutters[g].update(e),s.push(this.gutters[g]))}}catch(G){f=!0,p=G}finally{try{d||null==v.return||v.return()}finally{if(f)throw p}}var y=!0,Z=!1,b=void 0;try{for(var w,x=this.gutters[Symbol.iterator]();!(y=(w=x.next()).done);y=!0){var C=w.value;C.dom.remove(),s.indexOf(C)<0&&C.destroy()}}catch(G){Z=!0,b=G}finally{try{y||null==x.return||x.return()}finally{if(Z)throw b}}var T=!0,k=!1,_=void 0;try{for(var R,D=s[Symbol.iterator]();!(T=(R=D.next()).done);T=!0){var I=R.value;this.dom.appendChild(I.dom)}}catch(G){k=!0,_=G}finally{try{T||null==D.return||D.return()}finally{if(k)throw _}}this.gutters=s}return r},t.destroy=function(){var e=!0,t=!1,n=void 0;try{for(var r,i=this.gutters[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){r.value.destroy()}}catch(o){t=!0,n=o}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}this.dom.remove()},e}(),{provide:function(e){return p.tk.scrollMargins.of((function(t){var n=t.plugin(e);return n&&0!=n.gutters.length&&n.fixed?t.textDirection==p.Nm.LTR?{left:n.dom.offsetWidth}:{right:n.dom.offsetWidth}:null}))}});function R(e){return Array.isArray(e)?e:[e]}function D(e,t,n){for(;e.value&&e.from<=n;)e.from==n&&t.push(e.value),e.next()}var I=function(){function e(t,n,i){(0,r.Z)(this,e),this.gutter=t,this.height=i,this.localMarkers=[],this.i=0,this.cursor=u.Xs.iter(t.markers,n.from)}var t=e.prototype;return t.line=function(e,t,n){this.localMarkers.length&&(this.localMarkers=[]),D(this.cursor,this.localMarkers,t.from);var r=n.length?this.localMarkers.concat(n):this.localMarkers,i=this.gutter.config.lineMarker(e,t,r);i&&r.unshift(i);var o=this.gutter;if(0!=r.length||o.config.renderEmptyElements){var a=t.top-this.height;if(this.i==o.elements.length){var l=new G(e,t.height,a,r);o.elements.push(l),o.dom.appendChild(l.dom)}else o.elements[this.i].update(e,t.height,a,r);this.height=t.bottom,this.i++}},t.finish=function(){for(var e=this.gutter;e.elements.length>this.i;){var t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}},e}(),P=function(){function e(t,n){var i=this,o=function(e){i.dom.addEventListener(e,(function(r){var i=t.lineBlockAtHeight(r.clientY-t.documentTop);n.domEventHandlers[e](t,i,r)&&r.preventDefault()}))};for(var a in(0,r.Z)(this,e),this.view=t,this.config=n,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:""),n.domEventHandlers)o(a);this.markers=R(n.markers(t)),n.initialSpacer&&(this.spacer=new G(t,0,0,[n.initialSpacer(t)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}var t=e.prototype;return t.update=function(e){var t=this.markers;if(this.markers=R(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){var n=this.config.updateSpacer(this.spacer.markers[0],e);n!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[n])}var r=e.view.viewport;return!u.Xs.eq(this.markers,t,r.from,r.to)||!!this.config.lineMarkerChange&&this.config.lineMarkerChange(e)},t.destroy=function(){var e=!0,t=!1,n=void 0;try{for(var r,i=this.elements[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){r.value.destroy()}}catch(o){t=!0,n=o}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}},e}(),G=function(){function e(t,n,i,o){(0,r.Z)(this,e),this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(t,n,i,o)}var t=e.prototype;return t.update=function(e,t,n,r){this.height!=t&&(this.dom.style.height=(this.height=t)+"px"),this.above!=n&&(this.dom.style.marginTop=(this.above=n)?n+"px":""),function(e,t){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].compare(t[n]))return!1;return!0}(this.markers,r)||this.setMarkers(e,r)},t.setMarkers=function(e,t){for(var n="cm-gutterElement",r=this.dom.firstChild,i=0,o=0;;){var a=o,l=i<t.length?t[i++]:null,c=!1;if(l){var s=l.elementClass;s&&(n+=" "+s);for(var u=o;u<this.markers.length;u++)if(this.markers[u].compare(l)){a=u,c=!0;break}}else a=this.markers.length;for(;o<a;){var d=this.markers[o++];if(d.toDOM){d.destroy(r);var f=r.nextSibling;r.remove(),r=f}}if(!l)break;l.toDOM&&(c?r=r.nextSibling:this.dom.insertBefore(l.toDOM(e),r)),c&&o++}this.dom.className=n,this.markers=t},t.destroy=function(){this.setMarkers(null,[])},e}();var B=u.r$.define(),A=u.r$.define({combine:function(e){return(0,u.BO)(e,{formatNumber:String,domEventHandlers:{}},{domEventHandlers:function(e,t){var n=function(e){var n=r[e],i=t[e];r[e]=n?function(e,t,r){return n(e,t,r)||i(e,t,r)}:i},r=Object.assign({},e);for(var i in t)n(i);return r}})}}),U=function(e){(0,o.Z)(n,e);var t=(0,c.Z)(n);function n(e){var i;return(0,r.Z)(this,n),(i=t.call(this)).number=e,i}var i=n.prototype;return i.eq=function(e){return this.number==e.number},i.toDOM=function(){return document.createTextNode(this.number)},n}(x);function O(e,t){return e.state.facet(A).formatNumber(t,e.state)}S.compute([A],(function(e){return{class:"cm-lineNumbers",renderEmptyElements:!1,markers:function(e){return e.state.facet(B)},lineMarker:function(e,t,n){return n.some((function(e){return e.toDOM}))?null:new U(O(e,e.state.doc.lineAt(t.from).number))},lineMarkerChange:function(e){return e.startState.facet(A)!=e.state.facet(A)},initialSpacer:function(e){return new U(O(e,N(e.state.doc.lines)))},updateSpacer:function(e,t){var n=O(t.view,N(t.view.state.doc.lines));return n==e.number?e:new U(n)},domEventHandlers:e.facet(A).domEventHandlers}}));function N(e){for(var t=9;t<e;)t=10*t+9;return t}var L=new(function(e){(0,o.Z)(n,e);var t=(0,c.Z)(n);function n(){var e;return(0,r.Z)(this,n),(e=t.apply(this,arguments)).elementClass="cm-activeLineGutter",e}return n}(x));E.compute(["selection"],(function(e){var t=[],n=-1,r=!0,i=!1,o=void 0;try{for(var a,l=e.selection.ranges[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value;if(c.empty){var s=e.doc.lineAt(c.head).from;s>n&&(n=s,t.push(L.range(s)))}}}catch(d){i=!0,o=d}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return u.Xs.of(t)}));var F=n(75026),X=n(55877),M=n.n(X),W=u.Py.define(),j=u.Py.define(),H=u.Py.define(),z=u.Py.define(),V=u.Py.define(),q=p.tk.baseTheme({".replit-thread-highlight":{background:f.TV.accentPrimaryDimmest,transition:"".concat(f.TV.transitionDurationSnappy," all\n            ").concat(f.TV.transitionTimingFunctionSnappy)},".replit-thread-highlight .replit-thread-highlight":{background:"transparent"},".cm-thread-indicator-gutter":{transform:"translate(calc(-100% - var(--space-8)));",width:"20px",overflow:"visible"}}),K=u.QQ.define({create:function(){return{}},update:function(e,t){var n=e;return(0,d.j)(t,W,(function(e){n=e.value})),t.changes.empty?n:n=Object.values(n).map((function(e){return(0,l.Z)((0,a.Z)({},e),{indexStart:t.changes.mapPos(e.indexStart),indexEnd:t.changes.mapPos(e.indexEnd)})})).reduce((function(e,t){return e[t.id]=t,e}),{})}}),$=u.QQ.define({create:function(){return null},update:function(e,t){var n=e;return(0,d.j)(t,j,(function(e){var r=t.state,i=r.selection.main,o=i.from,a=i.to;if(o===a){var l=r.doc.lineAt(o);o=Math.max(l.from-1,0),a=l.to}n={id:e.value,indexStart:o,indexEnd:a}})),(0,d.j)(t,H,(function(){n=null})),(0,d.j)(t,V,(function(){n=null})),null!==n&&(0,d.j)(t,W,(function(e){if(!n)throw new Error("expected newPlaceholder");e.value[n.id]&&(n=null)})),!t.changes.empty&&n&&(n=(0,l.Z)((0,a.Z)({},n),{indexStart:t.changes.mapPos(n.indexStart),indexEnd:t.changes.mapPos(n.indexEnd)})),n}}),Y=u.QQ.define({create:function(){return null},update:function(e,t){var n=e;return(0,d.j)(t,V,(function(e){n=e.value})),(0,d.j)(t,j,(function(e){n=e.value})),n}}),Q=function(e){(0,o.Z)(n,e);var t=(0,c.Z)(n);function n(e,i){var o;return(0,r.Z)(this,n),(o=t.call(this)).id=e,o.setThreadElements=i,o}var s=n.prototype;return s.eq=function(e){return e.id===this.id},s.toDOM=function(e){var t=this,n=document.createElement("div");n.className="cm-thread-portal-widget";var r=e.dom.querySelector(".cm-scroller"),o=e.dom.querySelector(".cm-gutters");return r&&o&&(0,w.L)(n,r,o),setTimeout((function(){t.setThreadElements((function(e){return(0,l.Z)((0,a.Z)({},e),(0,i.Z)({},t.id,n))}))})),n},s.destroy=function(e){var t=this;e.remove(),setTimeout((function(){t.setThreadElements((function(e){var n=(0,a.Z)({},e);return delete n[t.id],n}))}))},s.ignoreEvent=function(){return!0},n}(p.l9),J=function(e){(0,o.Z)(n,e);var t=(0,c.Z)(n);function n(e,i,o){var a;return(0,r.Z)(this,n),(a=t.call(this)).id=e,a.active=i,a.apolloClient=o,a}var i=n.prototype;return i.toDOM=function(e){var t=this,n=document.createElement("span");return n.setAttribute("aria-hidden","true"),n.className="cm-thread-indicator-widget",h.render((0,s.tZ)(b,{isOpen:this.active,threadId:this.id,apolloClient:this.apolloClient}),n),n.style.cursor="pointer",n.onclick=function(n){n.stopPropagation(),n.preventDefault(),e.dispatch({effects:[V.of(e.state.field(Y)===t.id?null:t.id)]})},n},i.eq=function(e){return e.id===this.id&&e.active===this.active},n}(x),ee=function(e){return t={class:"cm-thread-indicator-gutter",markers:function(t){var n=t.state.field(K),r=t.state.field(Y);return u.Xs.of(Object.values(n).filter((function(e){return e.indexEnd!==e.indexStart})).map((function(n){var i=t.state.doc.lineAt(Math.min(n.indexStart,n.indexEnd)).from;return new J(n.id,n.id===r,e).range(i)})),!0)},initialSpacer:function(){return new J("initial-spacer",!1)}},[k(),S.of((0,a.Z)({},C,t))];var t},te=function(){var e=function(e){var t=e.selection.main;return t.empty||e.selection.ranges.filter((function(e){return e!==t})).length?null:{pos:t.from,above:!0,create:function(e){var t=document.createElement("div");return t.className="cm-start-thread-tooltip",h.render((0,s.tZ)(f.Tg,{css:[f.l0.borderRadius(8),f.l0.shadow(1),f.l0.backgroundColor.backgroundHigher,{border:"1px solid ".concat(f.TV.outlineDimmer)}],children:(0,s.tZ)(f.zx,{text:"Start thread",iconLeft:(0,s.tZ)(F.Z,{}),css:[f.l0.width("fit-content"),f.l0.display.flex,f.l0.align.center],onClick:function(){e.dispatch({effects:[j.of(M()())]}),(0,h.unmountComponentAtNode)(t)}})}),t),{dom:t}}}};return[u.QQ.define({create:e,update:function(t,n){return"select"===n.annotation(u.YW.userEvent)?null:n.docChanged||n.selection?e(n.state):t},provide:function(e){return p.hJ.compute([e],(function(t){return t.field(e)}))}}),ne]},ne=p.tk.baseTheme({".cm-tooltip.cm-start-thread-tooltip":{backgroundColor:"transparent",boxShadow:"none",border:"0 none",padding:"0px"}})},34528:function(e,t,n){function r(e,t,n){var r=t.clientWidth,i=n.clientWidth;e.style.maxWidth="".concat(r,"px"),e.style.position="sticky",e.style.zIndex="201",e.style.marginLeft="-".concat(i,"px")}n.d(t,{L:function(){return r}})},7463:function(e,t,n){n.d(t,{AL:function(){return w},GD:function(){return v},VO:function(){return h},Y:function(){return Z},tT:function(){return g}});var r=n(14251),i=n(32692),o=n(31230),a=n(6801),l=n(37887),c=n(50319);function s(){var e=(0,i.Z)(["\n  query CodemirrorThread($id: String!) {\n    thread: annotationAnchor(id: $id) {\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n    }\n    currentUser {\n      id\n      username\n      image\n    }\n  }\n  ","\n"]);return s=function(){return e},e}function u(){var e=(0,i.Z)(["\n  mutation CreateThread(\n    $thread: AnnotationAnchorInput!\n    $message: AnnotationMessageInput\n    $highlight: AnnotationHighlightInput\n  ) {\n    createThread: createAnnotationAnchor(\n      annotationAnchor: $thread\n      annotationMessage: $message\n      highlight: $highlight\n    ) {\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return u=function(){return e},e}function d(){var e=(0,i.Z)(["\n  mutation UpdateThread($id: String!, $changes: AnnotationAnchorChangesInput!) {\n    updateThread: updateAnnotationAnchor(id: $id, changes: $changes) {\n      ... on UserError {\n        message\n      }\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n    }\n  }\n  ","\n"]);return d=function(){return e},e}function f(){var e=(0,i.Z)(["\n  mutation CreateThreadMessage(\n    $replId: String!\n    $threadId: String!\n    $threadMessage: AnnotationMessageInput!\n    $highlight: AnnotationHighlightInput\n  ) {\n    createThreadMessage: createAnnotationMessage(\n      replId: $replId\n      anchorId: $threadId\n      annotationMessage: $threadMessage\n      highlight: $highlight\n    ) {\n      ... on UserError {\n        message\n      }\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n    }\n  }\n  ","\n"]);return f=function(){return e},e}var p={},h=(0,o.Ps)(s(),a.j7);function v(e){var t=(0,r.Z)({},p,e);return l.a(h,t)}var m=(0,o.Ps)(u(),a.j7);function g(e){var t=(0,r.Z)({},p,e);return c.D(m,t)}var y=(0,o.Ps)(d(),a.j7);function Z(e){var t=(0,r.Z)({},p,e);return c.D(y,t)}var b=(0,o.Ps)(f(),a.j7);function w(e){var t=(0,r.Z)({},p,e);return c.D(b,t)}},2230:function(e,t,n){n.d(t,{Z:function(){return b}});var r=n(14251),i=n(52875),o=n(9941),a=n(69779),l=n(67294),c=n(93058),s=n(7463),u=n(11213),d=n(6801),f=n(30827),p=n(63377),h=n(9583),v=n(99408),m=n(67992),g=n(23384);function y(e,t){if(!e)return null;var n,r=e.state.field(m.OQ),i=e.state.field(m.ZS),o=null!==(n=r[t])&&void 0!==n?n:(null===i||void 0===i?void 0:i.id)===t?i:null;return o||null}function Z(e,t){if(!e)return null;var n=y(e,t);if(!n)return null;var r=Math.min(n.indexStart,n.indexEnd),i=Math.max(n.indexStart,n.indexEnd),o=e.state.doc.lineAt(r),a=e.state.doc.lineAt(i),l=e.state.doc.sliceString(e.state.doc.line(Math.max(o.number-2,1)).from,r),c=e.state.doc.sliceString(i,e.state.doc.line(Math.min(a.number+2,e.state.doc.lines)).to);return{precode:l,code:e.state.doc.sliceString(r,i),postcode:c}}function b(e,t,n){var b=(0,c.Z)().showError,w=(0,p.Z)(),x=(0,g.D)({controlName:"flag-typing-presence"}),E=(0,f.Z)().map((function(e){return e.username})),C=(0,v.Z)().fs,S=(0,s.GD)({variables:{id:e}}),T=S.data,k=S.error,_=S.loading,R=S.client,D=function(){var n;return _||!T?!!t&&(null===(n=t.state.field(m.ZS))||void 0===n?void 0:n.id)===e:"AnnotationAnchor"!==T.thread.__typename}(),I=_,P=l.useMemo((function(){return I||!T?null:"UserError"===T.thread.__typename?{id:e,__typename:"AnnotationAnchor",messages:[],isGeneral:!1,isResolved:!1}:"AnnotationAnchor"===T.thread.__typename?T.thread:null}),[T,e,I]),G=(0,o.Z)((0,s.tT)({onError:function(e){return b(e.message)},update:function(e,t){var n,r;t.errors?t.errors.forEach((function(e){return b(e.message)})):"UserError"!==(null===(n=t.data)||void 0===n||null===(r=n.createThread)||void 0===r?void 0:r.__typename)||b(t.data.createThread.message)}}),1),B=G[0],A=(0,o.Z)((0,s.AL)({onError:function(e){return b(e.message)},update:function(e,t){var n;if(t.errors)t.errors.forEach((function(e){return b(e.message)}));else{var r=null===(n=t.data)||void 0===n?void 0:n.createThreadMessage;r&&"UserError"===r.__typename&&b(r.message)}}}),1),U=A[0],O=(0,o.Z)((0,s.Y)({onError:function(e){return b(e.message)},update:function(e,t){var n;if(t.errors)t.errors.forEach((function(e){return b(e.message)}));else{var r=null===(n=t.data)||void 0===n?void 0:n.updateThread;r&&"UserError"===r.__typename&&b(r.message)}}}),1),N=O[0],L=(0,o.Z)((0,d.Hj)(),1)[0],F=function(){var e=null===T||void 0===T?void 0:T.currentUser;return e?{user:{__typename:"User",id:e.id,username:e.username,image:e.image}}:{}};return{thread:P,isPlaceholder:D,error:k,loading:I,getHighlight:Z,getLatestAnchor:function(){return y(t,e)},updateThread:function(e){var t,n=e.changes,o="AnnotationAnchor"===(null===T||void 0===T||null===(t=T.thread)||void 0===t?void 0:t.__typename)?T.thread:null;if(!o)throw new Error("expected thread");N({variables:{id:o.id,changes:n},optimisticResponse:{updateThread:(0,i.Z)((0,r.Z)({},o,n),{isResolved:"boolean"===typeof n.isResolved?n.isResolved:o.isResolved})}})},finalizeThreadMessage:function(o){var l,c=o.message,d=o.messageId,f={id:d,text:c,mentions:(0,h.kW)(c,{users:(0,a.Z)(E).concat(["everyone"])}).mentions};if(D&&t&&n){var p=t.state.field(m.ZS),v={id:e,replId:w,indexStart:null===p||void 0===p?void 0:p.indexStart,indexEnd:null===p||void 0===p?void 0:p.indexEnd,otVersion:C.getOTVersion(n),path:n};B({variables:{thread:v,message:f,highlight:Z(t,e)},optimisticResponse:{__typename:"RootMutationType",createThread:(0,i.Z)((0,r.Z)({__typename:"AnnotationAnchor"},v,F()),{messages:[(0,i.Z)((0,r.Z)({id:d,timeCreated:Date.now(),currentUserIsAuthor:!0},F()),{content:{text:c,__typename:"TextMessageContentType"},anchor:{id:v.id,__typename:"AnnotationAnchor"},__typename:"AnnotationMessage",seen:!0})],isResolved:!1,isGeneral:!1})}}),R.writeQuery({query:s.VO,variables:{id:e},data:{thread:(0,i.Z)((0,r.Z)((0,i.Z)((0,r.Z)({},v),{isResolved:!1,isGeneral:!1}),F()),{messages:[(0,i.Z)((0,r.Z)({id:d,timeCreated:Date.now(),currentUserIsAuthor:!0},F()),{content:{text:c,__typename:"TextMessageContentType"},anchor:{id:v.id,__typename:"AnnotationAnchor"},__typename:"AnnotationMessage",seen:!0})],__typename:"AnnotationAnchor"}),currentUser:null===T||void 0===T?void 0:T.currentUser}});var g=R.readQuery({query:u.Jq,variables:{replId:w,path:n}});if(g){var y,b="ThreadsByFileResult"===(null===(y=g.threadsByFile)||void 0===y?void 0:y.__typename)?g.threadsByFile.threads:[],x=F().user;R.writeQuery({query:u.Jq,variables:{replId:w,path:n},data:{threadsByFile:{__typename:"ThreadsByFileResult",threads:(0,a.Z)(b).concat([(0,r.Z)({messageCount:1,unreadCount:0,__typename:"AnnotationAnchor",isGeneral:!1,user:x,isResolved:!1,participants:[x]},v)])}}})}}else{var S="AnnotationAnchor"===(null===T||void 0===T||null===(l=T.thread)||void 0===l?void 0:l.__typename)?T.thread:null;if(!S)throw new Error("expected thread");U({variables:{replId:w,threadId:S.id,threadMessage:f,highlight:Z(t,S.id)},optimisticResponse:{createThreadMessage:(0,i.Z)((0,r.Z)({},S),{messages:(0,a.Z)(S.messages.filter((function(e){return!e.id.startsWith("chat-")}))).concat([(0,i.Z)((0,r.Z)({},F(),f),{content:{text:f.text,__typename:"TextMessageContentType"},anchor:{id:S.id,__typename:"AnnotationAnchor"},__typename:"AnnotationMessage",timeCreated:Date.now(),currentUserIsAuthor:!0,seen:!0})])})}})}},changeThreadMessage:function(t){var n=t.messageId,r=t.message;L({variables:{threadId:e,messageId:n,message:null!==x&&void 0!==x&&x?r:null}})}}}},11213:function(e,t,n){n.d(t,{Jq:function(){return s},eR:function(){return u}});var r=n(14251),i=n(32692),o=n(31230),a=n(37887);function l(){var e=(0,i.Z)(["\n  query ThreadsByFileHook($replId: String!, $path: String!) {\n    threadsByFile(replId: $replId, path: $path) {\n      ... on ThreadsByFileResult {\n        threads {\n          id\n          path\n          otVersion\n          indexStart\n          indexEnd\n          messageCount\n          unreadCount\n          user {\n            id\n            image\n            username\n          }\n          participants {\n            id\n            image\n            username\n          }\n          isGeneral\n          isResolved\n        }\n      }\n    }\n  }\n"]);return l=function(){return e},e}var c={},s=(0,o.Ps)(l());function u(e){var t=(0,r.Z)({},c,e);return a.a(s,t)}},410:function(e,t,n){function r(e,t,n){if("effects"in e){var i=!0,o=!1,a=void 0;try{for(var l,c=e.effects[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value;s.is(t)&&n(s)}}catch(v){o=!0,a=v}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}}else{var u=!0,d=!1,f=void 0;try{for(var p,h=e.transactions[Symbol.iterator]();!(u=(p=h.next()).done);u=!0){r(p.value,t,n)}}catch(v){d=!0,f=v}finally{try{u||null==h.return||h.return()}finally{if(d)throw f}}}}n.d(t,{j:function(){return r}})},41656:function(e,t,n){function r(e,t){var n=Math.max(t.line+1,1),r=e.line(Math.min(n,e.lines));if(n>e.lines)return r.to;var i=r.from+t.character;return Math.min(i,r.to)}function i(e,t){var n=e.lineAt(t);return{line:n.number-1,character:t-n.from}}n.d(t,{R:function(){return r},s:function(){return i}})},27585:function(e,t,n){n.d(t,{B:function(){return o}});var r=n(78120),i=n(410);function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return e},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=r.Py.define(),o=r.QQ.define({create:function(){return t},update:function(t,r){return(0,i.j)(r,n,(function(n){t=e(n.value,t)})),t}});return{effect:n,state:o}}},74591:function(e,t,n){var r=n(35944),i=(n(67294),n(69346)),o=n(1144),a=n(81255),l=n(59641),c=n(57704);t.Z=function(e){return(0,r.BX)(i.G,{css:[a.l0.colWithGap(24)],children:[(0,r.BX)(o.h,{variant:"headerDefault",level:2,children:["Delete ",e.name||e.entityType,"?"]}),(0,r.BX)(o.x,{multiline:!0,children:["Are you sure you want to delete"," ",e.description?e.description:"this ".concat(e.entityType),"? This cannot be undone."]}),(0,r.BX)(i.G,{css:[a.l0.rowWithGap(12),a.l0.justify.end],children:[(0,r.tZ)(l.zx,{text:"Cancel",onClick:e.hideModal}),(0,r.tZ)(l.zx,{dataCy:"delete-modal-confirm-button",iconLeft:(0,r.tZ)(c.Z,{}),onClick:function(){e.delete(),e.hideModal()},text:"Yes, delete ".concat(e.confirmDescription?e.confirmDescription:"this ".concat(e.entityType)),colorway:"negative"})]})]})}},94561:function(e,t,n){var r=n(6453),i=n(14251),o=n(52875),a=n(35944),l=n(60357),c=n.n(l);t.Z=function(e){var t=(0,r.Z)({},e);return(0,a.BX)(a.HY,{children:[(0,a.tZ)(c(),{id:"fcfe85a13ecbf46b",children:".one.jsx-fcfe85a13ecbf46b{opacity:.1;-webkit-animation:dot 1.5s ease-in-out infinite;-moz-animation:dot 1.5s ease-in-out infinite;-o-animation:dot 1.5s ease-in-out infinite;animation:dot 1.5s ease-in-out infinite;-webkit-animation-delay:0s;-moz-animation-delay:0s;-o-animation-delay:0s;animation-delay:0s}.two.jsx-fcfe85a13ecbf46b{opacity:.1;-webkit-animation:dot 1.5s ease-in-out infinite;-moz-animation:dot 1.5s ease-in-out infinite;-o-animation:dot 1.5s ease-in-out infinite;animation:dot 1.5s ease-in-out infinite;-webkit-animation-delay:.1s;-moz-animation-delay:.1s;-o-animation-delay:.1s;animation-delay:.1s}.three.jsx-fcfe85a13ecbf46b{opacity:.1;-webkit-animation:dot 1.5s ease-in-out infinite;-moz-animation:dot 1.5s ease-in-out infinite;-o-animation:dot 1.5s ease-in-out infinite;animation:dot 1.5s ease-in-out infinite;-webkit-animation-delay:.2s;-moz-animation-delay:.2s;-o-animation-delay:.2s;animation-delay:.2s}@-webkit-keyframes dot{\n            0% {\n              opacity: 0.1;\n            }\n            50% {\n              opacity: 1;\n            }\n            100% {\n              opacity: 0.1;\n            }\n        }@-moz-keyframes dot{\n            0% {\n              opacity: 0.1;\n            }\n            50% {\n              opacity: 1;\n            }\n            100% {\n              opacity: 0.1;\n            }\n        }@-o-keyframes dot{\n            0% {\n              opacity: 0.1;\n            }\n            50% {\n              opacity: 1;\n            }\n            100% {\n              opacity: 0.1;\n            }\n        }@keyframes dot{\n            0% {\n              opacity: 0.1;\n            }\n            50% {\n              opacity: 1;\n            }\n            100% {\n              opacity: 0.1;\n            }\n        }"}),(0,a.tZ)("span",(0,o.Z)((0,i.Z)({},t),{className:"jsx-fcfe85a13ecbf46b "+(t&&null!=t.className&&t.className||"one"),children:"."})),(0,a.tZ)("span",(0,o.Z)((0,i.Z)({},t),{className:"jsx-fcfe85a13ecbf46b "+(t&&null!=t.className&&t.className||"two"),children:"."})),(0,a.tZ)("span",(0,o.Z)((0,i.Z)({},t),{className:"jsx-fcfe85a13ecbf46b "+(t&&null!=t.className&&t.className||"three"),children:"."}))]})}},16329:function(e,t,n){n.d(t,{Z:function(){return O}});var r=n(44747),i=n(9941),o=n(35944),a=n(60357),l=n.n(a),c=n(67294),s=n(14251),u=n(32692),d=n(31230),f=n(37887),p=n(50319);function h(){var e=(0,u.Z)(["\n  fragment EditDomainRepl on Repl {\n    id\n    hostedUrl\n    apexProxy\n    domains {\n      hosting_deployment_id\n      domain\n      state\n    }\n  }\n"]);return h=function(){return e},e}function v(){var e=(0,u.Z)(["\n  query EditDomain($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        ...EditDomainRepl\n      }\n      ... on ReplRedirect {\n        replUrl\n      }\n      ... on SubscriptionExpiredError {\n        replId\n      }\n    }\n  }\n  ","\n"]);return v=function(){return e},e}function m(){var e=(0,u.Z)(["\n  query EditDomainCheckDomain2($replId: String!, $domain: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        checkDomain2(domain: $domain) {\n          ... on DomainStatus2 {\n            verified\n            retry\n            status\n            records {\n              A\n              TXT\n              CNAME\n            }\n          }\n          ... on NotFoundError {\n            message\n          }\n          ... on ServiceUnavailable {\n            message\n          }\n        }\n      }\n    }\n  }\n"]);return m=function(){return e},e}function g(){var e=(0,u.Z)(["\n  mutation EditDomainLinkReplDomain2(\n    $replId: String!\n    $domain: String!\n    $deploymentId: String\n  ) {\n    linkReplDomain2(\n      replId: $replId\n      domain: $domain\n      deploymentId: $deploymentId\n    ) {\n      ... on Repl {\n        id\n        ...EditDomainRepl\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on ServiceUnavailable {\n        message\n      }\n    }\n  }\n  ","\n"]);return g=function(){return e},e}function y(){var e=(0,u.Z)(["\n  mutation EditDomainUpdateRepl($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        ...EditDomainRepl\n      }\n    }\n  }\n  ","\n"]);return y=function(){return e},e}var Z={},b=(0,d.Ps)(h()),w=(0,d.Ps)(v(),b);var x=(0,d.Ps)(m());var E=(0,d.Ps)(g(),b);var C=(0,d.Ps)(y(),b);var S=n(59641),T=n(79500),k=n(64487),_=n(48966),R=n.n(_),D=n(92002),I=n(37424),P=n(88808),G=n(57704);function B(e){var t=e.repl,n=e.existingDomain,r=e.deploymentId,a=e.onLink,l=e.onGoBack,u=e.onLinkStarted,d=e.onStateChanged,f=(0,c.useState)(n?"loading":null),h=f[0],v=f[1],m=(0,c.useState)(!1),g=m[0],y=m[1],b=(0,c.useState)(null),w=b[0],x=b[1],C=(0,c.useState)(!1),_=C[0],D=C[1],G=(0,i.Z)(function(e){var t=(0,s.Z)({},Z,e);return p.D(E,t)}(),2),B=G[0],U=G[1],O=(0,c.useRef)(null),N=(0,c.useRef)(null),L=(0,c.useRef)(null),F=function(e){(null===e||void 0===e?void 0:e.current)&&e.current.select()},X=function(e){var t;(null===e||void 0===e||null===(t=e.current)||void 0===t?void 0:t.value)&&(0,T.Z)(e.current.value).catch((function(e){k.$e((function(t){t.setTag("domain-link",!0),t.setExtra("type","copy"),k.Tb(e)}))}))},M=(0,c.useState)(n||""),W=M[0],j=M[1];(0,c.useEffect)((function(){U.data&&"Repl"===U.data.linkReplDomain2.__typename&&a()}),[U.data,a]);var H=function(e){v(e),d()},z=R().isURL(W,{require_valid_protocol:!1})&&W.split(".").length>=2,V=z&&2===W.split(".").length,q=function(e,t,n){var r=e.replace(/^https:\/\//,"");return n?r.replace(t,n):r}(t.hostedUrl,t.id,r),K=t.apexProxy,$="replit-verify=".concat(null!==r&&void 0!==r?r:t.id),Y=(0,I.H)();return(0,o.BX)(S.G7,{css:[S.l0.colWithGap(16)],children:[(0,o.BX)(S.G7,{css:[S.l0.colWithGap(8)],children:[(0,o.tZ)(S.h4,{level:2,variant:"subheadDefault",children:"New Domain Link"}),(0,o.BX)(S.xv,{multiline:!0,children:["Learn more"," ",(0,o.tZ)("a",{href:"https://docs.replit.com/hosting/hosting-web-pages#custom-domains",target:"_blank",children:"here"}),"."]})]}),(0,o.BX)(S.G7,{css:[S.l0.colWithGap(4)],children:[(0,o.tZ)("label",{htmlFor:Y("domain"),children:(0,o.tZ)(S.xv,{color:"dimmer",variant:"small",children:"Step 1: Enter your domain"})}),(0,o.tZ)(S.II,{className:"cname-url",readOnly:"loading"===h,value:W,onChange:function(e){j(e.target.value)},onBlur:function(){!function(){try{var e=new URL("/",W);j(e.hostname)}catch(t){}}()},placeholder:"example.com",id:Y("domain")})]}),V&&!_?(0,o.BX)(S.G7,{css:[S.l0.colWithGap(8)],children:[(0,o.BX)(S.G7,{css:[S.l0.colWithGap(4)],children:[(0,o.tZ)("label",{htmlFor:Y("record"),children:(0,o.BX)(S.xv,{color:"dimmer",variant:"small",children:["Step 2: Add an ",(0,o.tZ)("code",{children:"A"})," Record"]})}),(0,o.BX)(S.G7,{css:[S.l0.rowWithGap(8),S.l0.align.center],children:[(0,o.tZ)(S.xv,{css:{fontFamily:S.TV.fontFamilyCode,maxWidth:"40%"},children:W}),(0,o.tZ)(S.xv,{css:{fontFamily:S.TV.fontFamilyCode},children:"A"}),(0,o.tZ)(S.II,{readOnly:!0,ref:O,onChange:function(){return null},value:K,onFocus:function(){return F(O)},id:Y("record")}),(0,o.tZ)(S.zx,{onClick:function(){return X(O)},text:"Copy"})]})]}),(0,o.tZ)(S.G7,{css:[S.l0.flex.row,S.l0.align.stretch],children:(0,o.tZ)(S.zx,{outlined:!0,onClick:function(){return D(!0)},text:"Use CNAME record instead."})})]}):null,!z||!_&&V?null:(0,o.BX)(S.G7,{css:[S.l0.colWithGap(4)],children:[(0,o.tZ)("label",{htmlFor:Y("CNAMERecord"),children:(0,o.BX)(S.xv,{color:"dimmer",variant:"small",children:["Step 2: Add a ",(0,o.tZ)("code",{children:"CNAME"})," Record"]})}),(0,o.BX)(S.G7,{css:[S.l0.rowWithGap(8),S.l0.align.center],children:[(0,o.tZ)(S.xv,{css:{fontFamily:S.TV.fontFamilyCode,maxWidth:"40%"},children:W}),(0,o.tZ)(S.xv,{css:{fontFamily:S.TV.fontFamilyCode},children:"CNAME"}),(0,o.tZ)(S.II,{readOnly:!0,ref:L,onChange:function(){return null},value:q,onFocus:function(){return F(L)},id:Y("CNAMERecord")}),(0,o.tZ)(S.zx,{onClick:function(){return X(L)},text:"Copy"})]}),V?(0,o.BX)(S.G7,{css:[S.l0.colWithGap(8)],children:[(0,o.tZ)(S.xv,{variant:"small",multiline:!0,children:'Note: this CNAME record requires that your DNS provider supports CNAMEs for apex domains - for example Cloudflare with "CNAME Flattening".'}),(0,o.tZ)(S.G7,{css:[S.l0.flex.row,S.l0.align.stretch],children:(0,o.tZ)(S.zx,{onClick:function(){return D(!1)},text:"Use A record instead",outlined:!0})})]}):null]}),z?(0,o.BX)(S.G7,{css:[S.l0.colWithGap(4)],children:[V?(0,o.tZ)("label",{htmlFor:Y("txtRecord"),children:(0,o.BX)(S.xv,{color:"dimmer",variant:"small",children:["This domain also requires a ",(0,o.tZ)("code",{children:"TXT"})," Record"]})}):(0,o.BX)("label",{children:['If you are using a service like Cloudflare (with "orange cloud") that rewrites domain records, you can add a ',(0,o.tZ)("code",{children:"TXT"})," ","Record for verification purposes."]}),(0,o.BX)(S.G7,{css:[S.l0.rowWithGap(8),S.l0.align.center],children:[(0,o.tZ)(S.xv,{css:{fontFamily:S.TV.fontFamilyCode,maxWidth:"40%"},children:W}),(0,o.tZ)(S.xv,{css:{fontFamily:S.TV.fontFamilyCode},children:"TXT"}),(0,o.tZ)(S.II,{readOnly:!0,ref:N,onChange:function(){return null},value:$,onClick:function(){return F(N)},id:Y("txtRecord")}),(0,o.tZ)(S.zx,{onClick:function(){return X(N)},text:"Copy"})]})]}):null,"loading"===h?(0,o.tZ)(S.G7,{css:[S.l0.colWithGap(12),S.l0.pt(16)],children:(0,o.tZ)(A,{replId:t.id,domain:W,onVerified:function(){return H("verified")},onError:function(){return H("error")}})}):null,"verified"===h?(0,o.tZ)(S.G7,{css:[S.l0.colWithGap(12),S.l0.pt(16)],children:(0,o.tZ)(S.xv,{children:"Your domain has been verified."})}):null,"error"===h||w?(0,o.tZ)(S.G7,{css:[S.l0.colWithGap(12),S.l0.pt(16)],children:(0,o.BX)(S.xv,{children:["Creating the domain link failed",w?": "+w:"","."]})}):null,(0,o.BX)(S.G7,{css:[S.l0.rowWithGap(12),S.l0.justify.end],children:[(0,o.tZ)(S.zx,{onClick:l,text:"Close"}),z&&null===h?(0,o.tZ)(S.zx,{disabled:g,onClick:function(){y(!0),x(null),B({variables:{replId:t.id,domain:W,deploymentId:r}}).then((function(e){var t,n=(null===(t=e.data)||void 0===t?void 0:t.linkReplDomain2)||null;"Repl"===(null===n||void 0===n?void 0:n.__typename)||"ServiceUnavailable"===(null===n||void 0===n?void 0:n.__typename)?(x(null),H("loading")):("NotFoundError"!==(null===n||void 0===n?void 0:n.__typename)&&"UnauthorizedError"!==(null===n||void 0===n?void 0:n.__typename)||x(null===n||void 0===n?void 0:n.message),H("error")),y(!1),u()})).catch((function(e){y(!1),x(e.message)}))},text:"".concat(g?"Linking domain...":"Link domain"),iconLeft:(0,o.tZ)(P.Z,{}),colorway:"primary"}):null]})]})}function A(e){var t,n=e.domain,a=e.replId,u=e.onVerified,d=e.onError,p=function(e){var t=(0,s.Z)({},Z,e);return f.a(x,t)}({variables:{replId:a,domain:n},pollInterval:1e3}),h=p.data,v=p.stopPolling;if((0,c.useEffect)((function(){var e,t;if(h&&"Repl"===h.repl.__typename){var n=h.repl;if("NotFoundError"!==(null===(e=n.checkDomain2)||void 0===e?void 0:e.__typename)){if("DomainStatus2"===(null===(t=n.checkDomain2)||void 0===t?void 0:t.__typename)){var r=n.checkDomain2,i=r.retry,o=r.verified;o||i?(!o&&i||v(),o&&u()):d()}}else d()}}),[h,v,u,d]),"Repl"===(null===h||void 0===h?void 0:h.repl.__typename)&&h.repl.checkDomain2){var m,g,y,b="DomainStatus2"===h.repl.checkDomain2.__typename?h.repl.checkDomain2:null,w=null;if(null===b||void 0===b?void 0:b.records){var E=b.records;E.__typename;w=(0,r.Z)(E,["__typename"])}var C,T=null;if(!(null===b||void 0===b?void 0:b.status))"ServiceUnavailable"===(null===(C=h.repl.checkDomain2)||void 0===C?void 0:C.__typename)&&(T=h.repl.checkDomain2.message),T||(T="DNS updates can take up to 48 hours to fully synchronize. Feel free to check back later.");return(0,o.BX)(S.G7,{css:[S.l0.colWithGap(16),S.l0.justify.spaceBetween],children:[(0,o.BX)(S.G7,{css:[S.l0.rowWithGap(16),S.l0.align.center],children:[(0,o.tZ)("div",{css:[S.l0.width("20px"),S.l0.height("20px"),{aspectRatio:"1 / 1"},{borderRadius:"100%"},{borderRadius:"100%"},{borderStyle:"solid"},{borderWidth:"3px"},{borderColor:S.TV.accentPrimaryDimmer},{borderTopColor:S.TV.accentPrimaryDefault},{transform:"rotate(0deg)"},{animation:"linear domain-loading 1s infinite"}],className:"jsx-4e6cc6caecb799c9"}),(0,o.tZ)("div",{className:"jsx-4e6cc6caecb799c9",children:T})]}),w||"DomainStatus2"===(null===(m=h.repl.checkDomain2)||void 0===m?void 0:m.__typename)&&(null===(g=h.repl.checkDomain2)||void 0===g?void 0:g.retry)||"ServiceUnavailable"===(null===(y=h.repl.checkDomain2)||void 0===y?void 0:y.__typename)?(0,o.BX)(S.G7,{children:[(0,o.tZ)("br",{className:"jsx-4e6cc6caecb799c9"}),w?(0,o.BX)(S.G7,{children:["Currently, your domain\u2019s records show:",(0,o.tZ)("pre",{css:[S.l0.overflow("scroll")],className:"jsx-4e6cc6caecb799c9",children:Object.entries(w).map((function(e){var t=(0,i.Z)(e,2),r=t[0],a=t[1];return null===a||void 0===a?void 0:a.map((function(e){return(0,o.BX)("div",{className:"jsx-4e6cc6caecb799c9",children:[n," ",r," ",e]},"{domain}-{dnsType}")}))}))})]}):(0,o.tZ)(S.xv,{multiline:!0,children:"Currently, your domain is either not returning any records, or something is getting in the way of our verification process."})]}):null,(0,o.tZ)(l(),{id:"4e6cc6caecb799c9",children:"@-webkit-keyframes domain-loading{from{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-moz-keyframes domain-loading{from{-moz-transform:rotate(0deg);transform:rotate(0deg)}to{-moz-transform:rotate(360deg);transform:rotate(360deg)}}@-o-keyframes domain-loading{from{-o-transform:rotate(0deg);transform:rotate(0deg)}to{-o-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes domain-loading{from{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}"})]})}return"Repl"===(null===h||void 0===h?void 0:h.repl.__typename)&&"NotFoundError"===(null===(t=h.repl.checkDomain2)||void 0===t?void 0:t.__typename)?(0,o.tZ)(o.HY,{children:"We ran into an internal error while checking the domain. Please try again later."}):null}function U(e){var t=e.replId,n=e.domain,r=e.onUnlink,a=e.onGoBack,l=(0,i.Z)(function(e){var t=(0,s.Z)({},Z,e);return p.D(C,t)}({variables:{input:{id:t,removeDomain:n}}}),2),u=l[0],d=l[1];return(0,c.useEffect)((function(){d.data&&d.data.updateRepl.repl&&r()}),[d.data,r]),(0,o.BX)(S.G7,{css:[S.l0.colWithGap(16)],children:[(0,o.BX)(S.G7,{css:[S.l0.colWithGap(8)],children:[(0,o.tZ)(S.h4,{level:3,variant:"subheadDefault",children:"Domain Unlinking"}),(0,o.BX)(S.xv,{multiline:!0,children:["Are you sure you want to unlink"," ",(0,o.tZ)("a",{target:"_blank",rel:"noopener",href:"https://"+n,children:n}),"?"]})]}),(0,o.BX)(S.G7,{css:[S.l0.rowWithGap(12),S.l0.justify.end],children:[(0,o.tZ)(S.zx,{onClick:a,text:"Cancel"}),(0,o.tZ)(S.zx,{onClick:function(){d.loading||u()},text:d.loading?"Unlinking domain...":"Yes, unlink this domain",colorway:"negative",iconLeft:(0,o.tZ)(G.Z,{}),disabled:d.loading})]})]})}function O(e){var t=e.replId,n=e.deploymentId,r=e.onUnlink,i=e.onLink,a=function(e){var t=(0,s.Z)({},Z,e);return f.a(w,t)}({variables:{replId:t}}),l=a.data,u=a.loading,d=a.refetch,p=(0,c.useState)("listing"),h=p[0],v=p[1],m=(0,c.useState)(null),g=m[0],y=m[1],b=null;if(u)b=(0,o.tZ)(o.HY,{children:"loading..."});else if(l&&"Repl"===l.repl.__typename){var x=l.repl,E=null;if(x.domains){var C=x.domains.filter(Boolean).filter((function(e){return n?(null===e||void 0===e?void 0:e.hosting_deployment_id)===n:!(null===e||void 0===e?void 0:e.hosting_deployment_id)})).map((function(e){return{domain:e.domain,state:e.state}}));E=0===C.length?(0,o.tZ)(S.xv,{children:"No domains are currently linked."}):(0,o.BX)(S.G7,{children:[(0,o.tZ)(S.h4,{level:3,variant:"subheadDefault",children:"Currently Linked Domains"}),(0,o.tZ)(S.G7,{css:[S.l0.colWithGap(8)],children:C.map((function(e){return e?(0,o.tZ)(S.G7,{children:(0,o.BX)(S.G7,{css:[S.l0.rowWithGap(12),S.l0.justify.spaceBetween,S.l0.align.center],children:[(0,o.BX)(S.xv,{children:[e.domain,": ",e.state,"..."]}),(0,o.BX)(S.G7,{css:[S.l0.rowWithGap(12),S.l0.justify.end,S.l0.align.center],children:[(0,o.tZ)(S.zx,{text:"Unlink",onClick:function(){y(e.domain),v("unlinking")}}),"verified"!==e.state?(0,o.tZ)(S.zx,{text:"Check status",onClick:function(){y(e.domain),v("linking")}}):null]})]})},e.domain):null}))})]})}"listing"===h?b=(0,o.BX)(S.G7,{css:[S.l0.colWithGap(16)],children:[E,(0,o.tZ)(S.zx,{text:"Create Domain Link",onClick:function(){return v("linking")},iconLeft:(0,o.tZ)(D.Z,{})})]}):"linking"===h?b=(0,o.tZ)(B,{repl:x,existingDomain:g,deploymentId:n,onLink:i,onGoBack:function(){v("listing"),y(null)},onLinkStarted:d,onStateChanged:d}):"unlinking"===h&&null!==g&&(b=(0,o.tZ)(U,{replId:x.id,domain:g,onUnlink:function(){d(),v("listing"),r()},onGoBack:function(){v("listing"),y(null)}}))}else l&&"ReplRedirect"===l.repl.__typename?b=(0,o.BX)("div",{children:["This repl has moved to"," ",(0,o.tZ)("a",{href:l.repl.replUrl,children:l.repl.replUrl})]}):l&&"SubscriptionExpiredError"===l.repl.__typename&&(b=(0,o.tZ)("div",{children:"Subscription expired"}));return(0,o.BX)(S.G7,{css:[S.l0.colWithGap(24)],children:[(0,o.tZ)(S.h4,{level:1,variant:"headerDefault",children:"Domain Linking"}),b]})}},60368:function(e,t,n){var r=n(35944),i=n(60357),o=n.n(i);n(67294);t.Z=function(e){var t=e.maxLength,n=void 0===t?140:t,i=e.value,a=void 0===i?"":i,l=e.hideLabel,c=void 0!==l&&l;return(0,r.BX)("div",{className:"jsx-59d2089b8a0ab881",children:[a.length," / ",n," ",c?"":"characters",(0,r.tZ)(o(),{id:"59d2089b8a0ab881",children:"div.jsx-59d2089b8a0ab881{color:var(--foreground-dimmer);font-size:.75em;text-align:right;margin-top:var(--space-8)}"})]})}},11598:function(e,t,n){n.d(t,{E:function(){return s}});var r=n(35944),i=n(60977),o=n(59641),a=n(99408),l=n(88075),c=n(67294);function s(){var e=(0,a.Z)().replspaceApi,t=(0,c.useState)(null),n=t[0],s=t[1];return(0,c.useEffect)((function(){return e.onConfirmSendToken((function(e){(0,i.j)(i.U3.MODAL_VIEWED,{modalName:"git_token_modal"}),s((function(){return e}))}))}),[e]),(0,r.tZ)(o.u_,{isOpen:"function"===typeof n,onRequestClose:function(){null===n||void 0===n||n(!1),(0,i.j)(i.U3.GIT_TOKEN_MODAL_ACCEPTED,{response:"close"}),s(null)},children:(0,r.BX)(o.G7,{css:[o.l0.colWithGap(16)],children:[(0,r.tZ)(o.h4,{variant:"headerDefault",level:3,children:"Pass GitHub Credentials"}),(0,r.tZ)(o.xv,{multiline:!0,children:"It looks like you're trying to connect to your GitHub repository through the shell. Pass your token to the shell?"}),(0,r.tZ)(o.xv,{multiline:!0,children:"If you did not initiate a git command, you should deny this."}),(0,r.BX)(o.G7,{css:[o.l0.justify.end,o.l0.rowWithGap(16)],children:[(0,r.tZ)(o.zx,{onClick:function(){null===n||void 0===n||n(!1),(0,i.j)(i.U3.GIT_TOKEN_MODAL_ACCEPTED,{response:"deny"}),s(null)},text:"Deny"}),(0,r.tZ)(o.zx,{onClick:function(){null===n||void 0===n||n(!0),(0,i.j)(i.U3.GIT_TOKEN_MODAL_ACCEPTED,{response:"confirm"}),s(null)},iconLeft:(0,r.tZ)(l.Z,{}),text:"Confirm for this session",colorway:"primary"})]})]})})}},80658:function(e,t,n){n.d(t,{Z:function(){return R}});var r=n(14251),i=n(52875),o=n(9941),a=n(35944),l=n(67294),c=n(64487),s=n(30992),u=n(59641),d=n(98967),f=n(83074),p=n(58086),h=n(37424),v=n(60368),m=n(14455),g=n(9836),y=n(30168),Z=n(94412),b=n(32692),w=n(31230),x=n(97212),E=n(37887);function C(){var e=(0,b.Z)(["\n  query ForkModal {\n    currentUser {\n      id\n      url\n      image\n      username\n      ...ReplOwnerCurrentUser\n      teams {\n        id\n        ...ReplOwnerTeam\n      }\n    }\n  }\n  ","\n  ","\n"]);return C=function(){return e},e}var S={},T=(0,w.Ps)(C(),x.s,x.a);var k=n(99383),_=function(e){var t=e.onFork,n=e.hideModal,r=e.initialTitle,i=e.initialDescription,c=void 0===i?"":i,d=e.initialPrivacy,b=e.teamContext,w=e.currentUser,x=e.template,E=l.useRef(null),C=(0,h.H)(),S=(0,o.Z)((0,g.Y)(w,b),2),T=S[0],_=S[1],R=(0,o.Z)((0,k.c)(T,w,d||!1),3),D=R[0],I=R[1],P=R[2],G=(0,s.Y)(r,(function(e){if(e)return e.length>60?{message:"Must be no longer than 60 characters"}:/[0-9a-zA-Z]/.test(e)?void 0:{message:"Title must contain at least one alphanumeric character"}})),B=(0,s.Y)(c,(function(e){if(e&&e.length>p.p)return{message:"Must be no longer than ".concat(p.p," characters")}}));l.useEffect((function(){E.current&&E.current.focus()}),[E]);var A="Team"===T.__typename?T.id:null;return(0,a.tZ)("form",{onSubmit:function(e){e.preventDefault(),G.validate()||B.validate()||(t(A,G.value,B.value,D),n())},children:(0,a.BX)(u.G7,{css:[u.l0.colWithGap(16)],children:[(0,a.tZ)(u.h4,{variant:"headerDefault",level:2,children:x?"Use Template":"Fork Repl"}),(0,a.BX)(u.G7,{css:[u.l0.colWithGap(16)],children:[(0,a.BX)(u.G7,{css:[u.l0.colWithGap(4)],children:[(0,a.BX)(u.G7,{css:[u.l0.flex.row,u.l0.justify.spaceBetween,u.l0.align.end],children:[(0,a.tZ)(m._,{for:C("name"),children:"Name"}),(0,a.tZ)(v.Z,{maxLength:60,value:G.value,hideLabel:!0})]}),(0,a.tZ)(u.II,{ref:E,className:"repl-title-input",placeholder:"Name your Repl",onChange:function(e){return G.setValue(e.target.value)},onFocus:function(e){return e.target.select()},value:G.value,onBlur:G.handleBlur,id:C("name")}),G.error?(0,a.tZ)(u.xv,{css:[u.l0.color.accentNegativeStronger],children:G.error.message}):null]}),(0,a.BX)(u.G7,{css:[u.l0.colWithGap(4)],children:[(0,a.BX)(u.G7,{css:[u.l0.flex.row,u.l0.justify.spaceBetween,u.l0.align.end],children:[(0,a.tZ)(m._,{for:C("description"),children:"Description"}),(0,a.tZ)(v.Z,{maxLength:p.p,value:B.value,hideLabel:!0})]}),(0,a.tZ)(u.B,{maxLength:p.p,value:B.value,onChange:function(e){return B.setValue(e.target.value)},placeholder:"What does this Repl do?",css:[u.l0.minHeight(96),u.l0.maxHeight(128),{resize:"vertical"}],id:C("description")})]}),(0,a.tZ)(Z.P,{context:"fork_modal",isPrivate:D,setIsPrivate:I,privacyState:P})]}),w.teams.length>0?(0,a.BX)(u.G7,{css:[u.l0.colWithGap(8)],children:[(0,a.tZ)(m._,{for:C("owner"),children:"Owner"}),(0,a.tZ)(y.Z,{id:C("owner"),currentUser:w,initialSelectedUsername:T.username,onChange:function(e){return _(e.username)}})]}):null,(0,a.BX)(u.G7,{css:[u.l0.rowWithGap(12),u.l0.justify.end],children:[(0,a.tZ)(u.zx,{onClick:n,text:"Cancel",type:"button"}),(0,a.tZ)(u.zx,{colorway:"primary",type:"submit",disabled:Boolean(G.error||B.error),text:x?(0,a.tZ)(a.HY,{children:"Use Template"}):(0,a.tZ)(a.HY,{children:"Fork Repl"}),iconLeft:(0,a.tZ)(f.Z,{})})]})]})})};function R(e){var t=function(e){var t=(0,r.Z)({},S,e);return E.a(T,t)}({fetchPolicy:"cache-and-network",onError:function(e){c.$e((function(t){t.setTag("fork-modal",!0),c.Tb(e)}))}}),n=t.data,o=t.loading,l=t.error;if(o)return(0,a.tZ)(u.xv,{color:"dimmer",children:"Loading..."});if(l)return(0,a.tZ)(u.xv,{children:"Something went wrong."});if(!n)return null;var s=n.currentUser;return s?(0,a.tZ)(_,(0,i.Z)((0,r.Z)({},e),{currentUser:s})):(0,a.tZ)(d.Z,{title:"Sign up or log in to fork this Repl",onSuccess:function(){},source:"fork"})}},26801:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(9941),i=n(35944),o=n(59641),a=n(67294),l=n(3660);function c(e){var t=e.context,n=(0,r.Z)(a.useState(!1),2),c=n[0],s=n[1];return(0,i.BX)(i.HY,{children:[(0,i.tZ)(o.zx,{text:"Activate",colorway:"primary",onClick:function(){return s(!0)}}),(0,i.tZ)(l.Z,{context:t,isOpen:c,onRequestClose:function(){return s(!1)},uponPurchaseGoTo:"cyclesPage",powerUp:"ghostwriter"})]})}},83470:function(e,t,n){n.d(t,{Z:function(){return y}});var r=n(35944),i=n(23384),o=n(60977),a=n(59641),l=n(12215),c=n(53931),s=n(67294),u=n(14251),d=n(32692),f=n(31230),p=n(37887);function h(){var e=(0,d.Z)(["\n  query GhostwriterExistingUserChatBetaTour {\n    currentUser {\n      id\n      userPowerUpsByType {\n        __typename\n        ... on UnauthorizedError {\n          message\n        }\n        ... on UserPowerUpsTypes {\n          ghostwriter {\n            active\n          }\n        }\n      }\n    }\n  }\n"]);return h=function(){return e},e}var v={},m=(0,f.Ps)(h());var g=[{title:"Introducing Ghostwriter Chat!",subtitle:(0,r.BX)(a.xv,{multiline:!0,children:["available for a limited time in beta for all Ghostwriter subscribers."," ",(0,r.tZ)("a",{target:"_blank",href:"https://replit.com/site/ghostwriter",children:"Learn more"})]}),backgroundImage:"/public/images/ghostwriter/code-pane.png",backgroundColor:a.l0.backgroundColor.blurpleDefault,position:"center"}];function y(){var e,t=(0,l.Z)("announcement","ghostwriter-existing-user-chat-beta-tour"),n=t.shouldDisplay,a=t.dismiss,d=t.register,f=(0,l.Z)("announcement","ghostwriter-post-purchase-tour").shouldDisplay,h=function(e){var t=(0,u.Z)({},v,e);return p.a(m,t)}(),y=h.data,Z=h.loading,b="UserPowerUpsTypes"===(null===y||void 0===y||null===(e=y.currentUser)||void 0===e?void 0:e.userPowerUpsByType.__typename)&&y.currentUser.userPowerUpsByType.ghostwriter.active,w=(0,i.D)({controlName:"flag-ghostwriter-chat-beta"}),x=b&&w;s.useEffect((function(){n&&(0,o.j)(o.U3.MODAL_VIEWED,{unsolicited:!0,modalName:"ghostwriter_existing_user_chat_beta_tour"})}),[n]),s.useEffect((function(){Z||!x||f||d()}),[Z,x,f,d]);var E={slides:g,date:new Date("2023-02-15")};return(0,r.tZ)(c.Z,{announcement:E,showModal:n,onRequestClose:a})}},33081:function(e,t,n){n.d(t,{Z:function(){return b}});var r=n(9941),i=n(35944),o=n(62913),a=n(23384),l=n(60977),c=n(59641),s=n(1879),u=n(85861),d=n(12215),f=n(9517),p=n(85873),h=n(33279),v=n(54969),m=n(67294),g=n(89149),y=n(67852);function Z(e){var t=e.hasBundledGhostwriter,n=e.onDone,s=(0,a.D)({controlName:"flag-ghostwriter-chat-beta"}),d=(0,r.Z)(m.useState(0),2),v=d[0],y=d[1],Z=(0,u.Fg)().isDarkColorScheme,b=[{instruction:t?"Your plan includes Ghostwriter, your partner in code. Start typing, Ghostwriter will do the rest.":"Start typing, Ghostwriter will do the rest.",illustration:(0,i.tZ)(o.Z,{css:[c.l0.borderRadius(8)],src:Z?"/public/images/ghostwriter/live-completion-dark.gif":"/public/images/ghostwriter/live-completion-light.gif",width:800,height:600,alt:"example of Ghostwriter code completion feature"}),tip:(0,i.BX)(c.xv,{multiline:!0,css:[c.l0.flex.growAndShrink(1)],children:["Press ",(0,i.tZ)(h.Z,{shortcut:{key:"TAB"}})," on your keyboard, or swipe on your mobile device to accept code suggestions."]})},{instruction:"Right click in the editor to access generate, explain, and transform code.",illustration:(0,i.tZ)(o.Z,{css:[c.l0.borderRadius(8)],src:Z?"/public/images/ghostwriter/edu-2-dark.png":"/public/images/ghostwriter/edu-2-light.png",width:800,height:568,alt:"example of Ghostwriter code completion feature"}),tip:(0,i.BX)(c.xv,{multiline:!0,css:[c.l0.flex.growAndShrink(1)],children:["Ghostwriter is configured in Repl Settings and My Cycles page."," ",(0,i.tZ)("a",{css:[c.l0.display.block],href:g.qw,onClick:function(){return(0,l.j)(l.U3.EXTERNAL_LINK_VIEWED,{url:g.qw,source:"ghostwriter_intro_modal"})},target:"_blank",children:"Ghostwriter FAQ."})]})},{instruction:"Working with AI assistants requires some experimentation! You may have to try a few things to get the results you want.",illustration:(0,i.tZ)(o.Z,{css:[c.l0.borderRadius(8)],src:Z?"/public/images/ghostwriter/generate-error-example-dark.gif":"/public/images/ghostwriter/generate-error-example-light.gif",width:800,height:568,alt:"example of Ghostwriter code completion feature"}),tip:(0,i.tZ)(c.xv,{multiline:!0,css:[c.l0.flex.growAndShrink(1)],children:"You will sometimes need to review, adjust, and modify Ghostwriter code."})}];return s&&b.push({instruction:(0,i.BX)(c.G7,{css:[c.l0.rowWithGap(8),c.l0.align.start,c.l0.align.center],children:[(0,i.tZ)(c.DR,{text:"BETA",colorway:"primary"}),(0,i.tZ)(c.xv,{multiline:!0,css:[c.l0.flex.growAndShrink(1)],children:"Send Ghostwriter a message!"})]}),illustration:(0,i.tZ)(o.Z,{css:[c.l0.borderRadius(8)],src:Z?"/public/images/ghostwriter/gw-chat-dark.png":"/public/images/ghostwriter/gw-chat-light.png",width:800,height:640,alt:"example of Ghostwriter code completion feature"}),tip:(0,i.tZ)(c.xv,{multiline:!0,css:[c.l0.flex.growAndShrink(1)],children:"Open the Ghostwriter Pane in the Workspace to begin chatting with Ghostwriter. This feature is available in a limited time Beta program!"})}),(0,i.BX)(c.G7,{css:[c.l0.colWithGap(24)],dataCy:"ghostwriter-intro-tour",children:[" ",(0,i.BX)(c.xv,{variant:"subheadDefault",children:[t?"Welcome to the Pro plan!":(0,i.BX)(i.HY,{children:["Welcome to ",(0,i.tZ)(p.Z,{})," Ghostwriter!"]})," "]}),(0,i.tZ)(c.xv,{multiline:!0,children:b[v].instruction}),(0,i.tZ)(c.G7,{children:b[v].illustration}),(0,i.tZ)(c.G7,{css:[c.l0.rowWithGap(8),c.l0.align.center],children:b[v].tip}),v<b.length-1?(0,i.tZ)(c.zx,{text:"Next",iconRight:(0,i.tZ)(f.Z,{}),colorway:"primary",css:{alignSelf:"end"},onClick:function(){return y(v+1)},dataCy:"ghostwriter-intro-tour-next"}):(0,i.tZ)(c.zx,{text:"Get started",colorway:"primary",css:{alignSelf:"end"},onClick:n,dataCy:"ghostwriter-intro-tour-done"})]})}function b(){var e,t,n=(0,d.Z)("announcement","ghostwriter-post-purchase-tour"),r=n.shouldDisplay,o=n.dismiss,c=n.register,u=(0,d.Z)("announcement","ghostwriter-existing-user-chat-beta-tour").dismiss,f=(0,y.Pg)(),p=f.data,h=f.loading,g="UserPowerUpsTypes"===(null===p||void 0===p||null===(e=p.currentUser)||void 0===e?void 0:e.userPowerUpsByType.__typename)&&p.currentUser.userPowerUpsByType.ghostwriter.active;m.useEffect((function(){r&&(0,l.j)(l.U3.MODAL_VIEWED,{unsolicited:!0,modalName:"ghostwriter_post_intro_tour"})}),[r]),m.useEffect((function(){!h&&g&&c()}),[h,g,c]);var b=(0,a.D)({controlName:"flag-ghostwriter-chat-beta"}),w=function(){o(),b&&u()};return(0,i.tZ)(s.u,{isOpen:r,onRequestClose:w,preventOutsideModalClickClose:!0,children:(0,i.tZ)(Z,{onDone:w,hasBundledGhostwriter:(null===p||void 0===p||null===(t=p.currentUser)||void 0===t?void 0:t.userSubscriptionType)===v.HP.HackerPro})})}},4445:function(e,t,n){n.d(t,{E:function(){return r},c:function(){return i}});var r="Procfile";function i(e){var t={};return e.split("\n").forEach((function(e){if(""!==e){var n=e.match(/^([A-Za-z0-9_]+):\s*(.+)$/);if(n){var r=n[2].trim().split(" "),i=n[1];t[i]={command:r[0],options:r.slice(1)}}}})),t}},16449:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(9941),i=n(67294),o=n(79367),a=n.n(o),l=n(43797);function c(){var e=(0,r.Z)(i.useState(null),2),t=e[0],n=e[1];return(0,l.Z)((function(){if(t)return a()(t),function(){a().destroy(t)}}),[t]),{ref:n,update:function(){t&&a().update(t)}}}},59292:function(e,t,n){n.d(t,{Z:function(){return Z}});var r=n(14251),i=n(52875),o=n(9941),a=n(67294),l=n(11163),c=n(93058),s=n(32692),u=n(31230),d=n(50319);function f(){var e=(0,s.Z)(["\n  mutation ForkReplCreateRepl($input: CreateReplInput!) {\n    createRepl(input: $input) {\n      ... on Repl {\n        id\n        url\n        isPrivate\n        language\n        origin {\n          id\n          isOwner\n        }\n        source {\n          release {\n            id\n            repl {\n              id\n              title\n              owner {\n                ... on User {\n                  id\n                  username\n                }\n                ... on Team {\n                  id\n                  username\n                }\n              }\n            }\n          }\n        }\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return f=function(){return e},e}var p={},h=(0,u.Ps)(f());function v(e){var t=(0,r.Z)({},p,e);return d.D(h,t)}var m=n(33400),g=n(60977),y=n(15935);function Z(){var e,t,n,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},u=s.onFork,d=s.onError,f=(0,l.useRouter)(),p=(0,c.Z)().showError,h=(0,m.Z)(),Z=(0,o.Z)(v({onCompleted:function(e){var t="Repl"===(null===e||void 0===e?void 0:e.createRepl.__typename)?e.createRepl:null;if(t)if(u&&u(e),"/replEnvironmentDesktop"!==f.pathname&&"/replEnvironmentMobile"!==f.pathname)f.push({pathname:h,query:{replUrl:t.url}},{pathname:t.url});else{var n=t.url+(f.query.lite?"?lite=".concat(f.query.lite.toString()):"");window.location.href=n}}}),2),b=Z[0],w=Z[1],x="UserError"===(null===(e=w.data)||void 0===e?void 0:e.createRepl.__typename)?null===(t=w.data)||void 0===t?void 0:t.createRepl.message:null===(n=w.error)||void 0===n?void 0:n.message;a.useEffect((function(){x&&(p(x),d&&d())}),[x,p,d]);var E=a.useCallback((function(e){var t=e.originId,n=e.replReleaseId,o=e.teamId,a=e.title,l=e.description,c=e.isPrivate,s=e.trackingData,u=e.forkToPersonal;b({variables:{input:{originId:t,replReleaseId:n,teamId:o,title:a,isPrivate:c,description:l,forkToPersonal:u,gitRemoteUrl:""}}}).then((function(e){var o,a,l,c,u,d,f,p,h,v,m,Z,b,w,x="Repl"===(null===(o=e.data)||void 0===o?void 0:o.createRepl.__typename)?e.data.createRepl:null;x&&(0,g.j)(g.U3.REPL_CREATED,(0,i.Z)((0,r.Z)({isSignup:!1,isOnboarding:!1},s),{isForked:!0,isPrivate:x.isPrivate,replId:x.id,isRenamed:!1,language:x.language,isSelfForked:!!(null===(a=x.origin)||void 0===a?void 0:a.isOwner),isTemplateFork:Boolean(n),originId:t,templateReplId:(null===(l=x.source)||void 0===l||null===(c=l.release)||void 0===c||null===(u=c.repl)||void 0===u?void 0:u.id)||void 0,templateTitle:null===(d=x.source)||void 0===d||null===(f=d.release)||void 0===f||null===(p=f.repl)||void 0===p?void 0:p.title,templateOwner:null===(h=x.source)||void 0===h||null===(v=h.release)||void 0===v||null===(m=v.repl)||void 0===m||null===(Z=m.owner)||void 0===Z?void 0:Z.username,templateType:(null===(b=x.source)||void 0===b||null===(w=b.release)||void 0===w?void 0:w.repl)?(0,y.lw)(x.source.release.repl):void 0}))}))}),[b]),C=!!(w.loading||w.data&&"Repl"===w.data.createRepl.__typename);return[E,{loading:C}]}},47979:function(e,t,n){n.d(t,{f6:function(){return s},oj:function(){return c},xZ:function(){return d}});var r=n(9941),i=n(67294),o=n(99408),a=n(40381);function l(e){var t=(0,r.Z)(i.useState(!1),2),n=t[0],a=t[1],l=(0,o.Z)().dotReplit;return i.useEffect((function(){var t=!1;return l.getConfig().then((function(n){t||n.error||n.config.language===e&&a(!0)})),function(){t=!0}}),[e,l]),n}function c(){return l("kaboom")}function s(){return l("kaboomdraw")}var u=/^draw.[tj]s$/;function d(){var e=(0,a.Z)();return s()&&Boolean(null===e||void 0===e?void 0:e.match(u))}},58482:function(e,t,n){n.d(t,{Z:function(){return u}});var r=n(11163),i=n.n(r),o=n(99408),a=n(67294),l=n(89224),c=n(13482),s="You have unsaved changes";function u(){var e=(0,o.Z)().fs,t=(0,r.useRouter)(),n=(0,a.useState)(!1),u=n[0],d=n[1],f=(0,a.useRef)(!1),p=function(){if(!f.current&&!window.confirm(s))throw i().events.emit("routeChangeError"),i().replace(i(),i().asPath),new Error("Abort route change. Please ignore this error.")};return(0,a.useEffect)((function(){return d(e.getStatus()===l.kO.Syncing),e.onStatusChange((function(e){d(e===l.kO.Syncing)}))}),[e]),(0,a.useEffect)((function(){var e=function(e){if(!f.current)return e.preventDefault(),e.returnValue=s,s};if(u)return window.addEventListener("beforeunload",e),c.gn||t.events.on("routeChangeStart",p),function(){window.removeEventListener("beforeunload",e),c.gn||t.events.off("routeChangeStart",p)}}),[u,t.events]),function(e){return f.current=e}}},18888:function(e,t,n){n.d(t,{Z:function(){return v}});var r=n(9941),i=n(67294),o=n(14251),a=n(32692),l=n(31230),c=n(50319);function s(){var e=(0,a.Z)(["\n  mutation ReplFsUpdated($replId: String!) {\n    updateReplTimeUpdated(id: $replId) {\n      ... on Repl {\n        id\n        timeUpdated\n      }\n    }\n  }\n"]);return s=function(){return e},e}var u={},d=(0,l.Ps)(s());var f=n(74963),p=n(2916),h=n(99408);function v(){var e=(0,r.Z)(function(e){var t=(0,o.Z)({},u,e);return c.D(d,t)}(),1)[0],t=(0,h.Z)().fs,n=(0,p.Z)(),a=null===n||void 0===n?void 0:n.currentUserPermissions.containerWrite,l=null===n||void 0===n?void 0:n.id;(0,i.useEffect)((function(){if(a&&l){var n=(0,f.Z)((function(){return e({variables:{replId:l}})}),{wait:6e4,maxWait:6e5}),r=t.onStatusChange((function(){n()}));return function(){n.isScheduled()&&n.flush(),r()}}}),[t,l,a,e])}},18332:function(e,t,n){n.d(t,{Z:function(){return d}});var r=n(9941),i=n(69779),o=n(67294),a=n(24351),l=n(14251),c=n(52875),s=function(e){return/\s/.test(e)};function u(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=(0,r.Z)(o.useState(null),2),a=i[0],u=i[1],d=o.useCallback(u,[u]),f=o.useRef(t);o.useEffect((function(){f.current=t}),[t]);var p=(0,r.Z)(o.useState(null),2),h=p[0],v=p[1];return o.useEffect((function(){if(a){var e=function(){var e=a.value,t=a.selectionStart;if(t){var n=1===t||s(e[t-2]||""),r=e.length?e[t-1]:null;v((function(i){if(i&&(t<i.index||0===t))return null;if(!r)return i;if(!i&&!n)return i;var o=f.current.includes(r);return i||o?i?s(r)?null:(0,c.Z)((0,l.Z)({},i),{text:e.slice(i.index,t)}):{index:t,text:"",match:r}:i}))}else v(null)},t=function(){v(null)};return a.addEventListener("focus",e),a.addEventListener("keyup",e),a.addEventListener("blur",t),function(){v(null),a.removeEventListener("focus",e),a.removeEventListener("keyup",e),a.removeEventListener("blur",t)}}}),[a,v]),[h,d]}function d(e){var t=o.useRef(e);o.useEffect((function(){t.current=e}),[e]);var n=(0,r.Z)(o.useState(!1),2),l=n[0],c=n[1],s=(0,r.Z)(o.useState(null),2),d=s[0],f=s[1],p=(0,r.Z)(u.apply(void 0,(0,i.Z)(Object.keys(e))),2),h=p[0],v=p[1],m=o.useRef(h);o.useEffect((function(){m.current=h}),[h]);var g=(0,a.Z)(h,100);return o.useEffect((function(){if(g){var e=g.match,n=g.text,r=t.current[e]?t.current[e]:null;if(r){var i=!1;return c(!0),r(n).then((function(e){i||m.current===g&&(c(!1),f({textTrigger:g,results:e,applySuggestion:function(e){var t=e.targetValue,n=e.suggestionValue,r=t.slice(0,g.index),i=n,o=t.slice(g.index+g.text.length);o&&o.startsWith(" ")||(i+=" ");var a=r+i+o;return{cursorIndex:(r+i).length+(o&&o.startsWith(" ")?1:0),fullValue:a}}}))})),function(){i=!0}}f(null)}else f(null)}),[g,f]),[{isLoading:l,suggestions:d},v]}},4989:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(67294),i=n(15902);function o(){var e=(0,r.useRef)(0),t=(0,r.useState)(!1),n=t[0],o=t[1],a=(0,i.T3)(),l=window.visualViewport;return(0,r.useEffect)((function(){if(l&&a){var t=function(){var t=l.height<.8*e.current;o(t)};return e.current=l.height,l.addEventListener("resize",t),function(){l.removeEventListener("resize",t)}}}),[l,a]),n}},85212:function(e,t,n){n.d(t,{C:function(){return i},w:function(){return r}});var r=function(e){var t=parseInt(e.substring(1),16);return[t>>16&255,t>>8&255,255&t]},i=function(e,t,n){return"#"+e.toString(16)+t.toString(16)+n.toString(16)}},56919:function(e,t,n){n.d(t,{t:function(){return c}});var r=n(32692),i=n(51889),o=n(31230),a=n(52892);function l(){var e=(0,r.Z)(["\n  mutation deleteRepl($id: String!) {\n    deleteRepl(id: $id) {\n      id\n    }\n  }\n"]);return l=function(){return e},e}(0,o.ZP)(l());var c=function(e){var t=(0,a.Z)({id:e.id,__typename:e.__typename||"Repl"}),n=function(e,n){return n.node.id===t};return(0,i._M)((function(){return[["data",i.Dx,"recentRepls",n],["data",t]]}))}},28479:function(e,t,n){n.d(t,{o:function(){return r},p:function(){return i}});var r=function(e){var t=new Date(e),n=t.getHours(),r=t.getMinutes(),o="AM";return n>=12&&(o="PM"),0===(n%=12)&&(n="12"),r<10&&(r="0"+r),i(e)+" ".concat(n,":").concat(r," ").concat(o)},i=function(e){var t=new Date(e),n=t.getMonth()+1,r=t.getDate(),i=t.getFullYear();return"".concat(n,"/").concat(r,"/").concat(i)}},31557:function(e,t,n){function r(e){if(!e)return!1;try{var t=new URL(e);return Boolean(t)}catch(n){return!1}}n.d(t,{Z:function(){return r}})},75474:function(e,t,n){n.d(t,{Z:function(){return E}});var r=n(9941),i=n(35944),o=n(67294),a=n(59641),l=n(93058),c=n(14251),s=n(32692),u=n(31230),d=n(37887),f=n(50319);function p(){var e=(0,s.Z)(["\n  query MultiplayerInviteUrl($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        inviteUrl\n        owner {\n          ... on User {\n            id\n          }\n          ... on Team {\n            id\n          }\n        }\n      }\n    }\n  }\n"]);return p=function(){return e},e}function h(){var e=(0,s.Z)(["\n  mutation MultiplayerRefreshInviteUrl($replId: String!) {\n    refreshMultiplayerInviteLink(replId: $replId) {\n      id\n      ... on Repl {\n        id\n        inviteUrl\n      }\n    }\n  }\n"]);return h=function(){return e},e}function v(){var e=(0,s.Z)(["\n  mutation DeleteMultiplayerInviteUrl($replId: String!) {\n    deleteMultiplayerInviteLink(replId: $replId) {\n      ... on Repl {\n        id\n        inviteUrl\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return v=function(){return e},e}var m={},g=(0,u.Ps)(p());var y=(0,u.Ps)(h());var Z=(0,u.Ps)(v());var b=n(4158),w=n(67629),x=n(88808);function E(e){var t,n,s,u=e.replId,p=(0,l.Z)(),h=p.showConfirm,v=p.showError,E=function(e){var t=(0,c.Z)({},m,e);return d.a(g,t)}({variables:{replId:u}}),C=E.data,S=E.loading,T=E.error,k=(0,r.Z)(function(e){var t=(0,c.Z)({},m,e);return f.D(y,t)}({variables:{replId:u},onError:function(e){return v(e.message)}}),2),_=k[0],R=k[1],D=(0,r.Z)(function(e){var t=(0,c.Z)({},m,e);return f.D(Z,t)}({variables:{replId:u},optimisticResponse:{deleteMultiplayerInviteLink:{id:u,inviteUrl:null,__typename:"Repl"},__typename:"RootMutationType"},onError:function(e){return v(e.message)},onCompleted:function(e){"UserError"!==e.deleteMultiplayerInviteLink.__typename?"Repl"===e.deleteMultiplayerInviteLink.__typename&&h("Join link deleted"):v(e.deleteMultiplayerInviteLink.message)}}),2),I=D[0],P=D[1],G=R.loading||P.loading,B=o.useRef(null),A="Repl"===(null===C||void 0===C||null===(t=C.repl)||void 0===t?void 0:t.__typename)&&"Team"===(null===(n=C.repl.owner)||void 0===n?void 0:n.__typename),U="Repl"===(null===C||void 0===C||null===(s=C.repl)||void 0===s?void 0:s.__typename)&&C.repl.inviteUrl?window.location.origin+C.repl.inviteUrl:null;o.useEffect((function(){R.error&&v(R.error.message)}),[R.error,R.data,u,v]);var O=function(){B&&B.current&&B.current.select()},N=function(){return(0,i.tZ)(a.hU,{alt:"Anyone on the internet with this link can join and edit this Repl",children:(0,i.tZ)(b.Z,{})})};return S?(0,i.tZ)(a.xv,{children:"loading..."}):T?(0,i.tZ)(a.xv,{children:"Error: please contact support"}):U?(0,i.BX)(a.G7,{css:[a.l0.flex.column,a.l0.colWithGap(4),a.l0.align.stretch],children:[(0,i.tZ)(a.xv,{color:"dimmer",variant:"small",children:(0,i.BX)(a.G7,{css:[a.l0.flex.row,a.l0.rowWithGap(4),a.l0.align.center],children:["Invite ",A?"guests":"friends"," with a join link",N()]})}),(0,i.BX)(a.G7,{css:[a.l0.flex.row,a.l0.rowWithGap(8),a.l0.align.center],children:[(0,i.tZ)(a.G7,{css:[a.l0.flex.row,a.l0.flex.grow(1)],children:(0,i.tZ)(a.II,{ref:B,readOnly:!0,onChange:function(){return null},value:G?"loading...":U,onClick:O})}),(0,i.tZ)(a.hU,{alt:"Copy",onClick:function(){O(),document.execCommand("copy"),h("Link copied")},colorway:"primary",children:(0,i.tZ)(x.Z,{})}),(0,i.tZ)(a.hU,{alt:"Delete link",colorway:"negative",onClick:function(e){G||I()},children:(0,i.tZ)(w.Z,{})})]}),(0,i.BX)(a.xv,{variant:"small",color:"dimmer",children:[(0,i.tZ)("a",{onKeyDown:function(e){e.preventDefault(),G||_()},role:"button",tabIndex:0,onClick:function(e){e.preventDefault(),G||_()},children:"Generate a new link"})," ","(The current one will stop working)"]})]}):(0,i.tZ)(a.Tg,{elevated:!0,background:"default",css:[a.l0.flex.row,a.l0.pt(8)],children:(0,i.tZ)(a.zx,{onClick:function(){G||_()},text:"Generate a join link",iconRight:N(),css:{width:"100%"}})})}},15764:function(e,t,n){n.d(t,{FW:function(){return p},NH:function(){return m}});var r=n(14251),i=n(32692),o=n(31230),a=n(9523),l=n(28433),c=n(37887);function s(){var e=(0,i.Z)(["\n  fragment PublishReplData on Repl {\n    id\n    url\n    title\n    description\n    iconUrl\n    lastPublishedAt\n    publishedAs\n    imageUrl\n    isRenamed\n    templateInfo {\n      iconUrl\n    }\n    replViewSettings {\n      id\n      defaultView\n      replImage\n      replFile\n    }\n    tags {\n      id\n      isOfficial\n    }\n    currentUserPermissions {\n      containerWrite\n      publish\n      changeIconUrl\n    }\n    ...CrosisContextRepl\n    ...PublishedReplShareInfoReplData\n  }\n  ","\n  ","\n"]);return s=function(){return e},e}function u(){var e=(0,i.Z)(["\n  fragment PublishCurrentUser on CurrentUser {\n    id\n    image\n    isTemplateDeveloper: hasRole(role: TEMPLATE_DEVELOPER)\n    ...CrosisContextCurrentUser\n  }\n  ","\n"]);return u=function(){return e},e}function d(){var e=(0,i.Z)(["\n  query PublishCurrentUser {\n    currentUser {\n      id\n      ...PublishCurrentUser\n    }\n  }\n  ","\n"]);return d=function(){return e},e}var f={},p=(0,o.Ps)(s(),a.C,l.B),h=(0,o.Ps)(u(),a.D),v=(0,o.Ps)(d(),h);function m(e){var t=(0,r.Z)({},f,e);return c.a(v,t)}},28985:function(e,t,n){n.d(t,{e9:function(){return p},wd:function(){return d}});var r=n(14251),i=n(32692),o=n(31230),a=n(28433),l=n(37887);function c(){var e=(0,i.Z)(["\n  fragment PublishReleaseFormRepl on Repl {\n    id\n    title\n    description\n    slug\n    user {\n      username\n    }\n    ...PublishedReplShareInfoReplData\n    deployment {\n      id\n      activeRelease {\n        id\n      }\n    }\n    releases {\n      items {\n        id\n        timeCreated\n        description\n      }\n    }\n  }\n  ","\n"]);return c=function(){return e},e}function s(){var e=(0,i.Z)(["\n  query PublishReleaseFormCurrentUser {\n    currentUser {\n      id\n      username\n    }\n  }\n"]);return s=function(){return e},e}var u={},d=(0,o.Ps)(c(),a.B),f=(0,o.Ps)(s());function p(e){var t=(0,r.Z)({},u,e);return l.a(f,t)}},16466:function(e,t,n){n.d(t,{Z:function(){return H}});var r=n(34727),i=n(14251),o=n(52875),a=n(9941),l=n(70655),c=n(35944),s=n(67294),u=n(59641),d=n(37424),f=n(54969),p=n(28985),h=n(30992),v=n(88961),m=n(18048),g=n(32692),y=n(31230),Z=n(37887);function b(){var e=(0,g.Z)(["\n  query PendingChanges($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        deployment {\n          id\n          activeRelease {\n            id\n            pendingChanges {\n              fileName\n              changeType\n            }\n          }\n        }\n      }\n    }\n  }\n"]);return b=function(){return e},e}var w={},x=(0,y.Ps)(b());function E(e){var t,n,r=function(e){var t=(0,i.Z)({},w,e);return Z.a(x,t)}({variables:{replId:e.replId},fetchPolicy:"cache-and-network"}),o=r.data,a=r.loading,l=r.error;if(a)return{loading:a,pendingChanges:null,error:null};if(l)return{loading:!1,pendingChanges:null,error:l};var c="Repl"===(null===o||void 0===o?void 0:o.repl.__typename)?o.repl:null;return c?{loading:!1,pendingChanges:(null===(t=c.deployment)||void 0===t||null===(n=t.activeRelease)||void 0===n?void 0:n.pendingChanges)||[],error:l}:{loading:!1,pendingChanges:null,error:new Error("Repl not found")}}var C=n(40914),S=n(50319);function T(){var e=(0,g.Z)(["\n  mutation RevertTemplateRelease($input: RevertReplReleaseInput!) {\n    revertReplRelease(input: $input) {\n      ... on Repl {\n        id\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n"]);return T=function(){return e},e}var k={},_=(0,y.Ps)(T());function R(e){if(!e.data)return null;var t=e.data;if("revertReplRelease"in t){if("NotFoundError"===t.revertReplRelease.__typename||"UnauthorizedError"===t.revertReplRelease.__typename||"UserError"===t.revertReplRelease.__typename)return t.revertReplRelease.message;if("Repl"!==t.revertReplRelease.__typename)return"Something went wrong reverting your Template"}}function D(){var e=(0,a.Z)(function(e){var t=(0,i.Z)({},k,e);return S.D(_,t)}({refetchQueries:["ReplEnvironmentHeader"]}),2),t=e[0];function n(){return(n=(0,r.Z)((function(e){var n,r;return(0,l.__generator)(this,(function(i){switch(i.label){case 0:return n=e.input,[4,t({variables:{input:n}})];case 1:return[2,{data:(r=i.sent()).data,error:R(r)}]}}))}))).apply(this,arguments)}return{revertTemplateRelease:function(e){return n.apply(this,arguments)},state:e[1]}}var I=n(77365),P=n(63736),G=n(79064),B=n(73604),A=n(60081),U=n(7182),O=n(73147),N=(0,U.cn)({ran:!1,tested:!1}),L=u.KD.form;function F(e){if(0===e.length)return{message:"You cannot leave this empty."}}function X(e){var t,n,r=e.changeType;return r===f.J5.NewFile?(t=u.TV.accentPositiveStronger,n="Added"):r===f.J5.DeletedFile?(t=u.TV.accentNegativeStronger,n="Deleted"):(t=u.TV.foregroundDefault,n="Changed"),(0,c.tZ)(u.xv,{variant:"small",css:[{color:t}],children:n})}function M(e){var t=e.pendingChangesState,n=e.isReplitTemplate;if(t.loading)return(0,c.tZ)(u.G7,{css:[u.l0.center],children:(0,c.tZ)(I.Z,{})});if(t.error)return(0,c.tZ)(u.E_,{icon:(0,c.tZ)(v.Z,{}),text:t.error.message||"Could not load modified files - please try again.",colorway:"negative"});if(!t.pendingChanges||0===t.pendingChanges.length)return n?null:(0,c.tZ)(u.xv,{multiline:!0,children:"No changes to publish. Come back when you have made changes to your Repl."});var r=t.pendingChanges,i=r.slice(0,15);return(0,c.BX)(u.G7,{css:[{display:"grid",gridTemplateColumns:"1fr 1fr",gap:u.TV.space8}],children:[i.map((function(e){return(0,c.BX)(s.Fragment,{children:[(0,c.BX)(u.G7,{css:[u.l0.rowWithGap(4),u.l0.align.center],children:[(0,c.tZ)(P.Z,{size:12,path:e.fileName}),(0,c.tZ)(u.xv,{children:e.fileName})]},e.fileName),(0,c.tZ)(X,{changeType:e.changeType})]},e.fileName)})),r.length>i.length&&(0,c.BX)(u.xv,{children:["And ",r.length-i.length," other files..."]})]})}function W(e){var t=e.repl,n=D(),i=function(){var e=(0,r.Z)((function(e){return(0,l.__generator)(this,(function(r){switch(r.label){case 0:return[4,n.revertTemplateRelease({input:{replId:t.id,releaseId:e}})];case 1:return r.sent(),[2]}}))}));return function(t){return e.apply(this,arguments)}}();return(0,c.BX)(u.G7,{children:[(0,c.tZ)(u.h4,{level:1,variant:"subheadBig",css:[u.l0.mb(16)],children:"Existing Releases"}),(0,c.tZ)(u.G7,{css:[{display:"grid",gridTemplateColumns:"2fr 3fr 1fr",gap:u.TV.space8}],children:t.releases.items.map((function(e){var n,r;return(0,c.BX)(s.Fragment,{children:[(0,c.tZ)("span",{children:(0,A.Z)(new Date(e.timeCreated),"do MMM, hh:mm a")}),(0,c.tZ)("span",{children:e.description}),(0,c.tZ)("span",{style:{justifySelf:"end"},children:e.id===(null===(n=t.deployment)||void 0===n||null===(r=n.activeRelease)||void 0===r?void 0:r.id)?(0,c.tZ)("span",{css:[u.l0.p(4),{display:"flex"}],children:"(active)"}):(0,c.tZ)(u.zx,{text:"revert",colorway:"primary",small:!0,onClick:function(t){t.preventDefault(),i(e.id)}})})]},e.id)}))})]})}function j(e){var t=e.children;return(0,c.tZ)(u.G7,{css:[u.l0.rowWithGap(8),u.l0.py(2)],children:t})}function H(e){var t,n,f,p,g,y,Z=e.repl,b=(0,d.H)(),w=(0,a.Z)(s.useState(!1),2),x=w[0],S=w[1],T=(0,a.Z)(s.useState(!1),2),k=T[0],_=T[1],R=function(e){var t=E({replId:e.replId}),n=s.useMemo((function(){if(!t.pendingChanges)return[];var e=t.pendingChanges.slice().sort((function(e,t){return e.fileName.localeCompare(t.fileName)})).map((function(e){return{file:e,pathDepth:(0,B.U$)(e.fileName)}})).sort((function(e,t){return e.pathDepth-t.pathDepth})).map((function(e){return e.file}));return e}),[t.pendingChanges]);return(0,o.Z)((0,i.Z)({},t),{pendingChanges:n})}({replId:Z.id}),D=(0,C.r)(),I=(0,h.Y)("",F),P=0!==(null===(t=R.pendingChanges)||void 0===t?void 0:t.length),A=(null===(n=Z.user)||void 0===n?void 0:n.username)===O.IU||"templates"===(null===(f=Z.user)||void 0===f?void 0:f.username),X=(0,a.Z)((0,U.KO)(N),2),j=X[0],H=X[1];s.useEffect((function(){H({ran:!1,tested:!1})}),[H]);var V=Boolean(I.error||!A&&!P||D.loading||A&&(!j.ran||!j.tested)),q=A&&(null===(p=Z.releases)||void 0===p||null===(g=p.items)||void 0===g?void 0:g.length)>1,K="";return I.error?K="Please fill out the form":A||P||(K="No changes to publish in this release"),x?(0,c.tZ)(G.q,{repl:Z,isUpdate:!0}):k?(0,c.tZ)(u.G7,{css:[u.l0.p(16),u.l0.colWithGap(16)],children:(0,c.tZ)(W,{repl:Z})}):(0,c.BX)(L,{onSubmit:function(){var e=(0,r.Z)((function(e){return(0,l.__generator)(this,(function(t){switch(t.label){case 0:return e.preventDefault(),V||I.validate()?[2]:[4,D.createRelease({input:{replId:Z.id,description:I.value}})];case 1:return t.sent().error||S(!0),[2]}}))}));return function(t){return e.apply(this,arguments)}}(),css:[u.l0.colWithGap(24)],children:[(0,c.tZ)(u.h4,{level:1,variant:"headerDefault",children:"Publish a new release"}),(0,c.BX)(u.G7,{css:[u.l0.colWithGap(8)],children:[(0,c.tZ)(u.h4,{level:2,variant:"subheadDefault",children:"Modified files"}),(0,c.tZ)(M,{pendingChangesState:R,isReplitTemplate:A})]}),A||P?(0,c.BX)(u.G7,{css:[u.l0.colWithGap(4)],children:[(0,c.tZ)("label",{htmlFor:b("description"),css:[u.l0.color.foregroundDimmer,{fontSize:u.TV.fontSizeSmall,lineHeight:u.TV.lineHeightSmall}],children:"Description"}),(0,c.tZ)(u.B,{id:b("description"),"aria-label":"Description",onChange:function(e){return I.setValue(e.target.value)},css:[u.l0.width("100%"),u.l0.minHeight(64),u.l0.maxHeight(128),{resize:"vertical"}],placeholder:"Explain what has changed about your template"}),I.error?(0,c.tZ)(u.E_,{icon:(0,c.tZ)(v.Z,{}),text:null===(y=I.error)||void 0===y?void 0:y.message,colorway:"negative"}):null]}):null,A?(0,c.tZ)(z,{repl:Z}):null,(0,c.tZ)(u.G7,{children:D.error?(0,c.tZ)(u.E_,{icon:(0,c.tZ)(v.Z,{}),text:D.error,colorway:"negative"}):null}),(0,c.BX)(u.G7,{css:[u.l0.rowWithGap(12),u.l0.justify.end],children:[q?(0,c.tZ)(u.zx,{text:"Revert to older",colorway:"negative",onClick:function(){return _(!0)}}):null,(0,c.tZ)(u.u,{tooltip:K,placement:"bottom",isDisabled:!K,children:(0,c.tZ)(u.zx,{text:"Publish release",type:"submit",colorway:"primary",iconLeft:(0,c.tZ)(m.Z,{}),disabled:V})})]})]})}function z(e){var t,n,r,l=e.repl,s=(0,a.Z)((0,U.KO)(N),2),f=s[0],h=s[1],v=(0,d.H)(),m=(0,p.e9)(),g=m.data,y=m.loading,Z=null===g||void 0===g||null===(t=g.currentUser)||void 0===t?void 0:t.username;return(0,c.BX)(u.G7,{css:[u.l0.colWithGap(12)],children:[(0,c.tZ)(u.h4,{level:2,children:"Official Replit Template publishing checklist"}),(0,c.BX)(u.G7,{children:[(0,c.BX)(j,{children:[(0,c.tZ)(u.XZ,{id:v("ran"),checked:f.ran,onChange:function(e){return h((0,o.Z)((0,i.Z)({},f),{ran:e.target.checked}))}}),(0,c.tZ)("label",{htmlFor:v("ran"),children:"Run Repl:"}),(0,c.BX)("span",{children:["to generate and cache package guesser result into ",(0,c.tZ)("code",{children:".upm"}),"."]})]}),(0,c.BX)(j,{children:[(0,c.tZ)(u.XZ,{id:v("tested"),checked:f.tested,onChange:function(e){return h((0,o.Z)((0,i.Z)({},f),{tested:e.target.checked}))}}),(0,c.tZ)("label",{htmlFor:v("tested"),children:"Run tests:"}),(0,c.BX)("span",{children:['Run "Test working copy" for @',null===(n=l.user)||void 0===n?void 0:n.username,"/",l.slug," in"," ",(0,c.tZ)("a",{href:"https://tmpltester.util.repl.co/",target:"_blank",children:"template tester"}),". ",(0,c.tZ)("br",{}),"If there are no tests, consider adding one."]})]})]}),y||(null===(r=l.user)||void 0===r?void 0:r.username)!==Z?null:(0,c.tZ)(u.E_,{text:"You can't publish an update while impersonating. Add yourself as a member of the 'replit' team using CLUI tool 'add-remove-team-member', then open this Repl from your account.",colorway:"negative"})]})}},28433:function(e,t,n){n.d(t,{B:function(){return o}});var r=n(32692);function i(){var e=(0,r.Z)(["\n  fragment PublishedReplShareInfoReplData on Repl {\n    id\n    url\n    publishedAs\n    title\n  }\n"]);return i=function(){return e},e}var o=(0,n(31230).Ps)(i())},37815:function(e,t,n){n.d(t,{Z:function(){return Z}});var r=n(34727),i=n(70655),o=n(35944),a=(n(67294),n(59641)),l=n(37424),c=n(54969),s=n(30992),u=n(88961),d=n(19244),f=n(60977),p=n(75026),h=(0,a.Xb)({content:[a.l0.p(8),a.l0.colWithGap(16)],section:[a.l0.colWithGap(8)]});function v(e){var t=e.header;return(0,o.tZ)(a.Qd,{headerContent:t,children:(0,o.BX)(a.G7,{css:h.content,children:[(0,o.BX)(a.G7,{css:h.section,children:[(0,o.tZ)(a.xv,{children:"Bold Text"}),(0,o.tZ)(a.xv,{color:"dimmer",children:"**bold**"})]}),(0,o.BX)(a.G7,{css:h.section,children:[(0,o.tZ)(a.xv,{children:"Italic Text"}),(0,o.tZ)(a.xv,{color:"dimmer",children:"__italic__"})]}),(0,o.BX)(a.G7,{css:h.section,children:[(0,o.tZ)(a.xv,{children:"Links"}),(0,o.tZ)(a.xv,{color:"dimmer",children:"[Link Name](https://yourlink.com)"})]}),(0,o.BX)(a.G7,{css:h.section,children:[(0,o.tZ)(a.xv,{children:"Images"}),(0,o.tZ)(a.xv,{color:"dimmer",children:"![Image alt text](https://linktoyourimage.com)"})]}),(0,o.BX)(a.G7,{css:h.section,children:[(0,o.tZ)(a.xv,{children:"Header Text"}),(0,o.tZ)(a.xv,{color:"dimmer",children:"# Header"})]}),(0,o.BX)(a.G7,{css:[a.l0.colWithGap(8)],children:[(0,o.tZ)(a.xv,{children:"Code Blocks"}),(0,o.BX)(a.xv,{color:"dimmer",children:["```",(0,o.tZ)("br",{}),"this is for large, multiline code blocks",(0,o.tZ)("br",{}),"```"]})]}),(0,o.BX)(a.G7,{css:[a.l0.colWithGap(8)],children:[(0,o.tZ)(a.xv,{children:"Inline Code"}),(0,o.tZ)(a.xv,{color:"dimmer",children:"`this is for code in the middle of sentences`"})]}),(0,o.BX)(a.G7,{css:[a.l0.colWithGap(8)],children:[(0,o.tZ)(a.xv,{children:"Horizontal Rules"}),(0,o.tZ)(a.xv,{color:"dimmer",children:"***"})]})]})})}var m=a.KD.form;function g(e){return 0===e.trim().length?{message:"You cannot leave this empty."}:e.length>100?{message:"The title should not be longer than ".concat(100," characters.")}:void 0}function y(e){return 0===e.trim().length?{message:"You cannot leave this empty."}:e.length>5e3?{message:"The description should not be longer than ".concat(5e3," characters.")}:void 0}function Z(e){var t,n,h=e.repl,Z=e.source,b=e.onDone,w=(0,l.H)(),x=w("titleIdInput"),E=w("descriptionIdInput"),C=(0,s.Y)("",g),S=(0,s.Y)("",y),T=(0,d.O)();return(0,o.BX)(m,{onSubmit:function(){var e=(0,r.Z)((function(e){return(0,i.__generator)(this,(function(t){switch(t.label){case 0:return e.preventDefault(),C.validate()||S.validate()?[2]:[4,T.publish({input:{replId:h.id,title:C.value,body:S.value}})];case 1:return t.sent().error||((0,f.j)(f.U3.UPDATE_SHARED,{source:Z,replType:h.publishedAs===c.O2.Template?"template_repl":"regular_repl"}),b()),[2]}}))}));return function(t){return e.apply(this,arguments)}}(),css:[a.l0.colWithGap(16)],children:[(0,o.tZ)(a.h4,{level:1,variant:"headerDefault",children:"Add an update"}),(0,o.BX)(a.xv,{children:["Explain what has changed about this"," ",h.publishedAs===c.O2.Template?"Template":"Repl","."]}),(0,o.BX)(a.G7,{css:a.l0.colWithGap(8),children:[(0,o.BX)(a.G7,{css:a.l0.colWithGap(4),children:[(0,o.tZ)("label",{css:a.l0.color.foregroundDimmer,htmlFor:x,children:"Title"}),(0,o.tZ)(a.II,{id:x,onChange:function(e){C.setValue(e.target.value)},disabled:T.loading,placeholder:"Give your post a title"})]}),C.error?(0,o.tZ)(a.E_,{icon:(0,o.tZ)(u.Z,{}),text:null===(t=C.error)||void 0===t?void 0:t.message,colorway:"negative"}):null]}),(0,o.BX)(a.G7,{css:a.l0.colWithGap(8),children:[(0,o.BX)(a.G7,{css:a.l0.colWithGap(4),children:[(0,o.tZ)("label",{css:a.l0.color.foregroundDimmer,htmlFor:E,children:"Description"}),(0,o.tZ)(a.B,{id:E,onChange:function(e){S.setValue(e.target.value)},css:[a.l0.width("100%"),{minHeight:a.TV.space128,maxHeight:a.TV.space256,resize:"vertical",lineHeight:a.TV.lineHeightDefault}],disabled:T.loading,placeholder:"Write something about this post"})]}),S.error?(0,o.tZ)(a.E_,{icon:(0,o.tZ)(u.Z,{}),text:null===(n=S.error)||void 0===n?void 0:n.message,colorway:"negative"}):null]}),(0,o.tZ)(v,{header:"Style your description with Markdown"}),T.error?(0,o.tZ)(a.E_,{icon:(0,o.tZ)(u.Z,{}),colorway:"negative",text:T.error}):null,(0,o.tZ)(a.zx,{text:T.loading?"Sharing update...":"Share update",type:"submit",colorway:"primary",disabled:Boolean(T.loading||C.error||S.error),css:{alignSelf:"end"},iconLeft:(0,o.tZ)(p.Z,{})})]})}},19244:function(e,t,n){n.d(t,{O:function(){return v}});var r=n(34727),i=n(9941),o=n(70655),a=n(14251),l=n(32692),c=n(31230),s=n(15764),u=n(50319);function d(){var e=(0,l.Z)(["\n  mutation PublishReplCreatePost($input: CreateReplPost2Input!) {\n    createReplPost2(input: $input) {\n      ... on Post {\n        id\n        repl {\n          id\n          ...PublishReplData\n        }\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return d=function(){return e},e}var f={},p=(0,c.Ps)(d(),s.FW);function h(e){var t,n,r,i,o,a,l;return e.error?e.error.message||"Something went wrong publishing your Repl":"NotFoundError"===(null===(t=e.data)||void 0===t||null===(n=t.createReplPost2)||void 0===n?void 0:n.__typename)||"UnauthorizedError"===(null===(r=e.data)||void 0===r||null===(i=r.createReplPost2)||void 0===i?void 0:i.__typename)||"UserError"===(null===(o=e.data)||void 0===o||null===(a=o.createReplPost2)||void 0===a?void 0:a.__typename)?e.data.createReplPost2.message:(null===(l=e.data)||void 0===l?void 0:l.createReplPost2)&&"Post"!==e.data.createReplPost2.__typename?"Something went wrong publishing your Repl":void 0}function v(){var e=(0,i.Z)(function(e){var t=(0,a.Z)({},f,e);return u.D(p,t)}(),2),t=e[0],n=e[1],l=function(){var e=(0,r.Z)((function(e){var r,i;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:if(r=e.input,n.loading)return[2,{data:null,error:null}];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,t({variables:{input:r}})];case 2:return[2,{data:(i=o.sent()).data,error:h(i)}];case 3:return o.sent(),[2,{data:null,error:"Something went wrong publishing your Repl"}];case 4:return[2]}}))}));return function(t){return e.apply(this,arguments)}}();return{publish:l,data:n.data,loading:n.loading,error:h(n)}}},8181:function(e,t,n){var r=n(35944),i=n(67294),o=n(69346),a=n(14921),l=n(59641),c=n(2548),s=n(1144),u=n(49094),d=function(e){var t=e.reason;return(0,r.BX)(o.G,{css:[l.l0.center,l.l0.minWidth(225),l.l0.height(225),l.l0.p(16),l.l0.color.foregroundDefault,l.l0.borderRadius(8),l.l0.backgroundColor.backgroundOverlay,l.l0.zIndex(5e5),{cursor:"not-allowed"}],children:[(0,r.tZ)(c.Z,{height:80}),(0,r.BX)(s.x,{variant:"subheadBig",css:[l.l0.mt(32)],dataCy:"import-loading-spinner",children:[t,"..."]})]})};function f(){return(0,u.q)()?(0,r.tZ)(a.Z,{children:(0,r.tZ)(o.G,{css:[l.l0.position.fixed,l.l0.flex.row,l.l0.align.center,l.l0.justify.center,l.l0.backgroundColor.backgroundOverlay,{top:0,bottom:0,left:0,right:0,zIndex:5e5,cursor:"not-allowed"}],children:(0,r.tZ)(d,{reason:"Importing"})})}):null}t.Z=(0,i.memo)(f)},85593:function(e,t,n){n.d(t,{Z:function(){return p},_:function(){return m}});var r=n(9941),i=n(35944),o=n(60357),a=n.n(o),l=n(67294),c=n(30019),s=n(19526),u=n(33773),d=n(6951),f=n(81255);function p(e){var t=(0,r.Z)(l.useState(!1),2),n=t[0],o=t[1],a=[],u=[];if(e.variables.length>0){var f=e.variables[0].parentVariableReference,p=!0,h=!1,v=void 0;try{for(var g,y=e.variables[Symbol.iterator]();!(p=(g=y.next()).done);p=!0){var Z=g.value;Z.parentVariableReference===f?a.push(Z):u.push(Z)}}catch(b){h=!0,v=b}finally{try{p||null==y.return||y.return()}finally{if(h)throw v}}}return(0,i.BX)(i.HY,{children:[(0,i.tZ)(c.Z,{truncate:!0,level:5,children:"Variables"}),(0,i.BX)(s.gC,{align:"stretch",constrainWidth:!0,children:[a.map((function(t){return(0,i.tZ)(m,{depth:0,variable:t,client:e.client},t.parentVariableReference+"/"+t.name)})),u.length>0&&(0,i.BX)(i.HY,{children:[(0,i.BX)(d.Z,{filled:!1,border:!1,onClick:function(){return o((function(e){return!e}))},children:["See ",n?"Less":"More"]}),n&&u.map((function(t){return(0,i.tZ)(m,{depth:0,variable:t,client:e.client},t.parentVariableReference+"/"+t.name)}))]})]})]})}function h(e){var t=e.variable,n=e.expanded;return t.variablesReference>0?(0,i.tZ)("div",{css:[f.l0.transition.snappy,{transform:"rotate(".concat(n?0:-90,"deg)")}],children:(0,i.tZ)(u.Z,{})}):null}function v(e){var t=e.expanded,n=e.depth,r=e.variable;return 0===n&&!("parentVariableReference"in r)?(0,i.tZ)(h,{expanded:t,variable:r}):(0,i.tZ)("div",{css:[f.l0.flex.grow(0),f.l0.flex.shrink(0),f.l0.width(f.TV.space16),f.l0.display.flex,f.l0.align.center,f.l0.justify.end],children:(0,i.tZ)(h,{expanded:t,variable:r})})}function m(e){var t=e.depth,n=e.variable,o=e.client,c=(0,r.Z)(l.useState(!1),2),u=c[0],d=c[1],f=(0,r.Z)(l.useState([]),2),p=f[0],h=f[1];return l.useEffect((function(){u&&o.fetchVariables(n.variablesReference).then((function(e){return h(e)}),(function(){return d(!1)}))}),[u,o,n.variablesReference]),(0,i.BX)(i.HY,{children:[(0,i.BX)("div",{onClick:function(){n.variablesReference>0&&d((function(e){return!e}))},className:a().dynamic([["d2db4fbc08fcf9b",[t]]])+" variable",children:[(0,i.tZ)(v,{expanded:u,variable:n,depth:t}),(0,i.BX)("div",{className:a().dynamic([["d2db4fbc08fcf9b",[t]]])+" label",children:[n.name,n.type?(0,i.BX)("span",{className:a().dynamic([["d2db4fbc08fcf9b",[t]]])+" type",children:[" ",n.type]}):null,""!==n.value&&": "]}),(0,i.tZ)("div",{className:a().dynamic([["d2db4fbc08fcf9b",[t]]])+" label value",children:(0,i.tZ)("pre",{className:a().dynamic([["d2db4fbc08fcf9b",[t]]]),children:n.value})})]}),u?(0,i.tZ)(s.gC,{align:"stretch",constrainWidth:!0,children:p.map((function(e){return(0,i.tZ)(m,{depth:t+1,variable:e,client:o},"parentVariableReference"in e?e.parentVariableReference+"/"+e.name:e.name)}))}):null,(0,i.tZ)(a(),{id:"d2db4fbc08fcf9b",dynamic:[t],children:".variable.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;max-width:100%;height:var(--space-32);min-height:var(--space-32);cursor:pointer;color:var(--foreground-dimmer);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);font-size:var(--font-size-default);padding-left:-webkit-calc(".concat(t," * var(--space-16));padding-left:-moz-calc(").concat(t," * var(--space-16));padding-left:calc(").concat(t," * var(--space-16));font-family:var(--font-family-code)}.variable.__jsx-style-dynamic-selector:hover{background-color:var(--background-higher);color:var(--foreground-default)}.label.__jsx-style-dynamic-selector{font-size:var(--font-size-default);padding-left:var(--space-8);padding-right:var(--space-8);overflow:hidden;-o-text-overflow:ellipsis;text-overflow:ellipsis;white-space:nowrap;-webkit-box-flex:1;-webkit-flex:1 0 auto;-moz-box-flex:1;-ms-flex:1 0 auto;flex:1 0 auto}.type.__jsx-style-dynamic-selector{opacity:.5}.value.__jsx-style-dynamic-selector{text-align:right;-webkit-flex-shrink:1;-ms-flex-negative:1;flex-shrink:1}")})]})}},1250:function(e,t,n){n.d(t,{Z:function(){return ae},F:function(){return le}});var r=n(34727),i=n(14251),o=n(52875),a=n(9941),l=n(70655),c=n(67294),s=n(99408),u=n(32692),d=n(31230),f=n(73359),p=n(50319),h=n(37887);function v(){var e=(0,u.Z)(["\n  query ReplEnvironmentDesktopDoGitHubImportFlow($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        config {\n          gitRemoteUrl\n          doClone\n        }\n      }\n    }\n    currentUser {\n      id\n      gitHubInfo {\n        accessToken\n      }\n      username\n    }\n  }\n"]);return v=function(){return e},e}function m(){var e=(0,u.Z)(["\n  mutation ReplEnvironmentDesktopDoGitHubImportFlowFinishClone(\n    $input: UpdateReplInput!\n  ) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        config {\n          doClone\n        }\n      }\n    }\n  }\n"]);return m=function(){return e},e}function g(){var e=(0,u.Z)(["\n  query GitHubImportRootOriginReplUrl($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        rootOriginReplUrl\n      }\n    }\n  }\n"]);return g=function(){return e},e}var y={},Z=(0,d.Ps)(v());var b=(0,d.Ps)(m());var w=(0,d.Ps)(g());var x=n(67128),E=n(63377),C=n(16799),S=n(83971),T=n(38863),k=n(93058),_=n(58523),R=n(89224),D=n(83569),I=n(37452),P=n(47491),G=n(70931),B=n(35424),A=n.n(B),U=n(11887),O=n(46679),N=n(9523);function L(){var e=(0,u.Z)(["\n  query DotReplitEditorRootOriginRepl($rootOriginReplUrl: String!) {\n    repl(url: $rootOriginReplUrl) {\n      ... on Repl {\n        id\n        ...CrosisContextRepl\n      }\n    }\n    currentUser {\n      id\n      ...CrosisContextCurrentUser\n    }\n  }\n  ","\n  ","\n"]);return L=function(){return e},e}function F(){var e=(0,u.Z)(["\n  query DotReplitEditorRootOriginReplById($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        ...CrosisContextRepl\n      }\n    }\n    currentUser {\n      id\n      ...CrosisContextCurrentUser\n    }\n  }\n  ","\n  ","\n"]);return F=function(){return e},e}var X={},M=(0,d.Ps)(L(),N.C,N.D);var W=(0,d.Ps)(F(),N.C,N.D);var j="Couldn't fetch the template .replit. Please try again.",H=function(){var e=(0,k.Z)().showError,t=function(e){var t=(0,i.Z)({},X,e);return h.a(W,t)}({fetchPolicy:"no-cache",skip:!0}).refetch,n=function(e){var t=(0,i.Z)({},X,e);return h.a(M,t)}({fetchPolicy:"no-cache",skip:!0}).refetch,o=c.useCallback(function(){var i=(0,r.Z)((function(r){var i,o,a,c,s,u,d,f,p,h,v,m;return(0,l.__generator)(this,(function(l){switch(l.label){case 0:return i=r.replId,o=r.replUrl,i?[4,t({replId:i})]:[3,2];case 1:return a=l.sent(),[3,5];case 2:return o?[4,n({rootOriginReplUrl:o})]:[3,4];case 3:return a=l.sent(),[3,5];case 4:throw new Error("how did we even get here?");case 5:if(c=a.data,s=a.error,!c||s)return e(j),[2,null];if(u=c.repl,d=c.currentUser,"Repl"!==(null===u||void 0===u?void 0:u.__typename)||"CurrentUser"!==(null===d||void 0===d?void 0:d.__typename))return e(j),[2,null];(f=(0,U.ZP)({onUnrecoverableError:function(){e(j)}})).connect({context:{repl:u,currentUser:d,asViewer:!0}}),p=(0,O.Z)({container:f}),l.label=6;case 6:return l.trys.push([6,8,,9]),[4,p.readFile(T.l)];case 7:return"content"in(v=l.sent())&&(h=v.content),[3,9];case 8:return l.sent(),e(j),f.destroy(),[2,null];case 9:if(f.destroy(),!h)return e(j),[2,null];try{m=A().parse(h.toString())}catch(g){return e(j),[2,null]}return[2,m]}}))}));return function(e){return i.apply(this,arguments)}}(),[t,n,e]);return o},z=n(4445),V=n(84519),q=n(49094),K=n(60482);function $(){var e=(0,u.Z)(["\n  query WorkspacePatchDotReplitRepl($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        rootOriginReplUrl\n      }\n    }\n  }\n"]);return $=function(){return e},e}var Y={},Q=(0,d.Ps)($());var J=function(e,t){return{op:"add",path:e,value:JSON.stringify(t)}},ee=new Map([["hintsList","hints"]]);function te(e){return ne.apply(this,arguments)}function ne(){return ne=(0,r.Z)((function(e){var t,n,o,c,s,u,d,f,p,h,v,m,g,y,Z;function b(){return w.apply(this,arguments)}function w(){return(w=(0,r.Z)((function(){var e,n,r;return(0,l.__generator)(this,(function(a){switch(a.label){case 0:return(e="object"===typeof o.env?o.env:null)&&0!==Object.keys(e).length?(n="object"===typeof c.env?c.env:null,r=n?(0,i.Z)({},e,n):e,[4,t.updateDotReplit([J("env",r)])]):[2];case 1:return a.sent(),[2]}}))}))).apply(this,arguments)}function x(){return E.apply(this,arguments)}function E(){return(E=(0,r.Z)((function(){var e,r,i,a;return(0,l.__generator)(this,(function(l){switch(l.label){case 0:return(null===(e=c.nix)||void 0===e?void 0:e.channel)?[2]:(null===o||void 0===o||null===(r=o.nix)||void 0===r?void 0:r.channel)?[3,2]:[4,n.getLatestStableChannel()];case 1:return(a=l.sent()).channel?(i=a.channel,[3,3]):[2];case 2:i=o.nix.channel,l.label=3;case 3:return[4,t.updateDotReplit([J("nix/channel",i)])];case 4:return l.sent().error||s.push("Nix channel was not detected in your imported .replit file but is required for all Nix Repls. The latest stable Nix channel "+'"'.concat(i.channel,'" was automatically added to your .replit file.')),[2]}}))}))).apply(this,arguments)}function C(e,t){return S.apply(this,arguments)}function S(){return S=(0,r.Z)((function(e,n){var r,i,a,u,d,f;return(0,l.__generator)(this,(function(l){switch(l.label){case 0:return r=c[e],i=Boolean(r),Array.isArray(r)?i=r.length>0:r&&"object"===typeof r&&(i=Object.keys(r).length>0),u=null!==(a=ee.get(e))&&void 0!==a?a:e,i||!o[u]?[2]:(d=J(u,o[u]),[4,t.updateDotReplit([d])]);case 1:return l.sent().error||!n||(f="A ".concat(n," was not detected in your imported .replit file so a recommended one was automatically added."),s.push(f)),[2]}}))})),S.apply(this,arguments)}return(0,l.__generator)(this,(function(r){switch(r.label){case 0:t=e.dotReplit,n=e.nixService,o=e.templateConfig,c=e.config,s=[],u={entrypoint:"entrypoint config",hidden:"hidden files config",audio:"audio config",run:"run command",refreshWebViewOnFileChange:"webview refresh config",language:"language config",onBoot:"onBoot command",languages:"languages config",compile:"compile command",debugger:"debugger config",packager:"packager config",interpreter:"interpreter config",unitTest:"unit test config",nix:x,env:b,hosting:"hosting config",gitHubImport:"GitHub import config",auth:"Repl Auth config",hintsList:"Hints config",ports:"Ports config",deployment:"deployment config",orderedEnv:null,modules:"nix modules config"},d=[],f=!0,p=!1,h=void 0;try{for(v=Object.entries(u)[Symbol.iterator]();!(f=(m=v.next()).done);f=!0)g=(0,a.Z)(m.value,2),y=g[0],null!==(Z=g[1])&&("function"===typeof Z?d.push(Z()):d.push(C(y,Z)))}catch(i){p=!0,h=i}finally{try{f||null==v.return||v.return()}finally{if(p)throw h}}return[4,Promise.all(d)];case 1:return r.sent(),[2,s]}}))})),ne.apply(this,arguments)}function re(){var e=(0,s.Z)(),t=e.dotReplit,n=e.nixService,o=(0,E.Z)(),u=(0,a.Z)(function(e){var t=(0,i.Z)({},Y,e);return f.t(Q,t)}(),1)[0],d=H(),p=(0,k.Z)().showWarning;return(0,c.useCallback)((0,r.Z)((function(){var e,r,i,a,c,s,f,h,v,m,g;return(0,l.__generator)(this,(function(l){switch(l.label){case 0:return[4,t.getConfig()];case 1:return(e=l.sent().config)?[4,u({variables:{replId:o}})]:[2];case 2:return r=l.sent().data,(null===(i="Repl"===(null===r||void 0===r?void 0:r.repl.__typename)?r.repl:null)||void 0===i?void 0:i.rootOriginReplUrl)?[4,d({replUrl:i.rootOriginReplUrl})]:[2];case 3:return(a=l.sent())?[4,te({nixService:n,dotReplit:t,config:e,templateConfig:a})]:[2];case 4:c=l.sent(),s=!0,f=!1,h=void 0;try{for(v=c[Symbol.iterator]();!(s=(m=v.next()).done);s=!0)g=m.value,p(g,1e3)}catch(y){f=!0,h=y}finally{try{s||null==v.return||v.return()}finally{if(f)throw h}}return[2]}}))})),[o,p,t,n,u,d])}var ie=n(23384),oe=n(48764).lW;function ae(){var e=(0,K.o3)();le({insertConfigPlugin:function(){return e("config")},setConfigScreenLockIsOpen:(0,q.d)()})}function le(e){var t=e.insertConfigPlugin,n=e.setConfigScreenLockIsOpen,u=(0,ie.D)({controlName:"flag-patch-dotreplit"}),d=(0,E.Z)(),v=(0,a.Z)(function(e){var t=(0,i.Z)({},y,e);return p.D(b,t)}(),2),m=v[0],g=v[1],B=(0,s.Z)(),A=B.container,U=B.fs,O=B.runner,N=B.dotReplit,L=B.session,F=B.nixService,X=(0,S.Z)(A),M=(0,k.Z)(),W=M.showWarning,j=M.showError,q=M.showConfirm,K=function(e){var t=(0,i.Z)({},y,e);return h.a(w,t)}({skip:!0}).refetch,$=re(),Y=H();(0,c.useEffect)((function(){g.error&&j("Failed to finish cloning Repl - "+g.error)}),[g.error]),(0,c.useEffect)((function(){g.data&&q("Finished cloning Repl")}),[g.data]),(0,c.useEffect)((function(){J()}),[]);var Q=(0,a.Z)(function(e){var t=(0,i.Z)({},y,e);return f.t(Z,t)}({variables:{replId:d},fetchPolicy:"no-cache",onCompleted:function(){var e=(0,r.Z)((function(e){var t,n,r,i,o;return(0,l.__generator)(this,(function(a){return t=e.repl,n=e.currentUser,"Repl"===t.__typename&&n&&"CurrentUser"===n.__typename&&t.config.gitRemoteUrl&&t.config.doClone?(Ce({remote:null!==(i=t.config.gitRemoteUrl)&&void 0!==i?i:"",accessToken:null!==(o=null===(r=n.gitHubInfo)||void 0===r?void 0:r.accessToken)&&void 0!==o?o:null,username:n.username}),[2]):[2]}))}));return function(t){return e.apply(this,arguments)}}()}),1),J=Q[0],ee={isInitialized:!1,hasConflictsWithFetchedRemote:!1,hasMergeBaseWithFetchedRemote:!0,authError:x.l4.NONE,badState:x.$U.None,remote:"",repoId:null,branch:"",defaultBranch:"main",branches:[],installations:[],changedFiles:[],commits:[],commitsAhead:null,commitsBehind:null,remoteToken:null,gitHubName:null,ownerId:null,gitHubAvatarUrl:null,gitHubEmail:null},te=function(){var e=(0,r.Z)((function(e){return(0,l.__generator)(this,(function(t){switch(t.label){case 0:return[4,X({args:C.D6.format(ee,null!==e&&void 0!==e?e:"")})];case 1:return t.sent(),[2]}}))}));return function(t){return e.apply(this,arguments)}}(),ne=function(){var e=(0,r.Z)((function(e){return(0,l.__generator)(this,(function(t){switch(t.label){case 0:return[4,X({args:C.M7.format(ee,e)})];case 1:return t.sent(),[2]}}))}));return function(t){return e.apply(this,arguments)}}(),ae=function(){var e=(0,r.Z)((function(){var e,t;return(0,l.__generator)(this,(function(n){switch(n.label){case 0:return[4,X({args:C.LO.format(ee)})];case 1:return e=n.sent(),C.LO.parse?(t=C.LO.parse(ee,null===e.error?e.output:""),[2,t.remote]):[2]}}))}));return function(){return e.apply(this,arguments)}}(),le=function(){var e=(0,r.Z)((function(e){var t,n,r,a;return(0,l.__generator)(this,(function(l){switch(l.label){case 0:return t=e.remote,n=e.remoteToken,[4,X({args:C.Di.format((0,o.Z)((0,i.Z)({},ee),{remote:t,remoteToken:n}))})];case 1:return r=l.sent(),C.Di.parse?(a=C.Di.parse(ee,null===r.error?r.output:"HEAD branch: main"),[2,a.defaultBranch]):[2]}}))}));return function(t){return e.apply(this,arguments)}}(),ce=function(){var e=(0,r.Z)((function(e){return(0,l.__generator)(this,(function(t){switch(t.label){case 0:return[4,X({args:C.lR.format((0,o.Z)((0,i.Z)({},ee),{defaultBranch:e}))})];case 1:return t.sent(),[2]}}))}));return function(t){return e.apply(this,arguments)}}(),se=function(){var e=(0,r.Z)((function(e){var t,n;return(0,l.__generator)(this,(function(r){switch(r.label){case 0:return t=e.remote,n=e.remoteToken,[4,ue()];case 1:return r.sent(),[4,ae()];case 2:return r.sent(),[4,de({deepen:!0,remote:t,remoteToken:n})];case 3:return r.sent(),[2]}}))}));return function(t){return e.apply(this,arguments)}}(),ue=function(){var e=(0,r.Z)((function(){return(0,l.__generator)(this,(function(e){switch(e.label){case 0:return[4,X({args:C.GE.format(ee)})];case 1:return e.sent(),[2]}}))}));return function(){return e.apply(this,arguments)}}(),de=function(){var e=(0,r.Z)((function(e){var t,n,r,a;return(0,l.__generator)(this,(function(l){switch(l.label){case 0:return t=e.deepen,n=void 0!==t&&t,r=e.remote,a=e.remoteToken,r.startsWith("https://api.glitch.com")?[4,X({args:["git","fetch",r,"+refs/heads/*:refs/remotes/origin/*"]})]:[3,2];case 1:case 3:return l.sent(),[2];case 2:return[4,X({args:C.he.format((0,o.Z)((0,i.Z)({},ee),{remote:r,remoteToken:a}),n)})]}}))}));return function(t){return e.apply(this,arguments)}}(),fe=function(){var e=(0,r.Z)((function(e){var t,n;return(0,l.__generator)(this,(function(r){switch(r.label){case 0:return e&&(null===(t=e.nix)||void 0===t?void 0:t.channel)?[3,2]:[4,F.getLatestStableChannel()];case 1:return n=r.sent(),[3,3];case 2:n=e.nix.channel,r.label=3;case 3:return[4,N.updateDotReplit([(0,_.cU)(n)])];case 4:return r.sent().error||W("Nix channel was not detected in your imported .replit file but is required for all Nix Repls. The latest stable Nix channel "+'"'.concat(n.channel,'" was automatically added to your .replit file.'),1e4),[2]}}))}));return function(t){return e.apply(this,arguments)}}(),pe=function(){var e=(0,r.Z)((function(){var e,t,n;return(0,l.__generator)(this,(function(r){switch(r.label){case 0:return[4,K({replId:d})];case 1:return e=r.sent(),t=e.data,e.error?[2,null]:"Repl"!==t.repl.__typename?[2,null]:(n=t.repl.rootOriginReplUrl)?[4,Y({replUrl:n})]:[2,null];case 2:return[2,r.sent()]}}))}));return function(){return e.apply(this,arguments)}}(),he=function(){var e=(0,r.Z)((function(e){var t;return(0,l.__generator)(this,(function(n){switch(n.label){case 0:return e&&e.packager?(t=e.packager,[4,N.updateDotReplit([(0,_.w2)(t)])]):[2];case 1:return n.sent().error||W("A packager was not detected in your imported .replit file and was automatically added.",1e4),[2]}}))}));return function(t){return e.apply(this,arguments)}}(),ve=function(){var e=(0,r.Z)((function(e,t){var n;return(0,l.__generator)(this,(function(r){switch(r.label){case 0:if(!t||!t.env)return[2];if(n=t.env,e)for(var i in n)e[i]||(e[i]=n[i]);return[4,N.updateDotReplit([(0,_.EX)(n)])];case 1:return r.sent(),[2]}}))}));return function(t,n){return e.apply(this,arguments)}}(),me=function(){var e=(0,r.Z)((function(e){var t;return(0,l.__generator)(this,(function(n){switch(n.label){case 0:return e&&e.debugger?(t=e.debugger,[4,N.updateDotReplit([(0,_.SD)(t)])]):[2];case 1:return n.sent().error||W("A debugger was not detected in your imported .replit file so a recommended debugger was automatically added.",1e4),[2]}}))}));return function(t){return e.apply(this,arguments)}}(),ge=function(){var e=(0,r.Z)((function(e){var t,n;return(0,l.__generator)(this,(function(r){switch(r.label){case 0:return e&&(null===(t=e.unitTest)||void 0===t?void 0:t.language)?(n=e.unitTest.language,[4,N.updateDotReplit([(0,_.MY)(n)])]):[2];case 1:return r.sent().error||W("Unit test configuration was not detected in your imported .replit file and so a recommended config was automatically added.",1e4),[2]}}))}));return function(t){return e.apply(this,arguments)}}(),ye=function(){var e=(0,r.Z)((function(){var e,t,n,r,i;return(0,l.__generator)(this,(function(o){switch(o.label){case 0:return[4,N.getConfig()];case 1:return(t=o.sent()).error||!t.config?[2]:(n=t.config,[4,pe()]);case 2:return r=o.sent(),(i=[]).push(ve(n.env,r)),(null===(e=n.nix)||void 0===e?void 0:e.channel)||i.push(fe(r)),n.packager||i.push(he(r)),n.debugger||i.push(me(r)),n.unitTest||i.push(ge(r)),[4,Promise.all(i)];case 3:return o.sent(),[2]}}))}));return function(){return e.apply(this,arguments)}}(),Ze=function(){var e=(0,r.Z)((function(){var e,t,n,r,i,o,a;return(0,l.__generator)(this,(function(l){switch(l.label){case 0:return[4,U.readDir(D.Ql)];case 1:return(r=l.sent()).error?[2]:[4,N.getConfig()];case 2:return i=l.sent(),(null===(e=i.config)||void 0===e||null===(t=e.gitHubImport)||void 0===t?void 0:t.requiredFiles)?(-1===(o=i.config.gitHubImport.requiredFiles).indexOf(".cache")&&o.push(".cache"),-1===o.indexOf(".upm")&&o.push(".upm"),a=o.map((function(e){return new RegExp(e)})),[4,Promise.all(r.children.filter((function(e){return!a.some((function(t){return t.test(e.filename)}))})).map((function(e){return e.type===R.Tv.Directory?U.deleteDir(e.filename):U.deleteFile(e.filename)})))]):[3,4];case 3:return l.sent(),[3,6];case 4:return(null===(n=i.config)||void 0===n?void 0:n.entrypoint)?[4,U.deleteFile(i.config.entrypoint)]:[3,6];case 5:l.sent(),l.label=6;case 6:return[2]}}))}));return function(){return e.apply(this,arguments)}}(),be=function(){var e=(0,r.Z)((function(e,t,n){var r;return(0,l.__generator)(this,(function(i){switch(i.label){case 0:return[4,te(n)];case 1:return i.sent(),[4,ne(e)];case 2:return i.sent(),[4,ae()];case 3:return i.sent(),[4,de({deepen:!1,remote:e,remoteToken:t})];case 4:return i.sent(),[4,le({remote:e,remoteToken:t})];case 5:return r=i.sent(),[4,ce(null!==r&&void 0!==r?r:"")];case 6:return i.sent(),[4,se({remote:e,remoteToken:t})];case 7:return i.sent(),"html"!==O.mode?[3,10]:[4,(0,V.r)(A)];case 8:return i.sent(),[4,O.run()];case 9:i.sent(),i.label=10;case 10:return[2]}}))}));return function(t,n,r){return e.apply(this,arguments)}}(),we=function(){var e=(0,r.Z)((function(){var e,t,n;return(0,l.__generator)(this,(function(r){switch(r.label){case 0:return[4,U.readDir(D.Ql)];case 1:return(e=r.sent()).error||(t=e.children.map((function(e){return e.filename})),(n=(0,I.T)(t,"nix"))&&L.openFile(n)),[2]}}))}));return function(){return e.apply(this,arguments)}}(),xe=function(){var e=(0,r.Z)((function(e,t){var n,r,i;return(0,l.__generator)(this,(function(o){switch(o.label){case 0:return[4,(0,P.J9)({repoNameWithOwner:e,accessToken:t})];case 1:return"error"in(n=o.sent())?[2,{hasDotReplit:!1,hasProcfile:!1}]:(r=n.some((function(e){return e.path===T.l})),i=n.some((function(e){return e.path===z.E})),[2,{hasDotReplit:r,hasProcfile:i}])}}))}));return function(t,n){return e.apply(this,arguments)}}(),Ee=function(){var e=(0,r.Z)((function(e,t){var n,r,i,o,a,c,s,u;return(0,l.__generator)(this,(function(l){switch(l.label){case 0:return[4,(0,P.LK)({repoNameWithOwner:e,filePath:z.E,accessToken:t})];case 1:return"error"in(n=l.sent())?[2,{showConfigPanel:!0}]:(r=oe.from(n.content,"base64").toString(),(i=(0,z.c)(r))&&(a=null!==(o=i.web)&&void 0!==o?o:i.worker)?(c=a.command+" "+a.options.join(" "),[4,N.updateDotReplit([(0,_.KQ)(c),(0,_.xz)("interpreter")])]):[2,{showConfigPanel:!0}]);case 2:return s=l.sent(),u=i.web&&!i.worker||!i.web&&i.worker,s.error||!u?[2,{showConfigPanel:!0}]:[2,{showConfigPanel:!1}]}}))}));return function(t,n){return e.apply(this,arguments)}}(),Ce=function(){var e=(0,r.Z)((function(e){var r,i,o,a,c,s,f,p,h,v;return(0,l.__generator)(this,(function(l){switch(l.label){case 0:return r=e.remote,i=e.accessToken,o=e.username,n(!0),[4,Ze()];case 1:return l.sent(),[4,be(r,i,o)];case 2:return l.sent(),u?[4,$()]:[3,4];case 3:return l.sent(),[3,6];case 4:return[4,ye()];case 5:l.sent(),l.label=6;case 6:return[4,m({variables:{input:{id:d,doClone:!1}}})];case 7:return l.sent(),[4,we()];case 8:return l.sent(),a=(0,G.J)(r),c=!1,a?(s=a.username,f=a.repository,[4,xe("".concat(s,"/").concat(f),i)]):[3,12];case 9:return p=l.sent(),h=p.hasDotReplit,!p.hasProcfile||h?[3,11]:[4,Ee("".concat(s,"/").concat(f),i)];case 10:return v=l.sent(),c=!v.showConfigPanel,[3,12];case 11:c=h,l.label=12;case 12:return n(!1),"html"===O.mode?[2]:(c||t(),[2])}}))}));return function(t){return e.apply(this,arguments)}}()}},48483:function(e,t,n){n.d(t,{Z:function(){return p}});var r=n(67294),i=n(99408),o=n(63377),a=n(14251),l=n(32692),c=n(31230),s=n(37887);function u(){var e=(0,l.Z)(["\n  query ReplEnvironmentShowHiddenFiles($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        templateInfo {\n          label\n        }\n      }\n    }\n  }\n"]);return u=function(){return e},e}var d={},f=(0,c.Ps)(u());function p(){var e=(0,i.Z)().session,t=function(e){var t=(0,a.Z)({},d,e);return s.a(f,t)}({variables:{replId:(0,o.Z)()}}).data,n="Repl"===(null===t||void 0===t?void 0:t.repl.__typename)?t.repl:null;r.useEffect((function(){var t;n&&(null===(t=n.templateInfo)||void 0===t?void 0:t.label.includes("Blank Repl"))&&e.setAreHiddenFilesVisible(!0)}),[e,n])}},62363:function(e,t,n){n.d(t,{B:function(){return o},k:function(){return a}});var r=n(55877),i=n.n(r),o=15;function a(e){var t=e.isStacked,n=e.isHTML,r=e.codeEditorPath,o=void 0===r?"":r,a={codeEditor:{paneId:i()(),pane:{type:"codeEditor",data:{path:o}}},output:{paneId:i()(),pane:{type:n?"webview":"runnerOutput"}},shell:{paneId:i()(),pane:{type:"shell"}}},l={};Object.values(a).forEach((function(e){var t=e.paneId,n=e.pane;l[t]=n}));var c=function(e){var t=e.codeEditorId,n=e.outputId,r=e.shellId;return{floating:[],tiling:e.isStacked?{type:"split",stacked:!0,percent:100,children:[{id:i()(),percent:60,type:"paneGroup",panes:[t],activeIndex:0},{id:i()(),percent:40,type:"paneGroup",panes:[n,r],activeIndex:0}]}:{type:"split",stacked:!1,percent:100,children:[{id:i()(),percent:55,type:"paneGroup",panes:[t],activeIndex:0},{id:i()(),percent:45,type:"paneGroup",panes:[n,r],activeIndex:0}]}}}({codeEditorId:a.codeEditor.paneId,outputId:a.output.paneId,shellId:a.shell.paneId,isStacked:t});return{layout:c,data:l}}},51347:function(e,t,n){n.d(t,{$C:function(){return c},MB:function(){return l},XV:function(){return a},mu:function(){return s}});var r=n(50467),i=n(71177),o=n(688);function a(e,t){var n=t.from,a=t.to,l=t.placement,c=(0,o.Rh)(e,n);if(!c)throw new Error("Expected fromPane");var s=c.paneGroup,u=s.panes,d=s.activeIndex;(0,r.Z)(e,c.paneGroupPath),(0,i.m)(e,{id:c.paneGroup.id,relativeTo:a,panes:u,placement:l,activeIndex:d})}function l(e,t){var n=t.paneGroupPath,a=t.rect,l=(0,o.KC)(e,n);if("paneGroup"!==(null===l||void 0===l?void 0:l.type))throw new Error("Expected paneGroup");(0,r.Z)(e,n),(0,i.m)(e,{id:l.id,isFloating:!0,panes:l.panes,rect:a,activeIndex:l.activeIndex})}function c(e,t){var n=t.paneGroupPath,a=t.placement,l=t.to,c=(0,o.KC)(e,n);if("floatingPaneGroup"!==(null===c||void 0===c?void 0:c.type))throw new Error("Expected floatingPaneGroup");(0,r.Z)(e,n),null!==l?(0,i.m)(e,{id:c.id,relativeTo:l,panes:c.panes,activeIndex:c.activeIndex,placement:a}):e.tiling={id:c.id,panes:c.panes,percent:100,type:"paneGroup",activeIndex:c.activeIndex}}function s(e,t){var n="floatingIndex"in t?e.floating[t.floatingIndex]:(0,o.KC)(e,t.paneGroupPath);if(!n||!("panes"in n))throw new Error("Expected paneGroup");(0,r.i)(e,t.paneId);var i=void 0===t.index?n.panes.length:t.index;n.panes.splice(i,0,t.paneId),t.activate?n.activeIndex=i:n.activeIndex>=i&&n.activeIndex++}},49094:function(e,t,n){n.d(t,{d:function(){return a},q:function(){return o}});var r=n(7182),i=(0,r.cn)(!1);function o(){return(0,r.Dv)(i)}function a(){return(0,r.b9)(i)}},90525:function(e,t,n){n.d(t,{K:function(){return o},m:function(){return i}});var r=n(7182),i=(0,r.cn)(null);function o(){return(0,r.Dv)(i)}},85124:function(e,t,n){n.d(t,{AW:function(){return u},WM:function(){return s},XO:function(){return d}});var r=n(21131),i=n(7182),o=n(73321),a=n(70757),l=n(78951),c=n(26174);var s=(0,i.cn)(null,(function(e,t,n){var r=e(c.Eh).find((function(t){return e(t.data).type===n.type}));if(r)t(l.v,{paneId:r.paneId,data:n});else{var i=function(e,t){var n=Math.min(600,e.width),r=Math.min(318.75+t,e.height);return{width:n,height:r,x:e.width-n,y:e.height-r}}(e(c.CK),e(c.M0));t(o.mV,{pane:n,rect:i})}}));var u=(0,i.cn)(null,(function(e,t,n){e(c.Eh).filter((function(t){return e(t.data).type===n})).forEach((function(e){return t(a.$r,e.paneId)}))}));function d(e){var t=e.paneGroupId,n=(0,c.Xs)(t),o=(0,r.Z)((function(){return(0,i.cn)((function(e){return"floating"===e(n).path[0]}))}),[n]);return(0,i.Dv)(o)}},33404:function(e,t,n){n.d(t,{sq:function(){return k},Mn:function(){return S},mk:function(){return _},x7:function(){return T}});var r=n(9941),i=n(63309),o=n(7182),a=n(26174),l=n(73604),c=n(27178),s=n(33328),u=n(13819),d=n(62363),f=n(77269);function p(e){if("number"!==typeof e)throw new Error("Expected number")}function h(e){if("string"!==typeof e)throw new Error("Expected string")}function v(e){if(h(e.type),p(e.percent),"paneGroup"!==e.type){if("split"===e.type)return function(e){if("boolean"!==typeof e)throw new Error("Expected boolean")}(e.stacked),function(e){if(!Array.isArray(e.children))throw new Error("Expected children")}(e),void e.children.forEach(v);throw new Error("Invalid pane type: "+e.type)}if(h(e.id),!Array.isArray(e.panes))throw new Error("Expected panes array");e.panes.map(h)}function m(e,t){if(!Array.isArray(e.floating))throw new Error("Expected floating");e.floating.forEach((function(e){if(h(e.id),"floatingPaneGroup"!==e.type)throw new Error("Expected floatingPaneGroup type");if(!Array.isArray(e.panes))throw new Error("Expected panes array");!function(e){[e.x,e.y,e.width,e.height].forEach(p)}(e.rect),e.panes.forEach((function(e){if(h(e),!t.includes(e))throw new Error("Unrecognized id")}))})),e.tiling&&v(e.tiling)}function g(e){if("object"!==typeof e)throw new Error("Expected object");if(!c.v[e.type])throw new Error("Expected valid pane, got: ".concat(e.type))}function y(e){!function(e){if("object"!==typeof e)throw new Error("Expected object");Object.values(e).map(g)}(e.data),m(e.layout,Object.keys(e.data)),void 0!==e.sidebarPercent&&function(e){if("number"!==typeof e)throw new Error("Expected number");if(e<0)throw new Error("Expected positive number");if(e>100)throw new Error("Expected number less than 100")}(e.sidebarPercent)}var Z=n(25602),b=n(82937),w=n(71490),x=n(18172),E=n(23367),C=n(50467),S=(0,o.cn)(null);function T(){return(0,o.Dv)(S)}var k=(0,o.cn)(null,(function(e,t,n){var o=n.initialLayoutState,p=n.codeEditorPath,h=o?function(e){try{y(e)}catch(t){return null}return e}(o):null,v=e(u.gM),m=e(u.h$),g=h?(0,x.ZP)(h,(function(e){var t=!0,n=!1,i=void 0;try{for(var o,a=Object.entries(e.data)[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=(0,r.Z)(o.value,2),c=l[0],s=l[1];("commands"===s.type||"codeEditor"===s.type&&!s.data.path)&&(delete e.data[c],(0,C.i)(e.layout,c))}}catch(u){n=!0,i=u}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}})):(0,d.k)({isStacked:m,isHTML:v,codeEditorPath:p}),T=g.data,k=g.layout;Object.entries(T).forEach((function(n){var i=(0,r.Z)(n,2),o=i[0],l=i[1],c=(0,a.z)(o);e(E.H).flagDraftFiles&&t(c,(0,x.ZP)(e(c),(function(e){e.isCommitted=!0}))),t(e(c).data,l)}));var _=e(a.CK),R=void 0!==(null===h||void 0===h?void 0:h.sidebarPercent)?null===h||void 0===h?void 0:h.sidebarPercent:d.B,D=Math.floor(R)>0?Math.min(_.width*(R/100),b.Iy):0;if(t(f.TL,{width:D>0?Math.max(f.g9,D):Math.max(0,D)}),t(s.iH,k),t(S,h?"saved":"default"),t(w.LH,e(w.ij)),h){var I=e(i.S6).map((function(t){return{path:(0,c.DQ)(e(t.data)),isHidden:t.isHidden}})).filter((function(e){var t=e.path;return Boolean(t)})).sort((function(e,t){return Number(t.isHidden)-Number(e.isHidden)})),P=I.length?I[0].path:null;if(P&&((0,Z.u9)()||t(i.Sg,P),!(0,l.gK)(P))){var G=I.find((function(e){return e.path&&(0,l.gK)(e.path)}));G&&t(i.Md,G.path)}}}));function _(){return(0,o.b9)(k)}},94227:function(e,t,n){n.d(t,{C:function(){return m},U:function(){return v}});var r=n(9941),i=n(7182),o=n(27178),a=n(63309),l=n(73321),c=n(688),s=n(89412),u=n(60482),d=n(37806),f=n(78951),p=n(26174),h=n(23367),v=(0,i.cn)(null,(function(e,t,n){var i=n.path,v=n.col,m=n.line,g=n.opener,y=e(a.g4),Z=(null===g||void 0===g?void 0:g.paneType)||(0,o.Dp)({path:i}),b=e(h.H).flagDraftFiles,w=function(){if("codeEditor"===Z)return{type:"codeEditor",data:{path:i,col:v,line:m}};if("extension"===Z){var e=g.extensionFileHandler;return{type:"extension",data:{path:i,extensionId:e.extension.extensionId,installationId:e.extension.extensionId,name:e.extension.manifest.name,url:e.extension.baseUrl}}}return{type:Z,data:{path:i}}}();if(n.newPane)t(l.gN,{pane:w,edge:"left"});else{var x=(0,c._F)(y,"topLeft");if(x){var E=e(a.S6).find((function(t){return i===(0,o.DQ)(e(t.data))}));if(E&&!n.newTab)return t(u.Oe,E.paneId),void t(f.v,{paneId:E.paneId,data:w});var C,S=(0,r.Z)(e(a.yv),1)[0],T=S?e(a.S6).find((function(t){return!t.isHidden&&S===(0,o.DQ)(e(t.data))})):null;if(T){var k=(0,c.Rh)(y,T.paneId);if(!k){var _=new Error("Expected filePane");throw t(d.j6,{error:_,tags:{layoutstate:!0},origin:"Layout: state/openFile/openFileAtom"}),_}C=k.paneGroup}else C=x.paneGroup;if(n.newTab)t(u.Je,{panes:[w],paneGroupId:C.id,activate:!0,commit:!!b||void 0,index:C.activeIndex+1});else{if(b){var R=C.panes.find((function(t){var n=e((0,p.z)(t));return!n.isCommitted&&(0,o.RX)(e(n.data).type)}));if(R)return t(f.v,{paneId:R,data:w}),void t(u.Oe,R)}else if(T)return t(f.v,{paneId:T.paneId,data:w}),void t(u.Oe,T.paneId);var D=e(a.S6).find((function(t){var n=e(t.data);return"codeEditor"===n.type&&""===(0,o.DQ)(n)}));if(D)return t(f.v,{paneId:D.paneId,data:w}),void t(u.Oe,D.paneId);var I=C.panes.find((function(t){var n=e((0,p.z)(t));return"commands"===e(n.data).type}));if(I)return t(f.v,{paneId:I,data:w}),void t(u.Oe,I);t(u.Je,{panes:[w],paneGroupId:C.id,activate:!0})}}else t(s.KQ,{pane:w,relativeTo:["tiling"],placement:"replace"})}}));function m(){return(0,i.b9)(v)}},42532:function(e,t,n){n.d(t,{FD:function(){return C},WB:function(){return x},cI:function(){return S},q6:function(){return T},sx:function(){return w}});var r=n(9941),i=n(71171),o=n.n(i),a=n(7182),l=n(18172),c=n(63309),s=n(62259),u=n(26174),d=n(33328),f=n(21131),p=n(688),h=n(90525),v=n(51347),m=n(71177),g=n(37806),y=n(77269),Z=n(60482);var b=50,w=(0,a.cn)(null),x=(0,a.cn)((function(e){var t=e(w);if(!t)return null;var n=(0,p.QF)(e(c.g4),t.paneGroupId);return n&&n.panes[n.activeIndex]||null}));function E(e){var t=e.paneGroupId,n=(0,f.Z)((function(){return(0,a.cn)((function(e){var n;return t===(null===(n=e(w))||void 0===n?void 0:n.paneGroupId)}))}),[t]);return(0,a.Dv)(n)}function C(e){var t=e.paneId,n=(0,f.Z)((function(){return(0,a.cn)((function(e){return!!e(w)&&(e(x)!==t&&("floating"!==e((0,u.z)(t)).type&&e(c._E)))}))}),[t]);return(0,a.Dv)(n)}function S(e){var t=e.paneId,n=(0,f.Z)((function(){return(0,a.cn)((function(e){var n=e(w);return!!n&&("floating"!==n.startType&&(t===e(x)?{originX:n.transformOriginX,scale:n.scale}:null))}))}),[t]);return(0,a.Dv)(n)}function T(e){var t=e.paneGroupId,n=(0,a.b9)(k),r=(0,a.b9)(_),i=(0,a.b9)(R),o=(0,f.Z)((function(){return{start:function(e){var r=e.mouse;n({paneGroupId:t,mouse:r})},update:function(e){r(e)},end:function(e){i(e)}}}),[t,n,r,i]);return{isDragging:E({paneGroupId:t}),dnd:o}}var k=(0,a.cn)(null,(function(e,t,n){var r=e(u.CK),i=(0,p.QF)(e(c.g4),n.paneGroupId);if(!i){var o=new Error("Expected paneGroup");throw t(g.j6,{error:o,origin:"Layout: state/paneGroupDragAndDrop/dragStartAtom"}),o}var a=e((0,u.z)(i.panes[i.activeIndex])),l=e(a.rectAtom),s=e(u.M0),d={x:l.x,y:l.y-s,width:l.width,height:l.height+s},f=n.mouse.x-(r.x+l.x);t(w,{startType:a.type,startPoint:{x:n.mouse.x-r.x,y:n.mouse.y-r.y},paneGroupId:n.paneGroupId,transformOriginX:Math.round(f)+"px",scale:1,fromRect:d})})),_=(0,a.cn)(null,(function(e,t,n){var i=e(w);if(i){var o=n.delta,a=i.paneGroupId,f=i.fromRect,m=e(c.g4),Z=(0,p.QF)(e(c.g4),a);if(!Z){var x=new Error("Expected paneGroup");throw t(g.j6,{error:x,origin:"Layout: state/paneGroupDragAndDrop/dragUpdateAtom"}),x}var E=Z.panes[Z.activeIndex],C=(0,p.Rh)(m,E);if(!C){var S=new Error("Expected pane");throw t(g.j6,{error:S,tags:{layoutstate:!0},origin:"Layout: state/paneGroupDragAndDrop/dragUpdateAtom"}),S}var T=(0,u.z)(E),k=(0,u.Xs)(C.paneGroup.id),_=e(u.M0),R=Math.max(Math.abs(o.x),Math.abs(o.y)),D=R>=b;if(!D||C.floating){var I=e(k),P=e(T),G=f.x+o.x,B=f.y+o.y;if(t(I.rectAtom,(function(e){return(0,l.ZP)(e,(function(e){e.x=G,e.y=B}))})),t(P.rectAtom,(function(e){return(0,l.ZP)(e,(function(e){e.x=G,e.y=B+_}))})),"floating"!==i.startType){if(!D&&!C.floating){var A=i.startPoint,U=1-.30000000000000004*(O=R/b,1-Math.sqrt(1-Math.pow(O,2)));return t(h.m,{type:"detachPreview",rect:{x:A.x-b,y:A.y-b,width:100,height:100},progress:R/b}),void t(w,(0,l.ZP)(i,(function(e){e.scale=U})))}var O,N=e(u.CK);if(!C.floating)throw new Error("Expected floating pane");var L=e(u.Eh).filter((function(e){return"tile"===e.type&&!e.isHidden})).map((function(t){return[t.paneId,e(t.rectAtom)]})),F=e(y.Ob),X=function(e){var t=e.views,n=e.mouse,i=e.container,o=e.headerHeight,a=e.sidebarWidth,l={x:Math.min(Math.max(n.x-i.x,1),i.width-1),y:Math.min(Math.max(n.y-i.y,1),i.height-1)},c=!0,u=!1,f=void 0;try{for(var p,h=t[Symbol.iterator]();!(c=(p=h.next()).done);c=!0){var v=(0,r.Z)(p.value,2),m=v[0],g=v[1],y={x:g.x,y:g.y-o,width:g.width,height:o},Z={x:y.x-d.SG/2,y:y.y-d.SG/2,width:y.width+d.SG,height:o+d.SG/2};if((0,s.V0)(l,Z))return{dropPreview:y,drop:{type:"insert",paneId:m}};var b={x:g.x,y:g.y-o,width:g.width,height:g.height+o},w={x:b.x-d.SG/2,y:b.y-d.SG/2,width:b.width+d.SG,height:b.height+d.SG};if((0,s.V0)(l,w)){var x=(0,s.QN)(l,b);return{dropPreview:x.rect,drop:{type:"split",relativeTo:m,placement:x.placement}}}}}catch(C){u=!0,f=C}finally{try{c||null==h.return||h.return()}finally{if(u)throw f}}var E=(0,s.QN)(l,{x:a,y:0,width:i.width-a,height:i.height});return{dropPreview:E.rect,drop:{type:"split",relativeTo:["tiling"],placement:E.placement}}}({views:L,container:N,mouse:n.mouse,headerHeight:_,sidebarWidth:F}),M=X.drop,W=X.dropPreview;t(h.m,{type:"dropPreview",rect:W}),t(w,{fromRect:i.fromRect,paneGroupId:i.paneGroupId,startType:i.startType,startPoint:i.startPoint,drop:M,transformOriginX:i.transformOriginX,scale:i.scale})}}else{var j=e(T).rectAtom,H=e(j),z=(0,l.ZP)(m,(function(e){try{(0,v.MB)(e,{paneGroupPath:C.paneGroupPath,rect:{x:H.x+o.x,y:H.y-_+o.y,width:H.width,height:H.height+_}})}catch(x){throw t(g.j6,{error:x,tags:{layoutstate:!0},origin:"Layout: state/paneGroupDragAndDrop/dragUpdateAtom"}),x}}));t(d.iH,z)}}else t(h.m,null)})),R=(0,a.cn)(null,(function(e,t,n){var r=n.delta;t(h.m,null);var i=e(w);if(i){var a=i.paneGroupId,s=i.drop,u=i.fromRect,f=e(c.g4),y=(0,p.QF)(e(c.g4),a);if(!y){var b=new Error("Expected paneGroup");throw t(g.j6,{error:b,origin:"Layout: state/paneGroupDragAndDrop/dragEndAtom"}),b}var x=y.panes[y.activeIndex],E=(0,p.Rh)(f,x);if(!E){var C=new Error("Expected pane");throw t(g.j6,{error:C,tags:{layoutstate:!0},origin:"Layout: state/paneGroupDragAndDrop/dragEndAtom"}),C}var S=(0,l.ZP)(f,(function(e){if(E.floating&&"floating"===i.startType){var n=(0,p.KC)(e,E.paneGroupPath);if("floatingPaneGroup"!==(null===n||void 0===n?void 0:n.type))return;var a=u.x+r.x,l=u.y+r.y;return n.rect.x=a,void(n.rect.y=l)}if(s)if("split"!==s.type){var c=(0,p.Rh)(e,s.paneId);E.paneGroup.panes.forEach((function(t){return(0,v.mu)(e,{paneId:t,paneGroupPath:(null===c||void 0===c?void 0:c.paneGroupPath)||["tiling"],activate:!1})}))}else{if(null===e.tiling){var d=o()();try{(0,m.m)(e,{id:o()(),panes:[d],placement:"leftOf",relativeTo:["tiling"]})}catch(b){throw t(g.j6,{error:b,tags:{layoutstate:!0},origin:"Layout: state/paneGroupDragAndDrop/dragEndAtom"}),b}}try{(0,v.XV)(e,{from:x,to:s.relativeTo,placement:s.placement})}catch(C){throw t(g.j6,{error:C,tags:{layoutstate:!0},origin:"Layout: state/paneGroupDragAndDrop/dragEndAtom"}),C}}}));t(w,null),t(d.iH,S),"insert"===(null===s||void 0===s?void 0:s.type)&&t(Z.Oe,x)}}))},12322:function(e,t,n){n.d(t,{B:function(){return a},n:function(){return l}});var r=n(7182),i=n(33404),o=n(71490),a=(0,r.cn)(null,(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t(i.sq,{codeEditorPath:n.entrypoint,initialLayoutState:null}),t(o.Mb,{force:!0})}));function l(){return(0,r.b9)(a)}},71490:function(e,t,n){n.d(t,{LH:function(){return P},ij:function(){return I},Mb:function(){return N},lY:function(){return A},ne:function(){return L},Z4:function(){return X}});var r=n(34727),i=n(9941),o=n(70655),a=n(63309),l=n(71171),c=n.n(l),s=n(7182),u=n(62991),d=n.n(u),f=n(14251),p=n(32692),h=n(31230),v=n(50319);function m(){var e=(0,p.Z)(["\n  mutation SaveReplLayoutState($input: SetReplLayoutStateInput!) {\n    setReplLayoutState(input: $input) {\n      ... on Repl {\n        id\n        layoutState\n      }\n    }\n  }\n"]);return m=function(){return e},e}var g={},y=(0,h.Ps)(m());var Z=n(81516),b=n(26174),w=n(21131),x=n(91296),E=n.n(x),C=n(62363),S=n(77269),T=n(63377),k=n(67294),_=n(76216),R=n(43186);var D=(0,s.cn)((function(e){var t=e(b.CK);return function(e,t){var n=t.min,r=t.max;return Math.min(Math.max(n,e),r)}(e(S.Ob)/t.width*100,{min:0,max:100})})),I=(0,s.cn)((function(e){var t=e(a.g4),n={};e(b.Eh).forEach((function(t){n[t.paneId]=e(t.data)}));var r=e(D);return{layout:t,data:n,sidebarPercent:r}})),P=(0,s.cn)(null),G=(0,s.cn)(null),B=(0,s.cn)(null);function A(){var e=(0,T.Z)(),t=(0,_.T)(),n=(0,R.Z)().preferences.isLayoutStacked,r=(0,i.Z)(function(e){var t=(0,f.Z)({},g,e);return v.D(y,t)}(),1)[0];return(0,k.useCallback)((function(){var i=(0,C.k)({isStacked:n,isHTML:t});r({variables:{input:{replId:e,state:i}}})}),[e,r,t,n])}function U(e,t){return O.apply(this,arguments)}function O(){return(O=(0,r.Z)((function(e,t){var n,r;return(0,o.__generator)(this,(function(i){switch(i.label){case 0:r=void 0,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,null===Z.l||void 0===Z.l?void 0:Z.l.mutate({mutation:y,variables:{input:{replId:e,state:t}}})];case 2:return r=i.sent(),[3,4];case 3:return i.sent(),[2,{success:!1,retry:!0}];case 4:return"Repl"===(null===r||void 0===r||null===(n=r.data)||void 0===n?void 0:n.setReplLayoutState.__typename)?[2,{success:!0,retry:void 0}]:[2,{success:!1,retry:!1}]}}))}))).apply(this,arguments)}var N=(0,s.cn)(null,function(){var e=(0,r.Z)((function(e,t,n){var r,i,l,s,u,f;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return(r=e(G))&&!r.retry||r&&Date.now()-r.timestamp<6e4?[2]:e(a.dD)?(i=e(I),(l=e(F))?(s=e(P),!n.force&&d()(s,i)?[2]:(u=c()(),t(B,u),[4,U(l,i)])):[2]):[2];case 1:return f=o.sent(),e(B)!==u?[2]:(t(B,null),f.retry?(t(G,{timestamp:Date.now(),retry:!0}),[2]):f.success?(t(P,i),[2]):(t(G,{timestamp:Date.now(),retry:!1}),[2]))}}))}));return function(t,n,r){return e.apply(this,arguments)}}());function L(){var e=(0,s.b9)(N);return(0,w.Z)((function(){return E()(e,1e3)}),[e])}var F=(0,s.cn)(null),X=function(){return(0,s.b9)(F)}},82937:function(e,t,n){n.d(t,{EU:function(){return v},Iy:function(){return s},TN:function(){return p},og:function(){return g},xM:function(){return h}});var r=n(7182),i=n(63309),o=n(33328),a=n(77269),l=n(26174),c=(0,r.cn)(null),s=360,u=(0,r.cn)(null,(function(e,t){var n=e(a.TL);t(c,{sidebarWidthStart:n.width})})),d=(0,r.cn)(null,(function(e,t,n){var r=n.deltaX,u=e(c);if(u){var d=e(l.CK),f=u.sidebarWidthStart+r;if((f=Math.min(Math.max(f,0),Math.min(d.width,s)))<a.ih)f=r>0?f:0;t(a.TL,{width:f}),t(o.iH,e(i.g4))}})),f=(0,r.cn)(null,(function(e,t){if(e(c)){var n=e(a.TL);n.width<a.ih&&(t(a.TL,{width:0===n.width?0:a.ih}),t(o.iH,e(i.g4))),t(c,null)}}));function p(){return{start:(0,r.b9)(u),update:(0,r.b9)(d),end:(0,r.b9)(f)}}var h=(0,r.cn)((function(e){return Boolean(e(c))}));function v(){return(0,r.Dv)(h)}var m=(0,r.cn)((function(e){var t=e(l.CK).height;return{x:e(a.TL).width,y:0,height:t,width:o.SG}}));function g(){return(0,r.Dv)(m)}},21864:function(e,t,n){n.d(t,{I0:function(){return l},Iv:function(){return s},W8:function(){return d}});var r=n(7182),i=n(63309),o=n(33328),a=n(77269),l=(0,r.cn)(null,(function(e,t){0!==e(a.TL).width&&(t(a.TL,{width:0}),t(o.iH,e(i.g4)))})),c=(0,r.cn)(null,(function(e,t){var n=e(a.TL).width>0?0:a.g9;t(a.TL,{width:n}),t(o.iH,e(i.g4))}));function s(){return(0,r.b9)(c)}var u=(0,r.cn)((function(e){return e(a.TL).width>0}));function d(){return(0,r.Dv)(u)}},88080:function(e,t,n){n.d(t,{$x:function(){return y},Un:function(){return Z},gQ:function(){return h},yR:function(){return v}});var r=n(7182),i=n(85124),o=n(73321),a=n(60482),l=n(21864),c=n(26174),s=(0,r.cn)(null),u=(0,r.cn)((function(e){var t=e(s);return t&&e(c.Eh).find((function(n){var r=e(n.data);return"videoPlayer"===r.type&&r.data.embedUrl===(null===t||void 0===t?void 0:t.embedUrl)}))||null})),d=(0,r.cn)((function(e){var t=e(u);return t&&!t.isHidden?t:null})),f=(0,r.cn)(null,(function(e,t,n){t(s,n);var r="videoPlayer";n?t(i.WM,{type:r,data:{title:"Tutorial",embedUrl:n.embedUrl}}):t(i.AW,r)})),p=(0,r.cn)(null,(function(e,t){var n=e(u);if(null===n||void 0===n?void 0:n.isHidden)t(a.Oe,n.paneId);else{var r=e(s);r&&t(f,r)}}));function h(){return(0,r.b9)(f)}function v(){var e=(0,r.Dv)(s),t=(0,r.Dv)(d),n=(0,r.b9)(p);return t||!e?null:n}var m=(0,r.cn)((function(e){return e(c.Eh).find((function(t){return"tutorial"===e(t.data).type}))||null})),g=(0,r.cn)(null,(function(e,t){var n=e(m);(null===n||void 0===n?void 0:n.isHidden)?t(a.Oe,n.paneId):(t(o.g2,{panes:[{type:"tutorial"}],placement:"leftOf",percent:25,relativeTo:["tiling"],makeActive:!1}),t(l.I0))}));function y(){return(0,r.b9)(g)}function Z(){return(0,c.z2)("tutorial")}},59163:function(e,t,n){n.d(t,{MD:function(){return f},MI:function(){return d},P9:function(){return v},bJ:function(){return h},w8:function(){return p}});var r=n(68480),i=n(21131),o=n(7182),a=n(42532),l=n(84942),c=n(65214),s=n(26174),u=n(90525),d={overlay:r.Is+20,gutterActive:r.Is+19,maximizedTooltip:r.Is+18,maximizedPane:r.Is+17,maximizedHeader:r.Is+16,filetreeDragLayer:17,detachPreview:16,draggingPane:15,draggingHeader:14,dropPreview:13,floatingPaneHovered:12,floatingPaneActive:11,floatingHeaderActive:10,floatingPane:9,floatingHeader:8,tiledPaneHovered:7,gutterHovered:6,tiledPaneActive:5,tiledHeaderActive:4,tiledPane:3,tiledHeader:2,gutter:1};function f(e){var t=(0,i.Z)((function(){return(0,o.cn)((function(t){var n=t((0,s.z)(e)),r=e===t(l.J1);return t(c.Xu)===e?{hovered:d.maximizedPane,normal:d.maximizedPane}:e===t(a.WB)?{hovered:d.draggingPane,normal:d.draggingPane}:"floating"===n.type?{hovered:d.floatingPaneHovered,normal:r?d.floatingPaneActive:d.floatingPane}:{hovered:d.tiledPaneHovered,normal:r?d.tiledPaneActive:d.tiledPane}}))}),[e]);return(0,o.Dv)(t)}function p(e){var t=(0,i.Z)((function(){return(0,o.cn)((function(t){var n=t((0,s.z)(e)),r=e===t(l.J1);return t(c.Xu)===e?d.maximizedHeader:e===t(a.WB)?d.draggingHeader:"floating"===n.type?r?d.floatingHeaderActive:d.floatingHeader:d.tiledHeader}))}),[e]);return(0,o.Dv)(t)}function h(){return{normal:d.gutter,hovered:d.gutterHovered,active:d.gutterActive}}function v(){var e=(0,i.Z)((function(){return(0,o.cn)((function(e){var t=e(u.m);return"detachPreview"===(null===t||void 0===t?void 0:t.type)?d.detachPreview:d.dropPreview}))}),[]);return(0,o.Dv)(e)}},79848:function(e,t,n){n.d(t,{bG:function(){return a},gU:function(){return c},pl:function(){return l}});var r=n(55877),i=n.n(r),o=n(53153);function a(e,t){var n={protocolVersion:o.Wj,messageDirection:o.s1.TO_NATIVE,messageId:t,payload:e};"ReactNativeWebView"in window&&null!=window.ReactNativeWebView&&window.ReactNativeWebView.postMessage?window.ReactNativeWebView.postMessage(JSON.stringify(n)):window.postMessage(n,window.origin)}function l(e){var t=null!==e&&void 0!==e?e:i()();a({messageType:o.cF.ERROR},t)}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i()(),t={messageType:o.cF.ACK};a(t,e)}},53153:function(e,t,n){var r,i,o,a;n.d(t,{$l:function(){return x},CF:function(){return T},Fq:function(){return C},H7:function(){return h},I9:function(){return E},MB:function(){return w},Of:function(){return o},Se:function(){return m},T$:function(){return Z},Wj:function(){return l},aB:function(){return b},ac:function(){return y},b9:function(){return a},cF:function(){return r},fz:function(){return v},m7:function(){return g},s1:function(){return i}}),function(e){e.ERROR="ERROR",e.ACK="ACK",e.RESET="RESET",e.DEBUG="DEBUG",e.TEXT_EDITOR_CLOSED="TEXT_EDITOR_CLOSED",e.TEXT_EDITOR_STATE="WORKSPACE_STATE",e.TEXT_EDITOR_STATE_REQUEST="WORKSPACE_STATE_REQUEST",e.WORKSPACE_STATE="WORKSPACE_STATE1",e.WORKSPACE_STATE_REQUEST="WORKSPACE_STATE_REQUEST1",e.REQUEST_SET_SELECTION="REQUEST_SET_SELECTION",e.REQUEST_REPLACE_SELECTION="REQUEST_REPLACE_SELECTION",e.REQUEST_SET_TEXT="REQUEST_SET_TEXT",e.REQUEST_INSERT_TEXT="REQUEST_INSERT_TEXT",e.REQUEST_PASTE_TEXT="REQUEST_PASTE_TEXT",e.TEXT_EDITOR_REQUEST_ACTION="TEXT_EDITOR_REQUEST_ACTION",e.WORKSPACE_REQUEST_ACTION="WORKSPACE_REQUEST_ACTION",e.SET_KEYBOARD_STATE="SET_KEYBOARD_STATE",e.SHELL_INSERT_INPUT="SHELL_INSERT_INPUT",e.SHELL_COMMAND="SHELL_COMMAND"}(r||(r={})),function(e){e.FROM_NATIVE="FROM_NATIVE",e.TO_NATIVE="TO_NATIVE"}(i||(i={})),function(e){e.OPEN_FILETREE="OPEN_FILETREE",e.OPEN_NEW_PANE="OPEN_NEW_PANE",e.TOGGLE_DRAWER="TOGGLE_DRAWER",e.TOGGLE_ALLPANES="TOGGLE_ALLPANES",e.TOGGLE_RUN_STATE="TOGGLE_RUN_STATE"}(o||(o={})),function(e){e.REQUEST_UNDO="REQUEST_UNDO",e.REQUEST_REDO="REQUEST_REDO",e.REQUEST_BLUR="REQUEST_BLUR",e.REQUEST_FOCUS="REQUEST_FOCUS",e.REQUEST_INDENT_SELECTION="REQUEST_INDENT_SELECTION",e.REQUEST_DEDENT_SELECTION="REQUEST_DEDENT_SELECTION",e.REQUEST_TOGGLE_COMMENT="REQUEST_TOGGLE_COMMENT",e.REQUEST_ACCEPT_GHOSTWRITER_SUGGESTION="REQUEST_ACCEPT_GHOSTWRITER_SUGGESTION"}(a||(a={}));var l="1";function c(e){return null!==e&&void 0!==e&&"string"===typeof e}function s(e){return c(e)||null===e}function u(e){return null!==e&&void 0!==e&&"boolean"===typeof e}function d(e){return null!=e&&"number"===typeof e&&!Number.isNaN(e)&&Number.isFinite(e)&&Number.isSafeInteger(e)&&e>=0}function f(e){return null!=e&&("object"===typeof e&&null!=e&&("location"in e&&"length"in e&&d(e.location)&&d(e.length)))}function p(e){return null!=e&&(!!Array.isArray(e)&&!!e.every((function(e){return f(e)})))}function h(e){return null!=e&&("object"===typeof e&&null!=e&&("messageType"in e&&"isDrawerOpen"in e&&"isShowingAllPanes"in e&&"isSaving"in e&&"isOffline"in e&&"runState"in e&&"activePaneType"in e&&"activePaneFilePath"in e&&e.messageType===r.WORKSPACE_STATE&&u(e.isDrawerOpen)&&u(e.isShowingAllPanes)&&u(e.isSaving)&&u(e.isOffline)&&c(e.runState)&&s(e.activePaneType)&&s(e.activePaneFilePath)))}function v(e){return null!=e&&("object"===typeof e&&null!=e&&("messageType"in e&&"filePath"in e&&"revisionId"in e&&"text"in e&&e.messageType===r.REQUEST_REPLACE_SELECTION&&c(e.filePath)&&c(e.revisionId)&&c(e.text)))}function m(e){return null!=e&&("object"===typeof e&&null!=e&&("messageType"in e&&"filePath"in e&&"selections"in e&&"revisionId"in e&&e.messageType===r.REQUEST_SET_SELECTION&&c(e.filePath)&&p(e.selections)&&c(e.revisionId)))}function g(e){return null!=e&&("object"===typeof e&&null!=e&&("messageType"in e&&"filePath"in e&&"text"in e&&"selections"in e&&"revisionId"in e&&e.messageType===r.REQUEST_SET_TEXT&&c(e.filePath)&&c(e.text)&&p(e.selections)&&c(e.revisionId)))}function y(e){return null!=e&&("object"===typeof e&&null!=e&&("messageType"in e&&"filePath"in e&&"text"in e&&"insertionRange"in e&&"selections"in e&&"revisionId"in e&&e.messageType===r.REQUEST_INSERT_TEXT&&c(e.filePath)&&c(e.text)&&f(e.insertionRange)&&p(e.selections)&&c(e.revisionId)))}function Z(e){return null!=e&&("object"===typeof e&&null!=e&&("messageType"in e&&"filePath"in e&&"text"in e&&"revisionId"in e&&e.messageType===r.REQUEST_PASTE_TEXT&&c(e.filePath)&&c(e.text)&&c(e.revisionId)))}function b(e){return null!=e&&("object"===typeof e&&null!=e&&("messageType"in e&&"revisionId"in e&&"filePath"in e&&"action"in e&&e.messageType===r.TEXT_EDITOR_REQUEST_ACTION&&c(e.revisionId)&&c(e.filePath)&&c(e.action)))}function w(e){return null!=e&&("object"===typeof e&&null!=e&&("messageType"in e&&"action"in e&&e.messageType===r.WORKSPACE_REQUEST_ACTION&&c(e.action)))}function x(e){return null!=e&&("object"===typeof e&&null!=e&&("messageType"in e&&"isShown"in e&&"height"in e&&e.messageType===r.SET_KEYBOARD_STATE&&u(e.isShown)&&function(e){return null!==e&&void 0!==e&&"number"===typeof e}(e.height)))}function E(e){return null!=e&&("object"===typeof e&&null!=e&&("messageType"in e&&"input"in e&&e.messageType===r.SHELL_INSERT_INPUT&&c(e.input)))}function C(e){return null!=e&&("object"===typeof e&&null!=e&&("messageType"in e&&"command"in e&&e.messageType===r.SHELL_COMMAND&&c(e.command)))}function S(e){if(null==e)return!1;if("object"!==typeof e||null==e)return!1;if(!("messageType"in e)||!c(e.messageType))return!1;switch(e.messageType){case r.ERROR:case r.ACK:case r.RESET:return!0;case r.TEXT_EDITOR_CLOSED:return function(e){return null!=e&&"object"===typeof e&&null!=e&&"messageType"in e&&"filePath"in e&&e.messageType===r.TEXT_EDITOR_CLOSED&&c(e.filePath)}(e);case r.TEXT_EDITOR_STATE:case r.TEXT_EDITOR_STATE_REQUEST:case r.WORKSPACE_STATE:case r.WORKSPACE_STATE_REQUEST:return!0;case r.REQUEST_SET_SELECTION:return m(e);case r.REQUEST_SET_TEXT:return g(e);case r.REQUEST_INSERT_TEXT:return y(e);case r.REQUEST_PASTE_TEXT:return Z(e);case r.REQUEST_REPLACE_SELECTION:return v(e);case r.TEXT_EDITOR_REQUEST_ACTION:return b(e);case r.WORKSPACE_REQUEST_ACTION:return w(e);case r.SET_KEYBOARD_STATE:return x(e);case r.SHELL_INSERT_INPUT:return E(e);case r.SHELL_COMMAND:return C(e);case r.DEBUG:return function(e){return null!=e&&"object"===typeof e&&null!=e&&"messageType"in e&&"debugMessage"in e&&e.messageType===r.DEBUG&&c(e.debugMessage)}(e);default:return!1}}function T(e){return null!=e&&("object"===typeof e&&null!=e&&("protocolVersion"in e&&"messageDirection"in e&&"messageId"in e&&"payload"in e&&c(e.protocolVersion)&&c(e.messageDirection)&&c(e.messageId)&&S(e.payload)))}},49483:function(e,t,n){n.d(t,{W:function(){return h},Z:function(){return v}});var r=n(35944),i=n(67294),o=n(53427),a=n(64080),l=n(77365),c=n(60459),s=n(69346),u=n(93160),d=n(49619),f=n(81255),p=n(62722);function h(e){var t=(0,i.useState)(null),n=t[0],r=t[1],o=(0,i.useState)(null),a=o[0],l=o[1],s=(0,c.Z)({onUpload:function(t){var n=t.url;r(null),e(n)},onUploadPreview:function(e){var t=e.dataUrl;l(null),r(t)},onError:function(e){r(null),l(e.message)}}),u=(0,i.useCallback)((function(){return l(null)}),[]);return{uploadImage:s.uploadImage,error:a,clearError:u,previewUrl:n}}function v(e){var t=(0,i.useRef)(null),n=e.size||48;return(0,r.BX)(s.G,{css:[f.l0.position.relative,{cursor:"pointer","&:hover .surface":{opacity:.8},"&:hover .icon":{opacity:1}}],onClick:function(){var e;null===(e=t.current)||void 0===e||e.click()},"aria-label":e.value?"Change icon":"Upload an icon","data-microtip-position":"right",role:"tooltip",children:[e.value?(0,r.BX)(r.HY,{children:[(0,r.tZ)(o.ZP,{iconUrl:e.value,size:e.size,alt:"icon"}),(0,r.tZ)(u.T,{className:"surface",elevated:!0,css:[f.l0.borderRadius(8),f.l0.coverContainer,{opacity:e.isUploading?.8:0}]}),(0,r.tZ)(s.G,{className:"icon",css:[f.l0.coverContainer,f.l0.center,f.l0.color.accentPrimaryDefault,{overflow:"hidden",opacity:e.isUploading?1:0}],children:e.isUploading?(0,r.tZ)(l.Z,{}):(0,r.tZ)(a.Z,{})})]}):(0,r.tZ)(s.G,{css:[f.l0.center,f.l0.width(n),f.l0.height(n),f.l0.borderRadius(8),f.l0.color.foregroundDimmer,{border:"1px dashed "+f.TV.outlineDefault,"&:hover":{color:f.TV.accentPrimaryDefault,borderColor:f.TV.accentPrimaryDefault}}],children:(0,r.tZ)(d.Z,{})}),(0,r.tZ)("input",{css:[[f.l0.coverContainer,{opacity:0,zIndex:-1}]],ref:t,accept:p.W9.join(","),type:"file",onChange:function(t){var n=t.target,r=n.validity,i=n.files;if(r.valid){var o=i?i[0]:null;o&&e.onUpload(o)}}})]})}},99900:function(e,t,n){n.d(t,{Z:function(){return Z}});var r=n(9941),i=n(35944),o=(n(67294),n(59641)),a=n(54969),l=n(14251),c=n(32692),s=n(31230),u=n(6565),d=n(50319);function f(){var e=(0,c.Z)(["\n  mutation UnpublishReplUnpublish($input: UnpublishReplFromCommunityInput!) {\n    unpublishReplFromCommunity(input: $input) {\n      ... on Repl {\n        id\n        ...ReplViewReplActionsPermissions\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n  ","\n"]);return f=function(){return e},e}var p={},h=(0,s.Ps)(f(),u.jN);var v=n(93058),m=n(60977),g=n(64184),y=o.KD.form;function Z(e){var t=e.repl,n=e.source,c=e.onDone,s=(0,v.Z)(),u=s.showConfirm,f=s.showError,Z=(0,r.Z)(function(e){var t=(0,l.Z)({},p,e);return d.D(h,t)}({variables:{input:{replId:t.id}},onCompleted:function(e){if("Repl"===e.unpublishReplFromCommunity.__typename){var r=e.unpublishReplFromCommunity,i=r.runCount,o=r.likeCount,l=r.commentCount;(0,m.j)(m.U3.REPL_UNPUBLISHED,{source:n,numRuns:i,numLikes:o,numComments:l,replType:t.publishedAs===a.O2.Template?"template_repl":"regular_repl"}),u("Repl removed from the community.")}else"NotFoundError"===e.unpublishReplFromCommunity.__typename||"UnauthorizedError"===e.unpublishReplFromCommunity.__typename?f(e.unpublishReplFromCommunity.message):f("An unexpected error occurred.");c()},onError:function(){f("Something went wrong. Please try again.")},update:function(e){e.modify({id:e.identify({__typename:"Repl",id:t.id}),fields:{comments:function(e,t){return t.DELETE},tags:function(e,t){return t.DELETE}}})}}),2),b=Z[0],w=Z[1].loading;return(0,i.BX)(o.G7,{css:[o.l0.colWithGap(24)],children:[(0,i.tZ)(o.xv,{multiline:!0,variant:"subheadBig",children:"Unpublish this Repl from the Community"}),(0,i.BX)(y,{onSubmit:function(e){e.preventDefault(),b()},css:[o.l0.colWithGap(32)],children:[(0,i.tZ)(o.xv,{multiline:!0,children:"Unpublishing a Repl will remove it from the Community. This action will delete all associated posts and tags. The Repl and all its comments will still be visible in your profile, but will not be shown in the Community or Trending views anymore. You can always re-publish the Repl again later."}),(0,i.BX)(o.G7,{css:[o.l0.rowWithGap(8),o.l0.justify.end],children:[(0,i.tZ)(o.G7,{children:(0,i.tZ)(o.zx,{type:"button",text:"Cancel",onClick:function(){return c()}})}),(0,i.tZ)(o.G7,{children:(0,i.tZ)(o.zx,{disabled:w,colorway:"negative",text:w?"Unpublishing...":"Yes, unpublish this Repl",type:"submit",iconLeft:(0,i.tZ)(g.Z,{})})})]})]})]})}},58086:function(e,t,n){n.d(t,{p:function(){return r}});var r=1e3},2548:function(e,t,n){var r=n(14251),i=n(52875),o=n(35944),a=n(70917),l=function(e){return{animationDuration:e?"2000ms":"800ms",animationIterationCount:"infinite",animationTimingFunction:"ease-in-out"}},c=(0,a.F4)("\n  0% { transform: translate(0px, 0px) }\n  25% { transform: translate(0px, 80px) }\n  50% { transform: translate(100px, 80px) }\n  75% { transform: translate(100px, 160px) }\n  100% { transform: translate(0px, 160px) }\n"),s=(0,a.F4)("\n  0% { transform: translate(0px, 0px) }\n  25% { transform: translate(0px, -80px) }\n  50% { transform: translate(-100px, -80px) }\n  100% { transform: translate(-100px, -80px) }\n"),u=(0,a.F4)("\n  0% { transform: translate(0px, 0px) }\n  50% { transform: translate(0px, 0px) }\n  75% { transform: translate(0px, -80px) }\n  100% { transform: translate(100px, -80px) }\n");t.Z=function(e){var t=e.height,n=void 0===t?24:t,a=e.color,d=void 0===a?"#F26207":a,f=e.slow,p=void 0!==f&&f,h={width:84,height:64,fill:d,rx:12};return(0,o.BX)("svg",{width:n/1.2,height:n,viewBox:"0 0 200 240",xmlns:"http://www.w3.org/2000/svg",children:[(0,o.tZ)("rect",(0,i.Z)((0,r.Z)({css:[l(p),{animationName:c}]},h),{x:8,y:8})),(0,o.tZ)("rect",(0,i.Z)((0,r.Z)({css:[l(p),{animationName:s}]},h),{x:108,y:88})),(0,o.tZ)("rect",(0,i.Z)((0,r.Z)({css:[l(p),{animationName:u}]},h),{x:8,y:168}))]})}},83261:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(9941),i=n(67294),o={isConnecting:!0,channel:null,error:null,context:null};function a(e){var t=e.container,n=e.service,a=e.name,l=e.skip,c=void 0!==l&&l,s=(0,r.Z)(i.useState(o),2),u=s[0],d=s[1];return i.useEffect((function(){d(o);var e=!1,r=t.openChannel({service:n,name:a,skip:function(){return c}},(function(t){if(!e){if(!t.error)return d({context:t.context,channel:t.channel,error:null,isConnecting:!1}),function(t){e||d({isConnecting:t.willReconnect,channel:null,error:null,context:null})};d({context:t.context,channel:null,error:t.error,isConnecting:!1})}}));return function(){e=!0,r()}}),[t,n,a,c]),u}},15335:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(67294),i=n(99408);function o(){var e=(0,i.Z)().container,t=(0,r.useState)(e.getConnectionState()),n=t[0],o=t[1];return(0,r.useEffect)((function(){return e.onConnectionStateChanged(o)}),[e]),n}},83971:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(34727),i=n(9941),o=n(70655),a=n(67294),l=n(83261),c=n(16965);function s(e){var t=(0,l.Z)({container:e,service:"exec"}).channel,n=(0,a.useRef)(!1),s=(0,a.useRef)([]),u=(0,c.Z)((0,r.Z)((function(){var e,r,a,l,c,d,f,p,h,v;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:if(n.current)return[2];if(!s.current.length)return[2];if("open"!==(null===t||void 0===t?void 0:t.status))return[2];if(!(e=s.current.pop()))throw new Error("Expected request");return r=(0,i.Z)(e,2),a=r[0],l=a.args,c=a.env,d=r[1],f="",p=t.onCommand((function(e){e.output&&(f+=e.output)})),n.current=!0,[4,t.request({exec:{args:l,env:c}})];case 1:return h=o.sent(),n.current=!1,p(),v=h.channelClosed?"Channel closed":h.error,d(v?{error:v,output:f||null}:{output:f,error:null}),u.current(),[2]}}))}))),d=null===t||void 0===t?void 0:t.status;return(0,a.useEffect)((function(){"open"===d&&u.current()}),[d,u]),(0,a.useCallback)((function(e){var t=e.args,n=e.env;return new Promise((function(e){s.current.push([{args:t,env:n},e]),u.current()}))}),[u])}},2916:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(9941),i=n(67294),o=n(99408),a=n(11887);function l(){var e,t,n=(0,o.Z)().container,l=(0,r.Z)(i.useState(null!==(t=null===(e=n.getContext())||void 0===e?void 0:e.repl)&&void 0!==t?t:null),2),c=l[0],s=l[1];return i.useEffect((function(){return n.onConnectionStateChanged((function(e){var t,r;e===a.em.CONNECTED&&s(null!==(r=null===(t=n.getContext())||void 0===t?void 0:t.repl)&&void 0!==r?r:null)}))}),[s,n]),c}},37432:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(9941),i=n(67294),o=n(6625),a=n(84810),l=n(83569);function c(e){var t=e.path,n=e.initialExpanded,c=e.fs,s=(0,r.Z)(i.useState(null),2),u=s[0],d=s[1],f=(0,r.Z)(i.useState(null),2),p=f[0],h=f[1],v=(0,r.Z)(i.useState(Boolean(n)),2),m=v[0],g=v[1],y=(0,o.Z)();i.useEffect((function(){if(m){var e=c.watchDir(t,{onChange:function(e){d(e.filter((function(e){return!(0,a.C)(t===l.Ql?e.filename:t+"/"+e.filename)})))},onError:function(e){h(e)}});return function(){y.current&&d(null),e()}}}),[c,t,m,d,h]);var Z=i.useCallback((function(){g(!0)}),[]),b=i.useCallback((function(){g(!1)}),[]);return m?p?{collapse:b,expand:Z,children:null,expanded:m,loading:!1,error:p}:u?{collapse:b,expand:Z,children:u,loading:!1,error:p,expanded:m}:{collapse:b,expand:Z,children:u,loading:!0,error:p,expanded:m}:{collapse:b,expand:Z,children:null,loading:!1,error:null,expanded:m}}},65977:function(e,t,n){n.d(t,{O:function(){return u}});var r=n(9941),i=n(67294),o=n(67034),a=n(81700),l=n.n(a),c=n(6625),s=n(99408),u=function(){var e=(0,s.Z)().dotReplit,t=(0,c.Z)(),n=(0,r.Z)(i.useState(null),2),a=n[0],u=n[1];return i.useEffect((function(){return e.watch((function(e){t.current&&(e.error?e.error===o.Yt.NotFound&&u([]):e.config.hidden?u(e.config.hidden.map((function(e){return l()(e,{extended:!0,globstar:!0})}))):u([]))}))}),[e]),a}},36739:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(9941),i=n(67294);function o(e,t){var n=(0,r.Z)(i.useState(null),2),o=n[0],a=n[1];return i.useEffect((function(){var n=!1;return e.readFile(t).then((function(e){n||a(e)})),function(){n=!0}}),[e,t]),o}},58823:function(e,t,n){n.d(t,{w:function(){return l}});var r=n(50829),i=n(89224),o=n(93449);function a(e){var t=e.path,n=e.fs,o=e.edits,a=!1,l=n.watchTextFile(t,{onReady:function(e){var t=e.writeChange,n=e.initialContent;t((0,r.Z)(o,n.toString())),a=!0},onStatusChange:function(e){e===i.KF.Clean&&a&&l()}})}function l(e){var t=e.edit,n=e.fs,r=e.client,l=t.documentChanges,c=t.changes;if(l&&l.forEach((function(e){if("textDocument"in e){var t=e.edits,l=e.textDocument;a({path:r.documentUriToPath(l.uri),fs:n,edits:t})}else switch(e.kind){case"create":var c=r.documentUriToPath(e.uri),s=e.options,u=Boolean((null===s||void 0===s?void 0:s.overwrite)||!(null===s||void 0===s?void 0:s.ignoreIfExists)),d=function(){n.writeFile(c,o.Z.from("")).then((function(e){if(e.error)throw new Error("Something went wrong writing to a file")}))};if(u){d();break}n.stat(c).then((function(e){e.exists||d()}));break;case"delete":var f=r.documentUriToPath(e.uri),p=e.options,h=Boolean(null===p||void 0===p?void 0:p.recursive),v=Boolean(null===p||void 0===p?void 0:p.ignoreIfNotExists);n.stat(f).then((function(e){if(!e.exists)throw new Error("Expected file to exist");if(e.type===i.Tv.Directory&&!h)throw new Error("Trying to delete a directory without recursive option enabled");n.deleteFile(f).then((function(e){var t=e.error;if((t!==i.Df.NotFound||!v)&&t)throw new Error("Something went wrong deleting the file")}))}));break;case"rename":var m=r.documentUriToPath(e.oldUri),g=r.documentUriToPath(e.newUri),y=e.options,Z=Boolean((null===y||void 0===y?void 0:y.overwrite)||!(null===y||void 0===y?void 0:y.ignoreIfExists)),b=function(){n.moveFile(m,g).then((function(e){if(e.error)throw new Error("Something went wrong moving the file")}))};if(Z){b();break}n.stat(g).then((function(e){e.exists||b()}))}})),c)for(var s in c){var u=r.documentUriToPath(s),d=c[s];a({path:u,fs:n,edits:d})}}},4862:function(e,t,n){function r(e){var t,n=e.getServerCapabilities();return{isAutoCompleteSupported:Boolean(null===n||void 0===n?void 0:n.completionProvider),isCompletionItemResolveSupported:Boolean(null===n||void 0===n||null===(t=n.completionProvider)||void 0===t?void 0:t.resolveProvider),isDocumentSymbolSupported:Boolean(null===n||void 0===n?void 0:n.documentSymbolProvider),isFindReferencesSupported:Boolean(null===n||void 0===n?void 0:n.referencesProvider),isFindDefinitionSupported:Boolean(null===n||void 0===n?void 0:n.definitionProvider),isFindTypeDefinitionSupported:Boolean(null===n||void 0===n?void 0:n.typeDefinitionProvider),isFindImplementationSupported:Boolean(null===n||void 0===n?void 0:n.implementationProvider),isTextDocumentSyncSupported:Boolean(null===n||void 0===n?void 0:n.textDocumentSync),isHoverSupported:Boolean(null===n||void 0===n?void 0:n.hoverProvider),isRenameSupported:Boolean(null===n||void 0===n?void 0:n.renameProvider),isCodeActionsSupported:Boolean(null===n||void 0===n?void 0:n.codeActionProvider),isSignatureHelpSupported:Boolean(null===n||void 0===n?void 0:n.signatureHelpProvider)}}n.d(t,{Z:function(){return r}})},50829:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(9941),i=n(78120),o=n(12890),a=n(41656);function l(e,t){var n=i.xv.of(t.split("\n")),l=i.as.empty(n.length);if(!e.length)return l;if(1===e.length){var c=(0,r.Z)(e,1)[0],s=c.range,u=s.start,d=s.end,f=c.newText,p=(0,a.R)(n,u);if(0===p||-1===p){var h=(0,a.R)(n,d);if(h===n.length||-1===h)return(0,o.F)(t,f)}}var v=[],m=!0,g=!1,y=void 0;try{for(var Z,b=e[Symbol.iterator]();!(m=(Z=b.next()).done);m=!0){var w=Z.value,x=w.range,E=w.newText,C=(0,a.R)(n,x.start),S=(0,a.R)(n,x.end);v.push({from:C,to:S,insert:E})}}catch(T){g=!0,y=T}finally{try{m||null==b.return||b.return()}finally{if(g)throw y}}return i.as.of(v,t.length)}},55528:function(e,t,n){n.d(t,{Z:function(){return g}});var r=n(9941),i=n(67294),o=n(99408),a=n(2916),l=n(14251),c=n(52875),s=n(20773),u=n.n(s),d=n(21603),f=n(48444);function p(e){return Math.floor(performance.now()-e.startTime)}var h=new WeakSet;function v(e){var t=e.client,n=e.replId,r=e.language;if(!h.has(t)){h.add(t);var i=new Map,o=function(e){return{method:e.method,replid:n,language:r,startTime:Math.floor(e.startTime)}},a=u()((function(e,t){var n=p(t);n>1e4&&d.kg.time("LSP unresponsive request",n,o(t))})),s=setInterval((function(){i.forEach((function(e){a(e.id,e)}))}),2e3);return(0,f.uf)([t.onRequest((function(e){var t=e.id,n=e.data;Math.random()<.01&&i.set(t,{id:t,method:n.method,startTime:performance.now()})})),t.onResponse((function(e){var t=e.id,n=e.error,r=i.get(t);null!=r&&(i.delete(t),d.kg.time("LSP request",p(r),(0,c.Z)((0,l.Z)({},o(r)),{result:null==n?"ok":"error"})))})),t.onCancelRequest((function(e){var t=i.get(e);null!=t&&(i.delete(e),d.kg.time("LSP request",p(t),(0,c.Z)((0,l.Z)({},o(t)),{result:"cancelled"})))})),function(){return clearInterval(s)},function(){return h.delete(t)}])}}var m=n(11625);function g(e){var t=(0,a.Z)(),n=(0,o.Z)(),l=n.lsp,c=n.lspnix,s=(0,r.Z)(i.useState(null),2),u=s[0],d=s[1];return i.useEffect((function(){if(null===t||void 0===t?void 0:t.language){var n,r;if(t.language.startsWith("nix")||t.language.startsWith("html"))n=c.onClient(e,d);else(null===(r=l.getClient())||void 0===r?void 0:r.isSupportedFile(e))?d(l.getClient()):d(null),n=l.onClient((function(t){(null===t||void 0===t?void 0:t.isSupportedFile(e))?d(t):d(null)}));return function(){n(),d(null)}}}),[l,c,e,null===t||void 0===t?void 0:t.language]),i.useEffect((function(){if(u&&t)return v({client:u,replId:t.id,language:(0,m.D)(e,null===t||void 0===t?void 0:t.language)})}),[u,t,e]),u}},86601:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(9941),i=n(67294),o=n(99408);function a(){var e=(0,o.Z)().presence,t=(0,r.Z)(i.useState(e.getFollowedUser()),2),n=t[0],a=t[1];return i.useEffect((function(){return a(e.getFollowedUser()),e.onFollowedUserChanged(a)}),[e]),n}},32027:function(e,t,n){n.d(t,{Z:function(){return i}});var r=n(86601);function i(){var e=(0,r.Z)();return e?e.color:null}},40381:function(e,t,n){n.d(t,{Z:function(){return u}});var r=n(7182),i=n(63309),o=n(9941),a=n(67294),l=n(99408),c=n(6625);var s=n(15902);function u(){var e=function(){var e=(0,l.Z)().session,t=(0,o.Z)(a.useState(e.getState()),2),n=t[0],r=t[1],i=(0,c.Z)();return a.useEffect((function(){return r(e.getState()),e.onSessionStateChanged((function(e){i.current&&r(e)}))}),[e,i]),n}(),t=e.openFiles,n=e.activeTab,u=(0,r.Dv)(i.QP);return(0,s.T3)()?t[n]||null:u}},25741:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(9941),i=n(67294),o=n(99408);function a(){var e=(0,o.Z)().session,t=(0,r.Z)(i.useState(e.getAreHiddenFilesVisible()),2),n=t[0],a=t[1];return i.useEffect((function(){return a(e.getAreHiddenFilesVisible()),e.onHiddenFileVisibilityToggled(a)}),[e]),n}},91513:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(99408),i=n(67294),o=n(73604);function a(e){var t=(0,r.Z)(),n=t.session,a=t.fs,l=(0,i.useCallback)((function(t){var r=t.code,i=t.insertAt,l=t.newLine,c=void 0===l||l;if(!e||(0,o.T3)(e)||(0,o.sL)(e)||(0,o.IQ)(e))throw new Error("Invalid file, this should never happen");if(0!==r.length)var s=a.watchTextFile(e,{onReady:function(e){var t,o=e.initialContent,l=e.writeChange,u=o.toString(),d=n.getCursorPosition().offset;t="end"===i?u.length:"number"===typeof i?i:d;var f=r;c&&(0!==t&&t!==u.length&&-1===(t=u.indexOf("\n",t))&&(t=u.length),0!==t&&"\n"!==u[t-1]&&(f="\n"+f),"\n"!==u[t]&&(f+="\n")),l({from:t,insert:f}),a.flush().finally((function(){s()}))}})}),[e,n,a]);return!e||(0,o.T3)(e)||(0,o.sL)(e)?null:l}},41671:function(e,t,n){n.d(t,{K:function(){return l}});var r=n(14251),i=n(99408),o=n(67294),a=n(23384);function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,i.Z)().userEvents,n=(0,a.D)({controlName:"flag-null-diagnostics"});return(0,o.useCallback)((function(i,o){n&&t.emit(i,(0,r.Z)({},e,o))}),[t,e,n])}},6307:function(e,t,n){n.d(t,{a:function(){return c}});var r=n(35944),i=n(70917),o=function(e){return(0,i.iv)({"body *":{cursor:"".concat(e," !important")}})},a=(0,i.iv)({"body *":{userSelect:"none",WebkitTouchCallout:"none",WebkitUserSelect:"none"}}),l={"n-resize":o("n-resize"),"ne-resize":o("ne-resize"),"nesw-resize":o("nesw-resize"),"s-resize":o("s-resize"),"se-resize":o("se-resize"),"sw-resize":o("sw-resize"),"e-resize":o("e-resize"),"ew-resize":o("ew-resize"),"row-resize":o("row-resize"),"col-resize":o("col-resize"),grabbing:o("grabbing")};function c(e){var t=e.cursor;return(0,r.tZ)(i.xB,{styles:[a,l[t]]})}},24897:function(e,t,n){n.d(t,{w:function(){return f}});var r=n(14251),i=n(35944),o=n(93096),a=n.n(o),l=n(67294),c=n(73935),s=n(70917),u=n(96189),d=n(81255);function f(e){var t=e.targetElement,n=(0,l.useState)(null),o=n[0],f=n[1],h=(0,u.Z)((function(){t&&f({rect:t.getBoundingClientRect(),docWidth:document.documentElement.clientWidth,docHeight:document.documentElement.clientHeight})}),{type:"throttle",wait:100});if((0,l.useEffect)((function(){t&&h(t)}),[t,h]),(0,l.useEffect)((function(){if(t){var e=a()((function(){f({rect:t.getBoundingClientRect(),docWidth:document.documentElement.clientWidth,docHeight:document.documentElement.clientHeight})}),100);return window.addEventListener("resize",e),window.addEventListener("scroll",e),function(){window.removeEventListener("resize",e),window.removeEventListener("scroll",e)}}}),[t]),!o||!t)return null;var v=(0,s.iv)({backgroundColor:d.TV.backgroundOverlay,zIndex:d.n0+1,position:"fixed",transition:"all 0.5s ease-out"});return(0,c.createPortal)((0,i.BX)(i.HY,{children:[(0,i.tZ)("div",{id:"wat",css:[p((0,r.Z)({side:"left-top"},o)),v]}),(0,i.tZ)("div",{css:[p((0,r.Z)({side:"top-right"},o)),v]}),(0,i.tZ)("div",{css:[p((0,r.Z)({side:"right-bottom"},o)),v]}),(0,i.tZ)("div",{css:[p((0,r.Z)({side:"bottom-left"},o)),v]})]}),document.body)}function p(e){var t=e.side,n=e.rect,r=e.docWidth,i=e.docHeight;switch(t){case"left-top":return(0,s.iv)({top:0,left:0,width:Math.max(0,n.left),height:Math.max(0,n.bottom)});case"top-right":return(0,s.iv)({top:0,right:0,width:"calc(".concat(r,"px - ").concat(Math.max(0,n.left),"px)"),height:Math.max(0,n.top)});case"right-bottom":return(0,s.iv)({bottom:0,right:0,width:"calc(".concat(r,"px - ").concat(Math.max(0,n.right),"px)"),height:"calc(".concat(i,"px - ").concat(Math.max(0,n.top),"px)")});case"bottom-left":return(0,s.iv)({bottom:0,left:0,width:Math.max(0,n.right),height:"calc(".concat(i,"px - ").concat(Math.max(0,n.bottom),"px)")})}}},37497:function(e,t,n){n.d(t,{k:function(){return h}});var r=n(14251),i=n(52875),o=n(35944),a=n(66060),l=n(40370),c=n(67294),s=n(73935),u=n(95237),d=n(74235),f=n(81255),p=n(96189);function h(e){var t=e.targetElement,n=e.activeStep,h=e.goto,v=e.currentStepIndex,m=e.totalSteps,g=e.done,y=e.disableAnimation,Z=e.placement,b=void 0===Z?"right":Z,w=e.innerRef,x=(0,c.useState)(null),E=x[0],C=x[1],S=(0,c.useState)(null),T=S[0],k=S[1],_=(0,u.D)(t,E,{placement:b,modifiers:[{name:"arrow",options:{element:T,padding:8}},{name:"offset",options:{offset:[0,16]}},{name:"preventOverflow",options:{padding:8}},{name:"flip",options:{fallbackPlacements:["top","bottom","left","right"]}},{name:"computeStyles",options:{adaptive:!1}}]}),R=(0,p.Z)((function(){var e;null===(e=_.update)||void 0===e||e.call(_)}),{type:"throttle",wait:100});return(0,c.useEffect)((function(){R(t)}),[t,R]),(0,c.useImperativeHandle)(w,(function(){return{updateTooltip:function(){var e;null===(e=_.update)||void 0===e||e.call(_)}}})),(0,s.createPortal)((0,o.BX)("div",(0,i.Z)((0,r.Z)({ref:C,style:_.styles.popper,css:{transition:y?"all":"all 0.5s ease-out",zIndex:f.n0+2,width:320}},_.attributes.popper),{children:[(0,o.tZ)(l.O,{title:n.title,content:n.content,onDismiss:function(){g()},currentStepIndex:v,onCurrentStepChange:h,totalSteps:m,cypressCloseData:"tour-tooltip-close-button"}),(0,o.tZ)("span",{style:_.styles.arrow,css:[a.wk,{"&::after":{backgroundColor:d.Br.primary.dimmest,border:"1px solid "+d.Br.primary.dimmer}}],ref:k})]})),document.body)}},95901:function(e,t,n){n.d(t,{r:function(){return g},e:function(){return y.e}});var r=n(67573),i=n(14251),o=n(52875),a=n(9941),l=n(35944),c=n(78597),s=n(67294),u=n(20431),d=n(40370),f=n(1879);function p(){var e=(0,u.X)();if(!e)return null;var t=e.activeStep,n=e.goto,r=e.steps,i=e.done;return(0,l.tZ)(f.u,{preventClose:!0,isOpen:Boolean(t.isModal),onRequestClose:function(){},centered:!0,maxWidth:"fit-content",noPadding:!0,children:(0,l.tZ)(d.O,{title:t.title,content:t.content,onDismiss:function(){i()},currentStepIndex:r.findIndex((function(e){return t.id===e.id})),onCurrentStepChange:n,totalSteps:r.length,cypressCloseData:"tour-tooltip-close-button"})})}var h=n(24897),v=n(37497),m=n(25108);function g(e){var t,n=e.children,d=e.tour,f=e.isDoneInitialOverride,g=e.onStep,y=e.onDone,Z=function(){P(!0),null===y||void 0===y||y(C.id)},b=function(e){B.current=C,null===g||void 0===g||g(e.id),S(e)},w=function(e){var t;if("number"===typeof e)t=e;else{var n=e;t=d.steps.findIndex((function(e){return n===e.id}))}if(!(t<0||t>=d.steps.length)){for(var r=d.steps[t],i=t<G;!k[r.id]&&r.autoSkipIfNoTarget;){if((t=i?t-1:t+1)<0||t>=d.steps.length)return;r=d.steps[t]}b(r)}},x=function(){w(0),P(!1)},E=(0,s.useState)(d.steps[0]),C=E[0],S=E[1],T=(0,s.useState)({}),k=T[0],_=T[1],R=function(e,t){var n,r=(0,c.Pp)({variables:{tours:e}}),i=r.data,o=r.loading,l=(0,a.Z)((0,c.oe)({variables:{name:e},optimisticResponse:{markTourAsSeen:{__typename:"TourSeen",id:e,seen:!0}}}),1)[0],u=(0,s.useState)(t),d=u[0],f=u[1],p=Boolean(null===i||void 0===i||null===(n=i.currentUser)||void 0===n?void 0:n.toursSeen[0].seen);return"boolean"===typeof d&&(p=d),{isLoading:o,isDone:p,setIsDone:function(e){f(e),e&&l()}}}(d.id,f),D=R.isDone,I=R.isLoading,P=R.setIsDone,G=d.steps.findIndex((function(e){return C.id===e.id}));if(-1===G)throw new Error("Current tour step is not in tour steps");var B=(0,s.useRef)(),A=(0,s.useCallback)((function(e,t){var n=d.steps.findIndex((function(t){return e===t.id}));if(-1===n)throw new Error("Invalid step id");if(d.steps[n].isModal)throw new Error("Trying to set a target element for a modal step");_((function(n){return n[e]===t?n:(0,o.Z)((0,i.Z)({},n),(0,r.Z)({},e,t))}))}),[d]),U=k[C.id],O=!D&&!I;window.startTour=function(){m.log("starting tour:",d.id,"from",d.steps[0].id),x()};var N=d.steps.filter((function(e){return!e.autoSkipIfNoTarget||Boolean(k[e.id])})),L=N.findIndex((function(e){return C.id===e.id}));return(0,l.BX)(u.z,{value:(0,o.Z)((0,i.Z)({},d),{setStepTargetElement:A,activeStep:C,next:function(){var e=d.steps[G+1];if(e&&e.autoSkipIfNoTarget)for(var t=G+1;e&&e.autoSkipIfNoTarget&&!k[e.id];)t++,e=d.steps[t];e?b(e):Z()},prev:function(){var e=d.steps[G-1];if(e&&e.autoSkipIfNoTarget)for(var t=G-1;e&&e.autoSkipIfNoTarget&&!k[e.id];)t--,e=d.steps[t];e&&b(e)},goto:w,isDone:D,isLoading:I,done:Z,restart:x}),children:[O&&C.isModal?(0,l.tZ)(p,{}):null,O&&U?(0,l.BX)(l.HY,{children:[(0,l.tZ)(h.w,{targetElement:U}),(0,l.tZ)(v.k,{targetElement:U,activeStep:C,currentStepIndex:L,done:Z,goto:function(e){w(e+G-L)},totalSteps:N.length,disableAnimation:Boolean(0===G||(null===(t=B.current)||void 0===t?void 0:t.isModal))})]}):null,n]})}var y=n(6899)},31600:function(e,t,n){var r;n.d(t,{z:function(){return r}}),function(e){e.FileNode="FILE_NODE",e.FileHeaderTab="FILE_HEADER_TAB",e.Code="CODE",e.Pane="PANE",e.NewPane="NEW_PANE"}(r||(r={}))},60147:function(e,t,n){n.d(t,{Z:function(){return G},Y:function(){return R}});var r=n(35944),i=n(67294),o=n(59119),a=n(78120),l=n(14456),c=n(59006),s=n(410),u=n(68122),d=n(82378),f=n(59641),p=n(44781),h=n(48444),v=n(11163),m=n(14251),g=n(32692),y=n(31230),Z=n(37887);function b(){var e=(0,g.Z)(["\n  query ReplEnvironmentShowAdmin {\n    currentUser {\n      id\n      isAdmin: hasRole(role: ADMIN)\n    }\n  }\n"]);return b=function(){return e},e}var w={},x=(0,y.Ps)(b());function E(){var e,t=function(e){var t=(0,m.Z)({},w,e);return Z.a(x,t)}().data,n=(0,v.useRouter)();return(null===t||void 0===t||null===(e=t.currentUser)||void 0===e?void 0:e.isAdmin)||Boolean(n.query.debug)}var C=(0,d.u)(null),S=(0,d.u)(null),T=(0,d.u)({from:0,to:0}),k=l.p.mark({class:"ast-hover"}),_=l.tk.baseTheme({".ast-hover":{background:f.TV.backgroundHighest}});function R(e){var t=e.view,n=(0,c.Z)({view:t}),r=E();(0,i.useEffect)((function(){if(r&&t){C.current=t.state;var e=a.Py.define(),i=(0,h.uf)([S.subscribe((function(n){t.dispatch({effects:e.of(n)})})),T.subscribe((function(e){t.dispatch({selection:{anchor:e.from,head:e.to}})}))]);return t.dispatch({effects:n.reconfigure([l.tk.updateListener.of((function(e){(e.selectionSet||e.docChanged)&&(C.current=e.state)})),a.QQ.define({create:function(){return l.p.none},update:function(t,n){return t=t.map(n.changes),(0,s.j)(n,e,(function(e){t=null==e.value?l.p.none:l.p.set([k.range(e.value.from,e.value.to)])})),t},provide:function(e){return l.tk.decorations.from(e)}}),_])}),function(){C.current=null,i(),t.dispatch({effects:n.reconfigure([])})}}}),[t,r,n])}var D=(0,i.memo)((function(e){var t=e.node,n=e.index,i=e.active,o=e.terminal,a=t.type.name,l={from:t.from,to:t.to};return(0,r.BX)(f.G7,{css:[{marginLeft:4*n+(o?4:0)},f.l0.mb(4),f.l0.rowWithGap(2),f.l0.align.center,f.l0.cursor.pointer],onMouseEnter:function(){S.current=l},onClick:function(){S.current=null,T.current=l},children:[(0,r.tZ)(p.Z,{size:"small",fontFamily:a.length>1?"sans-serif":"monospace",fontWeight:i?"bold":"regular",children:a}),(0,r.BX)(p.Z,{size:"xsmall",truncate:!0,children:["(",t.from," \u2013 ",t.to,")"]})]})}));function I(e,t){for(var n=[];t(e);)n.push(e.node);return n}var P=(0,i.memo)((function(e){var t=e.state,n=(0,o.qz)(t),a=t.selection.main.head,l=(0,i.useMemo)((function(){return I(n.cursorAt(a),(function(e){return e.parent()})).reverse()}),[n,a]),c=(0,i.useMemo)((function(){return I(n.cursorAt(a),(function(e){return e.prevSibling()}))}),[n,a]),s=(0,i.useMemo)((function(){return I(n.cursorAt(a),(function(e){return e.nextSibling()}))}),[n,a]);return(0,r.BX)(f.G7,{css:f.l0.ml(4),onMouseLeave:function(){S.current=null},children:[l.map((function(e,t){return(0,r.tZ)(D,{node:e,index:t},t)})),c.map((function(e,t){return(0,r.tZ)(D,{node:e,index:l.length,terminal:!0},t)})),(0,r.tZ)(D,{node:n.resolveInner(t.selection.main.head),index:l.length,terminal:!0,active:!0}),s.map((function(e,t){return(0,r.tZ)(D,{node:e,index:l.length,terminal:!0},t)}))]})}));function G(){var e=(0,u.Z)(C);return e?(0,r.tZ)(P,{state:e}):null}},60864:function(e,t,n){n.d(t,{YX:function(){return g},ho:function(){return y}});var r=n(75815),i=n(14251),o=n(52875),a=n(9941),l=n(35944),c=n(67294),s=n(59641),u=n(48386),d=n(77365),f=n(10982),p=n(74454),h=n(68122),v=n(82378),m=n(97992),g=new(function(){function e(){var t=this;(0,r.Z)(this,e),this.counter=0,this.enabled=!1,this.maxEntries=10,this.logs=(0,v.u)([]),this.clear=function(){t.logs.current=[]}}var t=e.prototype;return t.toggle=function(e){this.enabled=e},t.add=function(e){var t=this;if(!this.enabled)return{id:-1};var n=this.counter++,r={id:n,request:e,requestTime:Date.now()};return this.logs.update((function(e){return[r].concat(e).slice(0,t.maxEntries)})),{id:n}},t.update=function(e,t){this.enabled&&this.logs.update((function(n){var r=n.findIndex((function(t){return t.id===e.id}));if(-1===r)return n;var i=n.slice();return i[r]=t(i[r]),i}))},t.complete=function(e,t){this.update(e,(function(e){return(0,o.Z)((0,i.Z)({},e),{response:t,responseTime:Date.now()})}))},t.abort=function(e){this.logs.update((function(t){return t.filter((function(t){return t.id!==e.id||null!=t.responseTime}))}))},e}()),y=function(){var e,t=(0,h.Z)(g.logs);return(0,l.BX)(s.G7,{css:[s.l0.flex.column],children:[(0,l.BX)(s.G7,{css:[s.l0.flex.row,s.l0.align.center,s.l0.m(4),s.l0.position.sticky,s.l0.top(0),s.l0.backgroundColor.backgroundDefault,s.l0.zIndex(1)],children:[(0,l.tZ)(s.xv,{css:s.l0.flex.grow(1),children:"Requests"}),(0,l.tZ)(u.Z,{onClick:g.clear})]}),(0,l.BX)(s.G7,{css:[s.l0.flex.grow(1),s.l0.flex.column,s.l0.overflow("auto")],children:[t.map((function(t){return(0,l.tZ)(Z,{log:t},null!==(e=t.id)&&void 0!==e?e:t.requestTime.valueOf())})),!t.length&&(0,l.tZ)(s.G7,{css:s.l0.m(4),children:"\ud83d\ude14 No logs yet..."})]})]})},Z=(0,c.memo)((function(e){var t=e.log,n=t.requestTime,r=t.responseTime,i=t.request,o=t.response,c=(0,a.Z)((0,p.Z)(!0),2),u=c[0],d=c[1],f=i.code.length>20?"...".concat(i.code.slice(-20)):i.code;return(0,l.BX)(s.G7,{css:[s.l0.my(4),s.l0.mx(4)],children:[(0,l.BX)(s.G7,{role:"button",onClick:d,onKeyDown:d,tabIndex:0,css:[s.l0.flex.row,s.l0.rowWithGap(4),{"&:hover":{cursor:"pointer",".lspLog-requestMethod":{textDecoration:"underline"}}}],children:[(0,l.BX)(s.G7,{css:[s.l0.flex.grow(1),s.l0.rowWithGap(2)],children:[(0,l.tZ)(s.xv,{children:b(t)}),(0,l.tZ)(s.xv,{children:(0,l.tZ)("code",{children:f})})]}),(0,l.tZ)(s.G7,{css:{opacity:.5},children:null!=r&&(0,l.BX)(s.xv,{css:s.l0.fontSize(13),children:[r.valueOf()-n.valueOf()," ms"]})})]}),!u&&(0,l.BX)(l.HY,{children:[void 0!==i&&(0,l.tZ)(m.g,{name:"request",src:i}),void 0!==o&&("CompleteCodeResult"===o.__typename?(0,l.BX)("details",{children:[(0,l.tZ)("summary",{children:"Response"}),(0,l.tZ)("pre",{css:[s.l0.overflow("scroll"),s.l0.borderRadius(4),s.l0.p(4),{border:"1px solid ".concat(s.TV.outlineDimmest)}],children:o.code})]}):(0,l.tZ)(m.g,{name:"response",src:o}))]})]})}));function b(e){var t=e.response;return t?"CompleteCodeResult"===t.__typename?(0,l.tZ)(f.Check,{}):(0,l.tZ)(f.Frown,{}):(0,l.tZ)(d.Z,{})}},97992:function(e,t,n){n.d(t,{L:function(){return w},g:function(){return E}});var r=n(67573),i=n(14251),o=n(52875),a=n(9941),l=n(35944),c=n(67294),s=n(37424),u=n(40381),d=n(55528),f=n(59641),p=n(48386),h=n(72806),v=n(519),m=n(77365),g=n(10982),y=n(74454),Z=n(48444),b=n(78244),w=function(){var e,t=(0,u.Z)(),n=(0,d.Z)(t||""),r=(0,s.H)(),m=(0,a.Z)((0,y.Z)(!0),2),b=m[0],w=m[1],E=(0,c.useState)(""),S=E[0],T=E[1],k=(0,c.useState)((function(){return[]})),_=k[0],R=k[1],D=(0,a.Z)((0,y.Z)(!0),2),I=D[0],P=D[1],G=(0,a.Z)((0,y.Z)(!0),2),B=G[0],A=G[1],U=(0,c.useCallback)((function(e){R((function(t){return[e].concat(t)}))}),[]),O=(0,c.useCallback)((function(e,t){R((function(n){return n.map((function(n){return n.id===e?t(n):n}))}))}),[]),N=(0,c.useCallback)((function(){R([])}),[]),L=(0,c.useCallback)((function(){U({canceled:!1,notification:{method:"probe",params:{filePath:t,state:null===n||void 0===n?void 0:n.getServerState(),capabilities:null===n||void 0===n?void 0:n.getServerCapabilities(),diagnostics:null===n||void 0===n?void 0:n.getDiagnostics(t||""),isOpen:null===n||void 0===n?void 0:n.isOpen(t||""),isSupportedFile:null===n||void 0===n?void 0:n.isSupportedFile(t||"")}},requestTime:new Date,type:"probe"})}),[U,n,t]),F=(0,c.useMemo)((function(){var e=S.split(",").map((function(e){return e.trim()})),t=_;return I||(t=t.filter((function(e){return null==e.notification}))),B||(t=t.filter((function(e){return null==e.request}))),S&&(t=t.filter((function(t){return e.some((function(e){var n;return null===(n=t.request||t.notification)||void 0===n?void 0:n.method.toLowerCase().includes(e.toLowerCase())}))}))),t}),[_,I,B,S]);return(0,c.useEffect)((function(){return(0,Z.uf)([null===n||void 0===n?void 0:n.onRequest((function(e){b&&U({id:e.id,canceled:!1,request:e.data,requestTime:new Date})})),null===n||void 0===n?void 0:n.onResponse((function(e){b&&O(e.id,(function(t){return(0,i.Z)((0,o.Z)((0,i.Z)({},t),{responseTime:new Date}),void 0!==e.result?{response:e.result}:{error:e.error})}))})),null===n||void 0===n?void 0:n.onCancelRequest((function(e){b&&O(e,(function(e){return(0,o.Z)((0,i.Z)({},e),{canceled:!0})}))})),null===n||void 0===n?void 0:n.onDiagnostics((function(e){b&&U({canceled:!1,notification:{method:"textDocument/publishDiagnostics",params:e},requestTime:new Date,type:"diagnostics"})})),null===n||void 0===n?void 0:n.onServerStateChange((function(e){b&&U({canceled:!1,notification:{method:"state",params:{serverState:e}},requestTime:new Date,type:"state"})})),null===n||void 0===n?void 0:n.onServerCapabilitiesChange((function(e){b&&U({canceled:!1,notification:{method:"capabilities",params:{serverCapabilities:e}},requestTime:new Date,type:"capabilities"})})),null===n||void 0===n?void 0:n.onSendNotification((function(e){b&&U({canceled:!1,notification:e,requestTime:new Date})}))])}),[n,U,O,b]),(0,l.BX)(f.G7,{css:[f.l0.flex.column],children:[(0,l.BX)(f.G7,{css:[f.l0.flex.row,f.l0.align.center,f.l0.m(4),f.l0.position.sticky,f.l0.top(0),f.l0.backgroundColor.backgroundDefault,f.l0.zIndex(1)],children:[(0,l.tZ)(f.xv,{children:n?(0,l.BX)(l.HY,{children:[(0,l.tZ)(C,{})," logs for ",(0,l.tZ)("code",{children:t})]}):"No LSP client available"}),(0,l.tZ)(f.hU,{alt:"Probe LSP",onClick:L,children:(0,l.tZ)(g.Eye,{})}),(0,l.tZ)(f.G7,{css:f.l0.flex.grow(1)}),(0,l.tZ)(v.Z,{id:"toggleIsLogging",isOn:b,onChange:w})," "]}),(0,l.BX)(f.G7,{css:[f.l0.rowWithGap(8),f.l0.m(4),f.l0.mb(8)],children:[(0,l.BX)(f.G7,{css:f.l0.rowWithGap(4),children:[(0,l.tZ)(g.Filter,{}),(0,l.tZ)(f.xv,{children:"Show"})]}),(0,l.BX)(f.G7,{css:f.l0.rowWithGap(4),children:[(0,l.tZ)(h.X,{id:r("showNotifications"),checked:I,onChange:P}),(0,l.tZ)("label",{htmlFor:r("showNotifications"),children:" Notifications"})]}),(0,l.BX)(f.G7,{css:f.l0.rowWithGap(4),children:[(0,l.tZ)(h.X,{id:r("showRequests"),checked:B,onChange:A}),(0,l.tZ)("label",{htmlFor:r("showRequests"),children:" Requests"})]}),(0,l.tZ)(f.G7,{css:f.l0.flex.growAndShrink(1)}),(0,l.tZ)(f.G7,{css:f.l0.rowWithGap(4),children:(0,l.tZ)(p.Z,{onClick:N})})]}),(0,l.tZ)(f.G7,{css:f.l0.rowWithGap(4),children:(0,l.tZ)(f.II,{id:r("filterLsp"),placeholder:"Filter by method (Separate by ,)",onChange:function(e){return T(e.target.value)},value:S})}),(0,l.BX)(f.G7,{css:[f.l0.flex.grow(1),f.l0.flex.column,f.l0.overflow("auto")],children:[F.map((function(t){return(0,l.tZ)(x,{log:t},null!==(e=t.id)&&void 0!==e?e:t.requestTime.valueOf())})),!F.length&&(0,l.tZ)(f.G7,{css:f.l0.m(4),children:"\ud83d\ude14 No logs yet..."})]})]})},x=c.memo((function(e){var t,n=e.log,r=n.requestTime,i=n.responseTime,o=n.request,c=n.response,s=n.notification,u=n.id,d=(0,a.Z)((0,y.Z)(!0),2),p=d[0],h=d[1];return(0,l.BX)(f.G7,{css:[f.l0.my(4),f.l0.mx(4)],children:[(0,l.BX)(f.G7,{role:"button",onClick:h,onKeyDown:h,tabIndex:0,css:[f.l0.flex.row,f.l0.rowWithGap(4),{"&:hover":{cursor:"pointer",".lspLog-requestMethod":{textDecoration:"underline"}}}],children:[(0,l.BX)(f.G7,{css:[f.l0.flex.grow(1),f.l0.rowWithGap(2)],children:[(0,l.tZ)(f.xv,{className:"lspLog-emoji",children:S(n)}),(0,l.BX)(f.xv,{className:"lspLog-requestMethod",children:[(0,l.tZ)("code",{children:null===(t=o||s)||void 0===t?void 0:t.method}),null!=u&&(0,l.BX)("code",{className:"lspLog-logId",css:{opacity:.5},children:["#",u]})]})]}),(0,l.tZ)(f.G7,{css:{opacity:.5},children:null!=i&&(0,l.BX)(f.xv,{css:f.l0.fontSize(13),children:[i.valueOf()-r.valueOf()," ms"]})})]}),!p&&(0,l.BX)(l.HY,{children:[void 0!==o&&(0,l.tZ)(E,{name:"request.params",src:o.params}),void 0!==s&&(0,l.tZ)(E,{name:"notification.params",src:s.params}),void 0!==c&&(0,l.tZ)(E,{name:"response",src:c})]})]})})),E=(0,c.memo)((function(e){var t=e.name,n=e.src;return(0,l.tZ)(f.G7,{css:{marginTop:5,".node-ellipsis":{letterSpacing:-2},".object-key span":{letterSpacing:0},".object-key-val":{paddingBottom:"0 !important"},'.object-key + span[style*="margin"], .array-key + span[style*="margin"]':{marginLeft:"0 !important"},".variable-row, .pushed-content .object-key-val":{paddingLeft:"10px !important",paddingBottom:"0 !important"}},children:(0,l.tZ)(b.C,{json:(0,r.Z)({},t,n)})})})),C=function(){return(0,l.tZ)(f.xv,{css:{display:"inline",fontStyle:"italic",fontWeight:600,textShadow:"".concat(f.TV.redDimmer," 2px 2px")},children:"LSP"})};function S(e){var t=e.type,n=e.canceled,r=e.response,i=e.notification;return"state"===t?(0,l.tZ)(g.Cpu,{}):"diagnostics"===t?(0,l.tZ)(g.Bug,{}):"capabilities"===t?(0,l.tZ)(g.Hamburger,{}):"probe"===t?(0,l.tZ)(g.Eye,{}):n?(0,l.tZ)(g.Close,{}):i?(0,l.tZ)(g.Info,{}):void 0!==r?(0,l.tZ)(g.Check,{}):(0,l.tZ)(m.Z,{})}},74454:function(e,t,n){n.d(t,{Z:function(){return i}});var r=n(67294);function i(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=(0,r.useState)(e),n=t[0],i=t[1],o=(0,r.useCallback)((function(){return i((function(e){return!e}))}),[]);return[n,o]}},67681:function(e,t,n){n.d(t,{Z:function(){return mc}});var r=n(14251),i=n(35944),o=n(9941),a=n(69779),l=n(60357),c=n.n(l),s=n(67294),u=n(63805),d=n(4989),f=n(69346),p=n(81255),h=n(79736),v=n(7919),m=n(45383),g=n(91296),y=n.n(g),Z=n(13482),b=n(2581),w=function(e){var t=e.buttons,n=e.onClick,r=e.onUndo,o=e.onRedo;return(0,i.BX)("nav",{className:"jsx-43582faf24448cbd",children:[t.map((function(e){return(0,i.tZ)("button",{onClick:function(t){t.stopPropagation(),t.preventDefault(),n(e)},className:"jsx-43582faf24448cbd",children:void 0!==e.label?e.label:e.value},e.value)})),(0,i.tZ)("button",{onClick:function(e){e.stopPropagation(),e.preventDefault(),r()},className:"jsx-43582faf24448cbd",children:(0,i.tZ)(h.Z,{})}),(0,i.tZ)("button",{onClick:function(e){e.stopPropagation(),e.preventDefault(),o()},className:"jsx-43582faf24448cbd",children:(0,i.tZ)(v.Z,{})}),(0,i.tZ)(c(),{id:"43582faf24448cbd",children:'nav.jsx-43582faf24448cbd{font-family:Monaco,Menlo,"Ubuntu Mono",Consolas,source-code-pro,monospace;height:48px;background-color:var(--background-root);display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:stretch;-webkit-align-items:stretch;-moz-box-align:stretch;-ms-flex-align:stretch;align-items:stretch}button.jsx-43582faf24448cbd{color:var(--foreground-default);padding:10px;font-family:inherit;font-size:16px;background-color:transparent;border:0 none;-webkit-box-flex:1;-webkit-flex:1 1 auto;-moz-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto}'})]})},x=[{value:"{}",cursorOffset:1},{value:"()",cursorOffset:1},{value:'""',cursorOffset:1}],E=function(e){var t=e.path,n=(0,a.Z)(x).concat([{value:"= ",cursorOffset:2}]);return t.endsWith(".html")&&(n.unshift({value:"<>",cursorOffset:1}),n.unshift({label:"div",value:"<div></div>",cursorOffset:5})),n},C="visualViewport"in window;function S(e){var t=e.filePath,n=e.isLoading,r=(0,b.uN)(),a=(0,d.Z)();s.useEffect((function(){a&&r&&r.requestMeasure({read:function(){return{cursor:r.coordsAtPos(r.state.selection.main.head),scroller:r.scrollDOM.getBoundingClientRect()}},write:function(e){var t=e.cursor,n=e.scroller;if(t){var i=(t.top+t.bottom)/2,o=(n.top+n.bottom)/2;Math.abs(i-o)>5&&(r.scrollDOM.scrollTop+=i-o+(Z.gn?50:0))}}})}),[a,r]);var l=(0,o.Z)(s.useState(0),2),c=l[0],h=l[1];if(s.useEffect((function(){if(Z.gn){var e=window.visualViewport;if(C&&e){var t=y()((function(){h(window.innerHeight-e.height-e.offsetTop)}),100);return e.addEventListener("scroll",t),e.addEventListener("resize",t),function(){e.removeEventListener("scroll",t),e.removeEventListener("resize",t)}}}}),[]),!a||n)return null;if(!(0,u.isMobile)({tablet:!1}))return null;var v=(0,i.tZ)(w,{onUndo:function(){r&&((0,m.Yw)(r),r.focus())},onRedo:function(){r&&((0,m.KX)(r),r.focus())},onClick:function(e){if(r){var t,n=null!==(t=r.state.selection.ranges[0].from)&&void 0!==t?t:0;r.dispatch({changes:{from:n,insert:e.value},selection:{anchor:n+e.cursorOffset}}),r.focus()}},buttons:E({path:t})});return!Z.gn||C?(0,i.tZ)(f.G,{css:[p.l0.position.fixed,p.l0.width("100%"),p.l0.zIndex(100),p.l0.bottom(c),p.l0.left(0)],children:v}):v}var T=n(31600),k=n(53201),_=[{img:"/public/images/kaboomdraw/rect.png",code:"\ndrawRect({\n\tpos: vec2(80, 80),\n\twidth: 120,\n\theight: 80,\n\tcolor: rgb(250, 242, 164),\n})\n    ".trim()},{img:"/public/images/kaboomdraw/triangle.png",code:"\ndrawTriangle({\n\tpos: vec2(100, 100),\n\tp1: vec2(0, -48),\n\tp2: vec2(-60, 48),\n\tp3: vec2(60, 48),\n\tcolor: rgb(164, 250, 204),\n})\n  ".trim()},{img:"/public/images/kaboomdraw/circle.png",code:"\ndrawCircle({\n\tpos: vec2(100, 100),\n\tradius: 48,\n\tcolor: rgb(181, 164, 250),\n})\n    ".trim()},{img:"/public/images/kaboomdraw/ellipse.png",code:"\ndrawEllipse({\n\tpos: vec2(120, 100),\n\tradiusX: 64,\n\tradiusY: 40,\n\tcolor: rgb(164, 209, 250),\n})\n    ".trim()},{img:"/public/images/kaboomdraw/polygon.png",code:"\ndrawPolygon({\n\tpos: vec2(100, 100),\n\tpts: [\n\t\tvec2(0, -48),\n\t\tvec2(-64, 0),\n\t\tvec2(-32, 64),\n\t\tvec2(32, 64),\n\t\tvec2(64, 0),\n\t],\n\tcolor: rgb(250, 164, 226),\n})\n    ".trim()},{img:"/public/images/kaboomdraw/text.png",code:'\ndrawText({\n\ttext: "hi",\n\tpos: vec2(60, 60),\n})\n    '.trim()}],R=function(e){var t=e.img,n=e.code,r=(0,o.Z)((0,k.c)({item:{type:T.z.Code,code:n},type:T.z.Code}),2)[1];return(0,i.tZ)("img",{alt:"kaboom shape",ref:r,src:t,css:[p.l0.p(12),{userDrag:"none",height:"100%",cursor:"pointer",transition:"0.1s transform",":hover":{transform:"scale(1.2)"}}]})},D=function(){return(0,i.tZ)(f.G,{css:[p.l0.flex.row,p.l0.justify.spaceEvenly,p.l0.backgroundColor.backgroundHigher,p.l0.borderRadius(8),p.l0.width("calc(100% - 32px)"),p.l0.height("64px"),p.l0.position.absolute,p.l0.overflowY("hidden"),{zIndex:5,left:16,bottom:16,border:"solid 1px var(--outline-dimmest)"}],children:_.map((function(e){return(0,i.tZ)(R,(0,r.Z)({},e),e.img)}))})},I=n(47979),P=n(52875),G=n(73935),B=n(68928),A=n(99408),U=n(8415),O=n(55528),N=n(4862);function L(e){var t=(0,o.Z)(s.useState(null),2),n=t[0],r=t[1];return s.useEffect((function(){if(e)return r((0,N.Z)(e)),e.onServerCapabilitiesChange((function(){r((0,N.Z)(e))}));r(null)}),[e]),n}var F=n(43186),X=n(34727),M=n(70655),W=n(78120),j=n(34790),H=n(14456),z=n(41656),V=n(27585),q=n(410),K=n(59641),$=n(92350),Y=n(91674),Q=n(9903),J={p:{padding:"".concat(K.TV.space2," ").concat(K.TV.space8),lineHeight:1.4,marginBottom:"".concat(K.TV.space8," !important")},"p:first-child":{marginTop:"".concat(K.TV.space4," !important")},"p:last-child":{marginBottom:"".concat(K.TV.space4," !important")},pre:{margin:"".concat(K.TV.space2," ").concat(K.TV.space8)},"pre + p":{borderTop:"1px solid ".concat(K.TV.outlineDimmest),paddingTop:K.TV.space4},"h1, h2, h3":{margin:"".concat(K.TV.space8," !important"),marginTop:"".concat(K.TV.space12," !important"),padding:"0 !important",paddingBottom:"".concat(K.TV.space4," !important"),fontSize:"100% !important",borderBottom:"1px solid ".concat(K.TV.backgroundHighest," !important"),lineHeight:1},"h1:first-child, h2:first-child, h3:first-child":{marginTop:"".concat(K.TV.space4," !important")},hr:{margin:"".concat(K.TV.space8," !important"),borderTop:"2px solid ".concat(K.TV.backgroundHighest," !important")},li:{margin:"".concat(K.TV.space2," ").concat(K.TV.space8)},".lsp-completion-detail":{borderBottom:"1px solid ".concat(K.TV.backgroundHighest),marginBottom:K.TV.space4},".cm-line":{paddingLeft:K.TV.space4,paddingRight:K.TV.space4},".cm-content":{paddingLeft:K.TV.space4,paddingRight:K.TV.space4}},ee=s.memo((function(e){var t=e.content,n=e.className;return(0,i.tZ)(K.G7,{css:J,children:(0,i.tZ)($.ZP,{className:n,components:{code:function(e){return(0,i.tZ)(Q.Z,(0,r.Z)({minimal:!0,disableCopy:!0},e))}},children:t})})}));function te(e){var t=e.content,n=e.className;return"string"===typeof t?(0,i.tZ)(ee,{css:[{p:{whiteSpace:"pre-wrap"}}],className:n,content:t}):t.kind===Y.a4.PlainText?(0,i.tZ)(K.G7,{children:(0,i.tZ)(K.xv,{className:n,multiline:!0,children:t.value})}):(0,i.tZ)(ee,{className:n,content:t.value})}var ne=(0,V.B)(),re=W.Py.define(),ie=W.QQ.define({create:function(){return null},update:function(e,t){if(!t.isUserEvent("input.type"))return e;if(t.changes.empty)return e;var n="";return t.changes.iterChanges((function(e,t,r,i,o){n=o.sliceString(0,1)})),n||null}});function oe(e){var t=e.lspClient,n=e.path,o=e.setDecoration,a=function(e){return G.createPortal((0,i.tZ)(ae,(0,r.Z)({},e)),l)},l=document.createElement("div"),c={};function s(e,t){return u.apply(this,arguments)}function u(){return u=(0,X.Z)((function(e,r){var i,o,a,l,c,s,u;return(0,M.__generator)(this,(function(f){switch(f.label){case 0:return(l=(null===(i=t.getServerCapabilities())||void 0===i||null===(o=i.signatureHelpProvider)||void 0===o?void 0:o.triggerCharacters)||[])?(c=e.field(d,!1),s=e.field(ie,!1),c||null!=s&&l.includes(s)?[4,ce(e,r,t,n)]:[2,null]):[2,null];case 1:return(null===(u=f.sent())||void 0===u||null===(a=u.signatures)||void 0===a?void 0:a.length)?[2,u]:[2,null]}}))})),u.apply(this,arguments)}var d=W.QQ.define({create:function(){return null},update:function(e,t){return t.isUserEvent("select.pointer")?null:(e&&t.newSelection.main.from!==e.pos&&(e=(0,P.Z)((0,r.Z)({},e),{pos:t.newSelection.main.from})),(0,q.j)(t,ne.effect,(function(n){var r=n.value;e=r?{pos:t.newSelection.main.from,create:function(){return function(e){var t=0,n=function(n){o((0,i.tZ)(a,{help:e,index:t,onLayout:n}))};return n(),c.dom=l,c.update=function(r){(0,q.j)(r,re,(function(i){var o=t+i.value;o>e.signatures.length-1||o<0?setTimeout((function(){r.view.dispatch({effects:ne.effect.of(null)})})):t=o,n((function(){(0,H.E2)(r.view)}))}))},c}(r)},above:!0}:null})),e)},provide:function(e){return H.hJ.from(e)}}),f=H.lg.define((function(){var e=y()(function(){var e=(0,X.Z)((function(e){var t,n;return(0,M.__generator)(this,(function(r){switch(r.label){case 0:return(t=e.state.selection.main).empty?[4,s(e.state,t.from)]:[3,2];case 1:(n=r.sent())&&(0,j._B)(e),e.dispatch({effects:ne.effect.of(n)}),r.label=2;case 2:return[2]}}))}));return function(t){return e.apply(this,arguments)}}(),0);return{update:function(t){t.transactions.some((function(e){return e.selection}))&&t.state.selection.main.empty&&e(t.view)}}})),p=function(e){return function(t){return!!function(e){var t=e.state.field(ne.state,!1);return null!=t&&t.signatures.length>1}(t)&&(t.dispatch({effects:re.of(e)}),!0)}},h=[{key:"ArrowDown",run:p(1)},{key:"ArrowUp",run:p(-1)},{key:"Escape",run:function(e){return!!e.state.field(ne.state,!1)&&(e.dispatch({effects:ne.effect.of(null)}),!0)}}];return[d,ne.state,ie,f,W.Wl.high(H.$f.of(h))]}var ae=function(e){var t,n,r=e.help,o=e.index,a=e.onLayout,l="1px solid ".concat(p.TV.outlineDimmest),c="min(425px, 80vw)";s.useLayoutEffect((function(){return null===a||void 0===a?void 0:a()}),[a]);var u=r.signatures[o],d=r.signatures.length>1;if(!u)return null;var h=u.documentation,v=null!=r.activeParameter&&(null===(t=u.parameters)||void 0===t||null===(n=t[r.activeParameter])||void 0===n?void 0:n.documentation);return(0,i.BX)(f.G,{css:[p.l0.flex.row,{width:"max-content"}],children:[d?(0,i.tZ)(f.G,{css:[p.l0.flex.row,p.l0.pl(4),{borderRight:l,paddingBottom:5}],children:(0,i.BX)("span",{css:[{alignSelf:"flex-end"},p.l0.p(4)],children:[o+1,"/",r.signatures.length]})}):null,(0,i.BX)(f.G,{children:[(0,i.tZ)(f.G,{css:[p.l0.py(4),p.l0.pl(d?4:8),p.l0.pr(8),p.l0.maxHeight(100),p.l0.overflowY("scroll"),p.l0.font.code,{lineHeight:p.TV.lineHeightSmall,maxWidth:c}],children:(0,i.tZ)(le,{signature:u,activeParameter:r.activeParameter})}),Boolean(h||v)&&(0,i.BX)(f.G,{css:[p.l0.px(d?4:8),p.l0.py(2),p.l0.maxHeight(200),p.l0.overflow("scroll"),{borderTop:l,maxWidth:c}],children:[v?(0,i.tZ)(te,{content:v}):null,h?(0,i.tZ)(te,{content:h}):null]})]})]})};function le(e){var t,n=e.signature,r=n.label,a=n.parameters,l=e.activeParameter;if(null==l||!a)return(0,i.tZ)("span",{children:r});var c=null===(t=a[l])||void 0===t?void 0:t.label;if(!c)return(0,i.tZ)("span",{children:r});var s=(0,o.Z)("string"===typeof c?[r.indexOf(c),r.indexOf(c)+c.length]:c,2),u=s[0],d=s[1];return(0,i.BX)("div",{children:[(0,i.tZ)("span",{children:r.slice(0,u)}),(0,i.tZ)("strong",{children:c}),(0,i.tZ)("span",{children:r.slice(d)})]})}function ce(e,t,n,r){return se.apply(this,arguments)}function se(){return se=(0,X.Z)((function(e,t,n,r){var i;return(0,M.__generator)(this,(function(o){switch(o.label){case 0:return[4,n.request.signatureHelp(r,(0,z.s)(e.doc,t))];case 1:return"error"in(i=o.sent())?[2,null]:[2,i.result]}}))})),se.apply(this,arguments)}var ue=n(24920);function de(e){var t=e.lspClient,n=e.path;return H.tk.updateListener.of((function(e){var r;if(e.docChanged){var i=null===(r=t.getServerCapabilities())||void 0===r?void 0:r.textDocumentSync;if(i!==ue.TextDocumentSyncKind.None&&t.isOpen(n))if(i!==ue.TextDocumentSyncKind.Full)t.notify.didChange(n,function(e,t){var n=[],r=t;return e.iterChanges((function(e,t,i,o,a){var l=a.sliceString(0),c=t-e,s=c+i;n.push({range:{start:(0,z.s)(r,i),end:(0,z.s)(r,s)},rangeLength:c,text:l}),r=r.replace(i,s,a)})),n}(e.changes,e.startState.doc));else{var o=e.view.state.doc.toString();t.notify.didChange(n,[{text:o}])}}}))}var fe=n(64487),pe=n(28519);function he(e){var t=e.lspClient,n=e.path;return H.lg.define((function(e){var r=t.onDiagnostics((function(t){if(t.path===n){var r=function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,l=function(){var e=a.value,r=(0,z.R)(t.doc,e.range.start),i=(0,z.R)(t.doc,e.range.end);if(r===i){var o=t.wordAt(i);if(o)r=o.from,i=o.to;else{if(!(i<t.doc.length))return"continue";i+=1}}if(r>=i)return fe.$e((function(t){t.setExtra("diagnostic",e),t.setExtra("range",{from:r,to:i}),fe.Tb(new Error("Exptected diagnostic range to not be empty"))})),"continue";var l="info";switch(e.severity){case Y.H_.Error:l="error";break;case Y.H_.Warning:l="warning";break;case Y.H_.Hint:case Y.H_.Information:l="info"}n.push({from:r,to:i,severity:l,message:e.message,source:e.source})},c=e[Symbol.iterator]();!(r=(a=c.next()).done);r=!0)l()}catch(s){i=!0,o=s}finally{try{r||null==c.return||c.return()}finally{if(i)throw o}}return n}(t.diagnostics,e.state);e.dispatch((0,pe.p0)(e.state,r))}}));return{destroy:function(){r()}}}))}var ve,me,ge=n(67573),ye=n(1864),Ze=n(75815),be=n(90132),we=n(44747),xe=n(48270),Ee=n(59119),Ce=n(18352),Se=n(69923),Te=n(11550),ke=n(48732);!function(e){e[e.Dollar=0]="Dollar",e[e.Colon=1]="Colon",e[e.Comma=2]="Comma",e[e.CurlyOpen=3]="CurlyOpen",e[e.CurlyClose=4]="CurlyClose",e[e.Backslash=5]="Backslash",e[e.Forwardslash=6]="Forwardslash",e[e.Pipe=7]="Pipe",e[e.Int=8]="Int",e[e.VariableName=9]="VariableName",e[e.Format=10]="Format",e[e.Plus=11]="Plus",e[e.Dash=12]="Dash",e[e.QuestionMark=13]="QuestionMark",e[e.EOF=14]="EOF"}(ve||(ve={})),function(e){e[e.DollarSign=36]="DollarSign",e[e.Plus=43]="Plus",e[e.Comma=44]="Comma",e[e.Dash=45]="Dash",e[e.Slash=47]="Slash",e[e.Digit0=48]="Digit0",e[e.Digit9=57]="Digit9",e[e.Colon=58]="Colon",e[e.QuestionMark=63]="QuestionMark",e[e.A=65]="A",e[e.Z=90]="Z",e[e.Backslash=92]="Backslash",e[e.Underline=95]="Underline",e[e.a=97]="a",e[e.z=122]="z",e[e.OpenCurlyBrace=123]="OpenCurlyBrace",e[e.Pipe=124]="Pipe",e[e.CloseCurlyBrace=125]="CloseCurlyBrace"}(me||(me={}));var _e,Re=function(){function e(){(0,Ze.Z)(this,e),this.value="",this.pos=0}var t=e.prototype;return t.text=function(e){this.value=e,this.pos=0},t.tokenText=function(e){return this.value.substr(e.pos,e.len)},t.next=function(){if(this.pos>=this.value.length)return{type:14,pos:this.pos,len:0};var t,n=this.pos,r=0,i=this.value.charCodeAt(n);if("number"===typeof(t=e._table[i]))return this.pos+=1,{type:t,pos:n,len:1};if(e.isDigitCharacter(i)){t=8;do{r+=1,i=this.value.charCodeAt(n+r)}while(e.isDigitCharacter(i));return this.pos+=r,{type:t,pos:n,len:r}}if(e.isVariableCharacter(i)){t=9;do{i=this.value.charCodeAt(n+ ++r)}while(e.isVariableCharacter(i)||e.isDigitCharacter(i));return this.pos+=r,{type:t,pos:n,len:r}}t=10;do{r+=1,i=this.value.charCodeAt(n+r)}while(!isNaN(i)&&"undefined"===typeof e._table[i]&&!e.isDigitCharacter(i)&&!e.isVariableCharacter(i));return this.pos+=r,{type:t,pos:n,len:r}},e.isDigitCharacter=function(e){return e>=48&&e<=57},e.isVariableCharacter=function(e){return 95===e||e>=97&&e<=122||e>=65&&e<=90},e}();Re._table=(_e={},(0,ge.Z)(_e,36,0),(0,ge.Z)(_e,58,1),(0,ge.Z)(_e,44,2),(0,ge.Z)(_e,123,3),(0,ge.Z)(_e,125,4),(0,ge.Z)(_e,92,5),(0,ge.Z)(_e,47,6),(0,ge.Z)(_e,124,7),(0,ge.Z)(_e,43,11),(0,ge.Z)(_e,45,12),(0,ge.Z)(_e,63,13),_e);var De=function(){function e(){var t;(0,Ze.Z)(this,e),this._children=[],t=this,["parent"].forEach((function(e){Object.defineProperty(t,e,{enumerable:!1,writable:!0})}))}var t=e.prototype;return t.appendChild=function(e){return(0,ke.Z)(e,Ie)&&(0,ke.Z)(this._children[this._children.length-1],Ie)?this._children[this._children.length-1].value+=e.value:(e.parent=this,this._children.push(e)),this},t.replace=function(e,t){var n,r=e.parent,i=r.children.indexOf(e),o=r.children.slice(0);(n=o).splice.apply(n,[i,1].concat((0,a.Z)(t))),r._children=o,function e(t,n){var r=!0,i=!1,o=void 0;try{for(var a,l=t[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value;c.parent=n,e(c.children,c)}}catch(s){i=!0,o=s}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}}(t,r)},t.toString=function(){return this.children.reduce((function(e,t){return e+t.toString()}),"")},t.len=function(){return 0},t.match=function(e){var t=!0,n=!1,r=void 0;try{for(var i,a=Object.entries(Xe)[Symbol.iterator]();!(t=(i=a.next()).done);t=!0){var l=(0,o.Z)(i.value,2),c=l[0],s=l[1];if((0,ke.Z)(this,s)&&c in e)return e[c](this)}}catch(u){n=!0,r=u}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}},(0,Ce.Z)(e,[{key:"children",get:function(){return this._children}},{key:"snippet",get:function(){for(var e=this;;){if(!e)return;if((0,ke.Z)(e,Le))return e;e=e.parent}}}]),e}(),Ie=function(e){(0,be.Z)(n,e);var t=(0,xe.Z)(n);function n(e){var r;return(0,Ze.Z)(this,n),(r=t.call(this)).value=e,r}var r=n.prototype;return r.toString=function(){return this.value},r.toTextmateString=function(){return n.escape(this.value)},r.len=function(){return this.value.length},r.clone=function(){return new n(this.value)},n.escape=function(e){return e.replace(/\$|}|\\/g,"\\$&")},n}(De),Pe=function(e){(0,be.Z)(n,e);var t=(0,xe.Z)(n);function n(){return(0,Ze.Z)(this,n),t.apply(this,arguments)}return n}(De),Ge=function(e){(0,be.Z)(n,e);var t=(0,xe.Z)(n);function n(e){var r;return(0,Ze.Z)(this,n),(r=t.call(this)).index=e,r}var r=n.prototype;return r.toTextmateString=function(){var e="";return this.transform&&(e=this.transform.toTextmateString()),0!==this.children.length||this.transform?0===this.children.length?"${".concat(this.index).concat(e,"}"):this.choice?"${".concat(this.index,"|").concat(this.choice.toTextmateString(),"|").concat(e,"}"):"${".concat(this.index,":").concat(this.children.map((function(e){return e.toTextmateString()})).join("")).concat(e,"}"):"$".concat(this.index)},r.clone=function(){var e=new n(this.index);return this.transform&&(e.transform=this.transform.clone()),e._children=this.children.map((function(e){return e.clone()})),e},n.compareByIndex=function(e,t){return e.index===t.index?0:e.isFinalTabstop?1:t.isFinalTabstop||e.index<t.index?-1:e.index>t.index?1:0},(0,Ce.Z)(n,[{key:"isFinalTabstop",get:function(){return 0===this.index}},{key:"choice",get:function(){return 1===this._children.length&&(0,ke.Z)(this._children[0],Be)?this._children[0]:void 0}}]),n}(Pe),Be=function(e){(0,be.Z)(n,e);var t=(0,xe.Z)(n);function n(){var e;return(0,Ze.Z)(this,n),(e=t.apply(this,arguments)).options=[],e}var r=n.prototype;return r.appendChild=function(e){return(0,ke.Z)(e,Ie)&&(e.parent=this,this.options.push(e)),this},r.toString=function(){return this.options[0].value},r.toTextmateString=function(){return this.options.map((function(e){return e.value.replace(/\||,/g,"\\$&")})).join(",")},r.len=function(){return this.options[0].len()},r.clone=function(){var e=new n;return this.options.forEach(e.appendChild,e),e},n}(De),Ae=function(e){(0,be.Z)(n,e);var t=(0,xe.Z)(n);function n(){var e;return(0,Ze.Z)(this,n),(e=t.apply(this,arguments)).regexp=new RegExp(""),e}var r=n.prototype;return r.resolve=function(e){var t=this,n=!1,r=e.replace(this.regexp,(function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return n=!0,t._replace(r.slice(0,-2))}));return!n&&this._children.some((function(e){return(0,ke.Z)(e,Ue)&&Boolean(e.elseValue)}))&&(r=this._replace([])),r},r._replace=function(e){var t="",n=!0,r=!1,i=void 0;try{for(var o,a=this._children[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;if((0,ke.Z)(l,Ue)){var c=e[l.index]||"";t+=c=l.resolve(c)}else t+=l.toString()}}catch(s){r=!0,i=s}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return t},r.toString=function(){return""},r.toTextmateString=function(){return"/".concat(this.regexp.source,"/").concat(this.children.map((function(e){return e.toTextmateString()})),"/").concat((this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":""))},r.clone=function(){var e=new n;return e.regexp=new RegExp(this.regexp.source,(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")),e._children=this.children.map((function(e){return e.clone()})),e},n}(De),Ue=function(e){(0,be.Z)(n,e);var t=(0,xe.Z)(n);function n(e,r,i,o){var a;return(0,Ze.Z)(this,n),(a=t.call(this)).index=e,a.shorthandName=r,a.ifValue=i,a.elseValue=o,a}var r=n.prototype;return r.resolve=function(e){return"upcase"===this.shorthandName?e?e.toLocaleUpperCase():"":"downcase"===this.shorthandName?e?e.toLocaleLowerCase():"":"capitalize"===this.shorthandName?e?e[0].toLocaleUpperCase()+e.substr(1):"":"pascalcase"===this.shorthandName?e?this._toPascalCase(e):"":"camelcase"===this.shorthandName?e?this._toCamelCase(e):"":Boolean(e)&&"string"===typeof this.ifValue?this.ifValue:e||"string"!==typeof this.elseValue?e||"":this.elseValue},r._toPascalCase=function(e){var t=e.match(/[a-z0-9]+/gi);return t?t.map((function(e){return e.charAt(0).toUpperCase()+e.substr(1)})).join(""):e},r._toCamelCase=function(e){var t=e.match(/[a-z0-9]+/gi);return t?t.map((function(e,t){return 0===t?e.charAt(0).toLowerCase()+e.substr(1):e.charAt(0).toUpperCase()+e.substr(1)})).join(""):e},r.toTextmateString=function(){var e="${";return e+=this.index,this.shorthandName?e+=":/".concat(this.shorthandName):this.ifValue&&this.elseValue?e+=":?".concat(this.ifValue,":").concat(this.elseValue):this.ifValue?e+=":+".concat(this.ifValue):this.elseValue&&(e+=":-".concat(this.elseValue)),e+="}"},r.clone=function(){return new n(this.index,this.shorthandName,this.ifValue,this.elseValue)},n}(De),Oe=function(e){(0,be.Z)(n,e);var t=(0,xe.Z)(n);function n(e){var r;return(0,Ze.Z)(this,n),(r=t.call(this)).name=e,r}var r=n.prototype;return r.resolve=function(e){var t=e.resolve(this);return this.transform&&(t=this.transform.resolve(t||"")),void 0!==t&&(this._children=[new Ie(t)],!0)},r.toTextmateString=function(){var e="";return this.transform&&(e=this.transform.toTextmateString()),0===this.children.length?"${".concat(this.name).concat(e,"}"):"${".concat(this.name,":").concat(this.children.map((function(e){return e.toTextmateString()})).join("")).concat(e,"}")},r.clone=function(){var e=new n(this.name);return this.transform&&(e.transform=this.transform.clone()),e._children=this.children.map((function(e){return e.clone()})),e},n}(Pe);function Ne(e,t){for(var n=(0,a.Z)(e);n.length>0;){var r,i=n.shift();if(!t(i))break;(r=n).unshift.apply(r,(0,a.Z)(i.children))}}var Le=function(e){(0,be.Z)(n,e);var t=(0,xe.Z)(n);function n(){return(0,Ze.Z)(this,n),t.apply(this,arguments)}var r=n.prototype;return r.offset=function(e){var t=0,n=!1;return this.walk((function(r){return r===e?(n=!0,!1):(t+=r.len(),!0)})),n?t:-1},r.fullLen=function(e){var t=0;return Ne([e],(function(e){return t+=e.len(),!0})),t},r.enclosingPlaceholders=function(e){for(var t=[],n=e.parent;n;)(0,ke.Z)(n,Ge)&&t.push(n),n=n.parent;return t},r.resolveVariables=function(e){var t=this;return this.walk((function(n){return(0,ke.Z)(n,Oe)&&n.resolve(e)&&delete t._placeholders,!0})),this},r.appendChild=function(e){return delete this._placeholders,(0,Se.Z)((0,Te.Z)(n.prototype),"appendChild",this).call(this,e)},r.replace=function(e,t){return delete this._placeholders,(0,Se.Z)((0,Te.Z)(n.prototype),"replace",this).call(this,e,t)},r.toTextmateString=function(){return this.children.reduce((function(e,t){return e+t.toTextmateString()}),"")},r.clone=function(){var e=new n;return this._children=this.children.map((function(e){return e.clone()})),e},r.walk=function(e){Ne(this.children,e)},(0,Ce.Z)(n,[{key:"placeholderInfo",get:function(){if(!this._placeholders){var e,t=[];this.walk((function(n){return(0,ke.Z)(n,Ge)&&(t.push(n),e=!e||e.index<n.index?n:e),!0})),this._placeholders={all:t,last:e}}return this._placeholders}},{key:"placeholders",get:function(){return this.placeholderInfo.all}}]),n}(De),Fe=function(){function e(){(0,Ze.Z)(this,e),this._scanner=new Re,this._token={type:14,pos:0,len:0}}var t=e.prototype;return t.text=function(e){return this.parse(e).toString()},t.parse=function(e,t,n){this._scanner.text(e),this._token=this._scanner.next();for(var r=new Le;this._parse(r););var i=new Map,o=[],a=0;r.walk((function(e){return(0,ke.Z)(e,Ge)&&(a+=1,e.isFinalTabstop?i.set(0,void 0):!i.has(e.index)&&e.children.length>0?i.set(e.index,e.children):o.push(e)),!0}));var l=!0,c=!1,s=void 0;try{for(var u,d=o[Symbol.iterator]();!(l=(u=d.next()).done);l=!0){var f=u.value,p=i.get(f.index);if(p){var h=new Ge(f.index);h.transform=f.transform;var v=!0,m=!1,g=void 0;try{for(var y,Z=p[Symbol.iterator]();!(v=(y=Z.next()).done);v=!0){var b=y.value;h.appendChild(b.clone())}}catch(w){m=!0,g=w}finally{try{v||null==Z.return||Z.return()}finally{if(m)throw g}}r.replace(f,[h])}}}catch(w){c=!0,s=w}finally{try{l||null==d.return||d.return()}finally{if(c)throw s}}return n||(n=a>0&&t),!i.has(0)&&n&&r.appendChild(new Ge(0)),r},t._accept=function(e,t){if(void 0===e||this._token.type===e){var n=!t||this._scanner.tokenText(this._token);return this._token=this._scanner.next(),n}return!1},t._backTo=function(e){return this._scanner.pos=e.pos+e.len,this._token=e,!1},t._until=function(e){for(var t=this._token;this._token.type!==e;){if(14===this._token.type)return!1;if(5===this._token.type){var n=this._scanner.next();if(0!==n.type&&4!==n.type&&5!==n.type)return!1}this._token=this._scanner.next()}var r=this._scanner.value.substring(t.pos,this._token.pos).replace(/\\(\$|}|\\)/g,"$1");return this._token=this._scanner.next(),r},t._parse=function(e){return this._parseEscaped(e)||this._parseTabstopOrVariableName(e)||this._parseComplexPlaceholder(e)||this._parseComplexVariable(e)||this._parseAnything(e)},t._parseEscaped=function(e){var t;return!!(t=this._accept(5,!0))&&(t=this._accept(0,!0)||this._accept(4,!0)||this._accept(5,!0)||t,e.appendChild(new Ie(t)),!0)},t._parseTabstopOrVariableName=function(e){var t,n=this._token;return this._accept(0)&&(t=this._accept(9,!0)||this._accept(8,!0))?(e.appendChild(/^\d+$/.test(t)?new Ge(Number(t)):new Oe(t)),!0):this._backTo(n)},t._parseComplexPlaceholder=function(e){var t,n=this._token;if(!(this._accept(0)&&this._accept(3)&&(t=this._accept(8,!0))))return this._backTo(n);var r=new Ge(Number(t));if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(r),!0;if(!this._parse(r))return e.appendChild(new Ie("${"+t+":")),r.children.forEach(e.appendChild,e),!0}else{if(!(r.index>0&&this._accept(7)))return this._accept(6)?this._parseTransform(r)?(e.appendChild(r),!0):(this._backTo(n),!1):this._accept(4)?(e.appendChild(r),!0):this._backTo(n);for(var i=new Be;;){if(this._parseChoiceElement(i)){if(this._accept(2))continue;if(this._accept(7)&&(r.appendChild(i),this._accept(4)))return e.appendChild(r),!0}return this._backTo(n),!1}}},t._parseChoiceElement=function(e){for(var t=this._token,n=[];2!==this._token.type&&7!==this._token.type;){var r=void 0;if(!(r=(r=this._accept(5,!0))?this._accept(2,!0)||this._accept(7,!0)||this._accept(5,!0)||r:this._accept(void 0,!0)))return this._backTo(t),!1;n.push(r)}return 0===n.length?(this._backTo(t),!1):(e.appendChild(new Ie(n.join(""))),!0)},t._parseComplexVariable=function(e){var t,n=this._token;if(!(this._accept(0)&&this._accept(3)&&(t=this._accept(9,!0))))return this._backTo(n);var r=new Oe(t);if(!this._accept(1))return this._accept(6)?this._parseTransform(r)?(e.appendChild(r),!0):(this._backTo(n),!1):this._accept(4)?(e.appendChild(r),!0):this._backTo(n);for(;;){if(this._accept(4))return e.appendChild(r),!0;if(!this._parse(r))return e.appendChild(new Ie("${"+t+":")),r.children.forEach(e.appendChild,e),!0}},t._parseTransform=function(e){for(var t=new Ae,n="",r="";!this._accept(6);){var i=void 0;if(i=this._accept(5,!0))n+=i=this._accept(6,!0)||i;else{if(14===this._token.type)return!1;n+=this._accept(void 0,!0)}}for(;!this._accept(6);){var o=void 0;if(o=this._accept(5,!0))o=this._accept(5,!0)||this._accept(6,!0)||o,t.appendChild(new Ie(o));else if(!this._parseFormatString(t)&&!this._parseAnything(t))return!1}for(;!this._accept(4);){if(14===this._token.type)return!1;r+=this._accept(void 0,!0)}try{t.regexp=new RegExp(n,r)}catch(a){return!1}return e.transform=t,!0},t._parseFormatString=function(e){var t=this._token;if(!this._accept(0))return!1;var n=!1;this._accept(3)&&(n=!0);var r=this._accept(8,!0);if(!r)return this._backTo(t),!1;if(!n)return e.appendChild(new Ue(Number(r))),!0;if(this._accept(4))return e.appendChild(new Ue(Number(r))),!0;if(!this._accept(1))return this._backTo(t),!1;if(this._accept(6)){var i=this._accept(9,!0);return i&&this._accept(4)?(e.appendChild(new Ue(Number(r),i)),!0):(this._backTo(t),!1)}if(this._accept(11)){var o=this._until(4);if(o)return e.appendChild(new Ue(Number(r),void 0,o,void 0)),!0}else if(this._accept(12)){var a=this._until(4);if(a)return e.appendChild(new Ue(Number(r),void 0,void 0,a)),!0}else if(this._accept(13)){var l=this._until(1);if(l){var c=this._until(4);if(c)return e.appendChild(new Ue(Number(r),void 0,l,c)),!0}}else{var s=this._until(4);if(s)return e.appendChild(new Ue(Number(r),void 0,void 0,s)),!0}return this._backTo(t),!1},t._parseAnything=function(e){return 14!==this._token.type&&(e.appendChild(new Ie(this._scanner.tokenText(this._token))),this._accept(void 0),!0)},e.escape=function(e){return e.replace(/\$|}|\\/g,"\\$&")},e.guessNeedsClipboard=function(e){return/\${?CLIPBOARD/.test(e)},e}(),Xe={Text:Ie,Placeholder:Ge,Variable:Oe,FormatString:Ue,Choice:Be};function Me(e,t){var n=t.mapPos(e.from,-1,W.gc.TrackDel),r=t.mapPos(e.to,1,W.gc.TrackDel);return null==n||null==r?null:{field:e.field,from:n,to:r}}var We=function(){function e(t){(0,Ze.Z)(this,e),this.lines=t.split(/\r\n?|\n/).map((function(e){return(new Fe).parse(e).children}))}return e.prototype.apply=function(t){var n=t.view,r=t.from,i=t.to,o=e.instantiate(this.lines,t),a=o.text,l=o.ranges,c={from:r,to:i,insert:W.xv.of(a)},s={changes:c,scrollIntoView:!0};if(l.length&&(s.selection=$e(l,0)),l.length>1){var u=new ze(l,0),d=s.effects=[Ve.of(u)];void 0===n.state.field(Ke,!1)&&d.push(W.Py.appendConfig.of([Ke,Qe,Je]))}if(r===i&&!l.length){var f=W.as.of(c,n.state.doc.length),p=n.state.selection.ranges.map((function(e){return e.map(f,0)}));s.selection=W.jT.create(p,n.state.selection.mainIndex)}return s},e.resolveVariable=function(e,t){var n=t.view,r=t.from,i=t.path;switch(e){case"TM_FILENAME":return(0,ye.basename)(i);case"TM_FILENAME_BASE":return(0,ye.basename)(i,(0,ye.extname)(i));case"TM_DIRECTORY":return(0,ye.dirname)(i);case"TM_FILEPATH":return i;case"TM_LINE_INDEX":return(n.state.doc.lineAt(r).number-1).toString();case"TM_LINE_NUMBER":return n.state.doc.lineAt(r).number.toString();default:return e}},e.instantiate=function(t,n){var i,o=n.view,l=n.from,c=o.state,s=[],u=[],d=c.doc.lineAt(l),f=/^\s*/.exec(d.text)[0],p=c.facet(Ee.c),h=!0,v=!1,m=void 0;try{for(var g,y=function(){var t=g.value,r=0,i="",o=function(e){var t=0,n=r;if(0===r&&(t=/^\t*/.exec(e)[0].length)){var o=f+p.repeat(t);e=o+e.slice(t),n+=o.length}return i+=e,r+=e.length,{line:s.length,from:n,to:r}},a=function(t){var i=!0,c=!1,d=void 0;try{for(var f,p=t[Symbol.iterator]();!(i=(f=p.next()).done);i=!0){f.value.match({Text:function(e){o(e.value)},Variable:function(t){var r=t.name,i=t.transform,a=e.resolveVariable(r,n);i&&(a=a.replace(i.regexp,(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.children.map((function(e){return e.match({Text:function(e){return e.value},FormatString:function(e){return e.resolve(t[e.index])}})})).filter(Boolean).join("")}))),o(a)},Choice:function(e){o(e.options[0].value)},Placeholder:function(e){var t,n=s.length?l+s.map((function(e){return e.length})).reduce((function(e,t){return e+t})):l;if(null===(t=e.children)||void 0===t?void 0:t.length){var i={field:e.index,from:n+r,to:null};u.push(i),a(e.children),i.to=n+r}else{o("");var c=n+r;u.push({field:e.index,from:c,to:c})}}})}}catch(h){c=!0,d=h}finally{try{i||null==p.return||p.return()}finally{if(c)throw d}}};a(t),s.push(i)},Z=t[Symbol.iterator]();!(h=(g=Z.next()).done);h=!0)y()}catch(w){v=!0,m=w}finally{try{h||null==Z.return||Z.return()}finally{if(v)throw m}}var b=(i=Math).max.apply(i,(0,a.Z)(u.map((function(e){return e.field}))));return{text:s,ranges:u.map((function(e){var t=e.field,n=(0,we.Z)(e,["field"]);return(0,P.Z)((0,r.Z)({},n),{field:0===t?b:t-1})}))}},e}(),je=H.p.widget({widget:new(function(e){(0,be.Z)(n,e);var t=(0,xe.Z)(n);function n(){return(0,Ze.Z)(this,n),t.apply(this,arguments)}var r=n.prototype;return r.toDOM=function(){var e=document.createElement("span");return e.className="cm-snippetFieldPosition",e},r.ignoreEvent=function(){return!1},n}(H.l9))}),He=H.p.mark({class:"cm-snippetField"}),ze=function(){function e(t,n){(0,Ze.Z)(this,e),this.ranges=t,this.active=n,this.deco=H.p.set(t.map((function(e){return(e.from===e.to?je:He).range(e.from,e.to)})))}var t=e.prototype;return t.map=function(t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,l=this.ranges[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=Me(a.value,t);if(!c)return null;n.push(c)}}catch(s){i=!0,o=s}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return new e(n,this.active)},t.isSelectionInsideField=function(e){var t=this;return e.ranges.every((function(e){return t.ranges.some((function(n){return n.field===t.active&&n.from<=e.from&&n.to>=e.to}))}))},e}(),Ve=W.Py.define({map:function(e,t){return null===e||void 0===e?void 0:e.map(t)}}),qe=W.Py.define(),Ke=W.QQ.define({create:function(){return null},update:function(e,t){var n=!0,r=!1,i=void 0;try{for(var o,a=t.effects[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;if(l.is(Ve))return l.value;if(l.is(qe)&&e)return new ze(e.ranges,l.value)}}catch(c){r=!0,i=c}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return e&&t.docChanged&&(e=e.map(t.changes)),e&&t.selection&&!e.isSelectionInsideField(t.selection)&&(e=null),e},provide:function(e){return H.tk.decorations.from(e,(function(e){return e?e.deco:H.p.none}))}});function $e(e,t){var n=e.filter((function(e){return e.field===t})).map((function(e){return W.jT.range(e.from,e.to)}));if(0!==n.length)return W.jT.create(n)}function Ye(e){return function(t){var n,r=t.state,i=t.dispatch,o=r.field(Ke,!1);if(!o||e<0&&0===o.active)return!1;var l=o.active+e,c=(n=Math).max.apply(n,(0,a.Z)(o.ranges.map((function(e){return e.field})))),s=e>0&&o.active>=c;return i(r.update({selection:$e(o.ranges,l),effects:Ve.of(s?null:new ze(o.ranges,l))})),!0}}var Qe=W.Wl.highest(H.$f.of([{key:"Tab",run:Ye(1),shift:Ye(-1)},{key:"Escape",run:function(e){var t=e.state,n=e.dispatch;return!!t.field(Ke,!1)&&(n(t.update({effects:Ve.of(null)})),!0)}}])),Je=H.tk.domEventHandlers({mousedown:function(e,t){var n,r=t.state.field(Ke,!1);if(!r||null==(n=t.posAtCoords({x:e.clientX,y:e.clientY})))return!1;var i=r.ranges.find((function(e){return e.from<=n&&e.to>=n}));return!(!i||i.field===r.active)&&(t.dispatch({selection:$e(r.ranges,i.field),effects:Ve.of(r.ranges.some((function(e){return e.field>i.field}))?new ze(r.ranges,i.field):null)}),!0)}});function et(e){var t=Object.keys(e).join(""),n=/\w/.test(t);return n&&(t=t.replace(/\w/g,"")),"[".concat(n?"\\w":"").concat(t.replace(".","").replace(/[^\w\s]/g,"\\$&"),"]")}function tt(e,t){var n=e.state,r=e.pos;if(e.explicit)return{triggerKind:ue.CompletionTriggerKind.Invoked};var i=n.doc.lineAt(r),o=i.text[r-i.from-1],a=i.text.substring(0,r-i.from);if(null===t||void 0===t?void 0:t.includes(o)){var l=o;return{triggerKind:ue.CompletionTriggerKind.TriggerCharacter,triggerCharacter:l}}return a.match(/\w$/)?{triggerKind:ue.CompletionTriggerKind.Invoked}:null}var nt=Object.entries(Y.cm).reduce((function(e,t){var n=(0,o.Z)(t,2),i=n[0],a=n[1];return(0,r.Z)((0,ge.Z)({},a,i.toLowerCase()),e)}),{});function rt(e,t){var n=(0,z.R)(e.state.doc,t.range.start),r=(0,z.R)(e.state.doc,t.range.end);if(null!==n&&null!==r)return{from:n,to:r,insert:t.newText}}function it(e){var t=e.context,n=e.items,l=e.client,c=e.path,s=e.setDecoration,u=n.filter((function(e){return Boolean(e.label)})).map((function(e){var t=e.additionalTextEdits,n={label:e.label,detail:e.detail,apply:function(n,i,l,s){if(e.insertTextFormat!==Y.lO.Snippet){var u=function(e){var t,n=e.view,i=e.item,a=e.from,l=e.to,c=n.state,s=c.doc,u=c.selection,d=[];if(i.textEdit){var f=i.textEdit,p=f.range,h=f.newText,v=(0,z.R)(s,p.start),m=(0,z.R)(s,p.end);if(null===v||null===m)return;d.push({from:v,insert:h,to:Math.max(m,u.main.to)})}else{var g=i.insertText||i.label;d.push({from:a,to:l,insert:g})}var y=(0,o.Z)(d,1)[0],Z="";null===(t=i.additionalTextEdits)||void 0===t||t.forEach((function(e){var t=rt(n,e);t&&("from"in y&&t.from===y.from&&(Z=t.insert),d.push(t))}));var b=l-a;u.ranges.forEach((function(e){if(e!==u.main){if(!("insert"in y)||!y.insert)throw new Error("Expected insert in mainChange");var t=e.from-b,n=Z+y.insert;d.push({from:t,to:e.to,insert:n})}}));var w=d.map((function(e){return"from"in e&&"undefined"!==typeof e.to?(0,P.Z)((0,r.Z)({},e),{from:Math.min(e.from,e.to),to:Math.max(e.from,e.to)}):e})),x=W.as.of(w,s.length),E=u.ranges.map((function(e){return e.map(x,0)}));return{changes:x,selection:W.jT.create(E,u.mainIndex)}}({view:n,item:(0,P.Z)((0,r.Z)({},e),{additionalTextEdits:t}),to:s,from:l});u&&n.dispatch({changes:u.changes,selection:u.selection,annotations:j.Jv.of(i)})}else{var d,f,p,h,v=[];t&&v.push({changes:t.map((function(e){return rt(n,e)}))});var m=null!==(h=null!==(p=null===(f=e.textEdit)||void 0===f?void 0:f.newText)&&void 0!==p?p:e.insertText)&&void 0!==h?h:e.label,g=new We(m);e.textEdit&&"range"in e.textEdit&&(l=(0,z.R)(n.state.doc,e.textEdit.range.start),s=Math.max(s,(0,z.R)(n.state.doc,e.textEdit.range.end)));var y=g.apply({view:n,from:l,to:s,path:c});(d=n).dispatch.apply(d,(0,a.Z)(v).concat([y]))}},type:e.kind&&nt[e.kind],filterText:(e.filterText||e.label).toLowerCase(),sortText:(e.sortText||e.label).toLowerCase()},u=(0,N.Z)(l).isCompletionItemResolveSupported;return l&&u?n.info=(0,X.Z)((function(){var n,r,o,a,u,d,f;return(0,M.__generator)(this,(function(p){switch(p.label){case 0:return[4,l.request.resolveCompletionItem(e)];case 1:return n=p.sent(),r="cancelled"in n&&n.cancelled,o="result"in n?n.result:null,r||!o?[2,null]:(o.additionalTextEdits&&(t=o.additionalTextEdits),a=[],o.detail&&o.detail!==e.detail&&o.detail!==e.label&&(u=(0,ye.extname)(c).slice(1),d=["```"+u,o.detail,"```"].join("\n"),a.push((0,i.tZ)(te,{className:"lsp-completion-detail",content:{value:d,kind:"markdown"}}))),o.documentation&&a.push((0,i.tZ)(te,{content:o.documentation})),0===a.length?[2,null]:(f=document.createElement("div"),s(G.createPortal((0,i.tZ)(i.HY,{children:a}),f)),[2,f]))}}))})):e.documentation&&(n.info=function(){if(!e.documentation)return null;var t=document.createElement("div");return s(G.createPortal((0,i.tZ)(te,{content:e.documentation}),t)),t}),n}));u=u.sort((function(e,t){return e.sortText<t.sortText?-1:e.sortText>t.sortText?1:0}));for(var d=0;d<u.length;d++)u[d-1]&&u[d].sortText===u[d-d].sortText?u[d].boost=u[d-1].boost:u[d].boost=u.length-d;var f=(0,o.Z)(function(e){var t=Object.create(null),n=Object.create(null),r=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value.filterText;t[c[0]]=!0;for(var s=1;s<c.length;s++)n[c[s]]=!0}}catch(d){i=!0,o=d}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}var u=et(t)+et(n)+"*$";return[new RegExp("^"+u),new RegExp(u)]}(u),2),p=f[0],h=f[1],v=t.matchBefore(h),m=t.pos;return v&&(m=v.from),{from:m,options:u,validFor:p}}var ot=n(68122),at=n(85593),lt=n(23384);function ct(e){var t=e.content,n=e.className,o=e.showHoveredVariable,a=(0,F.Z)().preferences;if("string"!==typeof t&&"kind"in t)return(0,i.tZ)(te,{content:t});var l=(Array.isArray(t)?t:[t]).map((function(e){return"string"===typeof e?e:"```"+e.language+"\n"+e.value+"\n```"})).join("\n");return(0,i.tZ)($.ZP,{css:[{p:{fontSize:a.fontSize}},o?[p.l0.maxHeight(ut),p.l0.overflowY("auto")]:void 0],className:n,components:{code:function(e){return(0,i.tZ)(Q.Z,(0,r.Z)({minimal:!0,disableCopy:!0},e))}},children:l})}function st(e){var t=e.dom,n=(0,we.Z)(e,["dom"]);return G.createPortal((0,i.tZ)(dt,(0,r.Z)({},n)),t)}var ut=100;function dt(e){var t=e.className,n=e.content,a=e.textHovered,l=(0,lt.D)({controlName:"flag-debugger-hover-variable"}),c=(0,A.Z)().debuggest,u=(0,ot.Z)(c.mainClient),d=u&&("running"===u.state.current||"paused"===u.state.current),h=(0,o.Z)(s.useState(!1),2),v=h[0],m=h[1],g=(0,o.Z)(s.useState(void 0),2),y=g[0],Z=g[1],b=l&&d&&y;return s.useEffect((function(){function e(){return e=(0,X.Z)((function(){var e,t,n;return(0,M.__generator)(this,(function(i){switch(i.label){case 0:if(!l||!d)return[3,4];m(!0),i.label=1;case 1:return i.trys.push([1,,3,4]),[4,u.evaluate({expression:a,context:"hover"})];case 2:return t=i.sent(),(null===(e=t.body)||void 0===e?void 0:e.result)&&(n=(0,r.Z)({name:a,value:t.body.result},t.body),Z(n)),[3,4];case 3:return m(!1),[7];case 4:return[2]}}))})),e.apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[l,u,d,a]),(0,i.BX)(f.G,{css:[J,b?p.l0.maxHeight(ut+190):p.l0.maxHeight(190),p.l0.minHeight(30),p.l0.overflowY("auto"),p.l0.borderRadius(4),p.l0.backgroundColor.backgroundHigher],children:[v?void 0:(0,i.tZ)(ct,{content:n,className:t,showHoveredVariable:Boolean(b)}),b?(0,i.tZ)(f.G,{css:[p.l0.maxHeight(190),p.l0.overflowY("auto")],children:(0,i.tZ)(at._,{depth:0,client:u,variable:y})}):void 0]})}function ft(e){var t,n,r=e.hover,o=e.state,a=e.offset,l=e.languageId,c=e.setDecoration;if((Array.isArray(r.contents)||"string"===typeof r.contents)&&0===r.contents.length)return c(null),null;l.endsWith("css")&&Array.isArray(r.contents)&&(r.contents={kind:"markdown",value:"```html \n".concat(r.contents[0],"\n```\n").concat(r.contents[1],"\n      ")});var s="",u=o.doc;if(r.range)t=(0,z.R)(u,r.range.start),n=(0,z.R)(u,r.range.end),s=u.sliceString(t,n);else if(n=void 0,(t=a)<=o.doc.length){var d=o.wordAt(t);d?(s=u.sliceString(d.from,d.to),t=Math.min(t,d.from),n=d.to):s=u.sliceString(t,t+1)}return{pos:t,end:n,create:function(){var e=document.createElement("div");return e.classList.add("hover-tooltip"),e.style.padding="0",c((0,i.tZ)(st,{dom:e,content:r.contents,textHovered:s})),{dom:e,mount:function(e){var t;t=function(){(0,H.E2)(e)},[0,50,200,1e3].forEach((function(e){return setTimeout(t,e)}))}}},above:!0}}var pt=n(25674),ht=n(35390),vt=n(17713),mt=n(1144),gt=n(95984),yt=n(40381),Zt=n(44676),bt=n(47860);function wt(e){var t=e.containerProps,n=e.codeActions,o=e.onExecuted,a=(0,A.Z)().fs,l=(0,yt.Z)(),c=(0,O.Z)(l||"");return n.length&&c?(0,i.tZ)(gt.XZ,(0,P.Z)((0,r.Z)({},t),{children:n.map((function(e,t){return(0,i.tZ)(Zt.Z,{onClick:function(t){t.stopPropagation(),(0,bt.S)(e,c,a),o()},children:(0,i.tZ)(gt.sN,{isFirst:0===t,isLast:t===n.length-1,children:(0,i.tZ)(mt.x,{children:e.title})})},t)}))})):null}var xt=n(21131);var Et=new Map;var Ct="undefined"===typeof WeakRef?function(e){return{deref:function(){return e}}}:WeakRef,St=n(6625);function Tt(e){var t=e.path,n=e.range,r=e.lspClient;n=function(e){var t,n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:JSON.stringify)(e),r=null===(t=Et.get(n))||void 0===t?void 0:t.deref();return null!=r?r:(Et.set(n,new Ct(e)),e)}(n);var i=(0,St.Z)(),l=s.useRef(null),c=(0,o.Z)(function(e,t){var n=s.useRef(),r=(0,xt.Z)((function(){return y()((function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];e.apply(void 0,(0,a.Z)(r)).then((function(e){var t;null===(t=n.current)||void 0===t||t.call(n,e)}))}),t)}),[e,t]);return[r,s.useCallback((function(e){n.current=e}),[])]}(s.useCallback(function(){var e=(0,X.Z)((function(e,t){return(0,M.__generator)(this,(function(n){return r.isOpen(e)?(l.current={requestPath:e,requestRange:t},[2,r.request.codeActions(e,t)]):[2,{result:null}]}))}));return function(t,n){return e.apply(this,arguments)}}(),[r]),1e3),2),u=c[0],d=c[1],f=(0,o.Z)(s.useState([]),2),p=f[0],h=f[1],v=s.useCallback((0,X.Z)((function(){return(0,M.__generator)(this,(function(e){return r&&t?(d((function(e){i.current&&("error"in e?(h([]),fe.$e((function(n){n.setExtra("path",t),n.setExtra("request",l.current),fe.Tb(new Error(e.error.message))}))):null===e.result||0===e.result.length?h([]):h(e.result))})),u(t,n),[2]):[2]}))})),[r,t,u,n,d,i]);return s.useEffect((function(){return v(),function(){u.cancel()}}),[v,u]),[p,v]}var kt=n(82378),_t=W.Py.define();function Rt(e){var t=e.state,n=t.doc,r=t.selection.main,i=r.from,o=r.to;return{start:(0,z.s)(n,i),end:(0,z.s)(n,o)}}var Dt=function(e){var t=e.view,n=e.path,r=e.lspClient,a=e.visible,l=e.coords,c=(0,o.Z)(s.useState({x:0,y:0}),2),u=c[0],d=c[1],f=(0,o.Z)(Tt({path:n,lspClient:r,range:Rt(t)}),2),p=f[0],h=f[1],v=(0,ot.Z)(a),m=(0,ot.Z)(l),g=s.useCallback((function(){a.current=!1,t.focus()}),[t,a]);if(s.useEffect((function(){m&&d({x:m.left,y:m.top})}),[m]),s.useEffect((function(){var e=function(e){"Escape"===e.key&&g()};if(u)return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[g,u]),!p.length)return null;var y=p.some((function(e){return"kind"in e&&"quickfix"===e.kind}))?"#75bdff":"#ffcc00";return(0,i.BX)("div",{role:"presentation",onMouseDown:function(e){v||(e.stopPropagation(),e.preventDefault(),d({x:e.nativeEvent.pageX,y:e.nativeEvent.pageY}),a.current=!v)},children:[(0,i.tZ)(vt.Z,{css:{fill:y,color:y,cursor:"pointer"},className:"lightbulb"}),v?(0,i.tZ)(wt,{containerProps:{view:t,verticalOffset:gt.R$*p.length,closeMenu:g,width:"auto",coords:u},onExecuted:function(){g(),h()},codeActions:p}):null]})},It=function(e){(0,be.Z)(n,e);var t=(0,xe.Z)(n);function n(){var e;return(0,Ze.Z)(this,n),(e=t.apply(this,arguments)).visible=(0,kt.u)(!1),e.coords=(0,kt.u)(null),e.container=s.createRef(),e}var o=n.prototype;return o.toDOM=function(e){var t=document.createElement("div");return t.setAttribute("aria-hidden","true"),t.className="cm-code-action",this.visible.current=!1,this.props.setDecoration(G.createPortal((0,i.tZ)("span",{ref:this.container,children:(0,i.tZ)(Dt,(0,P.Z)((0,r.Z)({},this.props),{view:e,visible:this.visible,coords:this.coords}))}),t)),t},o.contains=function(e){var t;return(null===(t=this.container.current)||void 0===t?void 0:t.contains(e))||!1},o.updateDOM=function(){return!0},n}(H.l9);var Pt=function(e){return H.lg.fromClass(function(){function t(n){(0,Ze.Z)(this,t),this.widget=new It,this.widget.props=e,this.decoration=H.p.widget({widget:this.widget,side:0}),this.updateDecorations(n)}var n=t.prototype;return n.update=function(e){var t=this;(e.docChanged||e.selectionSet)&&this.updateDecorations(e.view),(0,q.j)(e,_t,(function(n){var r=n.value;t.widget.visible.current=!0,t.widget.coords.current=r,t.updateDecorations(e.view)}))},n.updateDecorations=function(e){var t,n=e.state,r=n.doc,i=n.selection,o=r.lineAt(i.main.from);t=function(e){return/^( {2}|\u3000|\t)/.test(e)}(o.text)||1===o.number&&1===r.lines?o.from:1===o.number?Math.min(r.length,o.to+1):r.lineAt(o.from-1).from,this.decorations=H.p.set([this.decoration.range(t)])},t}(),{decorations:function(e){return e.decorations},eventHandlers:{scroll:function(){this.widget.visible.current=!1}}})},Gt=H.tk.baseTheme({".cm-code-action":{position:"absolute",zIndex:101,top:"calc(50% - 8px)",left:"0",height:"16px",width:"16px",background:"transparent",fontFamily:K.TV.fontFamilyDefault,"& svg":{display:"block"}}});var Bt=n(10129),At=n(52071);function Ut(e){var t=e.filePath,n=e.lspClient,r=e.session,i={current:null};function a(){return(a=(0,X.Z)((function(e,a){var l,c,s,u,d,f,p,h,v,m,g,y;return(0,M.__generator)(this,(function(Z){switch(Z.label){case 0:return(0,Bt.jh)(e)?(l=e.clientX,c=e.clientY,null===(s=a.posAtCoords({x:l,y:c}))?[2]:(0,N.Z)(n).isFindDefinitionSupported?(i.current&&n.notify.cancelRequest(i.current),i.current=n.generateId(),u=(0,z.s)(a.state.doc,s),[4,n.request.findDefinitions(t,u,{id:i.current,tap:(0,At.M)(a)})]):[2]):[2];case 1:if(d=Z.sent(),i.current=null,"error"in d)throw new Error("Something went wrong fetching definition location: ".concat(d.error.message));return f=d.result,d.cancelled||!f||0===f.length?[2]:(p=(0,o.Z)(f,1),h=p[0],v=h.uri,m=h.range,g=m.start,(y=n.documentUriToPath(v))!==t?r.openFile(y,{line:g.line+1,col:g.character}):r.updateDeeplink({path:y,line:g.line+1,col:g.character}),[2])}}))}))).apply(this,arguments)}var l=H.tk.domEventHandlers({click:function(e,t){return function(e,t){a.apply(this,arguments)}(e,t),!1}});return l}var Ot=n(4010),Nt=n(25108),Lt=function(e){(0,be.Z)(n,e);var t=(0,xe.Z)(n);function n(){var e;return(0,Ze.Z)(this,n),(e=t.apply(this,arguments)).state={error:null,errorInfo:null},e}var r=n.prototype;return r.componentDidCatch=function(e,t){fe.Tb(e,{extra:{errorInfo:t,category:"ws-scrollbar"}}),this.setState({error:e,errorInfo:t}),Nt.error({error:e,errorInfo:t})},r.render=function(){return this.state.error?null:this.props.children},n}(s.Component),Ft=n(18618),Xt=n.n(Ft),Mt=W.Py.define(),Wt=H.tk.baseTheme({".cm-scrollbar-element.severity-info":{backgroundColor:K.TV.accentPrimaryStronger},".cm-scrollbar-element.severity-warning":{backgroundColor:K.TV.yellowStrongest},".cm-scrollbar-element.severity-error":{backgroundColor:K.TV.redStronger}});var jt=H.p.mark({class:"cm-highlight"}),Ht=H.tk.baseTheme({"&light .cm-highlight":{backgroundColor:"#f5f6f8",outline:"1px solid #ccd1d7"},"&dark .cm-highlight":{backgroundColor:"#3f434b",outline:"1px solid #5c616a"},"&light .cm-activeLine .cm-highlight":{backgroundColor:"#e0e3e7",outline:"1px solid #c3c8cf"},"&dark .cm-activeLine .cm-highlight":{backgroundColor:"#444850",outline:"1px solid #5e636d"}}),zt=W.Py.define(),Vt=W.QQ.define({create:function(){return H.p.none},provide:function(e){return H.tk.decorations.from(e)},update:function(e,t){var n=!0,r=!1,i=void 0;try{for(var o,a=t.effects[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;if(l.is(zt)){if(!l.value)return H.p.none;e=H.p.set(l.value.flatMap((function(e){return e.range})).map((function(e){var n=(0,z.R)(t.newDoc,e.start),r=(0,z.R)(t.newDoc,e.end);return n===r?void 0:jt.range(n,r)})).filter(Boolean),!0)}}}catch(c){r=!0,i=c}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return e}});var qt=H.tk.baseTheme({".cm-scrollbar-element.active-word":{backgroundColor:K.TV.foregroundDimmer,height:"5px"}});var Kt=H.tk.baseTheme({"::-webkit-scrollbar":{width:"10px"},"::-webkit-scrollbar-thumb":{borderRadius:"10px"},"::-webkit-scrollbar-thumb:hover":{transition:"0.2s"},"&dark ::-webkit-scrollbar-thumb":{background:"rgba(86, 86, 86, 0.25)",borderRadius:"10px"},"&dark ::-webkit-scrollbar-thumb:hover":{background:"rgba(86, 86, 86, 0.4)"},"&light ::-webkit-scrollbar-thumb":{background:"#e5e5e5",borderRadius:"10px"},"&light ::-webkit-scrollbar-thumb:hover":{background:"#e0e0e0"}}),$t=H.tk.baseTheme({".cm-scrollbar-element":{position:"absolute",height:"2px"},".cm-semantic-scrollbar-container":{pointerEvents:"none",position:"fixed",right:0,height:"100%",width:"10px"},"&light .cm-scrollbar-element.cursor":{backgroundColor:"#507aac"},"&dark .cm-scrollbar-element.cursor":{backgroundColor:"#98aac1"}});function Yt(e,t){var n=e.state.doc,r=Ot.KZ/e.defaultLineHeight;return n.length<t?{display:"none"}:{top:100*(n.lineAt(t).number/(n.lines+r))+"%"}}function Qt(e){var t=e.setDecoration;return H.lg.define((function(e){var n=function(t){var n=t.item;return(0,i.tZ)("div",{className:"cm-scrollbar-element ".concat(n.className),style:(0,r.Z)({},n.style,Yt(e,n.pos))})},o=function(){(0,ot.Z)(c);var t=Array.from((0,ot.Z)(l).values()).flat(1),r=(0,s.useRef)(!1);return!0!==r.current&&a.getBoundingClientRect().left<e.scrollDOM.getBoundingClientRect().right&&(r.current=!0),(0,i.BX)("div",{style:{opacity:r.current?void 0:0},children:[(0,i.tZ)("div",{className:"cm-scrollbar-element cursor",css:{width:10},style:Yt(e,e.state.selection.main.head)}),t.map((function(e){return(0,i.tZ)(Lt,{children:(0,i.tZ)(n,{item:e})},e.key)}))]})},a=document.createElement("div");a.className="cm-semantic-scrollbar-container",e.scrollDOM.appendChild(a);var l=(0,kt.u)(new Map),c=(0,kt.u)(!1);return t(G.createPortal((0,i.tZ)(o,{}),a)),{destroy:function(){a.remove()},update:function(e){var t=l.current;(0,q.j)(e,Mt,(function(e){var n=e.value;t===l.current&&(t=new Map(t)),null===n.items?t.delete(n.name):t.set(n.name,n.items)})),l.current=t,(e.docChanged||e.geometryChanged||e.selectionSet)&&(c.current=!c.current)}}}))}function Jt(e){var t,n=e.lspClient,r=e.path,i=e.decorations,o=e.rename,a=e.session,l=e.semanticScrollbarEnabled,c=e.highlightActiveWordEnabled,s=(0,N.Z)(n),d=function(e){return function(t){setTimeout((function(){i.update((function(n){return n.set(e,t)}))}))}},f=[de({lspClient:n,path:r}),he({lspClient:n,path:r})];return(0,u.isMobile)()||(c&&f.push(function(e){var t=e.lspClient,n=e.path;return[Ht,Vt,H.tk.updateListener.of(function(){var e=(0,X.Z)((function(e){var r,i,o,a;return(0,M.__generator)(this,(function(l){switch(l.label){case 0:return e.docChanged?(e.view.dispatch({effects:[zt.of(null)]}),[2]):e.selectionSet?(r=e.state,i=r.doc,o=r.selection,[4,t.request.documentHighlights(n,(0,z.s)(i,o.main.head))]):[2];case 1:return a=l.sent(),e.view.dispatch({effects:[zt.of("error"in a?null:a.result)]}),[2]}}))}));return function(t){return e.apply(this,arguments)}}())]}({lspClient:n,path:r})),l&&f.push((t={setDecoration:d("semanticScrollbar")},[Kt,$t,Qt(t),[Wt,W.yy.transactionExtender.of((function(e){var t;return(0,q.j)(e,pe.lC,(function(e){var n=e.value,r=Xt()(n.map((function(e){return{className:"severity-".concat(e.severity),key:"".concat(e.from,"-").concat(e.to,"-").concat(e.severity),pos:e.from,style:{marginLeft:5,width:5}}})),(function(e){return e.key}));t=Mt.of({name:"diagnostics",items:r})})),t?{effects:[t]}:null}))],[qt,W.yy.transactionExtender.of((function(e){var t;return(0,q.j)(e,zt,(function(n){var r=n.value;if(r){var i=Xt()(r.map((function(t){return{className:"active-word",key:[t.range.start.line,t.range.start.character,t.range.end.line,t.range.end.character].join("-"),pos:(0,z.R)(e.newDoc,t.range.start),style:{marginLeft:2,width:5}}})),(function(e){return e.key}));t=Mt.of({name:"activeWord",items:i})}else t=Mt.of({name:"activeWord",items:[]})})),t?{effects:[t]}:null}))]])),s.isAutoCompleteSupported&&f.push(function(e){var t=e.lspClient,n=e.path,r=e.setDecoration;function i(){return(i=(0,X.Z)((function(e){var i,o,a,l,c,s,u;return(0,M.__generator)(this,(function(d){switch(d.label){case 0:return(o=t.getServerCapabilities())?(a=(null===o||void 0===o||null===(i=o.completionProvider)||void 0===i?void 0:i.triggerCharacters)||[],(l=tt(e,a))?[4,t.request.completion(n,(0,z.s)(e.state.doc,e.pos),l)]:[2,null]):[2,null];case 1:return"error"in(c=d.sent())?[2,null]:(s=c.result,e.aborted?[2,null]:s?(u=Array.isArray(s)?s:s.items,[2,it({context:e,items:u,client:t,path:n,setDecoration:r})]):[2,null])}}))}))).apply(this,arguments)}return(0,j.ys)({defaultKeymap:!1,closeOnBlur:!1,override:[(0,j.eC)(["LineComment","BlockComment"],(function(e){return i.apply(this,arguments)}))]})}({setDecoration:d("autocomplete"),lspClient:n,path:r})),s.isSignatureHelpSupported&&f.push(oe({setDecoration:d("signatureSuggestion"),lspClient:n,path:r})),s.isHoverSupported&&f.push(function(e){var t=e.lspClient,n=e.path,r=e.setDecoration,i=(0,H.bF)(function(){var e=(0,X.Z)((function(e,i){var o,a,l,c;return(0,M.__generator)(this,(function(s){switch(s.label){case 0:return o=(0,z.s)(e.state.doc,i),[4,t.request.hover(n,o)];case 1:return a=s.sent(),l=t.getLanguageId(n),"error"in a||null===(c=a.result)?(r(null),[2,null]):[2,ft({hover:c,offset:i,state:e.state,languageId:l,setDecoration:r})]}}))}));return function(t,n){return e.apply(this,arguments)}}(),{hideOn:function(e){return!e.annotation(W.YW.remote)&&!!(e.isUserEvent("input")||e.isUserEvent("delete")||e.isUserEvent("select"))},hoverTime:0});return i}({setDecoration:d("hoverTooltip"),lspClient:n,path:r})),s.isCodeActionsSupported&&f.push(function(e){return[Gt,Pt(e)]}({setDecoration:d("codeActions"),lspClient:n,path:r})),s.isFindDefinitionSupported&&f.push(Ut({lspClient:n,filePath:r,session:a})),(s.isFindDefinitionSupported||s.isFindReferencesSupported)&&f.push((0,pt.w)({setDecoration:d("tooltip"),lspClient:n,path:r})),s.isRenameSupported&&f.push((0,ht.J)({setDecoration:d("renameInput"),hook:o}))),f}var en=n(59006),tn=n(58823);var nn=n(74963),rn=n(51059),on=W.Py.define(),an=W.QQ.define({create:function(){return null},update:function(e,t){var n=e;return(0,q.j)(t,on,(function(e){n=e.value})),n}});function ln(e,t){return cn.apply(this,arguments)}function cn(){return(cn=(0,X.Z)((function(e,t){var n,r,i,o,a,l,c,s,u;return(0,M.__generator)(this,(function(d){switch(d.label){case 0:return[4,e.request.documentSymbol(t)];case 1:if(!(n=d.sent())||n.cancelled)return[2,null];if(!(r="result"in n&&!n.cancelled?n.result:null))return[2,null];i=[],o=!0,a=!1,l=void 0;try{for(c=r[Symbol.iterator]();!(o=(s=c.next()).done);o=!0)(u=s.value)&&"range"in u&&i.push(u)}catch(f){a=!0,l=f}finally{try{o||null==c.return||c.return()}finally{if(a)throw l}}return[2,i.length?i:null]}}))}))).apply(this,arguments)}function sn(e){var t=e.view,n=e.filePath,r=e.isLoading,i=e.decorations,o=(0,F.Z)().preferences.codeIntelligence,a=(0,A.Z)().session,l=(0,O.Z)(n),c=L(l),u=(0,lt.D)({controlName:"flag-semantic-scrollbar"}),d=(0,lt.D)({controlName:"flag-highlight-active-word"}),f=function(e){var t=e.view,n=e.filePath,r=s.useRef(null),i=(0,A.Z)().fs,o=(0,O.Z)(n),a=s.useCallback(function(){var e=(0,X.Z)((function(e,a){var l,c,s;return(0,M.__generator)(this,(function(u){switch(u.label){case 0:if(!t)throw new Error("Expected view");if(!o)throw new Error("Expected client");if(!n)throw new Error("Expected non-null file path");if(null==a)throw new Error("Expected rename input params");return r.current&&o.notify.cancelRequest(r.current),l=o.generateId(),r.current=l,[4,o.request.rename(n,(0,z.s)(t.state.doc,a),e,{id:l,tap:(0,At.M)(t)})];case 1:if(c=u.sent(),r.current=null,"error"in c)throw new Error("Something went wrong renaming ".concat(c.error.message));return c.cancelled?[2]:(s=c.result)?((0,tn.w)({edit:s,fs:i,client:o}),t.dispatch({effects:[ht.n.of(null)]}),[2]):[2]}}))}));return function(t,n){return e.apply(this,arguments)}}(),[o,t,n,i]),l=s.useCallback((function(){if(!t)throw new Error("Expected view");t.dispatch({effects:[ht.n.of(null)]}),t.focus()}),[t]);return s.useMemo((function(){return{onRename:a,closeRenameInput:l}}),[a,l])}({view:t,filePath:n});!function(e){var t=e.view,n=e.filePath,r=e.lspClient;(0,rn.M)((function(){if(!t||!n||!r)return null;if(!(0,N.Z)(r).isDocumentSymbolSupported)return null;var e=(0,nn.Z)((0,X.Z)((function(){var e;return(0,M.__generator)(this,(function(i){switch(i.label){case 0:return[4,ln(r,n)];case 1:return e=i.sent(),t.dispatch({effects:on.of(e)}),[2]}}))})),{wait:200}),i=H.tk.updateListener.of((function(t){t.docChanged&&e()}));return e(),[i,an]}),[t,n,r],t)}({view:t,filePath:n,lspClient:l});var p=r||!o||!t||!l||!c||!l.isSupportedFile(n),h=(0,en.Z)({view:t});s.useEffect((function(){if(!p)return l.notify.didOpen(n,t.state.doc.toString()),t.dispatch({effects:h.reconfigure([Jt({lspClient:l,path:n,decorations:i,rename:f,session:a,semanticScrollbarEnabled:u,highlightActiveWordEnabled:d})])}),function(){l.getServerState()===U.a.INITIALIZED&&l.isOpen(n)&&l.notify.didClose(n),t.dispatch({effects:h.reconfigure([])}),i.unmount()}}),[l,t,c,h,n,a,i,f,p,u,d])}var un=n(39571),dn=new(function(e){(0,be.Z)(n,e);var t=(0,xe.Z)(n);function n(){return(0,Ze.Z)(this,n),t.apply(this,arguments)}return n.prototype.toDOM=function(){return document.createTextNode("\u25cf")},n}(H.SJ)),fn=W.Py.define({}),pn=W.Py.define({}),hn=H.p.line({attributes:{class:"cm-debuggerLine"}}),vn=W.Py.define({}),mn=W.QQ.define({create:function(){return null},update:function(e,t){var n=!0,r=!1,i=void 0;try{for(var o,a=t.effects[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;if(l.is(vn))return l.value}}catch(c){r=!0,i=c}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return e}});function gn(e){var t=new W.f_,n=e.state.field(mn);if(null!==n&&n<=e.state.doc.lines){var r=e.state.doc.line(n);t.add(r.from,r.from,hn)}return t.finish()}var yn=H.lg.fromClass(function(){function e(t){(0,Ze.Z)(this,e),this.decorations=gn(t)}return e.prototype.update=function(e){this.decorations=gn(e.view)},e}(),{decorations:function(e){return e.decorations}});function Zn(e,t){e.dispatch({effects:pn.of({pos:t})})}var bn=W.QQ.define({create:function(){return W.Xs.empty},update:function(e,t){e=e.map(t.changes);var n=!0,r=!1,i=void 0;try{for(var o,a=function(){var n=o.value;if(n.is(pn)){var r=!1;e.between(n.value.pos,n.value.pos+1,(function(){r=!0})),e=r?e.update({filter:function(e){return e!==n.value.pos}}):e.update({add:[dn.range(n.value.pos)]})}n.is(fn)&&(e=En(n.value.lines,t.state))},l=t.effects[Symbol.iterator]();!(n=(o=l.next()).done);n=!0)a()}catch(c){r=!0,i=c}finally{try{n||null==l.return||l.return()}finally{if(r)throw i}}return e}}),wn=H.tk.baseTheme({".cm-breakpoint-gutter .cm-gutterElement":{color:p.TV.accentPrimaryDefault,paddingLeft:p.TV.space4,paddingRight:p.TV.space2,cursor:"default"},".cm-debuggerLine":{backgroundColor:p.TV.accentPrimaryDimmest,borderRadius:p.TV.borderRadius4,marginRight:p.TV.space4}});function xn(e,t){var n;return e&&0!==e.length?null===t||(null===(n=e[0].source)||void 0===n?void 0:n.path)!==t?null:e[0].line:null}function En(e,t){var n=(0,a.Z)(new Set(e.filter((function(e){return e<=t.doc.lines})))).map((function(e){return dn.range(t.doc.line(e).from)}));return W.Xs.of(n,!0)}var Cn=n(2916);function Sn(e){var t=e.view,n=e.debuggest,r=e.filePath,i=e.isLoading,o=(0,A.Z)().fs,a=(0,Cn.Z)(),l=(0,ot.Z)(n.mainClient),c=(0,en.Z)({view:t});s.useEffect((function(){if(!i&&a&&l&&t){var e=(0,un.ZF)("/home/runner/".concat(a.slug,"/").concat(r)),n=function(e,t,n,r){var i,o=[];o.push(t.breakpoints.subscribe((function(t){var r=t.get(n);e.dispatch({effects:fn.of({lines:r?r.map((function(e){return e.line})):[]})})})));var a=H.tk.updateListener.of((function(i){i.transactions.forEach((function(i){i.effects.forEach((function(i){if(i.is(pn)){var o=(0,un.om)(n);if(!o)throw new Error("Expected relative path");t.toggleBreakpoint(n,{line:e.state.doc.lineAt(i.value.pos).number,otVersion:r.getOTVersion(o),otIndex:i.value.pos})}}))}))}));o.push(t.stackFrames.subscribe((function(t){var r=xn(t,n);e.dispatch({effects:vn.of(r)})})));var l=(0,H.v5)({class:"cm-breakpoint-gutter",markers:function(e){return e.state.field(bn)},initialSpacer:function(){return dn},domEventHandlers:{mousedown:function(e,t){return Zn(e,t.from),!0}}}),c=(null===(i=t.breakpoints.current.get(n))||void 0===i?void 0:i.map((function(e){return e.line})))||[],s=[W.Wl.highest(l),bn.init((function(e){return En(c,e)})),a,mn.init((function(){return xn(t.stackFrames.current,n)})),yn,wn];return{extensions:s,dispose:function(){return o.forEach((function(e){return e()}))}}}(t,l,e,o),s=n.extensions,u=n.dispose;return t.dispatch({effects:c.reconfigure(s)}),function(){t.dispatch({effects:c.reconfigure([])}),u()}}}),[l,t,a,r,i,o,c])}var Tn=n(15519),kn=n(32692),_n=n(31230),Rn=n(37887);function Dn(){var e=(0,kn.Z)(["\n  query CurrentUserHasContextualAIFeatures {\n    currentUser {\n      id\n      hasContextualAIFeatures\n    }\n  }\n"]);return Dn=function(){return e},e}var In={},Pn=(0,_n.Ps)(Dn());function Gn(){var e,t=function(e){var t=(0,r.Z)({},In,e);return Rn.a(Pn,t)}(),n=t.data,i=t.loading;return{enabled:Boolean(null===n||void 0===n||null===(e=n.currentUser)||void 0===e?void 0:e.hasContextualAIFeatures),loading:i}}var Bn=n(70917),An=(0,Bn.iv)((0,ge.Z)({cursor:"pointer",pointerEvents:"all",color:"var(--accent-primary-stronger)",textDecoration:"none"},"&:hover",{textDecoration:"underline"})),Un=n(3660);function On(){var e=(0,o.Z)(s.useState(!1),2),t=e[0],n=e[1];return(0,i.BX)(i.HY,{children:[(0,i.tZ)("a",{css:An,onClick:function(){return n(!0)},onKeyDown:function(){return n(!0)},role:"button",tabIndex:0,children:"generate code with Ghostwriter"}),(0,i.tZ)(Un.Z,{context:"workspace_placeholder_text",isOpen:t,onRequestClose:function(){return n(!1)},uponPurchaseGoTo:"cyclesPage",powerUp:"ghostwriter"})]})}function Nn(){var e=(0,kn.Z)(["\n  query IsReplLesson($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        lesson {\n          id\n        }\n      }\n      ... on ReplRedirect {\n        __typename\n      }\n      ... on SubscriptionExpiredError {\n        __typename\n      }\n    }\n  }\n"]);return Nn=function(){return e},e}var Ln={},Fn=(0,_n.Ps)(Nn());var Xn=function(e){var t,n,i=function(e){var t=(0,r.Z)({},Ln,e);return Rn.a(Fn,t)}({variables:{replId:e.replId}}),o=i.data,a=i.loading;return{isLesson:"Repl"===(null===o||void 0===o?void 0:o.repl.__typename)&&"UserCourseLesson"===(null===o||void 0===o||null===(t=o.repl)||void 0===t||null===(n=t.lesson)||void 0===n?void 0:n.__typename),isLoading:a}},Mn=n(63377),Wn=n(60977),jn=n(88080),Hn=n(36126),zn=n(91513),Vn=n(95901);function qn(){var e=(0,kn.Z)(["\n  query ReplCodeExamples($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        deprecatedLanguageConfig {\n          id\n          mainFile\n          examples {\n            name\n            code\n          }\n        }\n      }\n    }\n  }\n"]);return qn=function(){return e},e}var Kn={},$n=(0,_n.Ps)(qn());var Yn=n(57263),Qn=n(78244),Jn=n(77365);function er(e){var t=e.name,n=e.children,r=e.onClick;return(0,i.BX)(K.G7,{onClick:function(){return r()},css:[K.gU.nofill,K.l0.p(8)],children:[(0,i.tZ)(K.xv,{variant:"subheadDefault",css:K.l0.pb(16),children:t}),(0,i.tZ)(K.G7,{css:[K.l0.backgroundColor.backgroundDefault,K.l0.p(8),K.l0.borderRadius(8)],children:n})]})}var tr="@media (min-width: ".concat(Yn.j.tabletMax,"px)"),nr=(0,Bn.iv)([K.l0.colWithGap(16),(0,ge.Z)({},tr,{width:"calc(50%  - 8px)",flex:"0 0 auto",gap:"16px"})]);function rr(e){var t=e.children;return(0,i.tZ)(K.G7,{css:[(0,ge.Z)({},tr,[K.l0.rowWithGap(16)])],children:t})}function ir(e){var t=e.mainFile,n=e.examples,r=e.onSelect;return(0,i.BX)(K.G7,{css:[K.l0.colWithGap(24)],children:[(0,i.tZ)(K.h4,{level:1,variant:"headerDefault",children:"Code examples"}),(0,i.tZ)(K.xv,{multiline:!0,children:"Get started with some program examples."}),(0,i.BX)(rr,{css:[K.l0.colWithGap(16)],children:[(0,i.tZ)(K.G7,{css:nr,children:n.slice(0,(n.length+1)/2).map((function(e){return(0,i.tZ)(er,{name:e.name,onClick:function(){return r(e)},children:(0,i.tZ)(Qn.ZP,{hideGutter:!0,filePath:t,code:e.code,fontSize:12})},e.name)}))}),(0,i.tZ)(K.G7,{css:nr,children:n.slice((n.length+1)/2).map((function(e){return(0,i.tZ)(er,{name:e.name,onClick:function(){return r(e)},children:(0,i.tZ)(Qn.ZP,{hideGutter:!0,filePath:t,code:e.code,fontSize:12})},e.name)}))})]})]})}function or(e){var t=e.replId,n=e.onSelect,o=function(e){var t=(0,r.Z)({},Kn,e);return Rn.a($n,t)}({variables:{replId:t}}),a=o.data,l=o.loading,c=o.error;if(l)return(0,i.tZ)(K.G7,{css:[K.l0.colWithGap(0),K.l0.justify.center,K.l0.align.center,K.l0.pt(32),K.l0.pb(32)],children:(0,i.tZ)(Jn.Z,{})});if(c)return(0,i.tZ)(K.G7,{css:[K.l0.colWithGap(0),K.l0.justify.center,K.l0.align.center,K.l0.pt(32),K.l0.pb(32)],children:c.message});var s="Repl"===(null===a||void 0===a?void 0:a.repl.__typename)?a.repl:null;if(!s)return null;var u=s.deprecatedLanguageConfig,d=u.mainFile,f=u.examples;return(null===f||void 0===f?void 0:f.length)?(0,i.tZ)(ir,{mainFile:d,examples:f,onSelect:n}):(0,i.tZ)(K.G7,{css:[K.l0.colWithGap(0),K.l0.justify.center,K.l0.align.center,K.l0.pt(32),K.l0.pb(32)],children:(0,i.BX)(K.xv,{multiline:!0,children:["Sorry, this language doesn\u2019t have any examples. Want to add some? Contact us at ",(0,i.tZ)("a",{href:"mailto:support@replit.com",children:"support@replit.com"}),"!"]})})}var ar=n(54969);function lr(){var e=(0,kn.Z)(["\n  query PlaceholderTextCurrentUser {\n    currentUser {\n      id\n      userPowerUpsByType {\n        __typename\n        ... on UserPowerUpsTypes {\n          ghostwriter {\n            active\n            CTA\n          }\n        }\n      }\n    }\n  }\n"]);return lr=function(){return e},e}var cr={},sr=(0,_n.Ps)(lr());function ur(e){var t=e.onRequestClose,n=(0,Vn.e)(Hn.y.Examples),r=(0,Vn.e)(Hn.y.Editor),a=(0,o.Z)(s.useState(!1),2),l=a[0],c=a[1],u=(0,yt.Z)(),d=(0,zn.Z)(u),f=(0,Mn.Z)(),p=s.useRef(null===n||void 0===n?void 0:n.isActive),h=s.useRef();h.current=null===n||void 0===n?void 0:n.isActive;var v=s.useRef(null===n||void 0===n?void 0:n.goto);return v.current=null===n||void 0===n?void 0:n.goto,s.useEffect((function(){return function(){var e;h.current&&(null===(e=v.current)||void 0===e||e.call(v,Hn.y.Editor))}}),[]),s.useEffect((function(){(null===r||void 0===r?void 0:r.isActive)&&!p.current&&(l?r.goto(Hn.y.Examples):c(!0))}),[r,t,l]),s.useEffect((function(){(null===n||void 0===n?void 0:n.isActive)?p.current=!0:p.current&&t(null)}),[t,null===n||void 0===n?void 0:n.isActive]),d?(0,i.tZ)("div",{ref:null===n||void 0===n?void 0:n.delegateTooltip,children:(0,i.tZ)(or,{replId:f,onSelect:function(e){d({code:e.code,insertAt:0}),t({exampleName:e.name})}})}):(0,i.tZ)("div",{children:"Please make sure you have a file open"})}var dr=function(e){var t,n=e.onShowGenerateCodeModal,a=(0,Cn.Z)(),l=Xn({replId:(null===a||void 0===a?void 0:a.id)||""}),c=l.isLesson,d=l.isLoading,f=(0,lt.D)({controlName:"flag-expt-hide-placeholder-if-lesson"}),p=function(e){var t=(0,r.Z)({},cr,e);return Rn.a(sr,t)}(),h=p.data,v=p.loading,m=Gn(),g=m.enabled,y=m.loading,Z=(0,o.Z)(s.useState(!1),2),b=Z[0],w=Z[1],x=(null===a||void 0===a?void 0:a.language)||"",E=Tn.Z.getDocs(x),C=(0,jn.yR)(),S=s.useCallback((function(e){(0,Wn.j)(Wn.U3.LANGUAGE_EXAMPLES_VIEWED,(0,r.Z)({language:null===a||void 0===a?void 0:a.language,replId:null===a||void 0===a?void 0:a.id},e)),w(!1)}),[a]);if(d||v||y)return null;var T="UserPowerUpsTypes"===(null===h||void 0===h||null===(t=h.currentUser)||void 0===t?void 0:t.userPowerUpsByType.__typename)&&h.currentUser.userPowerUpsByType.ghostwriter.CTA,k=!g&&(T===ar.e4.Activate||T===ar.e4.ActivateAlreadyTrialed),_=c&&f?(0,i.BX)(i.HY,{children:["Not sure what to do?"," ",(0,i.tZ)("a",{css:An,onClick:function(){C&&C()},onKeyDown:function(){C&&C()},role:"button",tabIndex:0,children:"Watch the video"})," ","and follow the written tutorial!"]}):(0,i.BX)(i.HY,{children:["Not sure what to do? Run some"," ",(0,i.tZ)("a",{"data-cy":"ws-editor-examples",css:An,onClick:function(){w(!0)},onKeyDown:function(){w(!0)},role:"button",tabIndex:0,children:"examples"}),!(0,u.isMobile)()&&g?(0,i.BX)(i.HY,{children:[E?", ":" or ",(0,i.tZ)("a",{css:An,onClick:n,onKeyDown:n,role:"button",tabIndex:0,children:"generate code"})]}):null,!(0,u.isMobile)()&&k?(0,i.BX)(i.HY,{children:[E?", ":" or ",(0,i.tZ)(On,{})]}):null,E&&(0,i.BX)(i.HY,{children:[", or view"," ",(0,i.tZ)("a",{target:"_blank",css:An,href:E,children:"documentation"})]})," ","(start typing to dismiss)"]});return(0,i.tZ)(i.HY,{children:(0,i.BX)("div",{css:{fontFamily:"var(--font-family-monospace)",color:"var(--foreground-dimmest)"},children:[_,(0,i.tZ)(K.u_,{maxWidth:872,isOpen:b,onRequestClose:function(){return S(null)},children:(0,i.tZ)(ur,{onRequestClose:S})})]})})};function fr(e){var t=e.dom,n=e.onShowGenerateCodeModal;return G.createPortal((0,i.tZ)(dr,{onShowGenerateCodeModal:n}),t)}var pr=n(49892),hr=W.Py.define();var vr=n(93160),mr=n(40963),gr=n(61756),yr=n(29163),Zr=n(72806),br=n(67629),wr=n(8941),xr=n(96189);function Er(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;if(!e.valid)return[];for(var r=[],i=e.getCursor(t),o=i.next();!o.done&&r.length<n;)r.push(o.value),o=i.next();return r}function Cr(e){return e>500?"large":e>350?"medium":"small"}var Sr=f.K.div,Tr=(0,K.Xb)({root:[p.l0.rowWithGap(8),p.l0.px(4),p.l0.py(8),{borderBottom:"1px solid",borderColor:p.TV.outlineDimmest}],buttonWrap:[p.l0.center,p.l0.height(32)],navButtonsWrap:[p.l0.rowWithGap(4),p.l0.align.center],content:[p.l0.flex.growAndShrink(1),p.l0.colWithGap(16)],layoutLarge:p.l0.rowWithGap(16),layoutNormal:p.l0.colWithGap(8),matchLabel:[p.l0.position.absolute,p.l0.top(0),p.l0.right(0),p.l0.height("100%"),p.l0.center,p.l0.pr(4)],inputControlsSmall:[p.l0.colWithGap(8),p.l0.flex.growAndShrink(1)],inputControlsLarge:[p.l0.rowWithGap(8),p.l0.align.center,p.l0.flex.growAndShrink(1)],buttonsWrap:[p.l0.rowWithGap(4),p.l0.align.center],inputRowWrap:[p.l0.flex.growAndShrink(1),p.l0.position.relative],settingsWrap:[p.l0.flex.row,p.l0.align.center,p.l0.rowWithGap(8)],replaceWrapSmall:[p.l0.colWithGap(8),{marginRight:-19}],replaceWrapLarge:[p.l0.rowWithGap(8),p.l0.align.center,{marginRight:162}],replaceInputWrap:[p.l0.flex.growAndShrink(1)],replaceButtons:[p.l0.rowWithGap(4),p.l0.align.center]});function kr(e){var t=e.view,n=function(){if(!t)throw new Error("Expected view");(0,pr.g)(t);var e=t.state.selection.main;t.dispatch({effects:H.tk.scrollIntoView(e.from,{y:"center",x:"center"})}),B<=1||D((function(t){if(null===t){var n=T.findIndex((function(t){return t.from===e.from&&t.to===e.to}));return-1===n?1:n+1}return t>=B?1:t+1}))},r=function(){if(!t)throw new Error("Expected view");(0,pr.a7)(t);var e=t.state.selection.main;t.dispatch({effects:H.tk.scrollIntoView(e.from,{y:"center",x:"center"})}),B<=1||D((function(t){if(null===t){var n=T.findIndex((function(t){return t.from===e.from&&t.to===e.to}));return-1===n?1:n+1}return t<=1?B||1:t-1}))},a=function(e){var n=e;return!!t&&(0,H.$1)(t,n,"search-panel")},l=(0,o.Z)(s.useState(!1),2),c=l[0],u=l[1],d=(0,o.Z)(s.useState(!1),2),p=d[0],h=d[1],v=(0,o.Z)(s.useState(!1),2),m=v[0],g=v[1],Z=(0,o.Z)(s.useState(""),2),b=Z[0],w=Z[1],x=(0,o.Z)(s.useState(""),2),E=x[0],C=x[1],S=(0,o.Z)(s.useState([]),2),T=S[0],k=S[1],_=(0,o.Z)(s.useState(null),2),R=_[0],D=_[1],I=(0,St.Z)(),P=s.useRef(new pr.Jb({search:""})),G=(0,yt.Z)(),B=T.length,A=s.useCallback((function(e){e.eq(P.current)||(w(e.search),C(e.replace),h(e.caseSensitive),g(e.regexp),P.current=e)}),[]),U=s.useCallback((function(){u(!0)}),[]),O=s.useCallback(y()((function(e){I.current&&(k(Er(P.current,e)),D(null))}),250),[]);s.useEffect((function(){return function(){return O.cancel()}}),[]),function(e){var t=e.view,n=e.onDocChanged,r=e.onSearchQuery,i=e.onExpandSearchPanel;s.useEffect((function(){t&&t.dispatch({effects:W.Py.appendConfig.of([H.tk.updateListener.of((function(e){e.transactions.forEach((function(e){e.effects.forEach((function(e){e.is(pr.ql)&&r(e.value),e.is(hr)&&i()}))}))})),H.tk.updateListener.of((function(e){e.docChanged&&n(e.view.state.doc)}))])})}),[t,r,i])}({view:t,onSearchQuery:A,onExpandSearchPanel:U,onDocChanged:O}),s.useEffect((function(){if(t){var e=(0,pr.uP)(t.state);w(e.search),C(e.replace),h(e.caseSensitive),g(e.regexp),P.current=e}}),[t]),s.useEffect((function(){if(t){var e=new pr.Jb({search:b,replace:E,caseSensitive:p,regexp:m}),n=P.current;e.eq(n)||(P.current=e,t.dispatch({effects:pr.ql.of(e)}),k(Er(e,t.state.doc)),D(null))}}),[t,b,E,p,m]),s.useEffect((function(){t&&G&&O(t.state.doc)}),[t,G,O]);var N=(0,o.Z)(s.useState(Cr(0)),2),L=N[0],F=N[1],X=(0,xr.Z)((function(e){e.width&&F(Cr(e.width))}));if(!t)return null;var M=B>0,j=b.length>0?"0 / 0":null,z=M?"".concat(R||1," / ").concat(B):j,V=z?8*z.length:null,q=(0,i.BX)(f.G,{css:Tr.settingsWrap,children:[(0,i.tZ)(Zr.X,{id:"Match case",name:"case",checked:p,onChange:function(){h((function(e){return!e}))}}),(0,i.tZ)(mt.x,{variant:"small",color:p?"default":"dimmer",children:"Match case"}),(0,i.tZ)(Zr.X,{id:"Regexp",name:"re",checked:m,onChange:function(){g((function(e){return!e}))}}),(0,i.tZ)(mt.x,{variant:"small",color:m?"default":"dimmer",children:"Regexp"})]});return(0,i.tZ)(Sr,{ref:X,onKeyDown:function(e){a(e)&&e.preventDefault()},children:(0,i.BX)(vr.T,{elevated:!0,css:Tr.root,children:[(0,i.tZ)(f.G,{css:Tr.buttonWrap,children:(0,i.tZ)(yr.h,{alt:c?"Close replace panel":"Show replace panel",onClick:function(){u((function(e){return!e}))},children:(0,i.tZ)(wr.Z,{rotate:c?90:0,style:{transition:"200ms ease"}})})}),(0,i.BX)(f.G,{css:Tr.content,children:[(0,i.BX)(f.G,{css:"large"===L?Tr.layoutLarge:Tr.layoutNormal,children:[(0,i.BX)(f.G,{css:"small"===L?Tr.inputControlsSmall:Tr.inputControlsLarge,children:[(0,i.BX)(f.G,{css:Tr.inputRowWrap,children:[(0,i.tZ)(mr.II,{style:{padding:4,paddingRight:null!==V&&void 0!==V?V:void 0},placeholder:"Find",value:b,name:"search","main-field":"true",autoFocus:!0,onKeyDown:function(e){(0,Bt.jh)(e)&&"f"===e.key?e.currentTarget.select():"enter"===e.key.toLowerCase()&&(a(e)||(e.preventDefault(),e.shiftKey?r():n()))},onChange:function(e){w(e.target.value)}}),z?(0,i.tZ)(f.G,{css:Tr.matchLabel,children:(0,i.tZ)(mt.x,{variant:"small",color:"dimmest",children:z})}):null]}),(0,i.BX)(f.G,{css:Tr.navButtonsWrap,children:[(0,i.tZ)(yr.h,{alt:"Previous",onClick:function(){r()},children:(0,i.tZ)(wr.Z,{rotate:-90})}),(0,i.tZ)(yr.h,{alt:"Next",onClick:function(){n()},children:(0,i.tZ)(wr.Z,{rotate:90})}),(0,i.tZ)(gr.zx,{small:!0,text:"Select all",onClick:function(){(0,pr.i3)(t),t.focus()}})]})]}),q]}),c?(0,i.BX)(f.G,{css:"small"===L?Tr.replaceWrapSmall:Tr.replaceWrapLarge,children:[(0,i.tZ)(f.G,{css:Tr.replaceInputWrap,children:(0,i.tZ)(mr.II,{style:{padding:4},placeholder:"Replace",name:"replace",value:E,onKeyDown:function(e){"enter"===e.key.toLowerCase()&&(a(e)||(e.preventDefault(),(0,pr.K9)(t)))},onChange:function(e){C(e.target.value)}})}),(0,i.BX)(f.G,{css:Tr.replaceButtons,children:[(0,i.tZ)(gr.zx,{small:!0,text:"Replace",onClick:function(){(0,pr.K9)(t)}}),(0,i.tZ)(gr.zx,{small:!0,text:"Replace all",onClick:function(){(0,pr.ko)(t)}})]})]}):null]}),(0,i.tZ)(f.G,{css:Tr.buttonWrap,children:(0,i.tZ)(yr.h,{alt:"Close Search Panel",tooltipHidden:!0,onClick:function(){(0,pr.N$)(t)},children:(0,i.tZ)(br.Z,{})})})]})})}function _r(e){var t=e.dom,n=e.view;return G.createPortal((0,i.tZ)(kr,{view:n}),t)}var Rr=n(89149),Dr=n(17556),Ir=n(4158),Pr=n(83117),Gr=n(10693),Br=H.tk.baseTheme({"& .cm-contextual-ai-tooltip .cm-content":{paddingBottom:"0px"}});var Ar=function(e){var t=e.children,n=e.title,r=e.newInferenceAlt,o=e.width,a=e.dataCy,l=e.onRequestClose,c=e.onRequestNewInference,s=(0,Dr.Z)(l,[]);return(0,i.tZ)("div",{"data-cy":a,ref:s,children:(0,i.tZ)(Gr.Z,{bsod:!0,tags:{ai:!0},extras:{title:n},origin:"ErrorBoundary: ContextualAiModal",children:(0,i.BX)(vr.T,{background:"higher",css:[p.l0.borderRadius(8),p.l0.maxWidth("100%"),p.l0.width(o||320),{background:p.TV.backgroundHigher,boxShadow:p.TV.shadow1,borderWidth:1,borderColor:p.TV.backgroundHighest,borderStyle:"solid"}],children:[(0,i.BX)("div",{css:[p.l0.display.flex,p.l0.justify.spaceBetween,p.l0.flex.row,p.l0.rowWithGap(2),p.l0.p(8),{borderBottom:"1px solid",borderBottomColor:p.TV.backgroundHighest}],children:[(0,i.BX)("div",{css:[p.l0.display.grid,p.l0.align.center,{gridAutoFlow:"column",gridGap:p.TV.space8}],children:[(0,i.tZ)("div",{css:[{color:p.TV.foregroundDefault}],children:n}),(0,i.tZ)("a",{href:Rr.$q,target:"_blank",css:p.l0.color.foregroundDefault,children:(0,i.tZ)(yr.h,{alt:"Learn more about AI at Replit",tooltipDelay:"none",tooltipContents:"This feature is powered by Replit Ghostwriter. Click to learn more.",type:"button",children:(0,i.tZ)(Ir.Z,{color:p.TV.foregroundDimmer})})}),c?(0,i.tZ)(yr.h,{alt:r||"Try again",onClick:c,type:"button",children:(0,i.tZ)(Pr.Z,{})}):null]}),(0,i.tZ)("div",{className:"right",children:(0,i.tZ)(yr.h,{alt:"Close",tooltipHidden:!0,onClick:l,type:"button",children:(0,i.tZ)(br.Z,{})})})]}),t]})})})},Ur=W.Py.define({map:function(e,t){if(e)return e.map(t)}});function Or(e){var t=e.setExplainCodeParams,n=W.QQ.define({create:function(){return null},update:function(e,t){var n=!1,r=null;return(0,q.j)(t,Ur,(function(e){r=e.value,n=!0})),n?r:e&&!t.changes.empty?e.map(t.changes):e},provide:function(e){return[H.hJ.compute([e],(function(n){var r=n.field(e);return r?{pos:r.to,create:function(){var e=document.createElement("div");return e.className="cm-contextual-ai-tooltip",t({dom:e,code:n.doc.sliceString(r.from,r.to)}),{dom:e}}}:null}))]}});return[n,Br]}var Nr=W.Py.define();function Lr(e){var t=e.view,n=e.setGenerateCodePortalProps,r=W.QQ.define({create:function(){return null},update:function(e,r){var i=null;return(0,q.j)(r,Nr,(function(e){i=e.value})),null!==i?i?function(e){return{pos:e.selection.main.to,above:!1,create:function(){var r=document.createElement("div");return r.className="cm-contextual-ai-tooltip",n({dom:r,onRequestClose:function(){t.dispatch({effects:Nr.of(!1)})},selectedCode:e.doc.sliceString(e.selection.main.from,e.selection.main.to)}),{dom:r}}}}(r.state):null:(null===e||r.changes.empty||(e.pos=r.changes.mapPos(e.pos)),e)},provide:function(e){return H.hJ.compute([e],(function(t){return t.field(e)}))}});return[r,Br]}var Fr=W.Py.define();function Xr(e){var t=e.view,n=e.setTransformCodePortalProps,r=W.QQ.define({create:function(){return null},update:function(e,r){var i=null;return(0,q.j)(r,Fr,(function(e){i=e.value})),null!==i?i?function(e){return{pos:e.selection.main.to,above:!1,create:function(){var r=document.createElement("div");return r.className="cm-contextual-ai-tooltip",n({dom:r,onRequestClose:function(){t.dispatch({effects:Fr.of(!1)})},selectedCode:e.doc.sliceString(e.selection.main.from,e.selection.main.to),replaceCode:function(n){t.dispatch(e.replaceSelection(n))}}),{dom:r}}}}(r.state):(null!=e&&t.focus(),null):(null===e||r.changes.empty||(e.pos=r.changes.mapPos(e.pos)),e)},provide:function(e){return H.hJ.compute([e],(function(t){return t.field(e)}))}});return[r,Br]}var Mr=W.Py.define(),Wr=H.tk.baseTheme({".cm-tooltip.cm-search-code-tooltip":{backgroundColor:"transparent",boxShadow:"none",border:"0 none",padding:"0px"},"& .cm-search-code-tooltip .cm-content":{paddingBottom:"0px"}});function jr(e){var t=e.view,n=e.setSearchCodePortalProps,r=W.QQ.define({create:function(){return null},update:function(e,r){var i=null;return(0,q.j)(r,Mr,(function(e){i=e.value})),null!==i?i?function(e){return{pos:e.selection.main.head,above:!1,create:function(){var r=document.createElement("div");return r.className="cm-search-code-tooltip",n({dom:r,onRequestClose:function(){t.dispatch({effects:Mr.of(!1)})},selectedCode:e.doc.sliceString(e.selection.main.from,e.selection.main.to),context:e.doc.toString()}),{dom:r,offset:{x:-14,y:5}}}}}(r.state):null:(null===e||r.changes.empty||(e.pos=r.changes.mapPos(e.pos)),e)},provide:function(e){return H.hJ.compute([e],(function(t){return t.field(e)}))}});return[r,Wr]}function Hr(){var e=(0,kn.Z)(['\n  query SearchCodeEnabled($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        __typename\n      }\n    }\n    currentUser {\n      id\n      hasSearchCode: gate(feature: "flag-semantic-search-v1")\n    }\n  }\n']);return Hr=function(){return e},e}var zr={},Vr=(0,_n.Ps)(Hr());function qr(e){var t,n=function(e){var t=(0,r.Z)({},zr,e);return Rn.a(Vr,t)}({variables:{replId:(0,Mn.Z)()}}).data,i=e.endsWith(".go")||e.endsWith(".js")||e.endsWith(".py");return"Repl"===(null===n||void 0===n?void 0:n.repl.__typename)&&((null===n||void 0===n||null===(t=n.currentUser)||void 0===t?void 0:t.hasSearchCode)&&i)}var Kr=n(21603),$r=n(31557),Yr=n(73604);function Qr(e){var t=e.activeFile,n=e.view,r=e.event,i=e.clipboardText,o=n.state.selection,a=function(){if(!r){var e=i||"";if(o.main.empty){var t=o.main.from+e.length;n.dispatch({changes:[{from:o.main.from,insert:e}],selection:W.jT.range(t,t)})}else n.dispatch(n.state.replaceSelection(e))}};if(t&&"md"===(0,Yr.r6)(t))if(o.ranges.length>1)a();else if(o.main.from!==o.main.to)if(i&&(0,$r.Z)(i)){r&&r.preventDefault();var l=n.state.sliceDoc(o.main.from,o.main.to),c="[".concat(l,"](").concat(i,")"),s=o.main.from+c.length;n.dispatch({changes:{from:o.main.from,to:o.main.to,insert:c},selection:W.jT.range(s,s)})}else a();else a();else a()}var Jr=n(79500),ei=n(25602),ti=n(71171),ni=n.n(ti),ri=n(57418),ii=n(67992);function oi(e){var t=e.view,n=e.filePath,r=(0,O.Z)(n),i=s.useRef(null),a=s.useRef(0),l=(0,A.Z)().session,c=(0,o.Z)(s.useState(null),2),d=c[0],f=c[1],p=(0,ri.eC)(n),h=qr(n),v=(0,yt.Z)(),m=s.useCallback((function(){f(null),t&&t.focus()}),[t]);s.useEffect((function(){var e=function(e){"Escape"===e.key&&m()};if(d)return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[m,d]),s.useEffect((function(){if(t&&d)return t.scrollDOM.addEventListener("scroll",m),function(){t.scrollDOM.removeEventListener("scroll",m)}}),[t,d,m]);var g=(0,xr.Z)((function(){if(t&&d){var e=t.coordsAtPos(a.current);f((function(t){return e?{x:e.left,y:e.top}:t}))}}),{type:"throttle",wait:25}),y=s.useCallback(function(){var e=(0,X.Z)((function(e){var a,c,s,u,d,f,p,h,m,g,y,Z,b,w,x;function E(e){return C.apply(this,arguments)}function C(){return(C=(0,X.Z)((function(e){var c,u,d,f,p,h,v,m,g;return(0,M.__generator)(this,(function(y){switch(y.label){case 0:if(!r||!t)throw new Error("Expected client");return i.current&&r.notify.cancelRequest(i.current),i.current=r.generateId(),c=(0,z.s)(a.doc,s),[4,e(n,c,{id:i.current,tap:(0,At.M)(t)})];case 1:if(u=y.sent(),i.current=null,"error"in u)throw new Error("Something went wrong fetching location: ".concat(u.error.message));return d=u.result,u.cancelled||!d||0===d.length?[2]:(f=(0,o.Z)(d,1),p=f[0],h=p.uri,v=p.range,m=v.start,(g=r.documentUriToPath(h))!==n?l.openFile(g,{line:m.line+1,col:m.character}):l.updateDeeplink({path:g,line:m.line+1,col:m.character}),[2])}}))}))).apply(this,arguments)}return(0,M.__generator)(this,(function(i){switch(i.label){case 0:if(!t)throw new Error("Expected view");switch(a=t.state,c=a.selection.main,s=c.head,(0,Wn.j)(Wn.U3.EDITOR_CONTEXT_MENU_ACTION_RAN,{action:e}),e){case gt.D2.Cut:return[3,1];case gt.D2.Copy:return[3,2];case gt.D2.Paste:return[3,3];case gt.D2.JumpToDefinition:return[3,8];case gt.D2.JumpToTypeDefinition:return[3,10];case gt.D2.JumpToImplementation:return[3,12];case gt.D2.FindReferences:return[3,14];case gt.D2.Rename:return[3,15];case gt.D2.SelectAllOccurrences:return[3,16];case gt.D2.CodeActions:return[3,17];case gt.D2.ToggleBreakpoint:return[3,18];case gt.D2.StartThread:return[3,19];case gt.D2.ExplainCode:return[3,20];case gt.D2.GenerateCode:return[3,21];case gt.D2.TransformCode:return[3,22];case gt.D2.SearchCode:return[3,23];case gt.D2.CopyLinkToPos:return[3,24]}return[3,25];case 1:return u=a.doc.sliceString(c.from,c.to),(0,Jr.Z)(u),t.dispatch(a.replaceSelection("")),[3,26];case 2:return d=a.doc.sliceString(c.from,c.to),(0,Jr.Z)(d),[3,26];case 3:f="",i.label=4;case 4:return i.trys.push([4,6,,7]),[4,window.navigator.clipboard.readText()];case 5:return f=i.sent(),[3,7];case 6:return p=i.sent(),Kr.kg.error("CodeMirror context menu paste failed",{message:p.message}),[3,26];case 7:return Qr({activeFile:v,view:t,clipboardText:f}),[3,26];case 8:if(!r)throw new Error("Expected client");return[4,E(r.request.findDefinitions)];case 9:return i.sent(),[3,26];case 10:if(!r)throw new Error("Expected client");return[4,E(r.request.findTypeDefinitions)];case 11:return i.sent(),[3,26];case 12:if(!r)throw new Error("Expected client");return[4,E(r.request.findImplementations)];case 13:return i.sent(),[3,26];case 14:return t.dispatch({effects:[pt.h.of(s)]}),[3,26];case 15:return t.dispatch({effects:[ht.n.of(s)]}),[3,26];case 16:if(a.selection.main.empty){if(!(h=a.wordAt(s)))return[2];t.dispatch({selection:h})}return(0,pr.tm)(t),setTimeout((function(){return t.focus()})),[3,26];case 17:return(m=t.coordsAtPos(s))?(t.dispatch({effects:[_t.of(m)]}),[3,26]):[2];case 18:return g=a.doc.lineAt(s),Zn(t,g.from),[3,26];case 19:return t.dispatch({effects:[ii.UQ.of(ni()())]}),[3,26];case 20:return y=t.state.selection.main,t.dispatch({effects:[Ur.of(y),H.tk.scrollIntoView(y.to)]}),[3,26];case 21:return t.dispatch({effects:Nr.of(!0)}),[3,26];case 22:return t.dispatch({effects:Fr.of(!0)}),[3,26];case 23:return t.dispatch({effects:Mr.of(!0)}),[3,26];case 24:return Z=(0,z.s)(a.doc,s),b=Z.line,w=Z.character,x=(0,ei.dr)({path:n,line:b+1,col:w}),(0,Jr.Z)(x),[3,26];case 25:throw new Error("Unexpected action: ".concat(e));case 26:return[2]}}))}));return function(t){return e.apply(this,arguments)}}(),[t,r,n,l,v]),Z=(0,o.Z)(s.useState(!1),2),b=Z[0],w=Z[1];(0,en.Z)({view:t,initialExtension:H.tk.updateListener.of((function(e){e.transactions.some((function(e){return e.reconfigured}))&&w("undefined"!==typeof e.view.state.field(bn,!1))}))});var x=L(r),E=s.useMemo((function(){if(!t)return[];var e=[];return x&&(x.isFindDefinitionSupported&&e.push(gt.D2.JumpToDefinition),x.isFindTypeDefinitionSupported&&e.push(gt.D2.JumpToTypeDefinition),x.isFindImplementationSupported&&e.push(gt.D2.JumpToImplementation),(x.isFindDefinitionSupported||x.isFindReferencesSupported)&&e.push(gt.D2.FindReferences),x.isRenameSupported&&e.push(gt.D2.Rename),x.isCodeActionsSupported&&e.push(gt.D2.CodeActions)),e.push(gt.D2.SelectAllOccurrences),e.push(gt.JJ),e.push(gt.D2.CopyLinkToPos),b&&e.push(gt.D2.ToggleBreakpoint),e.push(gt.D2.StartThread),p&&e.push(gt.D2.ExplainCode),e.push(gt.D2.GenerateCode),e.push(gt.D2.TransformCode),h&&e.push(gt.D2.SearchCode),e.push(gt.JJ),e.push(gt.D2.Cut),e.push(gt.D2.Copy),window.navigator.clipboard&&"readText"in window.navigator.clipboard&&e.push(gt.D2.Paste),e}),[t,x,b,p,h]),C=(0,en.Z)({view:t});return s.useEffect((function(){if(t){var e=E.filter((function(e){return!(0,gt.s3)(e)})).filter((function(e){return"keyboardShortcut"in gt.Wo[e]})).filter((function(e){return e!==gt.D2.Cut&&e!==gt.D2.Copy&&e!==gt.D2.Paste})).map((function(e){var t=gt.Wo[e].keyboardShortcut,n={key:t.key,preventDefault:!0,run:function(){return y(e),!0}};return t.altKey&&(n.key="Alt-".concat(n.key)),t.shiftKey&&(n.key="Shift-".concat(n.key)),t.cmdOrCtrlKey&&(n.key="Mod-".concat(n.key)),n}));return t.dispatch({effects:C.reconfigure(H.$f.of(e))}),function(){t.dispatch({effects:C.reconfigure([])})}}}),[t,y,E,C]),{onAction:y,actions:E,contextMenuCoords:d,onContextMenu:function(e){if(!(0,u.isMobile)({tablet:!1})&&t){e.preventDefault();var r=e.clientX,i=e.clientY,o=t.state.selection.main,l=t.posAtCoords({x:r,y:i}),c=t.state.doc.length,s=null===l?c:l;if(a.current=s,s<o.from||s>o.to){var d=W.jT.cursor(s);t.dispatch({selection:d})}var p=(0,Yr.r6)(n);(0,Wn.j)(Wn.U3.EDITOR_CONTEXT_MENU_OPENED,{ext:p}),f({x:r,y:i})}},closeMenu:m,resizeRef:g}}function ai(){var e=(0,kn.Z)(["\n  query DeprecatedLanguageConfig($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        deprecatedLanguageConfig {\n          id\n          mainFile\n        }\n      }\n    }\n  }\n"]);return ai=function(){return e},e}var li={},ci=(0,_n.Ps)(ai());function si(e){var t=function(e){var t=(0,r.Z)({},li,e);return Rn.a(ci,t)}({variables:{replId:e.replId}}).data;return"Repl"===(null===t||void 0===t?void 0:t.repl.__typename)?t.repl.deprecatedLanguageConfig:null}function ui(e){var t=e.view,n=e.line,r=e.col,i=t.state.doc,o=Math.max(1,Math.min(n,i.lines)),a=i.line(o),l=a.to,c=a.from,s=r||0,u=Math.min(c+s,l),d=W.jT.cursor(u);t.dispatch({selection:d,effects:[H.tk.scrollIntoView(u,{x:"center",y:"center"})]}),t.focus()}var di=n(70806),fi=n(69355),pi=n(60523);function hi(e){var t=e.view,n=e.filePath,i=e.isLoading,o=function(){var e=(0,s.useContext)(pi.Z);if(!e)throw new Error("Expected codemirror state to be in codemirror state context");return e}(),l=(0,en.Z)({view:t});(0,s.useEffect)((function(){if(t&&!i){var e,c=o.current.fileMap.get(n);if(c&&t.state.doc.eq(c.doc)){if(t.state.field(m.cE,!1))throw new Error("History was preconfigured on this view, if you want to use state cache, please make sure history is not already configured for this view");var s=[];c.foldedRanges.between(0,t.state.doc.length,(function(e,t){s.push(Ee.SW.of({from:e,to:t}))})),t.dispatch({effects:(0,a.Z)(s).concat([H.tk.scrollIntoView(c.scrollPos,{y:"start"})]),selection:c.selection}),e=[m.cE.init((function(){return c.history})),(0,m.m8)()]}else e=(0,m.m8)();var u=!1,d={read:function(e){if(!u){var t=o.current.fileMap.get(n);if(t){var i=function(e){var t=e.scrollDOM.getBoundingClientRect();if(0===t.top&&0===t.bottom)return null;var n=t.top+e.defaultLineHeight;return e.posAtCoords({x:0,y:n},!1)}(e);null===i||i>t.doc.length||o.current.fileMap.set(n,(0,P.Z)((0,r.Z)({},t),{scrollPos:i}))}}}},f=!1;return t.dispatch({effects:l.reconfigure([e,H.tk.updateListener.of((function(e){u||f||(!function(e){var t,r=o.current.fileMap.get(n),i=null!==(t=null===r||void 0===r?void 0:r.scrollPos)&&void 0!==t?t:0;o.current.fileMap.set(n,{history:e.field(m.cE,!1),foldedRanges:(0,Ee.q2)(e),selection:e.selection,doc:e.doc,scrollPos:i})}(e.state),e.view.requestMeasure(d),f=!0,requestAnimationFrame((function(){f=!1})))}))])}),function(){u=!0,t.dispatch({effects:l.reconfigure([])})}}}),[t,n,o,i,l])}var vi=n(58967),mi=n(89224),gi=n(37806),yi=n(31248),Zi=W.q6.define();var bi=n(58502),wi=n(98403),xi={"#1BC47D":"rgba(27, 196, 125, 0.2)","#EF5533":"rgba(239, 85, 51, 0.2)","#18A0FB":"rgba(24, 160, 251, 0.2)","#FFC700":"rgba(255, 199, 0, 1)","#907CFF":"rgba(144, 124, 255, 0.2)","#00B5CE":"rgba(0, 181, 206, 0.2)","#EE46D3":"rgba(238, 70, 211, 0.2)"};var Ei=W.Py.define(),Ci=W.Py.define(),Si=W.Py.define(),Ti=W.QQ.define({create:function(){return{}},update:function(e,t){if(!t.changes.empty){var n=function(e){return t.changes.mapPos(Math.min(t.changes.length,e))},i={},a=!0,l=!1,c=void 0;try{for(var s,u=Object.values(e)[Symbol.iterator]();!(a=(s=u.next()).done);a=!0){var d=s.value;i[d.id]=(0,P.Z)((0,r.Z)({},d),{position:n(d.position),selectionStart:n(d.selectionStart),selectionEnd:n(d.selectionEnd)})}}catch(S){l=!0,c=S}finally{try{a||null==u.return||u.return()}finally{if(l)throw c}}e=i}var f=!0,p=!1,h=void 0;try{for(var v,m=t.effects[Symbol.iterator]();!(f=(v=m.next()).done);f=!0){var g=v.value;if(g.is(wi.R)&&(e=(0,r.Z)({},e)),g.is(Ei)&&g.value.position<=t.newDoc.length&&((e=(0,r.Z)({},e))[g.value.id]=(0,r.Z)({},g.value)),g.is(Ci)&&(e=(0,r.Z)({},e),g.is(Ci)&&delete e[g.value]),g.is(Si)){e=(0,r.Z)({},e);var y=!0,Z=!1,b=void 0;try{for(var w,x=Object.entries(e)[Symbol.iterator]();!(y=(w=x.next()).done);y=!0){var E=(0,o.Z)(w.value,2),C=E[0];E[1].username===g.value&&delete e[C]}}catch(S){Z=!0,b=S}finally{try{y||null==x.return||x.return()}finally{if(Z)throw b}}}}}catch(S){p=!0,h=S}finally{try{f||null==m.return||m.return()}finally{if(p)throw h}}return e},provide:function(e){return[H.tk.decorations.computeN([e],(function(t){var n=t.field(e);return Object.values(n).map((function(e){var t=e.selectionStart<e.selectionEnd?e.selectionStart:e.selectionEnd,n=e.selectionStart>e.selectionEnd?e.selectionStart:e.selectionEnd;return t===n?null:H.p.set(H.p.mark({attributes:{style:"background-color: ".concat(e.color.selection,"; display: inline-block;")},cursor:e}).range(t,n))})).filter((function(e){return null!==e}))}))]}});function ki(e){return H.tk.updateListener.of((function(t){var n=t.state.selection;n!==t.startState.selection&&(t.transactions.every((function(e){return e.annotation(W.YW.remote)}))||e(n.ranges.map((function(e){var n=t.state.doc.lineAt(e.head);return{position:e.head,line:n.number,column:e.head-n.from+1,selectionStart:e.from,selectionEnd:e.to}})),n.mainIndex))}))}function _i(e){var t=e.view,n=e.presence,i=e.session,o=e.fs,a=e.filePath,l=(0,s.useState)(null),c=l[0],u=l[1],d=(0,bi.Z)({presence:n}),f=(0,s.useRef)({}),p=(0,St.Z)();(0,s.useEffect)((function(){var e=d.reduce((function(e,t){return t.username&&t.color?(0,P.Z)((0,r.Z)({},e),(0,ge.Z)({},t.username,t.color)):e}),{});f.current=e}),[d]);var h=(0,en.Z)({view:t});return(0,s.useEffect)((function(){if(t){var e=n.onUserLeave((function(e){t.dispatch({effects:Si.of(e.username)})})),r=o.watchTextFile(a,{onReady:function(e){var n=e.updateSelections;t.dispatch({effects:h.reconfigure([Ti,ki((function(e,t){n(e);var r=e[t];r&&i.setCursorPosition({column:r.column,lineNumber:r.line,offset:r.position})}))])}),u(a)},onCursor:function(e){var n=function(e){var t,n=e.cursor,r=e.usernameColorsMap,i=null===(t=n.user)||void 0===t?void 0:t.name;if(i){var o,a=n.id,l=n.position,c=n.selectionStart,s=n.selectionEnd,u=r[i];if(u&&a&&"number"===typeof l&&"number"===typeof c&&"number"===typeof s)return Ei.of({id:a,username:i,position:l,color:{cursor:u,selection:(o=u,xi[o]||"")},selectionStart:c,selectionEnd:s})}}({cursor:e,usernameColorsMap:f.current});n&&t.dispatch({effects:n})},onRemoveCursor:function(e){t.dispatch({effects:Ci.of(e)})},onError:function(){t.dispatch({effects:h.reconfigure([])})},onMoveOrDelete:function(){t.dispatch({effects:h.reconfigure([])})}});return function(){e(),r(),t.dispatch({effects:h.reconfigure([])}),p.current&&u(null)}}}),[t,a,o,n,i,h]),{loadedFile:c}}var Ri=n(86601);var Di=H.tk.theme({".multiplayer-cursor":{width:"2px",left:"0",top:"0"},".multiplayer-cursor .multiplayer-label":{boxShadow:K.TV.shadow1,borderRadius:K.TV.borderRadius4,padding:"1px",position:"absolute",left:"0px",animation:"fadeOut 2s ease-in forwards",color:"white",display:"inline-block"},".multiplayer-cursor:hover .multiplayer-label":{animation:"auto"}});function Ii(e){e.style.transform="translate(-10000px, -10000px)"}function Pi(e){var t=document.createElement("div");t.textContent=e.username,t.style.backgroundColor=e.color.cursor,t.classList.add("multiplayer-label");var n=document.createElement("div");return n.classList.add("multiplayer-cursor"),n.style.backgroundColor=e.color.cursor,n.style.position=Z.gn?"absolute":"fixed",n.appendChild(t),{dom:n,label:t}}var Gi=new Map;function Bi(e){return"".concat(e.username,":").concat(e.position,":").concat(e.selectionStart,":").concat(e.selectionEnd)}var Ai=[Di,H.lg.define((function(e){var t=function(){s&&(s.disconnect(),o.forEach((function(e){s.observe(e.view.dom)})))},n=function(){if(!Boolean(!i||0===Object.values(i).length)&&(e.inView&&e.requestMeasure(d),l!==e.inView)){if(l=e.inView)return;o.forEach((function(e){Ii(e.view.dom)}))}},r=function(){null===u&&(u=setTimeout((function(){u=null,n()}),50))},i=e.state.field(Ti,!1),o=new Map((i?Object.values(i):[]).map((function(e){return[e.id,{view:Pi(e),cursor:e}]}))),l=!0,c=0,s="function"===typeof IntersectionObserver?new IntersectionObserver((function(e){Date.now()>c-50&&e.length>0&&e[e.length-1].intersectionRatio<1&&r()}),{threshold:[1]}):null;t();var u=null;window.addEventListener("resize",r);var d={read:function(){return{editorRect:e.scrollDOM.getBoundingClientRect(),dimensions:new Map((i?Object.values(i):[]).map((function(t){var n=o.get(t.id),r=n?function(e,t){var n=Gi.get(e);if(n)return n;var r=t.getBoundingClientRect().width;return Gi.set(e,r),r}(t.username,n.view.label):null;return[t.id,{position:e.coordsAtPos(t.position),labelWidth:r}]})))}},write:function(e){o.forEach((function(t,n){var r=e.dimensions.get(n);!function(e){var t=e.cursorView,n=e.position,r=e.labelWidth,i=e.editorRect,o=t.dom,a=t.label;if(n&&r){var l=n.bottom-n.top;if(n.bottom<=i.top+l||n.top+l>=i.bottom||n.right<i.left-.1||n.left>i.right+.1)Ii(o);else{var c=n.left+r-i.right,s="0px";c>0?(s="-".concat(c,"px"),a.style.borderBottomLeftRadius="4px"):a.style.borderBottomLeftRadius="0px",a.style.transform="translate(".concat(s,", -100%)");var u=Z.gn?{x:n.left-i.left+"px",y:n.top-i.top+"px"}:{x:"calc(".concat(n.left,"px + var(--fixed-position-offset-x))"),y:"calc(".concat(n.top,"px + var(--fixed-position-offset-y))")},d=u.x,f=u.y;o.style.transform="translate(".concat(d,", ").concat(f,")"),o.style.height=l+"px"}}else Ii(o)}({cursorView:t.view,position:(null===r||void 0===r?void 0:r.position)||null,labelWidth:(null===r||void 0===r?void 0:r.labelWidth)||null,editorRect:e.editorRect})}))},key:Math.random().toString()};return{update:function(r){r.transactions.length&&(c=Date.now());var l=r.state.field(Ti,!1);if(l!==r.startState.field(Ti,!1)){var s=new Map,u=new Set;if(l){var d=new Map((0,a.Z)(o.values()).map((function(e){return[Bi(e.cursor),e.view]})));Object.values(l).forEach((function(t){var n=d.get(Bi(t));if(n)u.add(n),s.set(t.id,{view:n,cursor:t});else{var r=Pi(t);s.set(t.id,{view:r,cursor:t}),e.dom.appendChild(r.dom)}}))}o.forEach((function(e){u.has(e.view)||e.view.dom.remove()})),o=s,i=l,t(),n()}else r.geometryChanged&&n()},destroy:function(){window.removeEventListener("resize",r),o.forEach((function(e){e.view.dom.remove()})),i=void 0,o=new Map,null===s||void 0===s||s.disconnect(),u&&clearTimeout(u)},maybeMeasure:n}}),{eventHandlers:{scroll:function(){this.maybeMeasure()}}})];function Ui(e){var t=e.view,n=e.presence,r=e.session,i=e.fs,o=e.filePath,a=function(e){var t=e.view,n=e.fs,r=e.filePath,i=(0,s.useState)(null),o=i[0],a=i[1],l=(0,St.Z)(),c=(0,en.Z)({view:t}),u=(0,vi.Z)().trackTimeToLoadFileEnd,d=(0,gi.uV)();return(0,s.useEffect)((function(){if(t){var e=0,i=n.watchTextFile(r,{onReady:function(i){var o=i.initialContent,l=i.writeChange,s=i.version;e=s,u(r),t.dispatch({changes:{from:0,to:t.state.doc.length,insert:o},annotations:[W.YW.addToHistory.of(!1),W.YW.remote.of(!0),Zi.of(!0)]}),t.dispatch({effects:c.reconfigure(H.tk.updateListener.of((function(t){if(t.docChanged){var i=!0,o=!1,a=void 0;try{for(var c,s=function(){var i=c.value;if(i.annotation(W.YW.remote)||i.annotation(Zi))return"continue";var o=i.annotation(yi.Z)?{author:"ghostwriter"}:{};try{l(i.changes,o)}catch(a){throw n.readFile(r,{fromDisk:!1}).then((function(n){var o="replitReadError: "+n.error;n.error||(o=n.content.toString()),d({origin:"Codemirror: ot/writeChange",error:a,tags:{ot:!0},extras:{filePath:r,transactionChanges:JSON.stringify(i.changes),otherTransactionChanges:JSON.stringify(t.transactions.filter((function(e){return e!==i})).map((function(e){return e.changes}))),transactionDoc:i.newDoc.sliceString(0),updateDoc:t.state.doc.sliceString(0),otClientDoc:o,version:e}})})),a}},u=t.transactions[Symbol.iterator]();!(i=(c=u.next()).done);i=!0)s()}catch(f){o=!0,a=f}finally{try{i||null==u.return||u.return()}finally{if(o)throw a}}}})))}),a(r)},onChange:function(i){var o=i.changes,a=i.changeSource,l=i.version;e=l;try{t.dispatch({changes:o,annotations:[W.YW.remote.of(a===mi.Fl.Container),W.YW.addToHistory.of(a===mi.Fl.Local),Zi.of(!0)]})}catch(c){throw n.readFile(r,{fromDisk:!1}).then((function(e){var n="replitReadError: "+e.error;e.error||(n=e.content.toString()),d({origin:"Codemirror: ot/syncRemoteOp",error:c,tags:{ot:!0},extras:{filePath:r,changes:JSON.stringify(o),changeSource:a,version:l,otClientDoc:n,cmDoc:t.state.doc.sliceString(0)}})})),c}},onError:function(){t.dispatch({effects:c.reconfigure([])})},onMoveOrDelete:function(){t.dispatch({effects:c.reconfigure([])})}});return function(){i(),t.dispatch({effects:[c.reconfigure([])]}),l.current&&a(null)}}}),[t,r,n,l,c,u,d]),{loadedFile:o}}({view:t,fs:i,filePath:o}),l=a.loadedFile,c=_i({view:t,fs:i,filePath:o,presence:n,session:r}).loadedFile;!function(e){var t=e.view,n=(0,A.Z)().presence,r=(0,Ri.Z)(),i=(0,en.Z)({view:t});s.useEffect((function(){if(r&&t){var e=function(){n.getFollowedUser()&&n.unfollowUser()};return t.dispatch({effects:i.reconfigure(H.tk.domEventHandlers({wheel:e,keydown:function(t){"Control"!==t.key&&"Meta"!==t.key&&e()},click:e}))}),function(){t.dispatch({effects:i.reconfigure([])})}}}),[r,t,n,i]);var o=(0,en.Z)({view:t});s.useEffect((function(){var e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(t){var n=W.jT.cursor(e);t.dispatch({effects:[H.tk.scrollIntoView(n,{x:"center",y:"center"})]})}};if(t&&r){var n=t.state.field(Ti,!1);if(n){var i=Object.values(n).find((function(e){return e.username===r.username}));i&&e(i.position)}return t.dispatch({effects:o.reconfigure(H.tk.updateListener.of((function(t){var n,i=!0,o=!1,a=void 0;try{for(var l,c=t.transactions[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value,u=!0,d=!1,f=void 0;try{for(var p,h=s.effects[Symbol.iterator]();!(u=(p=h.next()).done);u=!0){var v=p.value;v.is(Ei)&&v.value.username===r.username&&(n=v.value)}}catch(m){d=!0,f=m}finally{try{u||null==h.return||h.return()}finally{if(d)throw f}}}}catch(m){o=!0,a=m}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}n&&e(n.position)})))}),function(){t.dispatch({effects:o.reconfigure([])})}}}),[t,r,o])}({view:t});var u=o!==l||o!==c,d=(0,en.Z)({view:t});return(0,en.Z)({view:t,initialExtension:Ai}),(0,s.useEffect)((function(){t&&t.dispatch({effects:d.reconfigure([H.tk.editable.of(!u),W.yy.readOnly.of(u)])})}),[t,u,d]),{isLoading:u}}var Oi=n(96486),Ni=new Set,Li=(0,Oi.throttle)((function(){var e=!0,t=!1,n=void 0;try{for(var r,i=Ni[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var o=r.value;(0,Wn.j)(Wn.U3.WS_TYPED,{fileExt:o})}}catch(a){t=!0,n=a}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}Ni.clear()}),6e4);function Fi(e){var t=e.view,n=e.onType,r=e.filePath,i=(0,en.Z)({view:t});s.useEffect((function(){if(t&&n&&r){var e=(0,Yr.r6)(r)||(0,Yr.UO)(r);return t.dispatch({effects:i.reconfigure(H.tk.updateListener.of((function(t){t.docChanged&&(t.transactions.some((function(e){return e.annotation(W.YW.remote)}))||function(e){Ni.has(e)||(Ni.add(e),Li())}(e))})))}),function(){t.dispatch({effects:i.reconfigure([])})}}}),[t,n,r,i])}var Xi=n(62808),Mi=n(43439);var Wi=n(88662),ji=n(28067),Hi=n(32703),zi=RegExp("_(?<num>\\d+)$");function Vi(e,t){return qi.apply(this,arguments)}function qi(){return(qi=(0,X.Z)((function(e,t){var n,r,i,o;return(0,M.__generator)(this,(function(a){switch(a.label){case 0:return n=(0,Yr.Il)(t),[4,e.readDir(n||".")];case 1:return(r=a.sent()).error?[2,t]:(o=(i=function(e){if(r.children.find((function(t){return"FILE"===t.type&&t.filename===e}))){var t,n=(0,Yr.eb)(e),o=(0,Yr.r6)(e),a=n.match(zi);if(null===a||void 0===a||null===(t=a.groups)||void 0===t?void 0:t.num){var l=Number(a.groups.num);return i("".concat(n.replace(zi,""),"_").concat(l+1,".").concat(o))}return i("".concat(n,"_2.").concat(o))}return e})((0,Yr.UO)(t)),[2,n?n+"/"+o:o])}}))}))).apply(this,arguments)}var Ki=n(93449),$i=function(){var e=(0,X.Z)((function(e,t,n){var r,i,o,a,l,c;return(0,M.__generator)(this,(function(s){switch(s.label){case 0:return r=encodeURI(e.name),i=(0,Yr.Il)(n),[4,Vi(t,i?i+"/"+r:r)];case 1:return o=s.sent(),[4,(0,Hi.pV)(e)];case 2:return a=s.sent(),[4,t.writeFile(o,Ki.Z.from(a))];case 3:return s.sent(),l=(0,Yr.eb)(e.name),c=(0,Yr.UO)(o),[2,"![".concat(l,"](").concat(c,")")]}}))}));return function(t,n,r){return e.apply(this,arguments)}}();var Yi=function(e){(0,be.Z)(n,e);var t=(0,xe.Z)(n);function n(e,r){var i;return(0,Ze.Z)(this,n),(i=t.call(this)).src=e,i.pos=r,i}var r=n.prototype;return r.eq=function(e){return this.src===e.src&&this.pos===e.pos},r.toDOM=function(){var e=document.createElement("img");return e.src=this.src,e.dataset.pos=this.pos.toString(),e.style.maxHeight="64px",e.style.maxWidth="256px",e},r.ignoreEvent=function(){return!1},n}(H.l9),Qi=/"data:image\/\w+;base64,[^"\s]+"/g,Ji=Number.MAX_VALUE,eo=H.lg.define((function(e){var t=new H.Y1({regexp:Qi,decoration:function(e,t,n){if(void 0===e[0])throw new Error("Failed to match image");var r=e[0].substring(1,e[0].length-1);return H.p.replace({widget:new Yi(r,n)})},maxLength:Ji});return{matcher:t,deco:t.createDeco(e),update:function(e){e.docChanged&&(this.deco=t.updateDeco(e,this.deco))}}}),{decorations:function(e){return e.deco},provide:function(e){return H.tk.atomicRanges.of((function(t){var n=t.plugin(e);return n?n.deco:H.p.none}))}});var to=(0,u.isMobile)()?.01:.001;var no=n(60147),ro=n(75192);var io=n(44796),oo=n(24561);var ao=function(){return(0,i.tZ)("div",{css:[p.l0.p(16)],children:(0,i.BX)(oo.ZP,{viewBox:"0 0 100 10",backgroundColor:p.TV.backgroundHigher,foregroundColor:p.TV.backgroundHighest,speed:1.5,children:[(0,i.tZ)("rect",{x:"0",y:"0",rx:"2",ry:"2",width:"100",height:"4"}),(0,i.tZ)("rect",{x:"0",y:"6",rx:"2",ry:"2",width:"33",height:"4"})]})})},lo=n(76951),co=n(26801),so=n(93058),uo=n(86514),fo=n(8527),po=n(77836),ho=n(15882),vo=n(15315),mo=n(88961),go=n(63736),yo=n(51894);function Zo(e){var t=e.filePath,n=e.selectedCode,r=e.onRequestClose,a=(0,Mn.Z)(),l=(0,zn.Z)(t),c=(0,o.Z)(s.useState(n),2),u=c[0],d=c[1],f=(0,o.Z)(s.useState(""),2),p=f[0],h=f[1],v=(0,o.Z)(s.useState(!1),2),m=v[0],g=v[1],y=s.useRef(null),Z=(0,o.Z)((0,yo.wB)({fetchPolicy:"no-cache"}),2),b=Z[0],w=Z[1],x=w.called,E=w.data,C=w.error,S=w.loading,T=Gn(),k=T.enabled,_=T.loading,R=(0,ri.Sf)(t),D=function(){if(!S&&""!==u){var e=u===p;(0,Wn.j)(Wn.U3.CODEX_FEATURE_USED,{feature:"generation",isRetry:e,action:e?"refresh":"submit",language:R}),h(u),b({variables:{input:{language:R,prompt:u,replId:a}}})}},I=(0,so.Z)().showConfirm;if(_)return null;if(!k)return(0,i.tZ)(Ar,{title:"Generate Code",newInferenceAlt:"Generate new code",onRequestClose:r,width:320,children:(0,i.BX)(K.G7,{css:[K.l0.colWithGap(12),K.l0.p(8)],children:[(0,i.tZ)(K.xv,{multiline:!0,children:"Activate Ghostwriter to get access to Generate Code and other AI-powered features!"}),(0,i.tZ)(K.G7,{css:{alignSelf:"center"},children:(0,i.tZ)(co.Z,{context:"generate_code_modal"})})]})});var P=null,G=null===E||void 0===E?void 0:E.generateCode.__typename;if(S)P=(0,i.tZ)(ao,{});else if(C||"UserError"===G||"UnauthorizedError"===G){var B,A;P=(0,i.tZ)(K.G7,{children:(0,i.tZ)(K.E_,{colorway:"negative",icon:(0,i.tZ)(mo.Z,{}),text:"UserError"!==G&&"UnauthorizedError"!==G||!(null===E||void 0===E||null===(B=E.generateCode)||void 0===B?void 0:B.message)?"Oops! An unexpected error occurred. Please try again or contact support.":null===E||void 0===E||null===(A=E.generateCode)||void 0===A?void 0:A.message})})}else if("GenerateCodeResult"===G&&null!=(null===E||void 0===E?void 0:E.generateCode)){var U,O=E.generateCode,N=O.code,L=O.id;if(null==N||""===N)P=(0,i.tZ)(K.G7,{children:(0,i.tZ)(K.E_,{colorway:"warning",icon:(0,i.tZ)(vt.Z,{}),text:"That prompt gave us some trouble. Try re-wording it."})});else P=(0,i.BX)(K.G7,{children:[(0,i.BX)(K.Tg,{background:"default",css:[K.l0.py(8),K.l0.px(8),K.l0.borderRadius(8)],children:[(0,i.tZ)(K.G7,{dataCy:"generate-code-modal-generation-preview",css:[K.l0.maxHeight(300),K.l0.overflowY("auto")],children:(0,i.tZ)(Qn.ZP,{code:N,filePath:t,hideGutter:!0,hideIndentMarker:!0})}),(0,i.BX)(K.G7,{css:[K.l0.flex.row,K.l0.justify.spaceBetween,K.l0.align.center,K.l0.pt(8),K.l0.px(4)],children:[(0,i.BX)(K.G7,{css:[K.l0.rowWithGap(4),K.l0.align.center],children:[(0,i.tZ)(go.Z,{path:t,size:16}),(0,i.tZ)(K.xv,{color:"dimmer",css:[{textTransform:"capitalize"},K.l0.fontSize(12)],children:R})]}),(0,i.BX)(K.G7,{css:K.l0.rowWithGap(8),children:[(0,i.tZ)(K.zx,{small:!0,iconLeft:(0,i.tZ)(fo.Z,{}),text:"Copy to clipboard",onClick:function(){(0,Jr.Z)(N).then((function(){I("Code copied to clipboard")})),(0,Wn.j)(Wn.U3.CODEX_FEATURE_USED,{feature:"generation",action:"copied-to-clipboard",language:R})}}),"function"===typeof l?(0,i.tZ)(K.zx,{dataCy:"generate-code-modal-insert-button",small:!0,iconLeft:(0,i.tZ)(ho.Z,{}),text:"Insert in editor",colorway:"primary",onClick:function(){l({code:N}),(0,Wn.j)(Wn.U3.CODEX_FEATURE_USED,{feature:"generation",action:"inserted-in-editor",language:R}),r()}}):null,(null===E||void 0===E||null===(U=E.currentUser)||void 0===U?void 0:U.isAdmin)?(0,i.tZ)(K.u,{tooltip:(0,i.tZ)(K.G7,{children:(0,i.tZ)("pre",{css:[{whiteSpace:"pre-wrap"}],children:JSON.stringify(JSON.parse(E.generateCode.metadata),null," ")})}),placement:"bottom",children:(0,i.tZ)(K.hU,{colorway:"warning",alt:"Debug metadata",tooltipHidden:!0,children:(0,i.tZ)(uo.Z,{})})}):null]})]})]}),(0,i.tZ)(K.G7,{css:[K.l0.flex.row,K.l0.align.center,K.l0.justify.spaceBetween],children:(0,i.tZ)(lo.Z,{inferenceId:L,language:R,inferenceClass:ar.Sg.Generation})})]})}return(0,i.tZ)(Ar,{dataCy:"generate-code-modal",title:"Generate Code",onRequestClose:r,width:500,children:(0,i.BX)(K.G7,{css:[K.l0.p(8),K.l0.colWithGap(8)],children:[(0,i.BX)(K.G7,{tag:"form",onSubmit:function(e){e.preventDefault(),D()},css:[K.l0.rowWithGap(8)],children:[(0,i.tZ)(K.II,{autoFocus:!0,dataCy:"generate-code-modal-prompt-input",placeholder:'Write a prompt (e.g. "draw a square")',value:u,onChange:function(e){return t=e.target.value,m||((0,Wn.j)(Wn.U3.CODEX_FEATURE_USED,{action:"prompt-written",feature:"generation",language:R}),g(!0)),void d(t);var t},ref:y,maxLength:1e3,onKeyDown:function(e){"Escape"===e.key&&r(),e.metaKey&&"Enter"===e.key&&(e.preventDefault(),e.stopPropagation(),D())}}),(0,i.tZ)(K.zx,{text:"Generate",dataCy:"generate-code-modal-submit-button",colorway:"primary",disabled:S||""===u,type:"submit",iconRight:!S&&x?(0,i.tZ)(vo.Z,{}):(0,i.tZ)(po.Z,{})})]}),P]})})}function bo(e){var t=e.dom,n=(0,we.Z)(e,["dom"]);return G.createPortal((0,i.tZ)(Zo,(0,r.Z)({},n)),t)}var wo=n(97795),xo=n(73359);function Eo(){var e=(0,kn.Z)(["\n  query TransformCode($input: TransformCodeInput!) {\n    currentUser {\n      id\n      isAdmin: hasRole(role: ADMIN)\n    }\n    transformCode(input: $input) {\n      ... on TransformCodeResult {\n        id\n        code\n        metadata\n      }\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on ServiceUnavailable {\n        message\n      }\n    }\n  }\n"]);return Eo=function(){return e},e}function Co(){var e=(0,kn.Z)(["\n  query TransformCodeModalCurrentUser {\n    currentUser {\n      id\n      userPowerUpsByType {\n        __typename\n        ... on UserPowerUpsTypes {\n          ghostwriter {\n            active\n          }\n        }\n      }\n    }\n  }\n"]);return Co=function(){return e},e}var So={},To=(0,_n.Ps)(Eo());Co();function ko(e){var t=e.filePath,n=e.selectedCode,a=e.onRequestClose,l=e.replaceCode,c=(0,Mn.Z)(),u=(0,so.Z)(),d=u.showError,f=u.showConfirm,p=(0,o.Z)(s.useState(""),2),h=p[0],v=p[1],m=(0,o.Z)(s.useState(""),2),g=m[0],y=m[1],Z=(0,o.Z)(s.useState(!1),2),b=Z[0],w=Z[1],x=s.useRef(null),E=s.useRef(!1),C=(0,o.Z)(function(e){var t=(0,r.Z)({},So,e);return xo.t(To,t)}({fetchPolicy:"no-cache",onError:function(e){return d(e.message)}}),2),S=C[0],T=C[1],k=T.called,_=T.data,R=T.error,D=T.loading,I=Gn(),P=I.enabled,G=I.loading,B=D;s.useEffect((function(){if(E.current)return a();E.current=!0}),[t,a]);var A=(0,ri.Sf)(t),U=function(){if(!B&&""!==h){var e=h===g;(0,Wn.j)(Wn.U3.CODEX_FEATURE_USED,{feature:"transformation",isRetry:e,action:e?"refresh":"submit",language:A}),y(h),S({variables:{input:{input:n,language:A,prompt:h,replId:c}}})}},O=null===_||void 0===_?void 0:_.transformCode.__typename,N=R||"UserError"===O||"UnauthorizedError"===O;if(G)return null;if(!P)return(0,i.tZ)(Ar,{title:"Transform Code",newInferenceAlt:"Transform your code",onRequestClose:a,width:320,children:(0,i.BX)(K.G7,{css:[K.l0.colWithGap(12),K.l0.p(8)],children:[(0,i.tZ)(K.xv,{multiline:!0,children:"Activate Ghostwriter to get access to Transform Code and other AI-powered features!"}),(0,i.tZ)(K.G7,{css:{alignSelf:"center"},children:(0,i.tZ)(co.Z,{context:"transform_code_modal"})})]})});var L=null;if(B)L=(0,i.tZ)(ao,{});else if(N){var F,X;L=(0,i.tZ)(K.G7,{children:(0,i.tZ)(K.E_,{colorway:"negative",icon:(0,i.tZ)(mo.Z,{}),text:"UserError"!==O&&"UnauthorizedError"!==O||!(null===_||void 0===_||null===(F=_.transformCode)||void 0===F?void 0:F.message)?"Oops! An unexpected error occurred. Please try again or contact support.":null===_||void 0===_||null===(X=_.transformCode)||void 0===X?void 0:X.message})})}else if("ServiceUnavailable"===O)L=(0,i.tZ)(K.G7,{children:(0,i.tZ)(K.E_,{colorway:"warning",icon:(0,i.tZ)(vt.Z,{}),text:"That prompt gave us some trouble. Try re-wording it."})});else if("TransformCodeResult"===O&&null!=_){var M,W=_.transformCode,j=W.code,H=W.id;if(null==j||""===j)L=(0,i.tZ)(K.G7,{children:(0,i.tZ)(K.E_,{colorway:"warning",icon:(0,i.tZ)(vt.Z,{}),text:"That prompt gave us some trouble. Try re-wording it."})});else L=(0,i.BX)(K.G7,{children:[(0,i.BX)(K.Tg,{background:"default",css:[K.l0.py(8),K.l0.px(4),K.l0.borderRadius(8)],children:[(0,i.tZ)(K.G7,{dataCy:"transform-code-modal-generation-preview",css:[K.l0.maxHeight(300),K.l0.overflowY("auto")],children:(0,i.tZ)(Qn.ZP,{code:j,filePath:t,hideGutter:!0})}),(0,i.BX)(K.G7,{css:[K.l0.flex.row,K.l0.justify.spaceBetween,K.l0.align.center,K.l0.pt(8),K.l0.px(4)],children:[(0,i.BX)(K.G7,{css:[K.l0.rowWithGap(4),K.l0.align.center],children:[(0,i.tZ)(go.Z,{path:t,size:16}),(0,i.tZ)(K.xv,{color:"dimmer",css:[{textTransform:"capitalize"},K.l0.fontSize(12)],children:A})]}),(0,i.BX)(K.G7,{css:K.l0.rowWithGap(8),children:[(0,i.tZ)(K.zx,{iconLeft:(0,i.tZ)(fo.Z,{}),text:"Copy to clipboard",onClick:function(){(0,Jr.Z)(j).then((function(){f("Code copied to clipboard")})),(0,Wn.j)(Wn.U3.CODEX_FEATURE_USED,{feature:"transformation",action:"copied-to-clipboard",language:A})},small:!0}),(0,i.tZ)(K.zx,{dataCy:"transform-code-modal-replace-button",iconLeft:(0,i.tZ)(wo.Z,{}),text:"Replace selection",colorway:"primary",small:!0,onClick:function(){try{l(j)}catch(e){d("Couldn't replace code. Please make sure you don't edit your selection.")}(0,Wn.j)(Wn.U3.CODEX_FEATURE_USED,{feature:"transformation",action:"replaced-selection-in-editor",language:A}),a()}}),(null===_||void 0===_||null===(M=_.currentUser)||void 0===M?void 0:M.isAdmin)?(0,i.tZ)(K.u,{tooltip:(0,i.tZ)(K.G7,{children:(0,i.tZ)("pre",{css:[{whiteSpace:"pre-wrap"}],children:JSON.stringify(JSON.parse(_.transformCode.metadata),null," ")})}),placement:"bottom",children:(0,i.tZ)(K.hU,{colorway:"warning",alt:"Debug metadata",tooltipHidden:!0,children:(0,i.tZ)(uo.Z,{})})}):null]})]})]}),(0,i.tZ)(K.G7,{css:[K.l0.flex.row,K.l0.align.baseline,K.l0.justify.spaceBetween],children:(0,i.tZ)(lo.Z,{inferenceId:H,language:A,inferenceClass:ar.Sg.Transformation})})]})}else B||R||(L=null);return(0,i.tZ)(Ar,{dataCy:"transform-code-modal",title:"Transform Code",onRequestClose:a,width:500,children:(0,i.BX)(K.G7,{css:[K.l0.p(8),K.l0.colWithGap(8)],children:[(0,i.BX)(K.G7,{tag:"form",onSubmit:function(e){e.preventDefault(),U()},css:[K.l0.rowWithGap(8)],children:[(0,i.tZ)(K.II,{dataCy:"transform-code-modal-prompt-input",autoFocus:!0,placeholder:'Write a prompt (e.g. rename all variables to "foo")',value:h,onChange:function(e){return t=e.target.value,b||((0,Wn.j)(Wn.U3.CODEX_FEATURE_USED,{feature:"transformation",action:"prompt-written",language:A}),w(!0)),void v(t);var t},ref:x,onKeyDown:function(e){"Escape"===e.key&&a(),e.metaKey&&"Enter"===e.key&&(e.preventDefault(),e.stopPropagation(),U())}}),(0,i.tZ)(K.zx,{dataCy:"transform-code-modal-submit-button",text:"Transform",colorway:"primary",disabled:B||""===h,type:"submit",iconRight:!B&&k?(0,i.tZ)(vo.Z,{}):(0,i.tZ)(po.Z,{})})]}),L]})})}function _o(e){var t=e.dom,n=(0,we.Z)(e,["dom"]);return G.createPortal((0,i.tZ)(ko,(0,r.Z)({},n)),t)}function Ro(){var e=(0,kn.Z)(["\n  query SearchCode($input: SearchCodeInput!) {\n    currentUser {\n      id\n      isAdmin: hasRole(role: ADMIN)\n    }\n    searchCode(input: $input) {\n      ... on SearchCodeResult {\n        id\n        codes {\n          code\n          url\n        }\n        metadata\n      }\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n"]);return Ro=function(){return e},e}var Do={},Io=(0,_n.Ps)(Ro());var Po=n(87653),Go=n(37424),Bo=n(46702);function Ao(e){var t,n=e.filePath,a=e.selectedCode,l=e.context,c=e.onRequestClose,u=(0,Mn.Z)(),d=(0,so.Z)().showConfirm,f=(0,zn.Z)(n),p=(0,o.Z)(s.useState(a),2),h=p[0],v=p[1],m=(0,o.Z)(s.useState(!1),2),g=m[0],y=m[1],Z=(0,o.Z)(s.useState(!0),2),b=Z[0],w=Z[1],x=l,E=(0,o.Z)(s.useState(""),2),C=E[0],S=E[1],T=(0,o.Z)(s.useState(!1),2),k=T[0],_=T[1],R=(0,o.Z)(function(e){var t=(0,r.Z)({},Do,e);return xo.t(Io,t)}({fetchPolicy:"no-cache"}),2),D=R[0],I=R[1],P=I.called,G=I.data,B=I.error,A=I.loading,U=(0,Go.H)()("semanticSearchCheckboxRerank"),O=(0,Go.H)()("semanticSearchCheckboxContextual"),N=(0,ri.Sf)(n),L=null,F=null===G||void 0===G?void 0:G.searchCode.__typename;if(A)L=(0,i.tZ)(ao,{});else if(B||"UserError"===F||"UnauthorizedError"===F){var X,M;L=(0,i.tZ)(K.G7,{children:(0,i.tZ)(K.E_,{colorway:"negative",icon:(0,i.tZ)(mo.Z,{}),text:"UserError"!==F&&"UnauthorizedError"!==F||!(null===G||void 0===G||null===(X=G.searchCode)||void 0===X?void 0:X.message)?"Oops! An unexpected error occurred. Please try again or contact support.":null===G||void 0===G||null===(M=G.searchCode)||void 0===M?void 0:M.message})})}else if("SearchCodeResult"===F&&null!=(null===G||void 0===G?void 0:G.searchCode)){var W=G.searchCode,j=W.codes,H=W.id;L=null==j?(0,i.tZ)(K.G7,{children:(0,i.tZ)(K.E_,{colorway:"warning",icon:(0,i.tZ)(vt.Z,{}),text:"That prompt gave us some trouble. Try re-wording it to improve results."})}):(0,i.BX)(K.G7,{children:[(0,i.tZ)(K.Tg,{elevated:!0,css:[K.l0.borderRadius(8)],children:(0,i.tZ)(K.G7,{css:[K.l0.maxHeight(300),K.l0.overflowY("auto"),K.l0.scrollbar.thin],children:j.map((function(e,t){var r;return(0,i.BX)(K.Tg,{background:"default",css:[K.l0.p(8),K.l0.mb(16),K.l0.borderRadius(8)],children:[(0,i.tZ)(Qn.ZP,{code:e.code,filePath:n,hideGutter:!0}),(0,i.BX)(K.G7,{css:[K.l0.flex.row,K.l0.justify.spaceBetween,K.l0.align.center,K.l0.pt(8),K.l0.px(4)],children:[(0,i.BX)(K.G7,{css:[K.l0.rowWithGap(8),K.l0.align.center],children:[(0,i.tZ)(go.Z,{path:n,size:16}),(0,i.tZ)(K.xv,{color:"dimmer",css:{textTransform:"capitalize"},children:N}),(0,i.tZ)(K.zx,{iconRight:(0,i.tZ)(Bo.Z,{}),text:"Source",small:!0,outlined:!0,onClick:function(){window.open(e.url,"_blank")}})]}),(0,i.BX)(K.G7,{css:K.l0.rowWithGap(8),children:[(0,i.tZ)(K.zx,{iconLeft:(0,i.tZ)(fo.Z,{}),text:"Copy",small:!0,onClick:function(){(0,Jr.Z)(e.code),d("Code copied to clipboard"),(0,Wn.j)(Wn.U3.SEMANTIC_SEARCH_USED,{action:"copied-to-clipboard",language:N})}}),"function"===typeof f?(0,i.tZ)(K.zx,{iconLeft:(0,i.tZ)(ho.Z,{}),text:"Insert in editor",small:!0,colorway:"primary",onClick:function(){f({code:e.code}),(0,Wn.j)(Wn.U3.SEMANTIC_SEARCH_USED,{action:"inserted-in-editor",language:N}),c()}}):null,(null===G||void 0===G||null===(r=G.currentUser)||void 0===r?void 0:r.isAdmin)?(0,i.tZ)(K.u,{tooltip:(0,i.tZ)(K.G7,{children:"SearchCodeResult"===(null===G||void 0===G?void 0:G.searchCode.__typename)?(0,i.tZ)("pre",{css:[{whiteSpace:"pre-wrap"}],children:JSON.stringify(JSON.parse(null===G||void 0===G?void 0:G.searchCode.metadata),null," ")}):"No debug info available."}),placement:"bottom",children:(0,i.tZ)(K.hU,{colorway:"warning",alt:"Debug metadata",tooltipHidden:!0,children:(0,i.tZ)(uo.Z,{})})}):null]})]})]},t)}))})}),(0,i.tZ)(K.G7,{css:[K.l0.flex.row,K.l0.align.baseline,K.l0.justify.spaceBetween],children:(0,i.tZ)(lo.Z,{inferenceId:H,language:N,inferenceClass:ar.Sg.Search})})]})}else A||B||(L=null);return(0,i.tZ)(Ar,{title:"Search for Code",onRequestClose:c,width:500,children:(0,i.BX)(K.G7,{css:[K.l0.p(8),K.l0.colWithGap(8)],children:[(0,i.BX)(K.G7,{tag:"form",onSubmit:function(e){e.preventDefault(),A||""===h||(h===C?(0,Wn.j)(Wn.U3.SEMANTIC_SEARCH_USED,{action:"refresh",rerank:g,contextual:b,language:N}):(0,Wn.j)(Wn.U3.SEMANTIC_SEARCH_USED,{action:"query-submitted",rerank:g,contextual:b,language:N}),S(h),D({variables:{input:{language:N,rerank:g,contextual:b,codeContext:x,prompt:h,replId:u}}}))},css:[K.l0.rowWithGap(8)],children:[(0,i.tZ)(K.II,{autoFocus:!0,placeholder:"Search for examples, patterns, templates, and more",value:h,onChange:function(e){return t=e.target.value,k||((0,Wn.j)(Wn.U3.SEMANTIC_SEARCH_USED,{action:"query-written",language:N}),_(!0)),void v(t);var t}}),(null===G||void 0===G||null===(t=G.currentUser)||void 0===t?void 0:t.isAdmin)?(0,i.BX)(i.HY,{children:[(0,i.tZ)(K.G7,{css:[K.l0.pt(8)],children:(0,i.tZ)(K.xv,{color:"dimmer",children:"Rerank?"})}),(0,i.tZ)(K.XZ,{id:U,name:"Rerank?",checked:g,onChange:function(e){return t=e.target.checked,void y(t);var t}}),(0,i.tZ)(K.G7,{css:[K.l0.pt(8)],children:(0,i.tZ)(K.xv,{color:"dimmer",children:"Contextual?"})}),(0,i.tZ)(K.XZ,{id:O,name:"Contextual?",checked:b,onChange:function(e){return t=e.target.checked,void w(t);var t}})]}):null,(0,i.tZ)(K.zx,{iconLeft:(0,i.tZ)(Po.Z,{}),iconRight:A?(0,i.tZ)(Jn.Z,{}):P&&!A?(0,i.tZ)(vo.Z,{fill:K.TV.accentPrimaryStrongest}):void 0,text:"Search",colorway:"primary",disabled:A||""===h,type:"submit"})]}),L]})})}function Uo(e){var t=e.dom,n=(0,we.Z)(e,["dom"]);return G.createPortal((0,i.tZ)(Ao,(0,r.Z)({},n)),t)}var Oo=n(24957),No=n(11213);function Lo(e,t,n,i){var o=(0,so.Z)().showError,a=(0,Mn.Z)(),l=(0,No.eR)({variables:{replId:a,path:e},onError:function(e){o(e.message)},skip:!i||t});return s.useMemo((function(){var i;return t||l.loading||l.error||!l.data||"ThreadsByFileResult"!==(null===(i=l.data.threadsByFile)||void 0===i?void 0:i.__typename)?{}:l.data.threadsByFile.threads.filter((function(t){return t.path===e&&(!n||!t.isResolved)})).reduce((function(e,t){return(0,P.Z)((0,r.Z)({},e),(0,ge.Z)({},t.id,t))}),{})}),[l.loading,l.data,l.error,e,t,n])}var Fo=n(20934),Xo=n(7182),Mo=n(34528),Wo=n(66252),jo=n(14840),Ho=n(85212),zo=n(85861);function Vo(e){var t=e.view,n=e.filePath,i=e.enable,l=e.isLoading,c=function(e){return[W.Wl.highest((0,ii.zj)(h)),ii.cR,ii.OQ,ii.ZS,ii.PQ,v?W.Wl.highest((0,ii.QO)()):[],H.tk.decorations.compute([ii.OQ,ii.ZS,ii.PQ],(function(e){var t=e.field(ii.OQ),n=e.field(ii.ZS),r=e.field(ii.PQ),i=n||Object.values(t).find((function(e){return e.id===r}));return H.p.set((0,a.Z)(Object.values(t)).map((function(e){var t=i&&e.id===i.id;return function(e,t,n,r,i){if(t===n)return null;var a=(0,o.Z)(r,2),l=a[0],c=a[1];return H.p.mark({class:"replit-thread-highlight cm-thread-".concat(e),attributes:{style:"background-color: ".concat(i?c:l)},id:e}).range(t,n)}(e.id,e.indexStart,e.indexEnd,Z,t)})).filter((function(t){return null!==t&&t.from!==t.to&&t.from<=e.doc.length&&t.to<=e.doc.length})),!0)})),H.tk.decorations.compute([ii.OQ,ii.ZS,ii.PQ],(function(e){var t=e.field(ii.OQ),n=e.field(ii.ZS),r=e.field(ii.PQ),i=(0,a.Z)(Object.values(t)).concat((0,a.Z)(n?[n]:[])).filter(Boolean).find((function(e){return e.id===r}));return i?H.p.set([H.p.widget({widget:new ii.nE(i.id,f),block:!0,side:1}).range(i.indexEnd)],!0):H.p.none})),H.tk.updateListener.of((function(e){(0,q.j)(e,wi.R,(function(){var t=(0,a.Z)(e.view.dom.querySelectorAll(".cm-thread-portal-widget")),n=e.view.dom.querySelector(".cm-scroller"),r=e.view.dom.querySelector(".cm-gutters");if(t.length&&n&&r){var i=!0,o=!1,l=void 0;try{for(var c,s=t[Symbol.iterator]();!(i=(c=s.next()).done);i=!0){var u=c.value;(0,Mo.L)(u,n,r)}}catch(d){o=!0,l=d}finally{try{i||null==s.return||s.return()}finally{if(o)throw l}}}}))})),H.tk.updateListener.of((function(e){(0,q.j)(e,ii.eR,(function(n){var r=n.value,i=e.state.field(ii.OQ)[r];i&&(null===t||void 0===t||t.dispatch({selection:{anchor:i.indexStart,head:i.indexStart},effects:[H.tk.scrollIntoView(i.indexStart,{x:"center",y:"center"})]}))}))}))]},u=(0,o.Z)(s.useState({}),2),d=u[0],f=u[1],p=(0,en.Z)({view:t}),h=(0,Wo.x)(),v=(0,lt.D)({type:"boolean",controlName:"flag-thread-selection-experiment"}),m=(0,Xo.Dv)(Fo.Q);s.useEffect((function(){t&&m&&t.dispatch({effects:[ii.YM.of(m),ii.eR.of(m)]})}),[t,m]);var g=(0,zo.Fg)().theme,y=(0,o.Z)(s.useState([jo.TV.accentPrimaryDimmest,jo.TV.accentPrimaryDimmer]),2),Z=y[0],b=y[1];s.useEffect((function(){var e=g.values.global.accentPrimaryDimmest,t=(0,Ho.w)(e),n="rgba(".concat(t.join(","),", 0.5)");b([n,jo.TV.accentPrimaryDimmer])}),[g]),s.useEffect((function(){if(t&&i)return t.dispatch({effects:p.reconfigure(c())}),function(){t.dispatch({effects:p.reconfigure([])})}}),[t,n,p,i]);return function(e,t,n,i){var o=(0,A.Z)().fs,a=(0,Oo.kL)(n),l=a.contentRef,c=a.loadedFile,u=a.transformSelectionRef;s.useEffect((function(){var a=!1,s=u.current,d=l.current;if(c&&s&&d&&!i&&t){var f=Object.values(e);0!==f.length?Promise.all(f.map((function(e){return(0,Oo.Ft)({anchor:e,version:o.getOTVersion(n),transformSelection:s,content:d})}))).then((function(e){if(!a){var n=e.filter((function(e){return Boolean(e)})).map((function(e){if(!e)throw new Error("expected resolved anchor");return(0,r.Z)({},e.anchor,null===e||void 0===e?void 0:e.newSelection)}));return t.dispatch({effects:ii.qi.of(n.reduce((function(e,t){return e[t.id]=t,e}),{}))}),function(){a=!0,t&&t.dispatch({effects:ii.qi.of({})})}}})):t.dispatch({effects:ii.qi.of({})})}}),[e,t,c,o,u,l,n,i])}(Lo(n,l,!0,i),t,n,l),{threadElements:d}}var qo=n(7756),Ko=n(11163),$o=n.n(Ko),Yo=n(53153),Qo=n(97908),Jo=n(79848);function ea(e){return{filePath:e,text:"",selections:[],hasFocus:!1}}function ta(e,t){return null==t?ea(e):{filePath:e,text:null!==(n=t.state.doc.toString())&&void 0!==n?n:"",selections:t.state.selection.ranges.map((function(e){var t=e.from;return{location:t,length:e.to-t}})),hasFocus:t.hasFocus};var n}function na(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ni()(),i=ta(e,t),o={messageType:Yo.cF.TEXT_EDITOR_STATE,filePath:e,text:i.text,selections:i.selections,hasFocus:i.hasFocus,hasGhostwriterSuggestion:n.hasGhostwriterSuggestion,revisionId:n.revisionId};(0,Jo.bG)(o,r)}function ra(e,t,n,r,i){return r===e&&r===n.textEditorState.filePath&&(t===n.textEditorState.filePath&&i===n.revisionId)}function ia(e){var t=e.map((function(e){return W.jT.range(e.location,e.location+e.length)}));return W.jT.create(t)}function oa(e,t,n,r,i,o){var a=i.payload;if((0,Yo.Se)(a))return function(e,t,n,r,i){if(!ra(e,t,r,i.filePath,i.revisionId))return!1;var o=ia(i.selections);return n.dispatch({selection:o,scrollIntoView:!0}),!0}(e,t,n,r,a);if((0,Yo.m7)(a))return function(e,t,n,r,i){if(!ra(e,t,r,i.filePath,i.revisionId))return!1;var o=ta(e,n),a=ia(i.selections);return n.dispatch({changes:{from:0,to:o.text.length,insert:i.text},selection:a,scrollIntoView:!0}),!0}(e,t,n,r,a);if((0,Yo.ac)(a))return function(e,t,n,r,i){if(!ra(e,t,r,i.filePath,i.revisionId))return!1;var o=i.insertionRange,a=ia(i.selections);return n.dispatch({changes:{from:o.location,to:o.location+o.length,insert:i.text},selection:a,scrollIntoView:!0}),!0}(e,t,n,r,a);if((0,Yo.fz)(a))return function(e,t,n,r,i){return!!ra(e,t,r,i.filePath,i.revisionId)&&(n.dispatch(n.state.replaceSelection(i.text)),!0)}(e,t,n,r,a);if((0,Yo.T$)(a))!function(e,t,n,r,i){!!ra(e,t,r,i.filePath,i.revisionId)&&Qr({activeFile:e,view:n,clipboardText:i.text})}(e,t,n,r,a);else{if(!(0,Yo.aB)(a))throw new Error("Invalid payload.");switch(a.action){case Yo.b9.REQUEST_BLUR:return function(e,t,n,r,i,o){if(!ra(e,t,r,i,o))return!1;n.contentDOM.blur()}(e,t,n,r,a.filePath,a.revisionId);case Yo.b9.REQUEST_UNDO:return function(e,t,n,r,i,o){if(!ra(e,t,r,i,o))return!1;return(0,m.Yw)(n),!0}(e,t,n,r,a.filePath,a.revisionId);case Yo.b9.REQUEST_REDO:return function(e,t,n,r,i,o){if(!ra(e,t,r,i,o))return!1;return(0,m.KX)(n),!0}(e,t,n,r,a.filePath,a.revisionId);case Yo.b9.REQUEST_INDENT_SELECTION:return function(e,t,n,r,i){return!!ra(e,t,r,i.filePath,i.revisionId)&&(m.at(n),!0)}(e,t,n,r,a);case Yo.b9.REQUEST_DEDENT_SELECTION:return function(e,t,n,r,i){return!!ra(e,t,r,i.filePath,i.revisionId)&&(m.xi(n),!0)}(e,t,n,r,a);case Yo.b9.REQUEST_TOGGLE_COMMENT:return function(e,t,n,r,i){return!!ra(e,t,r,i.filePath,i.revisionId)&&(m.O8(n),!0)}(e,t,n,r,a);case Yo.b9.REQUEST_ACCEPT_GHOSTWRITER_SUGGESTION:return function(e,t,n,r,i,o){return!!ra(e,t,r,i.filePath,i.revisionId)&&!!(0,Qo.$o)(n)&&((0,Wn.j)(Wn.U3.CODE_SUGGESTION_USED,{type:"suggestionAccepted",language:(0,ri.Sf)(e),engine:o}),fe.n_({category:"ghostwriter",message:"Suggestion accepted",level:"info"}),(0,j._B)(n),!0)}(e,t,n,r,a,o);case Yo.b9.REQUEST_FOCUS:return function(e){return e.focus(),!0}(n);default:throw new Error("Unknown BridgeTextEditorAction.")}}}var aa=n(15902),la=n(67329);function ca(e){var t=e.view,n=e.filePath,r=(0,Ko.useRouter)(),i=(0,aa.Vg)(r),o=(0,s.useRef)({revisionId:ni()(),textEditorState:ea(n),hasGhostwriterSuggestion:!1}),a=(0,s.useRef)(n),l=(0,la.L)().engine,c=(0,en.Z)({view:t});(0,s.useEffect)((function(){if(t&&i){var e=ta(n,t);o.current={revisionId:ni()(),textEditorState:e,hasGhostwriterSuggestion:o.current.hasGhostwriterSuggestion},na(n,t,o.current);return t.dispatch({effects:c.reconfigure(H.tk.updateListener.of((function(r){!function(r){var i,a;try{a=null!=t.state.field(Qo.yn)}catch(c){a=!1}var l=(null===(i=o.current)||void 0===i?void 0:i.hasGhostwriterSuggestion)!==a;r.docChanged?(o.current={revisionId:ni()(),textEditorState:e,hasGhostwriterSuggestion:a},na(n,t,o.current)):(r.selectionSet||r.focusChanged||l)&&(o.current={revisionId:o.current.revisionId,textEditorState:e,hasGhostwriterSuggestion:a},na(n,t,o.current))}(r)})))}),function(){t.dispatch({effects:c.reconfigure([])})}}}),[t,n,c,i]),(0,s.useEffect)((function(){if(t&&i){var e=function(e){na(n,t,o.current,e.messageId)},r=function(r){oa(n,a.current,t,o.current,r,l)?e(r):(0,Jo.pl)(r.messageId)},c=function(){var i=(0,X.Z)((function(i){var c,s;return(0,M.__generator)(this,(function(u){try{if(c=i.data,!(0,Yo.CF)(c))return[2];if(c.protocolVersion!==Yo.Wj)return[2];switch(s=c.payload,c.messageDirection===Yo.s1.TO_NATIVE&&(0,Yo.H7)(s)&&(a.current=s.activePaneFilePath),s.messageType){case Yo.cF.ERROR:case Yo.cF.ACK:case Yo.cF.RESET:case Yo.cF.DEBUG:case Yo.cF.WORKSPACE_STATE:case Yo.cF.WORKSPACE_STATE_REQUEST:case Yo.cF.WORKSPACE_REQUEST_ACTION:case Yo.cF.SET_KEYBOARD_STATE:case Yo.cF.SHELL_INSERT_INPUT:case Yo.cF.SHELL_COMMAND:case Yo.cF.TEXT_EDITOR_STATE:case Yo.cF.TEXT_EDITOR_CLOSED:break;case Yo.cF.TEXT_EDITOR_STATE_REQUEST:e(c);break;case Yo.cF.REQUEST_SET_SELECTION:case Yo.cF.REQUEST_REPLACE_SELECTION:case Yo.cF.REQUEST_SET_TEXT:case Yo.cF.REQUEST_INSERT_TEXT:case Yo.cF.REQUEST_PASTE_TEXT:r(c);break;case Yo.cF.TEXT_EDITOR_REQUEST_ACTION:!function(r){oa(n,a.current,t,o.current,r,l)?e(r):(0,Jo.pl)(r.messageId)}(c);break;default:throw new Error("Unknown BridgeMessageType.")}}catch(d){throw new Error("Invalid message: ".concat(d))}return[2]}))}));return function(e){return i.apply(this,arguments)}}();return window.addEventListener("message",c),na(n,t,o.current),function(){!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ni()(),n={messageType:Yo.cF.TEXT_EDITOR_CLOSED,filePath:e};(0,Jo.bG)(n,t)}(n),window.removeEventListener("message",c)}}}),[t,n,i,l])}var sa=n(88512),ua=n(76818),da=n(88075),fa=n(25245),pa=n(15686),ha=function(e){var t=e.caretSize,n=void 0===t?[8,12]:t,o=(0,we.Z)(e,["caretSize"]);return(0,i.BX)("svg",(0,P.Z)((0,r.Z)({width:n[0],height:n[1],viewBox:"0 0 12 8",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o),{children:[(0,i.tZ)("mask",{id:"outline",fill:"white",children:(0,i.tZ)("path",{d:"M0 8L5.2 1.06667C5.6 0.533333 6.40033 0.533776 6.80033 1.06711C8.67223 3.56297 9.93719 5.24959 12 8H0Z"})}),(0,i.tZ)("path",{d:"M0 8L5.2 1.06667C5.6 0.533333 6.40033 0.533776 6.80033 1.06711C8.67223 3.56297 9.93719 5.24959 12 8H0Z",fill:"url(#gradient-fill)"}),(0,i.tZ)("path",{d:"M0 8L-0.8 7.4L-2 9H0V8ZM12 8V9H14L12.8 7.4L12 8ZM5.2 1.06667L4.4 0.466667L5.2 1.06667ZM6.80033 1.06711L6.00033 1.66711L6.80033 1.06711ZM12 7H0V9H12V7ZM0.8 8.6L6 1.66667L4.4 0.466667L-0.8 7.4L0.8 8.6ZM6.00033 1.66711C7.87223 4.16297 9.13719 5.84959 11.2 8.6L12.8 7.4C10.7372 4.64959 9.47223 2.96297 7.60033 0.467109L6.00033 1.66711ZM6 1.66667L6.00033 1.66711L7.60033 0.467109C6.80082 -0.598902 5.20049 -0.600655 4.4 0.466667L6 1.66667Z",fill:"#0079F2",mask:"url(#outline)"}),(0,i.tZ)("defs",{children:(0,i.BX)("linearGradient",{id:"gradient-fill",x1:"5.07692",y1:"0",x2:"5.07692",y2:"21.3333",gradientUnits:"userSpaceOnUse",children:[(0,i.tZ)("stop",{stopColor:"#57ABFF"}),(0,i.tZ)("stop",{offset:"1",stopColor:"#0079F2"})]})})]}))},va=n(2230),ma=n(55877),ga=n.n(ma),ya=n(51593),Za=n(16449),ba=n(1138),wa=n(95716),xa=n(35642),Ea=n(28898),Ca=n(18332),Sa=n(96594),Ta=n(30827);function ka(){var e=(0,kn.Z)(["\n  query InlineThreadCurrentUser {\n    currentUser {\n      id\n    }\n  }\n"]);return ka=function(){return e},e}var _a={},Ra=(0,_n.Ps)(ka());var Da=n(19526),Ia=n(1855),Pa=n(83223),Ga=n(60482),Ba=function(e){var t=e.isCreating,n=e.threadId,r=e.filePath,o=e.isResolved,a=e.isLoading,l=e.isPlaceholder,c=e.caretPosition,u=e.onRequestClose,d=void 0===u?function(){}:u,f=e.onResolveThread,p=void 0===f?function(){}:f,h="Inbox",v="Next thread",m="Previous thread",g="Collapse",y=Lo(null===r?"":r,a,!0,!0),Z=[12,8];switch((0,F.Z)().preferences.fontSize){case 10:Z=[8,6];break;case 14:Z=[10,6];break;case 18:Z=[12,8];break;case 24:Z=[14,10]}var b=s.useMemo((function(){return Object.values(y).sort((function(e,t){return e.indexStart-t.indexStart}))}),[y]),w=s.useMemo((function(){return b.findIndex((function(e){return e.id===n}))}),[b,n]),x=(0,Xo.b9)(Fo.Q),E=(0,Xo.b9)(Fo.c),C=function(){var e=(0,X.Z)((function(){var e;return(0,M.__generator)(this,(function(t){return e=w===b.length-1?b[0].id:b[w+1].id,x(e),[2]}))}));return function(){return e.apply(this,arguments)}}(),S=function(){var e=(0,X.Z)((function(){var e;return(0,M.__generator)(this,(function(t){return e=0===w?b[b.length-1].id:b[w-1].id,x(e),[2]}))}));return function(){return e.apply(this,arguments)}}(),T=(0,Xo.b9)(Ga.Bm);return(0,i.BX)(K.Tg,{background:"root",css:[K.l0.flex.row,K.l0.align.center,K.l0.justify.spaceBetween,K.l0.position.relative,K.l0.px(12),K.l0.py(8),{borderBottomWidth:K.TV.borderWidthDefault,borderBottomStyle:"solid",borderBottomColor:K.TV.outlineDimmest}],children:[null!==c&&(0,i.tZ)("span",{css:[K.l0.position.absolute,K.l0.top(-Z[1]),K.l0.left(c),K.l0.height("fit-content"),K.l0.display.flex,K.l0.flex.row,K.l0.align.center],children:(0,i.tZ)(ha,{caretSize:Z})}),(0,i.tZ)(K.zx,{iconLeft:(0,i.tZ)(ba.Z,{}),onClick:function(){E(!0),T()},text:h,small:!0}),b.length>1?(0,i.BX)(K.G7,{css:[K.l0.flex.row,K.l0.align.center,K.l0.rowWithGap(4)],children:[(0,i.tZ)(K.hU,{alt:m,onClick:S,children:(0,i.tZ)(ua.Z,{})}),(0,i.BX)(K.xv,{color:"dimmest",variant:"small",children:[w+1,"/",b.length]}),(0,i.tZ)(K.hU,{alt:v,onClick:C,children:(0,i.tZ)(sa.Z,{})})]}):null,(0,i.BX)(K.G7,{css:[K.l0.flex.row,K.l0.align.center,K.l0.rowWithGap(4)],children:[t||o||l?null:(0,i.tZ)(K.zx,{onClick:p,text:"Resolve",small:!0,iconLeft:(0,i.tZ)(da.Z,{})}),!t&&o?(0,i.tZ)(K.DR,{text:"Resolved",colorway:"positive"}):null,(0,i.tZ)(K.zx,{onClick:d,text:g,small:!0,iconLeft:(0,i.tZ)(ya.Z,{})})]})]})},Aa=function(e){var t,n,a,l=e.threadId,u=e.isResolved,d=e.onMessageChange,f=e.onMessageSubmit,p=e.isPlaceholder,h=e.onRequestClose,v=void 0===h?function(){}:h,m=(0,o.Z)(s.useState(""),2),g=m[0],y=m[1],Z=(0,o.Z)(s.useState(ga().v4()),2),b=Z[0],w=Z[1],x=(0,Za.Z)(),E=x.ref,C=x.update,S=s.useRef(null),T={placeholder:function(){return p?"Start a new thread\u2026 (Markdown is supported)":u?"Reply to re-open thread\u2026":"Reply\u2026 (Markdown is supported)"}},k="Post reply",_="Cancel",R=function(){var e=g.trim();0!==e.length&&(f({message:e,messageId:b}),y(""),w(ga().v4()))},D=null===(t=function(e){var t=(0,r.Z)({},_a,e);return Rn.a(Ra,t)}().data)||void 0===t||null===(n=t.currentUser)||void 0===n?void 0:n.id,I=(0,Ta.Z)(),G=(0,o.Z)((0,Ca.Z)({"@":function(){var e=(0,X.Z)((function(e){var t,n;return(0,M.__generator)(this,(function(r){return t=I.filter((function(e){return e.id!==D})),e&&(n=e.toLowerCase(),t=t.filter((function(e){return e.username.toLowerCase().startsWith(n)}))),[2,t.slice(0,5).map((function(e){return{icon:(0,i.tZ)(Ea.Z,{url:e.image,style:{height:"24px",width:"24px",minWidth:"24px",minHeight:"24px"}}),value:e.username}}))]}))}));return function(t){return e.apply(this,arguments)}}()}),2),B=G[0].suggestions,A=G[1],U=(0,Sa.Kb)({items:(null===B||void 0===B?void 0:B.results)||[],defaultHighlightedIndex:0,isOpen:(null!==(a=null===B||void 0===B?void 0:B.results.length)&&void 0!==a?a:0)>0,onSelectedItemChange:function(e){var t=e.selectedItem;if(B&&t){var n=B.applySuggestion({targetValue:g,suggestionValue:t.value}),r=n.fullValue,i=n.cursorIndex;y(r),setTimeout((function(){S.current&&(S.current.setSelectionRange(i,i),S.current.focus(),C())}))}}}),O=U.isOpen,N=U.getInputProps,L=U.getMenuProps,F=U.getItemProps,W=U.highlightedIndex,j=U.getComboboxProps;return s.useEffect((function(){var e="threads/drafts/".concat(l),t=xa.Z.get(e,"string");t&&y(t);var n=S.current;return function(){if(n){var t=n.value;0!==t.length?xa.Z.set(e,t):xa.Z.remove(e)}}}),[l]),(0,i.BX)(K.Tg,{background:"root",css:[K.l0.px(12),K.l0.pb(8),K.l0.pt(8),{borderTop:"1px solid ".concat(K.TV.outlineDimmest)}],className:"inline-thread-input",children:[(0,i.BX)("div",(0,P.Z)((0,r.Z)({css:[K.l0.flex.row,K.l0.align.start,K.l0.rowWithGap(8),K.l0.width("full")]},j()),{className:"jsx-45ff32690e481e34",children:[p?(0,i.tZ)(K.zx,{text:_,onClick:v}):null,(0,i.BX)("div",{css:[{width:"100%"}],className:"jsx-45ff32690e481e34",children:[(0,i.tZ)(K.B,(0,r.Z)({},N({ref:function(e){S.current=e,E(e),A(e)},value:g,onChange:function(e){var t=e.target.value;y(t),d({message:t,messageId:b})},onKeyDown:function(e){O||(e.preventDownshiftDefault=!0,"Enter"!==e.key||e.shiftKey||(e.stopPropagation(),e.preventDefault(),R(),requestAnimationFrame((function(){C()}))))},onKeyUp:function(e){"Escape"===e.key&&(e.stopPropagation(),e.preventDefault(),v())},placeholder:T.placeholder(),css:[K.l0.height(32),K.l0.align.start,{resize:"vertical",width:"100%",flexGrow:1}],autoFocus:!0}))),(0,i.tZ)("div",{css:{position:"relative"},className:"jsx-45ff32690e481e34",children:(0,i.tZ)("div",(0,P.Z)((0,r.Z)({},L({css:[{position:"absolute",top:K.TV.space2,overflow:"hidden"},K.l0.borderRadius(16),K.l0.shadow(1),K.l0.backgroundColor.backgroundDefault]})),{className:"jsx-45ff32690e481e34",children:null===B||void 0===B?void 0:B.results.map((function(e,t){return(0,s.createElement)("div",(0,P.Z)((0,r.Z)({},F({item:e,index:t})),{key:e.value,className:"jsx-45ff32690e481e34"}),(0,i.BX)(Da.Ug,{spacing:2,css:[W===t?K.l0.backgroundColor.backgroundHighest:null,K.l0.p(8)],children:[e.icon,(0,i.tZ)("div",{className:"jsx-45ff32690e481e34",children:e.value})]}))}))}))})]}),(0,i.tZ)(K.G7,{css:[K.l0.pt(4)],children:(0,i.tZ)(K.hU,{alt:k,tooltipDelay:"long",onClick:R,children:(0,i.tZ)(fa.Z,{})})})]})),(0,i.tZ)(c(),{id:"45ff32690e481e34",children:".inline-thread-input .popover-control-container{-webkit-box-flex:1;-webkit-flex-grow:1;-moz-box-flex:1;-ms-flex-positive:1;flex-grow:1}"})]})};var Ua=function(e){var t,n=e.threadId,r=e.isCreating,o=e.isResolved,l=void 0!==o&&o,c=e.onRequestClose,u=void 0===c?function(){}:c,d=e.view,f=e.filePath,p=(0,va.Z)(n,d,f),h=p.thread,v=p.loading,m=p.isPlaceholder,g=p.getLatestAnchor,y=p.updateThread,Z=p.changeThreadMessage,b=p.finalizeThreadMessage,w=(0,F.Z)().preferences.fontSize,x=(0,s.useRef)(null);(0,Pa.Z)(h);var E=g(),C=d&&!v&&"number"===typeof(null===E||void 0===E?void 0:E.indexEnd)&&E.indexEnd<=d.state.doc.length?null===(t=d.coordsAtPos(E.indexEnd))||void 0===t?void 0:t.left:null,S=(null===d||void 0===d?void 0:d.dom.getBoundingClientRect().left)||null,T=C&&S?C-S-6:null,k=w;switch(w){case 10:k=13;break;case 14:k=19;break;case 18:k=25;break;case 24:k=34}var _=(0,so.Z)().showConfirm,R=(0,Mn.Z)(),D=(0,s.useRef)(null);s.useEffect((function(){setTimeout((function(){D.current&&(D.current.scrollTop=D.current.scrollHeight)}),0)}),[null===h||void 0===h?void 0:h.messages]);var I=s.useMemo((function(){return(null===h||void 0===h?void 0:h.messages)?(0,a.Z)(h.messages).sort((function(e,t){return Date.parse(e.timeCreated)-Date.parse(t.timeCreated)})):[]}),[null===h||void 0===h?void 0:h.messages]),P=function(e){var t=(0,s.useRef)(0);return(0,xr.Z)((function(n){var r=n.height;r!==t.current&&(null===e||void 0===e||e.requestMeasure()),t.current=r}))}(d);return(0,i.BX)(K.G7,{innerRef:(0,Ia.l)(x,P),css:[K.l0.font.default,{borderTopWidth:K.TV.borderWidthDefault,borderBottomWidth:K.TV.borderWidthDefault,borderStyle:"solid",borderColor:K.TV.accentPrimaryDefault}],children:[m||v?null:(0,i.tZ)(Ba,{isCreating:r,isResolved:l,isLoading:v,threadId:n,filePath:f,caretPosition:T,isPlaceholder:m,onRequestClose:u,onResolveThread:function(){y({changes:{isResolved:!0}}),_("Thread resolved. You can reopen it from the inbox.")}}),!v||m?(0,i.BX)(i.HY,{children:[!r&&I.length>0?(0,i.tZ)("div",{css:[K.l0.px(12),K.l0.py(12),K.l0.maxHeight(300),K.l0.overflowY("auto"),K.l0.colWithGap(16),K.l0.fontSize(w)],ref:D,children:I.map((function(e){return(0,i.tZ)(pa.Z,{thread:h,message:e},e.id)}))}):null,(0,i.tZ)(Aa,{threadId:n,isPlaceholder:m,isResolved:l,onRequestClose:u,onMessageChange:Z,onMessageSubmit:function(e){b(e),(0,Wn.j)(wa.U3.MESSAGE_SENT,{replId:R,source:"threads",newThread:m})}})]}):(0,i.tZ)(K.G7,{css:[K.l0.height(k)],children:(0,i.tZ)(oo.ZP,{viewBox:"0 0 400 21",backgroundColor:K.TV.accentPrimaryDimmest,backgroundOpacity:0,foregroundColor:K.TV.accentPrimaryDimmest,foregroundOpacity:.2,speed:1,children:(0,i.tZ)("rect",{x:"0",y:"0",width:"100%",height:"100%"})})})]})};function Oa(e){var t=e.threadId,n=e.view,r=e.filePath;return(0,i.tZ)("div",{css:[K.l0.width("100%"),K.l0.backgroundColor.backgroundRoot],children:(0,i.tZ)(Ua,{threadId:t,onRequestClose:function(){n.dispatch({effects:[ii.YM.of(null)]})},view:n,filePath:r})})}var Na=n(11143),La=n(41671);var Fa=n(50319);function Xa(){var e=(0,kn.Z)(["\n  query ExplainCode($code: String!, $language: String!, $replId: String) {\n    explainCode(code: $code, language: $language, replId: $replId) {\n      ... on ExplainCodeResult {\n        id\n        explanation\n      }\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n"]);return Xa=function(){return e},e}function Ma(){var e=(0,kn.Z)(["\n  mutation ExplainCodeCodexFeedback($input: CodexFeedback2Input!) {\n    giveCodexFeedback2(input: $input) {\n      ... on CodexFeedback2 {\n        __typename\n        id\n        feedback\n      }\n      ... on UnauthorizedError {\n        __typename\n      }\n      ... on NotFoundError {\n        __typename\n      }\n    }\n  }\n"]);return Ma=function(){return e},e}var Wa={},ja=(0,_n.Ps)(Xa());var Ha=(0,_n.Ps)(Ma());var za=n(81516),Va=function(){var e=(0,X.Z)((function(e){var t,n,r;return(0,M.__generator)(this,(function(i){switch(i.label){case 0:return t=e.code,n=e.language,[4,null===za.l||void 0===za.l?void 0:za.l.query({query:ja,variables:{code:t,language:n}})];case 1:return"ExplainCodeResult"===(null===(r=i.sent())||void 0===r?void 0:r.data.explainCode.__typename)?[2,r.data.explainCode.explanation]:[2]}}))}));return function(t){return e.apply(this,arguments)}}();function qa(e){var t,n,i,a,l,c,u,d,f,p,h,v,m,g,y,Z=e.language,b=e.code,w=(0,Mn.Z)(),x=function(e){var t=(0,r.Z)({},Wa,e);return Rn.a(ja,t)}({fetchPolicy:"no-cache",variables:{code:b,language:Z,replId:w},skip:!Z||!b,notifyOnNetworkStatusChange:!0});s.useEffect((function(){(0,Wn.j)(Wn.U3.CODEX_FEATURE_USED,{feature:"explanation",isRetry:!1,action:"submit",language:Z})}),[]);var E=(0,o.Z)(function(e){var t=(0,r.Z)({},Wa,e);return Fa.D(Ha,t)}(),2),C=E[0],S=E[1],T=function(){var e=(0,X.Z)((function(e){var t,n;return(0,M.__generator)(this,(function(r){return"ExplainCodeResult"!==(null===(t=x.data)||void 0===t?void 0:t.explainCode.__typename)||x.loading||S.loading||(C({variables:{input:{feedback:e,inferenceClass:ar.Sg.Explanation,inferenceId:null===(n=x.data)||void 0===n?void 0:n.explainCode.id}}}),(0,Wn.j)(Wn.U3.CODEX_FEEDBACK_SUBMITTED,{feature:"explanation",language:Z,feedback:e})),[2]}))}));return function(t){return e.apply(this,arguments)}}(),k="ExplainCodeResult"===(null===(t=x.data)||void 0===t||null===(n=t.explainCode)||void 0===n?void 0:n.__typename)?x.data.explainCode.explanation:void 0,_="ExplainCodeResult"===(null===(i=x.data)||void 0===i||null===(a=i.explainCode)||void 0===a?void 0:a.__typename)?null===(l=x.data)||void 0===l||null===(c=l.explainCode)||void 0===c?void 0:c.id:void 0,R="UserError"===(null===(u=x.data)||void 0===u||null===(d=u.explainCode)||void 0===d?void 0:d.__typename)||"UnauthorizedError"===(null===(f=x.data)||void 0===f||null===(p=f.explainCode)||void 0===p?void 0:p.__typename)?x.data.explainCode.message:null,D="ExplainCodeResult"===(null===(h=x.data)||void 0===h||null===(v=h.explainCode)||void 0===v?void 0:v.__typename)&&"CodexFeedback2"===(null===(m=S.data)||void 0===m||null===(g=m.giveCodexFeedback2)||void 0===g?void 0:g.__typename)&&x.data.explainCode.id===(null===(y=S.data.giveCodexFeedback2)||void 0===y?void 0:y.id)?S.data.giveCodexFeedback2.feedback:null;return{id:_,getCodeExplanation:Va,loading:x.loading,explanation:k,errorMessage:R,refetchExplanation:(0,X.Z)((function(){return(0,M.__generator)(this,(function(e){return(0,Wn.j)(Wn.U3.CODEX_FEATURE_USED,{feature:"explanation",isRetry:!0,action:"refresh",language:Z}),[2,x.refetch()]}))})),giveCodexFeedback:T,codexFeedback:D}}function Ka(e){var t=e.dom,n=e.filePath,r=e.code;return(0,G.createPortal)((0,i.tZ)($a,{code:r,filePath:n}),t)}function $a(e){var t=e.filePath,n=e.code,r=function(){null===h||void 0===h||h.dispatch({effects:[Ur.of(null)]})},o=(0,ri.UP)(t),a=qa({code:n,language:o}),l=a.id,c=a.explanation,s=a.errorMessage,u=a.loading,d=a.refetchExplanation,f=null,h=(0,b.uN)(),v=Gn(),m=v.enabled;if(v.loading)return null;if(u)f=(0,i.tZ)(ao,{});else if(m)f=c&&l?(0,i.BX)("div",{css:[p.l0.p(8),p.l0.display.grid,{gridGap:p.TV.space8}],children:[(0,i.tZ)("pre",{css:{fontFamily:p.TV.fontFamilyCode,whiteSpace:"pre-wrap",lineHeight:p.TV.lineHeightDefault,fontSize:p.TV.fontSizeDefault,color:p.TV.foregroundDefault,backgroundColor:p.TV.backgroundHighest,padding:p.TV.space8,borderRadius:p.TV.borderRadius8},children:c}),u?null:(0,i.tZ)(lo.Z,{inferenceId:l,language:o,inferenceClass:ar.Sg.Explanation})]}):(0,i.tZ)(K.G7,{css:[p.l0.p(8)],children:(0,i.tZ)(K.E_,{colorway:"negative",icon:(0,i.tZ)(mo.Z,{}),text:null!==s&&void 0!==s?s:"Oops! An unexpected error occurred. Please try again or contact support."})});else if(!m&&!u)return(0,i.tZ)(Ar,{title:"Explain Code",newInferenceAlt:"Generate new explanation",onRequestClose:r,width:320,children:(0,i.BX)(K.G7,{css:[p.l0.colWithGap(12),p.l0.p(8)],children:[(0,i.tZ)(K.xv,{multiline:!0,children:"Activate Ghostwriter to get access to Explain Code and other AI-powered features!"}),(0,i.tZ)(K.G7,{css:{alignSelf:"center"},children:(0,i.tZ)(co.Z,{context:"explain_code_modal"})})]})});return(0,i.tZ)(Ar,{dataCy:"explain-code-modal",title:"Explain Code",newInferenceAlt:"Generate new explanation",onRequestNewInference:d,onRequestClose:r,width:420,children:f})}var Ya,Qa,Ja=n(19194),el=W.Py.define(),tl=W.QQ.define({create:function(){return null},update:function(e,t){var n=!0,r=!1,i=void 0;try{for(var o,a=t.effects[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;if(l.is(el))return null===l.value?null:""===l.value?{unmodified:"",changes:null}:{unmodified:l.value,changes:(0,Ja.Hg)(l.value,t.newDoc.toString())}}}catch(c){r=!0,i=c}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return null===e||""===e.unmodified?e:t.docChanged?{unmodified:e.unmodified,changes:(0,Ja.Hg)(e.unmodified,t.newDoc.toString())}:e}}),nl=K.TV.space2,rl="cm-git-diff-gutter",il="".concat(rl,"-element"),ol="".concat(il,"-added"),al="".concat(il,"-modified"),ll="".concat(il,"-file-added"),cl=K.TV.greenDefault,sl=K.TV.greenStronger,ul=K.TV.blueDefault,dl=K.TV.blueStronger,fl=K.TV.greenDimmer,pl=K.TV.greenDefault,hl=H.tk.baseTheme((Ya={},(0,ge.Z)(Ya,".".concat(rl,", .").concat(il),{width:nl}),(0,ge.Z)(Ya,".".concat(ol),{backgroundColor:cl,"&.cm-activeLineGutter":{backgroundColor:sl}}),(0,ge.Z)(Ya,".".concat(al),{backgroundColor:ul,"&.cm-activeLineGutter":{backgroundColor:dl}}),(0,ge.Z)(Ya,".".concat(ll),{backgroundColor:fl,"&.cm-activeLineGutter":{backgroundColor:pl}}),Ya));!function(e){e[e.ADDED=0]="ADDED",e[e.MODIFIED=1]="MODIFIED",e[e.FILE_ADDED=2]="FILE_ADDED"}(Qa||(Qa={}));var vl=function(e){(0,be.Z)(n,e);var t=(0,xe.Z)(n);function n(e){var r;switch((0,Ze.Z)(this,n),r=t.call(this),e){case Qa.ADDED:r.elementClass="".concat(il," ").concat(ol);break;case Qa.MODIFIED:r.elementClass="".concat(il," ").concat(al);break;case Qa.FILE_ADDED:r.elementClass="".concat(il," ").concat(ll)}return r}return n.prototype.eq=function(e){return(0,ke.Z)(e,n)&&this.elementClass===e.elementClass},n}(H.SJ),ml=(0,H.v5)({class:rl,markers:function(e){var t=e.state.doc,n=e.state.field(tl,!1);if(!n)return[];if(n.changes&&0===n.changes.length)return[];if(1===t.lines){var r=""===n.unmodified?new vl(Qa.FILE_ADDED):new vl(Qa.ADDED);return W.Xs.of([{from:0,to:0,value:r}])}var i=e.viewport.from,o=e.viewport.to,a=new W.f_;if(""===n.unmodified){for(var l=t.lineAt(i),c=t.lineAt(o),s=l.number;s<=c.number;s++){var u=t.line(s).from,d=new vl(Qa.FILE_ADDED);a.add(u,u,d)}return a.finish()}if(!n.changes)throw new Error("changes should not be null with a non-empty string");var f=new Set,p=function(e,t){f.has(e.number)||(f.add(e.number),a.add(e.from,e.from,new vl(t)))},h=!0,v=!1,m=void 0;try{for(var g,y=n.changes[Symbol.iterator]();!(h=(g=y.next()).done);h=!0){var Z=g.value,b=Z.fromB,w=Z.toB;if(!(i>w||o<b))if(b!==w){var x=t.lineAt(b),E=t.lineAt(w);if(!f.has(x.from)||!f.has(E.from))for(var C=x.number;C<=E.number;C++){var S=t.line(C);S.from!==w&&(S.from>=b&&S.to<=w?p(S,Qa.ADDED):p(S,Qa.MODIFIED))}}else p(t.lineAt(b),Qa.ADDED)}}catch(T){v=!0,m=T}finally{try{h||null==y.return||y.return()}finally{if(v)throw m}}return a.finish()},lineMarkerChange:function(e){if(e.geometryChanged)return!0;var t=!0,n=!1,r=void 0;try{for(var i,o=e.transactions[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value,l=!0,c=!1,s=void 0;try{for(var u,d=a.effects[Symbol.iterator]();!(l=(u=d.next()).done);l=!0){if(u.value.is(el))return!0}}catch(f){c=!0,s=f}finally{try{l||null==d.return||d.return()}finally{if(c)throw s}}}}catch(f){n=!0,r=f}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}return!1}}),gl=W.Wl.highest([hl,ml]),yl=function(){function e(t,n,r){var i=this;(0,Ze.Z)(this,e),this.view=t,this.git=n,this.path=r,this.dispose=n.onRefresh((function(){return i.fetchThenUpdateState()})),this.fetchThenUpdateState()}var t=e.prototype;return t.fetchThenUpdateState=function(){var e=this;return(0,X.Z)((function(){var t,n,r,i;return(0,M.__generator)(this,(function(o){switch(o.label){case 0:return[4,e.git.getFileContents({path:e.path,revision:"HEAD"})];case 1:return t=o.sent(),void 0===(n=e.view.state.field(tl,!1))?[2]:(i=t.error?null:null!==(r=t.content)&&void 0!==r?r:"",n===i||e.view.dispatch({effects:el.of(i)}),[2])}}))}))()},t.destroy=function(){this.dispose()},e}();function Zl(e){var t=e.view,n=e.filePath,r=(0,lt.D)({controlName:"flag-git-gud"}),i=(0,A.Z)().git;(0,rn.M)((function(){return r?function(e,t){if(!t)return[];var n=H.lg.define((function(n){return new yl(n,e,t)}));return[tl,gl,n]}(i,n):null}),[r,i,n],t)}function bl(e){var t=e.filePath,n=e.autoFocus,a=e.deeplink,l=(0,A.Z)(),c=l.fs,d=l.debuggest,f=l.presence,p=l.session,h=(0,gi.uV)(),v=(0,lt.D)({controlName:"flag-ultra-hardcore"}),m="/replEnvironmentDesktop"===$o().pathname,g=(0,di.Z)({filePath:t,noHistory:!0,onException:function(e){v?h({error:e,tags:{codemirror:!0},origin:"CodemirrorEditor: useEditor/onException"}):(0,ro.xp)(e,{tags:{codemirror:!0}})}}),y=g.view,Z=g.ref;(0,b.VD)(y);var w=Ui({view:y,presence:f,session:p,fs:c,filePath:t}).isLoading;!function(e){var t=e.view,n=e.isLoading,r=e.autoFocus;s.useEffect((function(){r&&t&&(n||t.focus())}),[t,n,r])}({view:y,autoFocus:n,isLoading:w}),hi({view:y,filePath:t,isLoading:w}),(0,Ot.ZP)({view:y}),function(e){var t=e.view,n=function(e,t){var n=performance.now();Kr.kg.time(e,n-t)},r=(0,en.Z)({view:t});s.useEffect((function(){if(t)return t.dispatch({effects:r.reconfigure(W.Wl.highest(H.tk.domEventHandlers({keydown:function(e){if(Math.random()<to){var t=e.timeStamp;requestAnimationFrame((function(){n("editor input latency",t),"undefined"!==typeof requestIdleCallback?requestIdleCallback((function(){n("editor input latency after layout",t)})):setTimeout((function(){n("editor input latency after layout",t)}))}))}}})))}),function(){t.dispatch({effects:r.reconfigure([])})}}),[t,r])}({view:y}),function(e){var t=e.view,n=(0,A.Z)().session;s.useEffect((function(){if(t)return n.onEditorFocused((function(){t.focus()}))}),[n,t])}({view:y}),(0,no.Y)({view:y});var x=(0,qo.Lh)();(0,fi.Z)({view:y}),sn({view:y,filePath:t,isLoading:w,decorations:x}),Sn({view:y,debuggest:d,filePath:t,isLoading:w});var E=oi({view:y,filePath:t}),C=E.onAction,S=E.actions,k=E.contextMenuCoords,_=E.onContextMenu,R=E.closeMenu,D=E.resizeRef,U=function(e){var t=e.view,n=e.filePath,r=e.isLoading,i=si({replId:(0,Mn.Z)()}),a=(0,o.Z)(s.useState(null),2),l=a[0],c=a[1],u=(0,en.Z)({view:t});return s.useEffect((function(){if(t&&i&&!r&&n===i.mainFile){var e=document.createElement("div");return c(e),t.dispatch({effects:u.reconfigure((0,H.W$)(e))}),function(){t.dispatch({effects:u.reconfigure([])}),c(null)}}}),[t,i,n,r,u]),l}({view:y,filePath:t,isLoading:w}),O=function(e){var t=e.view,n=(0,o.Z)(s.useState(!1),2),r=n[0],i=n[1],a=(0,o.Z)(s.useState(null),2),l=a[0],c=a[1],u=(0,en.Z)({view:t});return s.useEffect((function(){if(t){var e=document.createElement("div");return c(e),t.dispatch({effects:u.reconfigure([(0,pr.yC)({createPanel:function(){return{top:!0,pos:80,dom:e}}}),H.tk.updateListener.of((function(e){(0,pr.Ep)(e.state)!==(0,pr.Ep)(e.startState)&&i((0,pr.Ep)(e.state))})),H.$f.of([{win:"Ctrl-h",linux:"Ctrl-h",preventDefault:!0,run:function(){return t.dispatch({effects:hr.of(null)}),(0,pr.nx)(t)}}])])}),function(){t.dispatch({effects:u.reconfigure([])}),c(null)}}}),[t,u]),{isOpen:r,domNode:l}}({view:y});!function(e){var t=e.filePath,n=e.view,r=e.isLoading,i=e.deeplink,o=(0,A.Z)().session;s.useEffect((function(){if(n&&!r&&i){var e=i.line,t=i.col;void 0!==e&&ui({view:n,line:e,col:t})}}),[n,r,i]),s.useEffect((function(){if(n&&!r)return o.onDeeplinkUpdated((function(e){var r=e.path,i=e.line,o=e.col;r===t&&i&&ui({view:n,line:i,col:o})}))}),[o,n,t,r])}({filePath:t,view:y,isLoading:w,deeplink:a}),Fi({view:y,filePath:t}),function(e){var t=e.view,n=(0,en.Z)({view:t}),r=(0,I.xZ)();s.useEffect((function(){if(t&&!(0,u.isMobile)({tablet:!0})){var e=r?[Mi.Gj,Mi._j,Mi.yK,Mi.gm,Mi.ZF]:[Mi.ZF];return t.dispatch({effects:n.reconfigure((0,Xi.ZP)({rules:e,key:"meta"}))}),function(){t.dispatch({effects:n.reconfigure([])})}}}),[t,n,r])}({view:y}),function(e){var t=e.view,n=(0,en.Z)({view:t}),r=(0,A.Z)().fs,i=(0,yt.Z)(),o=(0,I.xZ)();s.useEffect((function(){if(t)return t.dispatch({effects:n.reconfigure(H.tk.domEventHandlers({paste:function(e){var n,a=null===e||void 0===e||null===(n=e.clipboardData)||void 0===n?void 0:n.files,l=function(e){var n=t.state.selection.main.head;t.dispatch({changes:{from:n,insert:e},selection:{anchor:n,head:n+e.length}})};if(a){var c=!0,s=!1,u=void 0;try{for(var d,f=a[Symbol.iterator]();!(c=(d=f.next()).done);c=!0){var p=d.value;o?(0,Hi.L0)(p).then((function(e){return l('"'+e+'"')})):i&&(0,Yr.gK)(i)&&$i(p,r,i).then(l)}}catch(h){s=!0,u=h}finally{try{c||null==f.return||f.return()}finally{if(s)throw u}}}}}))}),function(){t.dispatch({effects:n.reconfigure([])})}}),[t,n,i,r,o])}({view:y}),function(e){var t=e.view,n=(0,en.Z)({view:t}),r=(0,yt.Z)();s.useEffect((function(){if(t)return t.dispatch({effects:n.reconfigure(H.tk.domEventHandlers({paste:function(e){var n;Qr({activeFile:r,view:t,event:e,clipboardText:null===(n=e.clipboardData)||void 0===n?void 0:n.getData("Text")})}}))}),function(){t.dispatch({effects:n.reconfigure([])})}}),[t,n,r])}({view:y}),function(e){var t=e.view,n=(0,en.Z)({view:t}),r=(0,I.f6)();s.useEffect((function(){if(t&&r)return t.dispatch({effects:n.reconfigure(eo)}),function(){t.dispatch({effects:n.reconfigure([])})}}),[t,n,r])}({view:y}),function(e){var t=e.view,n=(0,en.Z)({view:t}),r=(0,A.Z)().session;s.useEffect((function(){var e=function(){return r.setIsCommandBarOpen(!0),!0};if(t)return t.dispatch({effects:n.reconfigure(H.$f.of([{key:"Mod-Shift-p",run:e,preventDefault:!0},{key:"F1",run:e,preventDefault:!0}]))}),function(){t.dispatch({effects:n.reconfigure([])})}}),[t,r,n])}({view:y});var N=function(e){var t=e.view,n=(0,A.Z)().fs,r=(0,yt.Z)(),i=(0,I.xZ)();return(0,o.Z)((0,Wi.L)({accept:[T.z.Code,ji.FILE],drop:function(e,o){if(t){var a=o.getClientOffset(),l=a?t.posAtCoords(a):null;if(null!==l){var c=function(e){t.focus(),t.dispatch({changes:{from:l,insert:e},selection:{anchor:l,head:l+e.length}})};if(e.type===T.z.Code)c(e.code);else{var s=!0,u=!1,d=void 0;try{for(var f,p=e.files[Symbol.iterator]();!(s=(f=p.next()).done);s=!0){var h=f.value;i?(0,Hi.L0)(h).then((function(e){return c('"'+e+'"')})):r&&(0,Yr.gK)(r)&&$i(h,n,r).then(c)}}catch(v){u=!0,d=v}finally{try{s||null==p.return||p.return()}finally{if(u)throw d}}}}}}}),2)[1]}({view:y});(0,io.Z)({view:y,filePath:t,decorations:x});var L=function(e){var t=e.view,n=e.filePath,r=(0,o.Z)(s.useState(null),2),i=r[0],a=r[1],l=(0,en.Z)({view:t});return s.useEffect((function(){if(t)return t.dispatch({effects:l.reconfigure(Or({setExplainCodeParams:a}))}),function(){t.dispatch({effects:l.reconfigure([])})}}),[t,l,n]),i}({view:y,filePath:t}),F=function(e){var t=e.view,n=(0,o.Z)(s.useState(null),2),r=n[0],i=n[1],a=(0,en.Z)({view:t}),l=s.useCallback((function(){if(!t)throw new Error("did not expect to be asked to open generate code modal without view");var e=t.state.selection.main;t.dispatch({effects:[Nr.of(!0),H.tk.scrollIntoView(e.to)]})}),[t]);return s.useEffect((function(){if(t)return t.dispatch({effects:a.reconfigure(Lr({view:t,setGenerateCodePortalProps:i}))}),function(){t.dispatch({effects:a.reconfigure([])})}}),[t,a]),{generateCodePortalProps:r,openGenerateCodeModal:l}}({view:y}),X=F.generateCodePortalProps,M=F.openGenerateCodeModal,j=function(e){var t=e.view,n=(0,o.Z)(s.useState(null),2),r=n[0],i=n[1],a=(0,en.Z)({view:t}),l=s.useCallback((function(){if(!t)throw new Error("did not expect to be asked to open transform code modal without view");var e=t.state.selection.main;t.dispatch({effects:[Fr.of(!0),H.tk.scrollIntoView(e.to)]})}),[t]);return s.useEffect((function(){if(t)return t.dispatch({effects:a.reconfigure(Xr({view:t,setTransformCodePortalProps:i}))}),function(){t.dispatch({effects:a.reconfigure([])})}}),[t,a]),{transformCodePortalProps:r,openTransformCodeModal:l}}({view:y}).transformCodePortalProps,z=function(e){var t=e.view,n=e.filePath,r=(0,o.Z)(s.useState(null),2),i=r[0],a=r[1],l=(0,en.Z)({view:t}),c=qr(n);return s.useEffect((function(){if(t&&c)return t.dispatch({effects:l.reconfigure(jr({view:t,setSearchCodePortalProps:a}))}),function(){t.dispatch({effects:l.reconfigure([])})}}),[t,l,c]),{searchCodePortalProps:i}}({view:y,filePath:t}).searchCodePortalProps,V=Vo({view:y,filePath:t,isLoading:w,enable:m});return ca({view:y,filePath:t}),function(e){var t=e.view,n=e.filePath,r=(0,en.Z)({view:t}),i=(0,La.K)((0,xt.Z)((function(){return{path:n}}),[n]));(0,s.useEffect)((function(){if(t){var e=H.tk.domEventHandlers({scroll:(0,Oi.debounce)((function(){var e=0,n=0,r=!0,o=!1,a=void 0;try{for(var l,c=t.visibleRanges[Symbol.iterator]();!(r=(l=c.next()).done);r=!0){var s=l.value;e=Math.min(e,s.from),n=Math.max(e,s.to)}}catch(u){o=!0,a=u}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}i("user:scroll",{visibleLines:{from:t.state.doc.lineAt(e).number,to:t.state.doc.lineAt(n).number}})}),250)}),n=(0,Oi.debounce)((function(e,t,n){i("user:selection",{inputMethod:n,from:e,to:t})}),250),o=H.tk.updateListener.of((function(e){var t=e.transactions,r=!0,o=!1,a=void 0;try{for(var l,c=t[Symbol.iterator]();!(r=(l=c.next()).done);r=!0){var s=l.value;s.isUserEvent("input.paste")&&i("user:paste",{}),s.isUserEvent("input.drop")&&i("user:new-drop",{}),s.isUserEvent("move.drop")&&i("user:move-drop",{}),s.isUserEvent("delete.cut")&&i("user:cut",{}),s.isUserEvent("input.complete")&&i("user:complete",{}),s.isUserEvent("select")&&n(s.newSelection.main.from,s.newSelection.main.to,s.isUserEvent("select.pointer")?"pointer":"keyboard"),s.isUserEvent("undo")&&i("user:undo",{}),s.isUserEvent("redo")&&i("user:redo",{})}}catch(u){o=!0,a=u}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}}));return t.dispatch({effects:r.reconfigure([e,o])}),function(){t.dispatch({effects:r.reconfigure([])})}}}),[t,r,i])}({view:y,filePath:t}),Zl({view:y,filePath:t}),(0,i.BX)("div",{ref:D,css:Na.ac,"data-cy":w?"workspace-cm-editor-loading":"workspace-cm-editor-".concat(t),children:[w?(0,i.tZ)("div",{css:Na.ov,children:(0,i.tZ)(B.Z,{})}):null,(0,i.tZ)("div",{ref:function(e){Z(e),N(e)},onContextMenu:_,css:Na.Mp}),k&&y?(0,i.tZ)(gt.ZP,{view:y,coords:k,actions:S,closeMenu:R,onAction:C}):null,L?(0,i.tZ)(Ka,{code:L.code,dom:L.dom,filePath:t}):null,X?(0,i.tZ)(bo,(0,P.Z)((0,r.Z)({},X),{filePath:t})):null,j?(0,i.tZ)(_o,(0,P.Z)((0,r.Z)({},j),{filePath:t})):null,z?(0,i.tZ)(Uo,(0,P.Z)((0,r.Z)({},z),{filePath:t})):null,U?(0,i.tZ)(fr,{dom:U,onShowGenerateCodeModal:M}):null,O.domNode&&O.isOpen?(0,i.tZ)(_r,{dom:O.domNode,view:y}):null,(0,i.tZ)(qo.Iq,{source:x.observable}),y?(0,i.tZ)(i.HY,{children:Object.entries(V.threadElements).map((function(e){var n=(0,o.Z)(e,2),r=n[0],a=n[1];return G.createPortal((0,i.tZ)(Oa,{threadId:r,view:y,filePath:t}),a)}))}):null]})}var wl=n(40403),xl=n(55183),El=n(96929),Cl=(0,Bn.iv)([K.l0.height("auto"),K.l0.p(4),K.l0.color.foregroundDimmer]);function Sl(){var e=(0,s.useContext)(xl.ox).openHistory;return e?(0,i.tZ)(K.Tg,{background:"root",css:[K.l0.borderRadius(8)],children:(0,i.tZ)(K.zx,{css:Cl,text:"History",iconRight:(0,i.tZ)(wl.Z,{}),onClick:function(){(0,El.p)("historyOpened"),e()}})}):null}function Tl(){var e=(0,s.useRef)(null),t=(0,b.uN)(),n=(0,en.Z)({view:t}),r=function(t){e.current&&(e.current.textContent=t)};return(0,s.useEffect)((function(){if(t){var e=null,i=null,o=function(t){t!==i&&(i=t,null===e&&(e=requestAnimationFrame((function(){e=null,r(i?function(e){var t=e.selection,n="",r=0;if(t.ranges.length>1){r=t.ranges.reduce((function(e,t){return e+(t.to-t.from)}),0);var i=t.ranges.length;n="".concat(i," selections")}else{var o=t.ranges[0],a=e.doc.lineAt(o.head),l=o.head-a.from;r=o.to-o.from,n="Line ".concat(a.number," : Col ").concat(l+1)}return r>0&&(n+=" (".concat(r," chars)")),n}(i):"")}))))};return t.dispatch({effects:n.reconfigure(H.tk.updateListener.of((function(e){(e.docChanged||e.selectionSet)&&o(e.state)})))}),o(t.state),function(){r(""),null!==e&&(cancelAnimationFrame(e),e=null),t.dispatch({effects:n.reconfigure([])})}}r("")}),[t,n]),(0,s.useMemo)((function(){return(0,i.tZ)(K.xv,{ref:e,color:"dimmest","data-cy":"current-position"})}),[])}var kl=n(34856);function _l(e){var t,n,r,o=(0,O.Z)(e.filePath);return(0,F.Z)().preferences.codeIntelligence?null!=o?(t="Language server status: ".concat((r=o.getServerState())[0].toUpperCase()+r.slice(1).toLowerCase()),n=function(e){switch(e){case U.a.OFFLINE:case U.a.INITIALIZING:return kl.O.OFF;case U.a.INITIALIZED:return kl.O.SUCCESS;case U.a.EXITED:case U.a.EXITING:default:return kl.O.FAILED}}(o.getServerState())):(t="Language server not found for this file",n=kl.O.OFF):(t="Code Intelligence is disabled. Enable it in Settings",n=kl.O.OFF),(0,i.tZ)(kl.Z,{content:t,display:"tooltip",status:n})}function Rl(){var e=(0,s.useState)(null),t=e[0],r=e[1],o=(0,s.useRef)(null),a=(0,b.uN)(),l=(0,en.Z)({view:a}),c=(0,F.Z)().preferences,u="vim"===(null===c||void 0===c?void 0:c.keyboardHandler),d=(0,s.useCallback)((function(e){if(o.current){var n=null!==e&&void 0!==e?e:"";if(a&&t&&void 0===e){var r,i,l=t.getCM(a),c=null!==(i=null===(r=null===l||void 0===l?void 0:l.state.vim)||void 0===r?void 0:r.mode)&&void 0!==i?i:"normal";n="-- ".concat(c.toUpperCase()," --")}o.current.innerText!==n&&(o.current.innerText=n||"")}}),[a,t]);return(0,s.useEffect)((function(){u&&!t&&n.e(1972).then(n.bind(n,1226)).then((function(e){r(e),d()}))}),[u,t,d]),(0,s.useEffect)((function(){if(a&&u){var e=!1;return setTimeout((function(){e||(e=!0,a.dispatch({effects:l.reconfigure(H.tk.updateListener.of((function(){return d()})))}))}),0),d(),function(){e?a.dispatch({effects:l.reconfigure([])}):e=!0}}d(null)}),[a,u,l,d]),(0,i.tZ)(i.HY,{children:u?(0,i.tZ)(K.xv,{ref:o,css:[K.l0.color.foregroundDimmest]}):null})}var Dl=(0,K.Xb)({root:[K.l0.position.relative,K.l0.rowWithGap(16),K.l0.align.stretch,K.l0.justify.spaceBetween,K.l0.backgroundColor.backgroundDefault,{borderTop:"1px solid ".concat(K.TV.backgroundHigher)}],left:[K.l0.rowWithGap(8),K.l0.align.center,K.l0.p(8)],right:[K.l0.display.flex,K.l0.flex.row,K.l0.align.center,K.l0.px(4)]});function Il(e){var t=(0,lt.D)({controlName:"flag-lsp-status-in-ws"}),n=!(0,u.isMobile)()&&t,r=(0,aa.T3)()?void 0:{borderBottomLeftRadius:8,borderBottomRightRadius:8};return(0,i.BX)(K.G7,{css:Dl.root,style:r,children:[(0,i.BX)(K.G7,{css:Dl.left,children:[(0,i.tZ)(Tl,{}),(0,i.tZ)(Rl,{}),n?(0,i.tZ)(_l,{filePath:e.filePath}):null]}),(0,i.tZ)(K.G7,{css:Dl.right,children:(0,i.tZ)(Sl,{})})]})}var Pl=n(34385),Gl=n(32027),Bl=n(62991),Al=n.n(Bl);function Ul(e,t,n){var r=n.find((function(n){var r=n.range;return(0,z.R)(e,r.end)>=t&&(0,z.R)(e,r.start)<=t}));return null==r?[]:r.children?[r].concat(Ul(e,t,r.children)):[r]}function Ol(e,t){return e.length===t.length&&e.every((function(e,n){return e===t[n]}))}var Nl=n(80086),Ll=n(95028),Fl=n(30017),Xl=n(48930),Ml=n(65765),Wl=n(31725),jl={root:(0,Bn.iv)([K.l0.p(4),K.l0.rowWithGap(4),K.l0.align.center]),text:(0,Bn.iv)([K.l0.truncate,K.l0.flex.growAndShrink(1),{fontSize:K.TV.fontSizeDefault}])};function Hl(e){return(0,i.BX)(K.G7,{css:[jl.root],children:[e.icon?(0,s.cloneElement)(e.icon,{size:16}):null,(0,i.tZ)(K.G7,{css:jl.text,children:e.text})]})}var zl=n(38137),Vl=n(54011),ql=n(24833),Kl=n(24888),$l=n(3553),Yl=n(25424),Ql=n(19353),Jl=n(43463),ec=n(18374),tc=n(26404),nc=n(2428),rc=n(50119),ic=n(10982),oc=n(6725),ac=function(e){var t=new Set(oc.Z),n=new Map,r=!0,i=!1,a=void 0;try{for(var l,c=e[Symbol.iterator]();!(r=(l=c.next()).done);r=!0){var s=(0,o.Z)(l.value,3),u=s[0],d=s[1],f=s[2];if(!t.has(u))throw new Error("Symbol not supported by LSP client. Please add to the supported symbol icons array");"string"===typeof d&&(d=rc.s.get(d)),n.set(u,[d,null!==f&&void 0!==f?f:K.TV.foregroundDefault])}}catch(p){i=!0,a=p}finally{try{r||null==c.return||c.return()}finally{if(i)throw a}}return n}([[Y.cR.Array,Jl.Z],[Y.cR.Boolean,tc.Z],[Y.cR.Class,"class",K.TV.yellowDefault],[Y.cR.Constant,"constant",K.TV.blueStronger],[Y.cR.Constructor,"method",K.TV.blurpleDefault],[Y.cR.Enum,ql.Z,K.TV.orangeDefault],[Y.cR.EnumMember,nc.Z,K.TV.blueStronger],[Y.cR.Event,zl.Z],[Y.cR.Field,ec.Z],[Y.cR.File,Kl.Z],[Y.cR.Function,"function",K.TV.blurpleStronger],[Y.cR.Interface,Yl.Z,K.TV.blueStronger],[Y.cR.Key,Ql.Z],[Y.cR.Method,"method",K.TV.blurpleDefault],[Y.cR.Module,ic.Package,K.TV.purpleDefault],[Y.cR.Namespace,Vl.Z],[Y.cR.Object,tc.Z,K.TV.blueDimmer],[Y.cR.Operator,tc.Z],[Y.cR.Package,ic.Package,K.TV.purpleDefault],[Y.cR.Property,ec.Z],[Y.cR.String,$l.Z],[Y.cR.Struct,Vl.Z],[Y.cR.TypeParameter,nc.Z],[Y.cR.Variable,nc.Z,K.TV.blueStronger]]);function lc(e){var t,n=e.kind,r=(0,o.Z)(null!==(t=ac.get(n))&&void 0!==t?t:[tc.Z,K.TV.foregroundDefault],2),a=r[0],l=r[1];return(0,i.tZ)(a,{color:l,size:16})}function cc(e){return CSS.escape(e.name)}function sc(e){var t=e.selectedSymbol,n=e.symbols,r=e.moveCursor,o=e.icon,a=e.text,l=(0,Ll.W)({onOpenChange:function(e){e&&(0,Wn.j)(Wn.U3.CODE_NAVIGATION_USED,{action:"opened"})}}),c=s.useRef(null),u=(0,Fl.u4)({},l,c),d=u.menuTriggerProps,f=u.menuProps,p=t?new Set([t.name]):void 0;return(0,i.BX)(i.HY,{children:[(0,i.tZ)(Xl.z,{text:a,icon:o,innerRef:c,ariaProps:d,active:l.isOpen}),l.isOpen?(0,i.tZ)(Ml.J,{triggerRef:c,state:l,placement:"bottom left",children:(0,i.tZ)(Wl.v,{menuProps:f,items:n,selectedKeys:p,onAction:function(e){var t=n.find((function(t){return cc(t)===e}));t&&(r(t.selectionRange.start),(0,Wn.j)(Wn.U3.CODE_NAVIGATION_USED,{action:"jumped"}))},children:function(e){return(0,i.tZ)(K.ck,{children:(0,i.tZ)(Hl,{icon:(0,i.tZ)(lc,{kind:e.kind}),text:e.name})},cc(e))}})}):null]})}var uc=s.memo((function(e){var t=e.symbols,n=e.symbolsPath,r=e.moveCursor,o=n.length?n[n.length-1]:null,a=o?o.children:t;return(0,i.BX)(i.HY,{children:[n.map((function(e,o){var a=0===o?t:n[o-1].children;return a?(0,i.BX)(s.Fragment,{children:[(0,i.tZ)(wr.Z,{size:12}),(0,i.tZ)(sc,{symbols:a,icon:(0,i.tZ)(lc,{kind:e.kind}),text:e.name,selectedSymbol:e,moveCursor:r})]},cc(e)):null})),(null===a||void 0===a?void 0:a.length)?(0,i.BX)(i.HY,{children:[(0,i.tZ)(wr.Z,{size:12}),(0,i.tZ)(sc,{symbols:a,text:"...",moveCursor:r})]}):null]})}));function dc(e){var t=e.view,n=(0,xt.Z)((function(){return(0,Xo.cn)(null)}),[]),r=(0,Xo.b9)(n),i=s.useCallback((function(e){null===t||void 0===t||t.dispatch({scrollIntoView:!0,selection:W.jT.cursor((0,z.R)(t.state.doc,e))}),null===t||void 0===t||t.focus()}),[t]);(0,rn.M)((function(){var e=y()(r,200);return H.tk.updateListener.of((function(t){var n=t.state.field(an,!1)||null,r=n!==t.startState.field(an,!1);(t.selectionSet||r)&&e({doc:t.view.state.doc,cursor:t.state.selection.main.head,symbols:n})}))}),[r],t);var o=(0,xt.Z)((function(){return(0,Nl.kv)(n,(function(e){return(null===e||void 0===e?void 0:e.symbols)?Ul(e.doc,e.cursor,e.symbols):[]}),Ol)}),[n]),a=(0,xt.Z)((function(){return(0,Nl.kv)(n,(function(e){return null===e||void 0===e?void 0:e.symbols}),Al())}),[n]);return{symbols:(0,Xo.Dv)(a),symbolsPath:(0,Xo.Dv)(o),moveCursor:i}}var fc=s.memo((function(e){var t=dc({view:e.view}),n=t.symbols,r=t.symbolsPath,o=t.moveCursor;return(null===n||void 0===n?void 0:n.length)?(0,i.tZ)(uc,{symbols:n,symbolsPath:r,moveCursor:o}):null})),pc=n(29830),hc=n(35700);function vc(e){var t=e.path,n=e.replacePane,r=(0,b.uN)(),o=(0,s.useCallback)((function(e){n((0,pc.$E)(e))}),[n]);return(0,i.tZ)(pc.h4,{children:(0,i.tZ)(pc.Qc,{children:(0,i.tZ)(hc.t,{path:t,onFileClick:o,children:(0,i.tZ)(fc,{view:r})})})})}function mc(e){var t=(0,Gl.Z)(),n=(0,I.xZ)(),o=(0,Pl.Z)(Hn.y.Editor),a=(0,d.Z)();return(0,i.BX)("div",{ref:o,css:{position:"relative",display:"flex",flexDirection:"column",overflowY:"hidden",height:"100%",width:"100%",boxShadow:"".concat(t?"0 3px 0 3px ".concat(t):"0")},children:[e.replacePane?(0,i.tZ)(vc,{replacePane:e.replacePane,path:e.filePath}):null,(0,i.BX)("div",{css:Na.ev,children:[(0,i.tZ)(bl,(0,r.Z)({},e)),n?(0,i.tZ)(D,{}):null]}),(0,i.tZ)("div",{css:{display:a?"none":"block"},children:(0,i.tZ)(Il,{filePath:e.filePath})}),e.hideMobileKeyboardToolbar?null:(0,i.tZ)(S,{filePath:e.filePath,isLoading:!1})]})}},4010:function(e,t,n){n.d(t,{KZ:function(){return c},ZP:function(){return d}});var r=n(67294),i=n(14456),o=n(59006),a=n(15902),l=n(11163),c=400,s=i.tk.theme({".cm-content":{paddingBottom:"".concat(80,"px")}}),u=i.tk.theme({".cm-content":{paddingBottom:"".concat(c,"px")}});function d(e){var t=e.view,n=(0,o.Z)({view:t}),i=(0,a.Vg)((0,l.useRouter)())?s:u;r.useEffect((function(){if(t)return t.dispatch({effects:n.reconfigure(i)}),function(){t.dispatch({effects:n.reconfigure([])})}}),[t,n,i])}},11143:function(e,t,n){n.d(t,{Mp:function(){return l},ac:function(){return a},ev:function(){return o},ov:function(){return c}});var r=n(70917),i=n(59641),o=(0,r.iv)({position:"relative",overflowY:"auto",width:"100%",height:"100%",zIndex:3}),a=(0,r.iv)({position:"relative",overflowY:"auto",width:"100%",height:"100%",fontSize:"14px",backgroundColor:i.TV.backgroundDefault}),l=(0,r.iv)({display:"flex",alignItems:"stretch",width:"100%",height:"100%","& > .cm-editor":{flex:"1 1 auto",width:"100%"}}),c=(0,r.iv)({position:"absolute",left:0,top:0,height:"100%",width:"100%",overflow:"hidden",zIndex:5})},76505:function(e,t,n){n.d(t,{Z:function(){return ye}});var r=n(34727),i=n(14251),o=n(52875),a=n(9941),l=n(70655),c=n(35944),s=n(67294),u=n(15519),d=n(94561),f=n(40963),p=n(1144),h=n(61756),v=n(32692),m=n(31230),g=n(37887),y=n(50319);function Z(){var e=(0,v.Z)(["\n  query ConfigReplLanguage($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        language\n      }\n    }\n  }\n"]);return Z=function(){return e},e}function b(){var e=(0,v.Z)(["\n  mutation ConfigUpdateRepl($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n      }\n    }\n  }\n"]);return b=function(){return e},e}var w={},x=(0,m.Ps)(Z());var E=(0,m.Ps)(b());var C=n(99408),S=n(34193),T=n(19526),k=n(81255),_=n(44044),R=n(69346),D=n(30992),I=n(88961),P=n(38863),G=n(63377),B=n(68056),A=n(6625),U=n(16965),O=n(32951),N=n(87653),L=n(3218),F=n(96594);function X(e){var t,n=e.options,r=e.initialSelectedOption,l=e.inputRef,c=e.setInputValue,u=(0,a.Z)(s.useState(""),2),d=u[0],f=u[1],p=(t={options:n,filter:d},s.useMemo((function(){return t.filter?L.Z.filter(t.filter.toLowerCase(),t.options).map((function(e){return e.original})):t.options}),[t.options,t.filter])),h=(0,F.Kb)({items:p,initialHighlightedIndex:0,initialSelectedItem:r,stateReducer:function(e,t){var n,r,a=t.type,s=t.changes;(a===F.Kb.stateChangeTypes.ItemClick||a===F.Kb.stateChangeTypes.InputKeyDownEnter&&s.selectedItem)&&(null===(n=l.current)||void 0===n||n.blur());return a!==F.Kb.stateChangeTypes.InputBlur||s.selectedItem?a===F.Kb.stateChangeTypes.InputBlur&&s.selectedItem?(c(null!==(r=s.selectedItem)&&void 0!==r?r:""),s):s:(0,o.Z)((0,i.Z)({},s),{isOpen:!0})}});return{filteredOptions:p,combobox:h,setFilter:f,filter:d}}var M=n(33773),W=n(70917),j=n(25019),H=n(4306),z=(0,W.iv)([k.l0.py(8),k.l0.pl(8),k.l0.pr(32),{color:"inherit",outline:"0 none",border:"1px solid",fontSize:"inherit",lineHeight:k.TV.space16,display:"block",width:"100%","::placeholder, :disabled":{color:k.TV.foregroundDimmer,borderColor:"transparent"},cursor:"text"}]),V=(0,W.iv)([k.l0.reset.button,_.gU.listItem,k.l0.borderRadius(8),k.l0.center,{width:24,height:24}]),q=R.K.button;function K(e){var t=e.id,n=e.onSelect,r=e.onInit,l=e.options,u=e.initialSelectedOption,d=e.placeholderText,h=e.autoFocus,v=e.disabled,m=s.useRef(null),g=(0,a.Z)(s.useState(null!==u&&void 0!==u?u:""),2),y=g[0],Z=g[1],b=X({options:l,initialSelectedOption:u,inputRef:m,setInputValue:Z}),w=b.filteredOptions,x=b.filter,E=b.combobox,C=b.setFilter,S=(0,U.Z)(n),T=(0,U.Z)(r);return s.useEffect((function(){u&&(T.current(u),Z(u),C(""))}),[u]),(0,O.Z)((function(){var e;E.selectedItem&&(null===(e=m.current)||void 0===e||e.blur(),S.current(E.selectedItem),Z(E.selectedItem),C(""))}),[E.selectedItem,S]),s.useEffect((function(){u&&(E.selectItem(u),Z(u),C(""))}),[u]),(0,c.BX)(R.G,{children:[(0,c.tZ)("div",(0,o.Z)((0,i.Z)({},E.getComboboxProps()),{children:(0,c.BX)(R.G,{css:[k.l0.flex.row,{position:"relative"}],children:[(0,c.tZ)(R.G,{css:[k.l0.flex.growAndShrink(1)],children:(0,c.tZ)(f.II,(0,o.Z)((0,i.Z)({},E.getInputProps({id:t,spellCheck:!1,autoFocus:h,onChange:function(e){C(e.currentTarget.value.toLowerCase()),Z(e.currentTarget.value)},ref:m,onFocus:function(e){E.openMenu(),e.currentTarget.select()}})),{value:y,placeholder:null!==u&&void 0!==u?u:d,css:[z],disabled:v,dataCy:"import-config-entrypoint-input"}))}),v?null:(0,c.tZ)(R.G,{css:[{position:"absolute",top:0,right:0,height:"100%"},k.l0.center],children:(0,c.tZ)(q,(0,o.Z)((0,i.Z)({},E.getToggleButtonProps()),{css:V,type:"button",children:E.inputValue&&!E.isOpen?(0,c.tZ)(M.Z,{}):(0,c.tZ)(N.Z,{})}))})]})})),(0,c.BX)("div",(0,o.Z)((0,i.Z)({},E.getMenuProps()),{css:{position:"relative"},children:[E.isOpen&&w.length?(0,c.tZ)(j.Z,{children:(0,c.tZ)("ul",{css:[k.l0.pt(4),k.l0.pb(8)],children:w.map((function(e,t){return(0,c.tZ)("li",(0,o.Z)((0,i.Z)({},E.getItemProps({item:e,index:t})),{children:(0,c.tZ)(H.Z,(0,o.Z)((0,i.Z)({},$(e)),{filter:x,selected:E.selectedItem===e,highlighted:E.highlightedIndex===t}))}),e.toLowerCase())}))})}):null,x&&!w.length&&E.isOpen?(0,c.tZ)(j.Z,{children:(0,c.tZ)(R.G,{css:[k.l0.p(16),k.l0.colWithGap(4)],children:(0,c.BX)(p.x,{color:"dimmer",children:['No results for "',x,'"']})})}):null]}))]})}function $(e){return{title:e,key:e.toLowerCase()}}var Y,Q=n(93160),J=n(73604);!function(e){e.Unknown="UNKNOWN",e.Npm="NPM",e.Django="DJANGO",e.Rails="RAILS",e.DotNet="DOTNET",e.Cargo="CARGO",e.Make="MAKE",e.RegularRun="REGULAR_RUN"}(Y||(Y={}));var ee=new RegExp("((index)|(main)|(app)|(run)|(start)|(server))\\..+","i"),te=new RegExp("((node_modules)|(venv)|(bower_components)|(vendor)|(build)|(dist)|(target)|(\\.git)|(\\.vscode)|(\\.idea)).+$","i");function ne(e){var t=e.initRunCommand,n=e.isCompiled,r=e.allFiles,i=new Set(r);return i.has("Makefile")||i.has("makefile")?Y.Make:i.has("package.json")?Y.Npm:i.has("Cargo.toml")?Y.Cargo:n?Y.Unknown:i.has("config/application.rb")?Y.Rails:function(e,t){return e.some((function(e){return(0,J.r6)(e)===t}))}(r,"csproj")?Y.DotNet:i.has("manage.py")?Y.Django:ee.test(t)?Y.RegularRun:Y.Unknown}function re(e,t){var n=t.initRunCommand,r=t.allFiles;switch(e){case Y.Npm:return"npm run start";case Y.RegularRun:var i=function(e){var t;return null!==(t=e.filter((function(e){return!te.test(e)})).find((function(e){return ee.test(e)})))&&void 0!==t?t:null}(r);return null==i?null:n.replace(ee,i);case Y.Django:return"python3 manage.py runserver 0.0.0.0:3000";case Y.Rails:return"bundle exec rails server --binding=0.0.0.0";case Y.DotNet:return"dotnet run";case Y.Cargo:return"cargo run";case Y.Make:case Y.Unknown:default:return null}}function ie(e){switch(e){case Y.Make:return"make";case Y.Cargo:case Y.DotNet:case Y.Npm:return"";default:return null}}function oe(e,t,n){if(0===n.length)return{projType:Y.Unknown,runCommand:null,compileCommand:null};var r={initRunCommand:e,isCompiled:t,allFiles:n},i=ne(r);return{projType:i,runCommand:re(i,r),compileCommand:ie(i)}}var ae=n(60977),le=n(67983),ce=n(58482),se=n(58523);var ue=n(40005),de=n(8347),fe=n(4445),pe=n(77365);function he(e){var t=e.children;return(0,c.BX)(Q.T,{background:"default",css:[k.l0.borderRadius(8),{width:"100%",height:"calc(100% - var(--space-2))",backgroundColor:"var(--background-default)",overflowY:"auto",marginTop:"0px"}],children:[(0,c.tZ)(R.G,{children:(0,c.tZ)(p.x,{variant:"subheadDefault",css:[k.l0.color.foregroundDimmest,k.l0.pl(16),k.l0.pt(16)],children:".replit"})}),(0,c.tZ)(R.G,{css:[k.l0.p(16),k.l0.justify.center,k.l0.align.center,{flex:"1 1 auto"}],children:t})]})}function ve(e){var t,n=Boolean(e.hasInterpreter),r=e.initialRun,l=null!==(t=e.initialCompile)&&void 0!==t?t:"",d=e.isFrameworkRecommended,v=!!e.projType&&e.projType===Y.Rails,m=e.isApplyingConfig,g=(0,a.Z)(s.useState("Unknown"===u.Z.get(e.initialLanguage).displayName?"bash":e.initialLanguage),2),y=g[0],Z=(g[1],(0,D.Y)(e.initialRun,(function(e){if(!e)return{message:"Add a run command"}}))),b=(0,a.Z)(s.useState(e.initialCompile),2),w=b[0],x=b[1];s.useEffect((function(){Z.setValue(r)}),[r]),s.useEffect((function(){x(null!==l&&void 0!==l?l:"")}),[l]);var E=(0,D.Y)("",(function(e){if(!e)return{message:"Choose an entry point file"}})),C=(0,a.Z)(s.useState(Boolean(n&&!d)),2),P=C[0],G=C[1];s.useEffect((function(){G(Boolean(n&&!d))}),[n,d]);var U=R.K.a,O=(0,a.Z)(s.useState([]),2),N=O[0],L=O[1],F=(0,A.Z)(),X=(0,ue.u)();return s.useEffect((function(){X&&F.current&&L(X)}),[F,X]),(0,c.BX)("form",{onSubmit:function(t){t.preventDefault(),e.setIsApplyingConfig(!0),Z.value||P?e.onSubmit({run:Z.value,compile:null!==w&&void 0!==w?w:"",entry:E.value,deleteInterp:!P,onDone:e.closeConfigPane,runChanged:Z.value!==r,compileChanged:w!==l,projType:e.projType}):Z.validate()},css:[k.l0.maxWidth(400),{width:"100%"}],children:[(0,c.BX)(R.G,{css:[k.l0.colWithGap(8)],children:[e.hasProcfile?(0,c.tZ)(R.G,{css:[k.l0.colWithGap(8)],children:(0,c.BX)(p.x,{variant:"small",multiline:!0,css:[k.l0.mb(24)],children:["Looks like you came from Heroku!",(0,c.tZ)(U,{target:"_blank",href:"https://docs.replit.com/tutorials/import-heroku",rel:"noopener noreferrer",children:"Read more about Replit and Heroku here."})]})}):null,n?(0,c.tZ)(R.G,{css:[k.l0.pb(16)],children:(0,c.BX)(B.hE,{disabled:m,name:"interpreterView",value:P.toString(),row:!0,onChange:function(){return G((function(e){return!e}))},stretch:!0,primary:!0,children:[(0,c.tZ)(B.rK,{id:"interpreterFalse",value:"false",text:"Use run command"}),(0,c.tZ)(B.rK,{id:"interpreterTrue",value:"true",text:"Use default interpreter"})]})}):null,(0,c.BX)(R.G,{css:[k.l0.height(e.initialCompile?210:170),k.l0.colWithGap(8)],children:[P?null:(0,c.BX)(R.G,{css:[k.l0.maxWidth(400),k.l0.colWithGap(8)],children:[e.initialCompile?(0,c.BX)(R.G,{css:[k.l0.colWithGap(4)],children:[(0,c.tZ)("label",{htmlFor:"compile-sel",children:"Configure the Compile Command"}),(0,c.tZ)(p.x,{multiline:!0,variant:"small",color:"dimmest",children:"This is optional, and is executed before your run command."}),(0,c.tZ)(f.II,{disabled:m,id:"compile-sel",type:"text",value:w,placeholder:"Enter a command to compile the program",onChange:function(e){x(e.currentTarget.value)},css:{"&:disabled":{color:k.TV.foregroundDimmer}}})]}):null,(0,c.tZ)("label",{htmlFor:"run-sel",css:[k.l0.mt(4)],children:"Configure the Run Command"}),(0,c.tZ)(f.II,{disabled:m,id:"run-sel",type:"text",value:Z.value,placeholder:"Enter a command to run the program",onChange:function(e){Z.setValue(e.currentTarget.value)},css:[{"&:disabled":{color:k.TV.foregroundDimmer,cursor:"auto"},cursor:"text"}]}),v?(0,c.BX)(p.x,{multiline:!0,variant:"small",color:"dimmest",children:["We detected this is a Rails project. You will need",(0,c.BX)("a",{target:"_blank",rel:"noopener noreferrer",href:"https://docs.replit.com/misc/rails-on-replit",children:[" ","additional changes"," "]}),"to your config files to use all of Replit\u2019s features."]}):null,Z.error||!Z.value?(0,c.BX)(R.G,{css:[k.l0.color.accentNegativeDefault,k.l0.rowWithGap(4),k.l0.align.center],children:[(0,c.tZ)(I.Z,{size:12}),(0,c.tZ)(R.G,{children:Z.error?Z.error.message:"Add a run command"})]}):null]}),P?(0,c.BX)(R.G,{css:[{maxWidth:400},k.l0.colWithGap(8)],children:[(0,c.tZ)("label",{htmlFor:"entry-sel","data-cy":"import-config-entrypoint",children:"Configure entry point"}),(0,c.tZ)(p.x,{variant:"small",css:[k.l0.color.foregroundDimmest],multiline:!0,children:"The entry point is the file that\u2019s run by default and shown first."}),0!==N.length?(0,c.tZ)(K,(0,o.Z)((0,i.Z)({id:"config-selector",onSelect:E.setValue,onInit:E.setValue,options:N},N.length&&Boolean(X)&&{initialSelectedOption:N[0]}),{disabled:m})):(0,c.tZ)(f.II,{disabled:m,id:"entry-sel",type:"text",value:E.value,placeholder:"Choose entry point file",onChange:function(e){E.setValue(e.currentTarget.value)},css:[_.gU.filled,{cursor:"text"}]}),E.error?(0,c.BX)(R.G,{css:[{color:"var(--accent-negative-default)"},k.l0.rowWithGap(4),k.l0.align.center],children:[(0,c.tZ)(I.Z,{size:12}),(0,c.tZ)(R.G,{children:E.error.message})]}):null]}):null,(0,c.tZ)(U,{css:[k.l0.color.accentPrimaryStronger,{fontWeight:k.TV.fontWeightMedium}],target:"_blank",href:"https://docs.replit.com/programming-ide/running-github-repositories-replit",rel:"noopener noreferrer",children:"Not sure what to do?"}),(0,c.tZ)(R.G,{css:[k.l0.flex.row,k.l0.pt(16)],children:(0,c.tZ)(h.zx,{colorway:"primary",outlined:!0,type:"submit",text:m?"Saving...":"Done",disabled:m||!P&&(Boolean(Z.error)||!Z.value),css:[_.gU.filledAndOutlined,{fontWeight:k.TV.fontWeightMedium,color:k.TV.accentPrimaryStronger}],dataCy:"import-config-done"})})]})]}),(0,c.tZ)(S.Z,{isOpen:!1,preventClose:!0,onRequestClose:function(){},children:(0,c.tZ)(R.G,{css:[k.l0.borderRadius(16),k.l0.p(32),{backgroundColor:"var(--background-default)"}],children:(0,c.BX)(T.gC,{align:"center",spacing:1,children:[(0,c.tZ)(pe.Z,{size:32}),(0,c.BX)(p.x,{children:["Upgrading to ",u.Z.get(y).displayName]})]})})})]})}function me(){return(0,c.BX)(R.G,{children:[(0,c.tZ)(R.G,{children:".replit looks a lil messed up :/"}),(0,c.tZ)("a",{css:[k.l0.pt(8),{fontSize:k.TV.fontSizeSmall}],target:"_blank",href:"https://docs.replit.com/programming-ide/configuring-repl",children:"View docs"})]})}function ge(){return(0,c.tZ)(R.G,{children:(0,c.BX)("p",{children:["Initializing run configuration",(0,c.tZ)(d.Z,{style:{color:"var(--foreground-default)"}})]})})}var ye=function(e){var t,n=(0,G.Z)(),o=(0,C.Z)(),u=o.fs,d=o.dotReplit,f=(0,a.Z)(function(e){var t=(0,i.Z)({},w,e);return y.D(E,t)}(),1)[0],p=(0,A.Z)(),h=function(e){var t=(0,i.Z)({},w,e);return g.a(x,t)}({variables:{replId:n}}),v="Repl"===(null===(t=h.data)||void 0===t?void 0:t.repl.__typename)?h.data.repl:null,m=e.useReadFile(u,P.l),Z=(0,a.Z)(s.useState(!1),2),b=Z[0],S=Z[1],T=(0,a.Z)(s.useState(!1),2),k=T[0],_=T[1],R=m&&!m.error?m.content.toString("utf8"):"",D=(0,a.Z)(s.useState(""),2),I=D[0],B=D[1],U=(0,a.Z)(s.useState(""),2),O=U[0],N=U[1],L=(0,a.Z)(s.useState(!1),2),F=L[0],X=L[1],M=(0,a.Z)(s.useState(Y.Unknown),2),W=M[0],j=M[1],H=(0,a.Z)(s.useState(!1),2),z=H[0],V=H[1];s.useEffect((function(){function e(){return e=(0,r.Z)((function(){var e,t,n,r,i,o,a,c,s,f,h,v,m,g,y,Z;return(0,l.__generator)(this,(function(l){switch(l.label){case 0:return[4,d.getConfig()];case 1:return e=l.sent(),t=e.config,e.error?[2]:(r=(0,de.m)(null!==(n=t.run)&&void 0!==n?n:void 0),o=(0,de.m)(null!==(i=t.compile)&&void 0!==i?i:void 0),a=Boolean(t.compile),c=Boolean(t.interpreter),[4,u.listFiles()]);case 2:return s=l.sent(),p.current?(null!=s.error||null==s.files||0===s.files.length||(f=s.files,h=oe(r,a,f),v=h.projType,m=h.runCommand,g=h.compileCommand,y=b?null!==r&&void 0!==r?r:m:null!==m&&void 0!==m?m:r,Z=null!==g&&void 0!==g?g:o,S(f.includes(fe.E)),B(y),N(Z),X(v!==Y.Unknown&&v!==Y.RegularRun),j(v),V(c)),[2]):[2]}}))})),e.apply(this,arguments)}R&&function(){e.apply(this,arguments)}()}),[R,p]),s.useEffect((function(){(0,ae.j)(ae.U3.NIX_GH_IMPORT_USED,{action:le.D.ImportEnded,replId:n})}),[n]);var q=(0,ce.Z)();s.useEffect((function(){q(!1)}),[]);var K=function(){var e=(0,r.Z)((function(e){var t,r,i,o,a,c,s,p,h,v;return(0,l.__generator)(this,(function(l){switch(l.label){case 0:return t=e.run,r=e.compile,i=e.entry,o=e.deleteInterp,a=e.onDone,c=e.runChanged,s=e.compileChanged,p=e.projType,(0,ae.j)(ae.U3.NIX_GH_IMPORT_USED,{action:le.D.ConfigDone,interpUsed:!o,isCompiled:""!==r,runChanged:c,compileChanged:s,projType:p,replId:n}),h=function(e,t,n,r){var i=[];return r?(i.push((0,se.xz)("interpreter")),i.push((0,se.xz)("entrypoint")),i.push((0,se.KQ)(e)),n?i.push((0,se.D3)(n)):i.push((0,se.xz)("compile"))):(i.push((0,se.xz)("run")),i.push((0,se.If)(t))),i}(t,i,r,o),v=f({variables:{input:{id:n}}}),[4,d.updateDotReplit(h)];case 1:return l.sent(),u.flush().then((function(){u.persist({skipDebounce:!0})})),[4,v];case 2:return l.sent(),a(),[2]}}))}));return function(t){return e.apply(this,arguments)}}();return v&&m?(null===m||void 0===m?void 0:m.error)?(0,c.tZ)(he,{children:(0,c.tZ)(me,{})}):(0,c.tZ)(he,{children:(0,c.tZ)(ve,{initialLanguage:"",initialRun:I,initialCompile:O,hasInterpreter:z,fs:u,hasProcfile:b,isApplyingConfig:k,setIsApplyingConfig:_,onSubmit:K,isFrameworkRecommended:F,projType:W,closeConfigPane:e.closeConfigPane})}):(0,c.tZ)(he,{children:(0,c.tZ)(ge,{})})}},34856:function(e,t,n){n.d(t,{O:function(){return r}});var r,i=n(44747),o=n(35944),a=n(59641);!function(e){e.SUCCESS="SUCCESS",e.WARNING="WARNING",e.FAILED="FAILED",e.OFF="OFF"}(r||(r={}));var l=(0,a.Xb)({root:[a.l0.rowWithGap(8),a.l0.align.center,a.l0.py(4)],circle:[a.l0.width(8),a.l0.height(8),a.l0.borderRadius("full")]});t.Z=function(e){var t,n,c=e.display,s=void 0===c?"inline":c,u=(0,i.Z)(e,["display"]);switch(u.status){case r.SUCCESS:t=a.TV.accentPositiveStronger,n=a.TV.accentPositiveStronger;break;case r.WARNING:t=a.TV.yellowStronger,n=a.TV.yellowStronger;break;case r.FAILED:t=a.TV.accentNegativeStronger,n=a.TV.accentNegativeStronger;break;case r.OFF:t=a.TV.greyStronger,n=a.TV.greyStronger}var d=(0,o.BX)(a.G7,{css:l.root,children:[(0,o.tZ)("div",{css:l.circle,style:{backgroundColor:t,boxShadow:"0px 0px 6px ".concat(n)}}),"inline"===s?(0,o.tZ)(a.xv,{color:"dimmer",children:u.content}):null]});return"tooltip"===s&&(d=(0,o.tZ)(a.u,{tooltip:u.content,children:d})),d}},58979:function(e,t,n){n.d(t,{Z:function(){return D}});var r=n(34727),i=n(14251),o=n(52875),a=n(9941),l=n(69779),c=n(70655),s=n(35944),u=n(67294),d=n(91296),f=n.n(d),p=n(85861),h=n(32692),v=n(31230),m=n(37887);function g(){var e=(0,h.Z)(["\n  query WorkspaceDrawCurrentUser {\n    currentUser {\n      id\n      username\n    }\n  }\n"]);return g=function(){return e},e}function y(){var e=(0,h.Z)(["\n  mutation sawDrawCtaToursSeen($name: String!) {\n    toursSeen(name: $name) {\n      name\n      success\n    }\n  }\n"]);return y=function(){return e},e}var Z={},b=(0,v.Ps)(g());y();var w=n(58502),x=n(86601),E=n(93449),C=function(e,t,n){var r;if(!e)return[];var i=t(e.getSceneElementsIncludingDeleted()),o=e.getAppState();return(r=n.reduce((function(e,t){var n,r,a;return t.id===(null===(n=o.editingElement)||void 0===n?void 0:n.id)||t.id===(null===(r=o.resizingElement)||void 0===r?void 0:r.id)||t.id===(null===(a=o.draggingElement)||void 0===a?void 0:a.id)||(i[t.id]&&i[t.id].version>t.version?(e.push(i[t.id]),delete i[t.id]):i[t.id]&&i[t.id].version===t.version&&i[t.id].versionNonce!==t.versionNonce?(i[t.id].versionNonce<t.versionNonce?e.push(i[t.id]):e.push(t),delete i[t.id]):(e.push(t),delete i[t.id])),e}),[])).concat.apply(r,(0,l.Z)(Object.values(i)))},S=function(){var e,t,n=new Promise((function(n,r){e=n,t=r}));return n.resolve=e,n.reject=t,n},T=n(69346),k=function(e){return e.reduce((function(e,t){return e[t.id]=t,e}),{})},_=n(81255);function R(e){var t,d=e.fs,h=e.presence,v=e.broadcast,g=e.filePath,y=(0,u.useState)(void 0),R=y[0],D=y[1],I=(0,u.useRef)((function(e){return(0,l.Z)(e)})),P=(0,u.useRef)((function(e){return-1})),G=(0,u.useRef)({readyPromise:S()}),B=(0,u.useRef)({promise:null});(0,u.useEffect)((function(){Promise.all([n.e(2738),n.e(4474)]).then(n.t.bind(n,74474,23)).then((function(e){I.current=function(t){return t.filter((function(t){return t.isDeleted||!e.isInvisiblySmallElement(t)}))},P.current=e.getSceneVersion,D(e.Excalidraw)}))}),[]);var A=function(){return G.current},U=function(e){var t=(0,i.Z)({},Z,e);return m.a(b,t)}({ssr:!1}),O=U.data,N=U.loading,L=(null===O||void 0===O||null===(t=O.currentUser)||void 0===t?void 0:t.username)||"",F=(0,p.Fg)().isDarkColorScheme,X=(0,w.Z)({presence:h}),M=(0,x.Z)(),W=null===M||void 0===M?void 0:M.color,j=(0,u.useState)(new Map),H=j[0],z=j[1],V=(0,u.useState)(-1),q=V[0],K=V[1];(0,u.useEffect)((function(){function e(){return e=(0,r.Z)((function(){var e,t;return(0,c.__generator)(this,(function(n){switch(n.label){case 0:return O&&O.currentUser?[4,G.current.readyPromise]:[2];case 1:return n.sent(),e=A().getAppState().collaborators,t=new Map,X.forEach((function(n){var r;if(n.username!==(null===O||void 0===O||null===(r=O.currentUser)||void 0===r?void 0:r.username)){var a=e.get(n.username)||{};t.set(n.username,(0,o.Z)((0,i.Z)({},a),{username:n.username,color:{background:n.color,foreground:n.color}}))}})),A().updateScene({collaborators:t}),[2]}}))})),e.apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[O,X]);var $=function(){var e=(0,r.Z)((function(e,t){var n,r,i,o,a,l;return(0,c.__generator)(this,(function(c){t||(e=e.filter((function(e){return!H.has(e.id)||e.version>H.get(e.id)}))),n=!0,r=!1,i=void 0;try{for(o=e[Symbol.iterator]();!(n=(a=o.next()).done);n=!0)l=a.value,H.set(l.id,l.version),z(new Map(H))}catch(s){r=!0,i=s}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return v.broadcastMessage({text:JSON.stringify({elements:e,path:g})}),[2]}))}));return function(t,n){return e.apply(this,arguments)}}();(0,u.useEffect)((function(){if(v){var e=v.onBroadcastReceived((function(e){var t=e.username,n=e.text,r=JSON.parse(n);if(r.path===g)if(r.collaborator&&G.current){var a=A().getAppState().collaborators;a.set(t,(0,o.Z)((0,i.Z)({},a.get(t),r.collaborator),{username:t})),A().updateScene({collaborators:a})}else if(r.elements){var l=C(A(),k,r.elements);K(P.current(l)),A().updateScene({elements:l})}}));return function(){e()}}}),[v,g]),(0,u.useEffect)((function(){function e(){return e=(0,r.Z)((function(){return(0,c.__generator)(this,(function(e){return g&&d?(B.current.promise=new Promise(function(){var e=(0,r.Z)((function(e){var t,n,r,o,l;return(0,c.__generator)(this,(function(c){switch(c.label){case 0:return[4,Promise.all([d.readFile(g),G.current.readyPromise])];case 1:return t=a.Z.apply(void 0,[c.sent(),1]),"content"in(n=t[0])&&(r=n.content.toString(),o=JSON.parse(r||"{}"),l=A().getAppState(),o.appState=(0,i.Z)({},l),o.scrollToContent=!0,e(o)),[2]}}))}));return function(t){return e.apply(this,arguments)}}()),[2]):[2]}))})),e.apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[g,d]);var Y=(0,u.useCallback)(f()(function(){var e=(0,r.Z)((function(e,t){var n;return(0,c.__generator)(this,(function(r){switch(r.label){case 0:return n=e.filter((function(e){return!e.isDeleted})),g?[4,d.writeFile(g,E.Z.from(JSON.stringify({elements:n,files:t})))]:[3,2];case 1:r.sent(),r.label=2;case 2:return[2]}}))}));return function(t,n){return e.apply(this,arguments)}}(),350),[g]);return(0,s.tZ)(T.G,{css:{position:"relative",height:"100%",width:"100%",flex:1,boxShadow:W?"0 3px 0 3px ".concat(W):"none",backgroundColor:_.TV.backgroundDefault,"& .excalidraw [title~=Library]":{display:"none"}},children:R&&!N?(0,s.tZ)(R,{ref:G,UIOptions:{canvasActions:{loadScene:!1}},isCollaborating:!0,theme:F?"dark":"light",initialData:B.current.promise,onPointerUpdate:function(e){var t=e.pointer;if(A().getAppState().collaborators.size>0){var n=A().getAppState().selectedElementIds||{};v.broadcastMessage({text:JSON.stringify({collaborator:{pointer:t,selectedElementIds:n},path:g})})}},onChange:function(e,t,n){A().getAppState().collaborators.size>0?function(e){P.current(e)>q&&(q>-1&&$(I.current(e),!1),K(P.current(e)))}(e):K(P.current(e)),P.current(e)>q&&Y(e,n)},user:{name:L}}):null})}function D(e){var t=e.fs,n=e.presence,r=e.broadcast,i=e.filePath;return(0,s.tZ)(R,{fs:t,presence:n,broadcast:r,filePath:i},i)}},79985:function(e,t,n){n.d(t,{Z:function(){return ue}});var r=n(34727),i=n(14251),o=n(52875),a=n(44747),l=n(9941),c=n(70655),s=n(35944),u=n(67294),d=n(70917),f=n(89224),p=n(34296),h=n(6625),v=n(30019),m=n(64080),g=n(35642),y=n(19353),Z=n(15519),b=n(2916),w=n(19050),x=n(33773),E=n(32692),C=n(31230),S=n(37887),T=n(50319);function k(){var e=(0,E.Z)(['\n  query EnvEditor {\n    currentUser {\n      id\n      seenIntro: tourSeen(name: "enveditorintro")\n    }\n  }\n']);return k=function(){return e},e}function _(){var e=(0,E.Z)(['\n  mutation EnvEditorIntroSeen {\n    toursSeen(name: "enveditorintro") {\n      success\n    }\n  }\n']);return _=function(){return e},e}var R={},D=(0,C.Ps)(k());var I=(0,C.Ps)(_());var P,G=n(60977),B=n(91513),A=n(73604),U=n(59641),O=n(64487),N=n(10982),L=n(70806),F=n(28519),X=G.U3.ENV_EDITOR_USED;function M(e){var t=e.secrets,n=e.update,i=(0,u.useState)(!1),o=i[0],a=i[1],l=(0,u.useState)(!1),d=l[0],f=l[1],p=(0,u.useState)(!1),h=p[0],v=p[1],m=(0,u.useState)(0),g=m[0],y=m[1],Z=0===g,b=(0,u.useRef)();b.current||(b.current=(0,F.ir)((function(e){var t=W(e.state.doc.toString());return y(t),0!==t?(0,G.j)(X,{action:"rawEditorUpdatedError"}):(0,G.j)(X,{action:"rawEditorUpdated"}),[]})));var w=(0,L.Z)({readOnly:d||h,hideGutter:!0,language:"json",extensions:[b.current]}),x=w.view,E=w.ref,C=function(){d||a(!1)},S=function(){var e=(0,r.Z)((function(){var e,t;return(0,c.__generator)(this,(function(r){switch(r.label){case 0:if(!x)return[2];if(!function(){if(!x)return!1;var e=W(x.state.doc.toString());return y(e),0===e}())return[2];f(!0),r.label=1;case 1:return r.trys.push([1,3,,4]),e=JSON.parse(x.state.doc.toString()),[4,n(e)];case 2:return r.sent(),f(!1),v(!0),setTimeout((function(){C(),setTimeout((function(){v(!1)}),500)}),500),[3,4];case 3:return t=r.sent(),O.Tb(t),(0,G.j)(X,{action:"rawEditorUpdatedError"}),y(3),f(!1),[3,4];case 4:return[2]}}))}));return function(){return e.apply(this,arguments)}}();return(0,u.useEffect)((function(){if(x){var e=JSON.stringify(t,null,2);"{}"===e&&(e="{\n  \n}"),x.dispatch({changes:{from:0,to:x.state.doc.length,insert:e}}),x.dispatch({selection:{anchor:x.state.doc.length-2}}),x.focus()}}),[x,t]),(0,s.BX)(U.G7,{css:[U.l0.colWithGap(8)],children:[(0,s.tZ)(U.xv,{variant:"subheadDefault",children:"Edit raw JSON (advanced)"}),(0,s.tZ)(U.zx,{onClick:function(){return v(!1),a(!0),void(0,G.j)(X,{action:"rawEditorOpened"})},text:"Open raw editor"}),(0,s.tZ)(U.u_,{isOpen:o,onRequestClose:function(){return C()},children:(0,s.BX)(U.G7,{css:[U.l0.p(4),U.l0.colWithGap(8)],children:[(0,s.tZ)(U.h4,{level:2,children:"Raw Secrets Editor"}),(0,s.tZ)(U.xv,{multiline:!0,children:"Secrets are specified in JSON. Values must be strings."}),(0,s.tZ)(U.Tg,{css:[U.l0.borderRadius(4),U.l0.p(4)],elevated:!0,children:(0,s.tZ)("div",{ref:E})}),(0,s.BX)(U.G7,{css:[U.l0.rowWithGap(4),U.l0.justify.end],children:[!Z&&(0,s.tZ)(U.E_,{icon:(0,s.tZ)(N.Exclamation,{}),colorway:"negative",text:j(g)}),(0,s.tZ)(U.zx,{iconLeft:(0,s.tZ)(N.Check,{}),big:!0,stretch:!0,colorway:h?"positive":"primary",text:h?"Saved!":"Save",disabled:!Z||d||h,onClick:function(){return S()}})]})]})})]})}function W(e){try{var t=JSON.parse(e);for(var n in t){if("string"!==typeof n)return 2;if("string"!==typeof t[n])return 2}return 0}catch(r){return 1}}function j(e){switch(e){case 1:return"Make sure the data is valid JSON.";case 2:return"Make sure that all values are strings.";case 3:return"There was an error saving the secrets.";default:return""}}!function(e){e[e.VALID=0]="VALID",e[e.ERROR_PARSE=1]="ERROR_PARSE",e[e.ERROR_STRINGS=2]="ERROR_STRINGS",e[e.ERROR_SAVE=3]="ERROR_SAVE"}(P||(P={}));var H=n(77365),z=n(46241),V=n(37424),q=n(1855),K=n(16449),$=n(8941);function Y(e){return function(t){t.stopPropagation(),e(t)}}function Q(e,t){return e?e.trim()?t.includes(e)?"You already have a secret with this key":null:"The key must include a non-space character":"Please add a key for this secret"}function J(e){return e?null:"Please add a value for this secret"}var ee,te=(0,d.iv)([U.l0.height(U.TV.space32),{resize:"none"}]);function ne(e){var t=e.secret,n=e.otherKeys,r=e.onUpdateKey,i=e.onUpdateValue,o=e.onSave,a=e.onCancel,c=e.onDelete,d=(0,l.Z)(u.useState(),2),f=d[0],p=d[1],h=(0,l.Z)(u.useState(),2),v=h[0],m=h[1],g=u.useRef(null),y=u.useRef(null),Z=function(){var e=Q(t.key,n);if(e)return p(e),void(g.current&&g.current.focus());var r=J(t.value);if(r)return m(r),void(y.current&&y.current.focus());o()};u.useEffect((function(){f&&(Q(t.key,n)||p(null))}),[t.key,f,n]),u.useEffect((function(){v&&(J(t.value)||m(null))}),[t.value,v]);var b=Y((function(e){"Enter"!==e.key||e.shiftKey||(e.preventDefault(),Z())})),w=(0,V.H)(),x=w("key"),E=w("value"),C=(0,K.Z)().ref;return(0,s.BX)(U.Tg,{elevated:!0,css:[U.l0.p(16),U.l0.borderRadius(8),U.l0.colWithGap(16)],children:[(0,s.tZ)(re,{id:x,label:"key",error:f,children:(0,s.tZ)(U.II,{id:x,autoFocus:!0,ref:g,name:"key",value:t.key,spellCheck:!1,onChange:function(e){r(e.currentTarget.value)},onKeyDown:b})}),(0,s.tZ)(re,{id:E,label:"value",error:v,children:(0,s.tZ)(U.B,{css:te,id:E,ref:(0,q.l)(C,y),name:"value",value:t.value,spellCheck:!1,onChange:function(e){i(e.currentTarget.value)},onKeyDown:b})}),(0,s.BX)(U.G7,{css:[U.l0.rowWithGap(8),U.l0.justify.spaceBetween],children:[c?(0,s.tZ)(U.zx,{onClick:Y(c),colorway:"negative",text:"Delete"}):null,(0,s.BX)(U.G7,{css:U.l0.rowWithGap(8),children:[a?(0,s.tZ)(U.zx,{onClick:Y(a),text:"Cancel"}):null,(0,s.tZ)(U.zx,{colorway:"primary",onClick:Y(Z),text:c?"Save":"Add new secret"})]})]})]})}function re(e){return(0,s.BX)(U.G7,{css:[U.l0.colWithGap(4)],children:[(0,s.tZ)("label",{htmlFor:e.id,children:(0,s.tZ)(U.xv,{variant:"small",color:"dimmer",children:e.label})}),e.children,e.error?(0,s.BX)(U.G7,{css:[U.l0.rowWithGap(2),U.l0.align.center],children:[(0,s.tZ)(z.Z,{}),(0,s.tZ)(U.xv,{variant:"small",css:U.l0.color.accentNegativeStrongest,children:e.error})]}):null]})}function ie(e){var t=e.onAdd,n=e.otherKeys,r=(0,l.Z)(u.useState({key:"",value:""}),2),a=r[0],c=r[1];return(0,s.tZ)(ne,{secret:a,otherKeys:n,onUpdateKey:function(e){return c((function(t){return t?(0,o.Z)((0,i.Z)({},t),{key:e}):t}))},onUpdateValue:function(e){return c((function(t){return t?(0,o.Z)((0,i.Z)({},t),{value:e}):t}))},onSave:function(){c({key:"",value:""}),a.value&&a.key&&t(a)}})}function oe(e){var t=e.secret,n=e.otherKeys,r=e.onUpdateSecret,a=e.onDeleteSecret,c=(0,l.Z)(u.useState(null),2),d=c[0],f=c[1];return d?(0,s.tZ)(ne,{secret:d,otherKeys:n,onUpdateKey:function(e){return f((function(t){return t?(0,o.Z)((0,i.Z)({},t),{key:e}):t}))},onUpdateValue:function(e){return f((function(t){return t?(0,o.Z)((0,i.Z)({},t),{value:e}):t}))},onSave:function(){f(null),d.value&&d.key&&(d.value===t.value&&d.key===t.key||r(t.key,d))},onCancel:function(){return f(null)},onDelete:function(){return a(t.key)}}):(0,s.BX)(U.G7,{tag:"button",css:[U.gU.filled,U.l0.p(8),U.l0.rowWithGap(8),U.l0.align.center,U.l0.justify.spaceBetween,U.l0.borderRadius(8)],onClick:function(){f((0,i.Z)({},t))},children:[(0,s.BX)(U.G7,{css:[U.l0.rowWithGap(8),U.l0.align.center],children:[(0,s.tZ)(y.Z,{size:24}),(0,s.tZ)(U.xv,{children:t.key})]}),(0,s.tZ)(m.Z,{})]})}function ae(e){var t=e.secrets,n=e.onUpdateSecret,r=e.onDeleteSecret;return(0,s.tZ)(U.G7,{css:U.l0.colWithGap(8),children:Object.keys(t).sort().map((function(e){return(0,s.tZ)(oe,{otherKeys:Object.keys(t).filter((function(t){return t!==e})),secret:{key:e,value:t[e]},onUpdateSecret:n,onDeleteSecret:r},e)}))})}function le(e){var t=e.secrets,n=e.language,r=e.activeFile,c=e.onInsertDone,d=(0,l.Z)(u.useState(Object.keys(t)[0]),2),f=d[0],p=d[1],h=(0,B.Z)(r),v=function(e,t){if(!e)return null;switch((0,A.r6)(e)){case"js":case"ts":case"jsx":case"tsx":return{import:null,access:"const mySecret = process.env['".concat(t,"']")};case"py":return{import:"import os",access:"my_secret = os.environ['".concat(t,"']")};case"go":return{import:'import "os"',access:'mySecret := os.Getenv("'.concat(t,'")')};case"java":case"scala":return{import:null,access:'System.getenv("'.concat(t,'")')};case"rb":return{import:null,access:'ENV["'.concat(t,'"]')};case"c":case"cpp":return{import:"#include <stdlib.h>",access:'char* mySecret = getenv("'.concat(t,'")')};case"cs":return{import:"using System;",access:'string mySecret = System.Environment.GetEnvironmentVariable("'.concat(t,'");')};case"sh":return{import:null,access:'"$'.concat(t,'"')};default:return null}}(r,f);return v&&h?(0,s.BX)(U.G7,{css:U.l0.colWithGap(16),children:[v.import?(0,s.BX)(U.G7,{css:U.l0.colWithGap(8),children:[(0,s.tZ)(U.xv,{multiline:!0,children:"Secrets will be available in your Repl as environment variables when you run and when you use the shell"}),(0,s.tZ)(U.xv,{variant:"subheadDefault",children:"1. Add the imports"}),(0,s.tZ)(U.Tg,{tag:"pre",elevated:!0,css:[U.l0.borderRadius(8),U.l0.p(8)],children:(0,s.tZ)(U.xv,{css:U.l0.font.code,children:v.access})}),(0,s.tZ)(U.zx,{onClick:function(){h({code:v.import,insertAt:0}),(0,G.j)(G.U3.ENV_EDITOR_USED,{action:"insert"})},text:"Insert",iconRight:(0,s.tZ)($.Z,{})})]}):null,(0,s.BX)(U.G7,{css:U.l0.colWithGap(8),children:[(0,s.BX)(U.xv,{variant:"subheadDefault",children:[v.import?"2. ":"","Access the secret by key as an environment variable"]}),(0,s.tZ)(w.Z,{respectMaxWidth:!0,items:Object.keys(t),onClick:function(e){p(e)},renderAnchorComponent:function(e){var t=e.innerRef,n=(0,a.Z)(e,["innerRef"]);return(0,s.tZ)(U.zx,(0,o.Z)((0,i.Z)({ref:t},n),{filled:!1,iconOnRight:!0,text:f,iconRight:(0,s.tZ)(x.Z,{})}))},renderItemChildComponent:function(e){return(0,s.tZ)(U.xv,{children:e})}}),(0,s.tZ)(U.Tg,{tag:"pre",elevated:!0,css:[U.l0.borderRadius(8),U.l0.p(8)],children:(0,s.tZ)(U.xv,{css:U.l0.font.code,children:v.access})}),(0,s.tZ)(U.G7,{css:U.l0.flex.row,children:(0,s.tZ)(U.zx,{outlined:!0,onClick:function(){h({code:v.access}),c&&c(),(0,G.j)(G.U3.ENV_EDITOR_USED,{action:"insert"})},text:"Insert",iconRight:(0,s.tZ)($.Z,{})})})]})]}):(0,s.BX)(U.G7,{css:U.l0.colWithGap(8),children:[(0,s.tZ)(U.xv,{multiline:!0,children:"Secrets will be available in your Repl as environment variables when you run and when you use the shell"}),h?null:(0,s.BX)(U.xv,{multiline:!0,children:["Select a $",Z.Z.get(n).displayName," file to enable code inserter"]})]})}function ce(e){var t=e.language,n=e.secrets,r=e.activeFile,i=e.onAdd,o=e.onIntroDone,a=(0,l.Z)(u.useState(ee.What),2),c=a[0],d=a[1];return c===ee.What?(0,s.BX)(U.G7,{css:U.l0.colWithGap(8),children:[(0,s.tZ)(U.xv,{variant:"subheadDefault",children:"What\u2019s this?"}),(0,s.tZ)(U.xv,{multiline:!0,children:"Using this feature will allow you to hide secret information like passwords while still being able to use them in the Repl"}),(0,s.tZ)(U.zx,{onClick:function(){return d(ee.Add)},text:"Got it",css:[{alignSelf:"baseline"}],outlined:!0})]}):c===ee.Add?(0,s.BX)(U.G7,{css:U.l0.colWithGap(16),children:[(0,s.BX)(U.G7,{css:U.l0.colWithGap(8),children:[(0,s.tZ)(v.Z,{level:5,children:"Add your first secret!"}),(0,s.tZ)(U.xv,{multiline:!0,color:"dimmer",children:'The "key" is what you will use in the code itself and will be visible to everyone'}),(0,s.tZ)(U.xv,{multiline:!0,color:"dimmer",children:'The "value" is where you put the private or secret text, hit shift+enter to add new lines'})]}),(0,s.tZ)(ie,{onAdd:function(e){i(e),d(ee.Use)},otherKeys:Object.keys(n)}),(0,s.tZ)(U.zx,{onClick:function(){var e=Object.keys(n).length>0?ee.Use:ee.End;d(e),(0,G.j)(G.U3.ENV_EDITOR_USED,{action:"intro_skipped",step:ee.Add})},text:"Skip this step"})]}):c===ee.Use?(0,s.BX)(U.G7,{css:U.l0.colWithGap(8),children:[(0,s.tZ)(v.Z,{level:5,children:"Now let\u2019s use it in the Repl."}),(0,s.tZ)(le,{secrets:n,language:t,onInsertDone:function(){return d(ee.End)},activeFile:r}),(0,s.tZ)(U.zx,{onClick:function(){d(ee.End),(0,G.j)(G.U3.ENV_EDITOR_USED,{action:"intro_skipped",step:ee.Use})},text:"Skip this step"})]}):(0,s.BX)(U.G7,{css:U.l0.colWithGap(8),children:[(0,s.tZ)(U.xv,{children:"You\u2019re all set. You can add as many secrets as you want, we promise to keep them safe."}),(0,s.BX)(U.xv,{children:["You can always"," ",(0,s.tZ)("a",{href:"https://docs.replit.com/programming-ide/storing-sensitive-information-environment-variables",target:"_blank",children:"visit our docs"})," ","for more information."]}),(0,s.tZ)(U.xv,{children:"Please note, that people you invite as multiplayer collaborators will have access to these secrets."}),(0,s.tZ)(U.zx,{onClick:o,text:"Got it"})]})}function se(e,t){var n=(0,i.Z)({},e);return"add"===t.type?n[t.key]=t.value:"update"===t.type?(delete n[t.oldKey],n[t.key]=t.value):delete n[t.key],n}function ue(e){var t,n=e.readRawEnv,a=e.writeRawEnv,d=e.activeFile,v=e.hideInserterAndIntro,m=(0,h.Z)(),y=(0,l.Z)(u.useState(null),2),Z=y[0],w=y[1],x=function(e){var t=(0,i.Z)({},R,e);return S.a(D,t)}(),E=x.data,C=x.loading,k=x.updateQuery,_=(0,l.Z)(function(e){var t=(0,i.Z)({},R,e);return T.D(I,t)}(),1)[0],P=(0,b.Z)();u.useEffect((function(){(0,G.Cn)(G.U3.ENV_EDITOR_USED,{action:"opened"}),g.Z.set("enveditortour",!0)}),[]),u.useEffect((function(){function e(){return(e=(0,r.Z)((function(){var e,t;return(0,c.__generator)(this,(function(r){switch(r.label){case 0:return[4,n()];case 1:if((e=r.sent()).error===f.Df.NotFound)return m.current&&w({}),[2];if(e.error)throw new Error("Error getting .env");return m.current?(t=p.Z.parse(e.content.toString()),w(t),[2]):[2]}}))}))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[n,w,m]);var B=u.useRef(null),A=u.useRef([]),O=function(){var e=(0,r.Z)((function(e){var t,r,i,o,l;return(0,c.__generator)(this,(function(c){switch(c.label){case 0:if(!Z)throw new Error("trying to write secrets before loading");return t=se(Z,e),w(t),A.current.push(e),r=Math.random(),B.current=r,[4,n()];case 1:return o=c.sent(),B.current!==r?[2]:(o.error?i=t:(i=p.Z.parse(o.content.toString()),A.current.forEach((function(e){i=se(i,e)})),w(i)),A.current=[],l=p.Z.serialize(i),[4,a(l)]);case 2:return c.sent(),[2]}}))}));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=(0,r.Z)((function(e){return(0,c.__generator)(this,(function(t){return(0,G.j)(G.U3.ENV_EDITOR_USED,{action:"created",multiline:e.value.includes("\n")}),O((0,i.Z)({type:"add"},e)),[2]}))}));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=(0,r.Z)((function(e,t){return(0,c.__generator)(this,(function(n){return(0,G.j)(G.U3.ENV_EDITOR_USED,{action:"updated",multiline:t.value.includes("\n")}),O((0,i.Z)({type:"update",oldKey:e},t)),[2]}))}));return function(t,n){return e.apply(this,arguments)}}(),F=function(){var e=(0,r.Z)((function(e){return(0,c.__generator)(this,(function(t){return(0,G.j)(G.U3.ENV_EDITOR_USED,{action:"deleted"}),O({type:"delete",key:e}),[2]}))}));return function(t){return e.apply(this,arguments)}}();if(C||!Z||!P)return(0,s.tZ)(U.G7,{css:[U.l0.center,U.l0.coverContainer],children:(0,s.tZ)(H.Z,{size:24})});if((null===E||void 0===E||null===(t=E.currentUser)||void 0===t?void 0:t.seenIntro)||v){var X=Object.keys(Z);return(0,s.BX)(U.G7,{css:U.l0.colWithGap(32),children:[(0,s.BX)(U.G7,{css:U.l0.colWithGap(16),children:[(0,s.tZ)(ae,{secrets:Z,onUpdateSecret:L,onDeleteSecret:F}),(0,s.tZ)(ie,{onAdd:N,otherKeys:X})]}),X.length>0&&!v?(0,s.tZ)(le,{secrets:Z,language:P.language,activeFile:d}):null,(0,s.tZ)(M,{secrets:Z,update:function(){var e=(0,r.Z)((function(e){var t;return(0,c.__generator)(this,(function(n){switch(n.label){case 0:return w(e),t=p.Z.serialize(e),[4,a(t)];case 1:return n.sent(),[2]}}))}));return function(t){return e.apply(this,arguments)}}()})]})}return(0,s.tZ)(ce,{secrets:Z,onAdd:N,activeFile:d,language:P.language,onIntroDone:function(){_(),k((function(e){return e.currentUser?(0,o.Z)((0,i.Z)({},e),{currentUser:(0,o.Z)((0,i.Z)({},e.currentUser),{seenIntro:!0})}):e}))}})}!function(e){e.What="What",e.Add="Add",e.Use="Use",e.End="End"}(ee||(ee={}))},48930:function(e,t,n){n.d(t,{e:function(){return f},z:function(){return v}});var r=n(14251),i=n(52875),o=n(35944),a=n(67294),l=n(64663),c=n(27354),s=n(83952),u=n(70917),d=n(59641),f=(0,u.iv)([d.gU.nofill,{transitionProperty:"background-color, box-shadow, opacity",opacity:.8,":focus":{zIndex:1,opacity:1}}]),p={button:(0,u.iv)([d.l0.reset.button,d.l0.p(2),d.l0.rowWithGap(4),d.l0.align.center,f]),text:(0,u.iv)({fontSize:d.TV.fontSizeSmall})},h={opacity:1};function v(e){var t=e.icon,n=e.text,u=e.innerRef,f=e.ariaProps,v=e.active,m=(0,l.U)(f,u).buttonProps,g=(0,c.XI)({}),y=g.hoverProps,Z=g.isHovered;return(0,o.BX)(d.G7,(0,i.Z)((0,r.Z)({tag:"button",css:p.button,style:Z||v?h:void 0,innerRef:u},(0,s.dG)(m,y)),{children:[t?(0,a.cloneElement)(t,{size:16}):null,(0,o.tZ)(d.G7,{css:p.text,children:n})]}))}},31725:function(e,t,n){n.d(t,{Y:function(){return g},v:function(){return m}});var r=n(14251),i=n(52875),o=n(69779),a=n(35944),l=n(67294),c=n(70917),s=n(30017),u=n(52865),d=n(59641),f=n(27354),p=n(83952),h=n(48930),v=(0,c.iv)([d.l0.p(4)]);function m(e){var t=e.items,n=e.children,c=e.menuProps,f=e.selectedKeys,p=e.onAction,h=(0,u.D)({items:t,children:n,selectedKeys:f,selectionMode:"single"}),m=(0,l.useRef)(null),g=(0,s.H9)((0,r.Z)({items:t,onAction:p},c),h,m);return(0,a.tZ)(d.G7,(0,i.Z)((0,r.Z)({},g.menuProps),{innerRef:m,css:v,children:(0,o.Z)(h.collection).map((function(e){return(0,a.tZ)(Z,{item:e,state:h},e.key)}))}))}var g={root:(0,c.iv)([d.l0.flex.row,d.l0.align.center,d.l0.position.relative,h.e]),selected:(0,c.iv)([{opacity:1,backgroundColor:d.vb.interactiveBackground}])},y={opacity:1};function Z(e){var t=e.item,n=e.state,o=(0,l.useRef)(null),c=(0,s.iX)({key:t.key},n,o),u=c.menuItemProps,h=c.isSelected,v=(0,f.XI)({}),m=v.hoverProps,Z=v.isHovered;return(0,a.tZ)(d.G7,(0,i.Z)((0,r.Z)({innerRef:o,css:[g.root,h&&g.selected],style:Z||h?y:void 0},(0,p.dG)(u,m)),{children:t.rendered}))}},65765:function(e,t,n){n.d(t,{J:function(){return f}});var r=n(14251),i=n(52875),o=n(9941),a=n(35944),l=n(59641),c=n(68948),s=n(4789),u=n(70917),d={underlay:(0,u.iv)([l.l0.coverContainer,l.l0.position.fixed]),surface:(0,u.iv)([l.l0.borderRadius(8),{boxShadow:l.TV.shadow2,border:"1px solid",borderColor:l.TV.backgroundHighest}])};function f(e){var t=e.state,n=e.triggerRef,u=e.placement,f=e.children,p=(0,o.Z)((0,s.Z)(),2),h=p[0],v=p[1],m=(0,c.Sv)({placement:u,triggerRef:n,popoverRef:h,offset:8},t),g=m.popoverProps,y=m.underlayProps;return(0,a.BX)(c.aV,{children:[(0,a.tZ)(l.G7,(0,i.Z)((0,r.Z)({},y),{css:d.underlay})),(0,a.BX)(l.Tg,(0,i.Z)((0,r.Z)({elevated:!0,css:d.surface,innerRef:v},g),{children:[(0,a.tZ)(c.U4,{onDismiss:t.close}),f,(0,a.tZ)(c.U4,{onDismiss:t.close})]}))]})}},35700:function(e,t,n){n.d(t,{t:function(){return ne}});var r=n(35944),i=n(67294),o=n(89224),a=n(59641),l=n(70917),c=n(3401),s=n(63736),u=n(73604),d=n(14251),f=n(52875),p=n(69779),h=n(52456),v=n(17694),m=n(30017),g=n(77365),y=n(7182),Z=n(21131),b=n(27709),w=n(15165),x=n(83569),E=n(83043),C=n(12365),S=n(99408),T=n(57353),k=n(78332);var _=n(52865),R=n(83952),D=function(e){return e===x.Ql?0:e.split("/").length};function I(){var e=function(e){var t=e.openFile,n=e.activeFile,r=e.watchDir,i=(0,T.T)(!0),o=(0,k.y)();return(0,Z.Z)((function(){return{flags:{flagFiletreeMultiselect:!1},activeFile:n,watchDir:r,openFile:t,shouldHideFile:i,sortNode:o,onError:function(){},onAction:function(){}}}),[n,t,i,o,r])}({openFile:function(){},watchDir:(0,S.Z)().fs.watchDir,activeFile:""});(0,C.S)(e),(0,E.Yc)()}function P(e){I();var t=e.rootPath,n=e.children,r=e.activeFile,a=e.openFile,l=function(e){var t=e.rootPath,n=D(t),r=(0,b.h6)(t),i=[],o=!0,a=!1,l=void 0;try{for(var c,s=r[Symbol.iterator]();!(o=(c=s.next()).done);o=!0){var u=c.value,d=D(u.path);d<=n||i.push({node:u,depth:d-n-1})}}catch(f){a=!0,l=f}finally{try{o||null==s.return||s.return()}finally{if(a)throw l}}return i}({rootPath:t}),c=(0,_.D)({items:l,children:n,selectedKeys:new Set([r]),selectionMode:"single"}),s=(0,i.useRef)(null),u=(0,m.H9)((0,d.Z)({items:l,onAction:function(e){var t=c.collection.getItem(e).value.node;t.type!==o.Tv.File?c.toggleKey(e):a(t.path)}},e.menuProps),c,s),f=(0,E.Ol)();(0,i.useEffect)((function(){f(t)}),[f,t]);var p=(0,v.Z)({path:t,initialExpanded:!0}),h=p.loading;(0,i.useEffect)((function(){var e;h||null===(e=s.current)||void 0===e||e.focus()}),[h]);var g=(0,R.dG)(u.menuProps,{onKeyDown:function(e){var t=c.selectionManager.focusedKey,n=c.collection.getItem(t);if(n&&n.value.node.type===o.Tv.Directory){var r=c.expandedKeys.has(t);switch(e.key){case"ArrowRight":r||c.toggleKey(t);break;case"ArrowLeft":r&&c.toggleKey(t)}}}});return{ref:s,state:c,loading:p.loading,menuProps:g}}var G=n(31725),B=(0,l.iv)([a.l0.p(4),a.l0.maxHeight(400),a.l0.minWidth(100),{overflowY:"auto"}]);function A(e){var t=P(e),n=t.state,i=t.loading,l=t.ref,c=t.menuProps;return(0,r.BX)(r.HY,{children:[(0,r.tZ)(a.G7,(0,f.Z)((0,d.Z)({innerRef:l,css:B},c),{children:(0,p.Z)(n.collection).map((function(e){return e.value.node.type===o.Tv.Directory?(0,r.tZ)(j,{item:e,state:n},e.key):(0,r.tZ)(X,{item:e,state:n},e.key)}))})),i?(0,r.tZ)(O,{}):null]})}var U=(0,l.iv)([a.l0.p(4),a.l0.height(32),a.l0.center]);function O(){return(0,r.tZ)(a.G7,{css:U,children:(0,r.tZ)(g.Z,{})})}var N={root:(0,l.iv)([a.l0.height(32),G.Y.root]),selected:G.Y.selected};function L(e){return(0,r.tZ)(a.G7,(0,f.Z)((0,d.Z)({innerRef:e.innerRef,css:[N.root,e.isSelected&&N.selected],style:{marginLeft:16*e.depth}},e.menuItemProps),{children:e.children}))}function F(e){var t=e.item,n=e.state,r=t.value,a=r.node,l=r.depth,c=(0,i.useRef)(null),s=(0,m.iX)({key:t.key,closeOnSelect:a.type===o.Tv.File},n,c);return{ref:c,menuItemProps:s.menuItemProps,depth:l,isFocused:s.isFocused,isSelected:s.isSelected}}function X(e){var t=F(e);return(0,r.tZ)(L,{depth:t.depth,innerRef:t.ref,menuItemProps:t.menuItemProps,isFocused:t.isFocused,isSelected:t.isSelected,children:e.item.rendered})}var M={root:[a.l0.align.center,a.l0.width(16),a.l0.cursor.pointer,a.l0.position.absolute,a.l0.top("100%"),a.l0.left(0),{"&:hover > div":{backgroundColor:a.TV.accentPrimaryDefault,opacity:1}}],bar:(0,l.iv)([a.l0.height("100%"),a.l0.width(1),{opacity:.2,backgroundColor:a.TV.foregroundDimmest}])};function W(e){var t=function(e){var t=(0,b.ZC)(e),n=(0,Z.Z)((function(){return(0,y.cn)((function(n){var r=n(t),i=0,o=e+"/";if(e===x.Ql)return r.length;var a=!0,l=!1,c=void 0;try{for(var s,u=r[Symbol.iterator]();!(a=(s=u.next()).done);a=!0)s.value.path.startsWith(o)&&i++}catch(d){l=!0,c=d}finally{try{a||null==u.return||u.return()}finally{if(l)throw c}}return i}))}),[e,t]);return(0,y.Dv)(n,w.l)}(e.path);return(0,r.tZ)(a.G7,{css:M.root,onClick:e.onClick,style:{height:32*t},children:(0,r.tZ)(a.G7,{css:M.bar})})}function j(e){var t=e.state,n=e.item,o=F({state:t,item:n}),a=t.expandedKeys.has(n.key),l=n.value.node.path,c=(0,v.Z)({path:l,initialExpanded:a}),s=(0,E.Ol)();(0,i.useEffect)((function(){s(l)}),[s,l]);var u=c.expand,d=c.collapse;return(0,i.useEffect)((function(){a?u():d()}),[a,u,d]),(0,r.BX)(L,{depth:o.depth,innerRef:o.ref,menuItemProps:o.menuItemProps,isFocused:o.isFocused,isSelected:o.isSelected,children:[c.expanded?(0,r.tZ)(W,{path:l,onClick:function(){return t.toggleKey(n.key)}}):null,(0,i.cloneElement)(n.rendered,{expanded:a,loading:c.loading})]})}var H={root:(0,l.iv)([a.l0.p(4),a.l0.height("100%"),a.l0.rowWithGap(4),a.l0.align.center,a.l0.flex.growAndShrink(1),a.l0.color.foregroundDefault]),text:(0,l.iv)([a.l0.truncate,a.l0.flex.growAndShrink(1),{fontSize:a.TV.fontSizeDefault}])};function z(e){var t=e.path,n=e.expanded,i=e.loading,o=(0,u.UO)(t);return(0,r.BX)(a.G7,{css:H.root,children:[n?(0,r.tZ)(h.Z,{}):(0,r.tZ)(c.Z,{}),(0,r.tZ)(a.G7,{css:H.text,children:o}),i?(0,r.tZ)(g.Z,{}):null]})}function V(e){var t=e.path,n=(0,u.UO)(t);return(0,r.BX)(a.G7,{css:H.root,children:[(0,r.tZ)(s.Z,{path:t,size:16}),(0,r.tZ)(a.G7,{css:H.text,children:n})]})}var q=n(95028),K=n(48930),$=n(65765),Y=n(8941);function Q(e){return CSS.escape(e.path)}function J(e){var t=e.node;return t.type===o.Tv.Directory?(0,r.tZ)(c.Z,{size:16}):(0,r.tZ)(s.Z,{size:16,path:t.path})}function ee(e){var t=e.node,n=e.openFile,l=(0,q.W)({closeOnSelect:!1}),c=(0,i.useRef)(null),s=(0,m.u4)({},l,c),d=s.menuTriggerProps,f=s.menuProps,p=(0,u.Il)(t.path)||".",h=(0,u.UO)(t.path);return(0,r.BX)(r.HY,{children:[(0,r.tZ)(K.z,{text:h,icon:(0,r.tZ)(J,{node:t}),innerRef:c,ariaProps:d,active:l.isOpen}),l.isOpen?(0,r.tZ)($.J,{state:l,triggerRef:c,placement:"bottom start",children:(0,r.tZ)(C.D,{children:(0,r.tZ)(A,{rootPath:p,activeFile:t.path,openFile:n,menuProps:f,children:function(e){return(0,r.tZ)(a.ck,{children:e.node.type===o.Tv.Directory?(0,r.tZ)(z,{path:e.node.path}):(0,r.tZ)(V,{path:e.node.path})},Q(e.node))}})})}):null]})}var te=(0,l.iv)([a.l0.flex.row,a.l0.align.center,a.l0.height("100%"),a.l0.px(2)]),ne=(0,i.memo)((function(e){var t=e.path,n=e.onFileClick,l=e.children,c=function(e){var t=e.split("/"),n=t.length;return t.map((function(e,r){return{type:r===n-1?o.Tv.File:o.Tv.Directory,path:t.slice(0,r+1).join("/")}}))}(t);return(0,r.BX)(a.G7,{css:te,children:[c.map((function(e){return(0,r.BX)(i.Fragment,{children:[(0,r.tZ)(ee,{node:e,openFile:n}),e.type===o.Tv.Directory?(0,r.tZ)(Y.Z,{size:12}):null]},Q(e))})),l||null]})}))},29830:function(e,t,n){n.d(t,{$E:function(){return g},HK:function(){return y},Qc:function(){return h},VY:function(){return m},h4:function(){return f}});var r=n(35944),i=n(59641),o=n(70917),a=n(35700),l=n(67294),c=n(27178),s=n(11163),u=n.n(s),d=(0,o.iv)([i.l0.height(28),i.l0.flex.row,i.l0.align.center,{borderBottom:"1px solid ".concat(i.TV.backgroundHigher),opacity:.8,":hover":{opacity:1}}]);function f(e){return"/replEnvironmentDesktop"===u().pathname?(0,r.tZ)(i.G7,{css:d,children:e.children}):null}var p=(0,o.iv)([i.l0.flex.row,i.l0.align.center,i.l0.flex.growAndShrink(1),i.l0.overflowX("auto"),i.l0.height("100%"),{"&::-webkit-scrollbar":{height:0},scrollbarWidth:"none"}]);function h(e){return(0,r.tZ)(i.G7,{css:p,children:e.children})}var v=(0,o.iv)([i.l0.flex.growAndShrink(1),i.l0.position.relative]);function m(e){return(0,r.tZ)(i.G7,{css:[v,e.children&&i.l0.center],children:e.children})}function g(e){return{type:(0,c.Dp)({path:e}),data:{path:e}}}function y(e){var t=e.path,n=e.replacePane,i=(0,l.useCallback)((function(e){n(g(e))}),[n]);return(0,r.tZ)(f,{children:(0,r.tZ)(h,{children:(0,r.tZ)(a.t,{path:t,onFileClick:i})})})}},9211:function(e,t,n){n.d(t,{Q:function(){return o}});var r=n(35944),i=n(67294);function o(e){var t=e.uploadFiles,n=e.fileUploadInputRef,o=e.dirUploadInputRef,a=(0,i.useRef)(Math.random().toString(36));return(0,r.BX)(r.HY,{children:[(0,r.tZ)("input",{style:{display:"none"},ref:n,id:"file-upload-input-".concat(a.current),type:"file",onChange:function(e){var n=e.target.files;n&&t({files:Array.from(n)})},onClick:function(e){e.currentTarget.value=""},multiple:!0,accept:"*"}),(0,r.tZ)("input",{style:{display:"none"},ref:o,id:"dir-upload-input-".concat(a.current),type:"file",onChange:function(e){var n=e.target.files;n&&t({files:Array.from(n)})},onClick:function(e){e.currentTarget.value=""},webkitdirectory:"true",mozdirectory:"true",msdirectory:"true",odirectory:"true",directory:"true",accept:"*"})]})}},42231:function(e,t,n){n.d(t,{N:function(){return i},Z:function(){return o}});var r=n(67294);function i(){if("undefined"===typeof document)return!1;var e=document.createElement("input");return"webkitdirectory"in e||"mozdirectory"in e||"msdirectory"in e||"odirectory"in e||"directory"in e}function o(){return(0,r.useMemo)((function(){return i()}),[])}},94135:function(e,t,n){n.d(t,{z:function(){return f}});var r=n(63377),i=n(67294),o=n(14251),a=n(32692),l=n(31230),c=n(37887);function s(){var e=(0,a.Z)(["\n  query FiletreeDownloadZip($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        url\n      }\n    }\n  }\n"]);return s=function(){return e},e}var u={},d=(0,l.Ps)(s());function f(){var e=function(e){var t=(0,o.Z)({},u,e);return c.a(d,t)}({variables:{replId:(0,r.Z)()}}).data,t="Repl"===(null===e||void 0===e?void 0:e.repl.__typename)?e.repl:void 0,n=t?t.url:void 0;return(0,i.useCallback)((function(){var e=(n||window.location.pathname)+".zip";window.open(e,"_blank")}),[n])}},20841:function(e,t,n){n.d(t,{T:function(){return c}});var r=n(9941),i=n(67294),o=n(67034),a=n(6625),l=n(99408),c=function(){var e=(0,l.Z)().dotReplit,t=(0,a.Z)(),n=(0,r.Z)(i.useState(null),2),c=n[0],s=n[1];return i.useEffect((function(){return e.watch((function(e){var n;t.current&&(e.error?e.error===o.Yt.NotFound&&s(null):s(null!==(n=e.config.entrypoint)&&void 0!==n?n:null))}))}),[e]),c}},81815:function(e,t,n){n.d(t,{Z:function(){return Ee}});var r,i=n(34727),o=n(9941),a=n(70655),l=n(35944),c=n(67294),s=n(89224),u=n(83569),d=n(99408),f=n(30019),p=n(6292),h=n(92098),v=n(69779),m=n(93449),g=n(82378),y=n(32703);function Z(){return Z=(0,i.Z)((function(e){var t,n,o,l,c,s,u,d,f,p,h,Z;return(0,a.__generator)(this,(function(b){switch(b.label){case 0:return t=e.parentPath,n=e.overwrite,o=e.fs,l=e.files,c=e.shouldUseFileTransferAPI,s=e.onStart,u=e.onUpload,d=e.onError,f=e.onDone,p=function(){var e=(0,i.Z)((function(e){var t,i,l,s,f,p,h;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return t=e.targetPath,i=e.file,l=e.progress,n?[3,2]:[4,o.stat(t)];case 1:if(a.sent().exists)return s={file:i,path:t,error:r.AlreadyExists},d(s),[2,s];a.label=2;case 2:f=null,a.label=3;case 3:return a.trys.push([3,5,,6]),[4,(0,y.pV)(i)];case 4:return f=a.sent(),[3,6];case 5:return a.sent(),p={file:i,path:t,error:r.FileRead},d(p),[2,p];case 6:return h=m.Z.from(f),c?[4,o.transferFile(t,h,(function(e,t){l.current=t/e}))]:[3,8];case 7:return a.sent(),[3,10];case 8:return[4,o.writeFile(t,h)];case 9:a.sent(),a.label=10;case 10:return u({file:i,path:t}),[2,{path:t,file:i}]}}))}));return function(t){return e.apply(this,arguments)}}(),h=l.map((function(e){var n=e.path||e.webkitRelativePath||e.name;return{targetPath:t?t+"/"+n:n,progress:(0,g.u)(0),file:e}})),s(h),[4,Promise.all(h.map(p))];case 1:return Z=b.sent(),f({parentPath:t,uploads:Z.filter((function(e){return!("error"in e)})),errors:Z.reduce((function(e,t){return"error"in t?(0,v.Z)(e).concat([t]):e}),[])}),[2]}}))})),Z.apply(this,arguments)}function b(e){var t=e.fs,n=e.onDone,r=(0,o.Z)(c.useState([]),2),i=r[0],a=r[1],l=c.useRef(n);c.useEffect((function(){l.current=n}),[n]);var s=c.useCallback((function(e){var n=e.parentPath,r=e.files;!function(e){Z.apply(this,arguments)}({overwrite:e.overwrite,parentPath:n,files:r.filter(Boolean),fs:t,shouldUseFileTransferAPI:!0,onStart:function(e){return a((function(t){return(0,v.Z)(t).concat((0,v.Z)(e))}))},onUpload:function(e){a((function(t){return t.filter((function(t){return t.targetPath!==e.path}))}))},onError:function(e){a((function(t){return t.filter((function(t){return t.targetPath!==e.path}))}))},onDone:function(e){l.current&&l.current(e)}})}),[t,a]);return{uploadFiles:s,pendingUploads:i}}!function(e){e.AlreadyExists="ALREADY_EXIST",e.FileRead="FILE_READ",e.Network="NETWORK"}(r||(r={}));var w=n(69453),x=n(38935),E=n(25741),C=n(63377),S=n(46609),T=n(63805),k=n(15902),_=n(11163),R=n(73321),D=n(42231),I=n(9211);function P(e){var t=e.onDownloadZip,n=e.readOnly,r=void 0!==n&&n,i=(0,S.y)().uploadFiles,o=c.useRef(null),a=c.useRef(null),u=(0,E.Z)(),f=(0,R.BN)(),p=(0,C.Z)(),h=(0,d.Z)().session,v=(0,_.useRouter)(),m=c.useMemo((function(){if("undefined"===typeof document)return[];if(r)return[u?x.st.HideHiddenFiles:x.st.ShowHiddenFiles];var e=(0,D.N)(),t=[x.st.UploadFile];return(0,T.isMobile)()||t.push(x.st.OpenPane),e&&!(0,T.isMobile)({tablet:!1})&&t.push(x.st.UploadFolder),(0,k.Vg)(v)||t.push(x.st.DownloadZip),t.push(u?x.st.HideHiddenFiles:x.st.ShowHiddenFiles),t}),[u,r,v]);return(0,l.BX)(l.HY,{children:[(0,l.tZ)(I.Q,{fileUploadInputRef:o,dirUploadInputRef:a,uploadFiles:i}),(0,l.tZ)(x.ZP,{actions:m,onAction:function(e){switch(e.type){case x.st.OpenPane.type:return void f({pane:{type:"commands",data:{autoFocus:!0}},edge:"left"});case x.st.UploadFile.type:if(!o.current)return;return o.current.click(),void(0,w.Z)({replId:p,action:"uploaded",fileType:s.Tv.File});case x.st.UploadFolder.type:if(!a.current)return;return a.current.click(),void(0,w.Z)({replId:p,action:"uploaded",fileType:s.Tv.Directory});case x.st.DownloadZip.type:return t(),void(0,w.Z)({replId:p,action:"zipDownloaded"});case x.st.ShowHiddenFiles.type:return void h.setAreHiddenFilesVisible(!0);case x.st.HideHiddenFiles.type:h.setAreHiddenFilesVisible(!1)}}})]})}var G=n(92732),B=n(1879),A=n(73604),U=n(59641),O=n(10982);function N(e){var t,n=e.paths,r=e.onCancel,i=e.onConfirm;return(0,l.BX)(U.G7,{css:[U.l0.colWithGap(24)],children:[(0,l.tZ)(U.h4,{level:1,variant:"headerDefault",children:n.length>1?"Overwrite files?":"Overwrite file?"}),(0,l.BX)(U.xv,{multiline:!0,children:[(t=n,(t=t.map(A.UO)).length<2?t[0]:"".concat(t.slice(0,-1).join(", ")," and ").concat(t.slice(-1)))," already"," ",n.length>1?"exist":"exists"," in the destination, are you sure you want to overwrite ",n.length>1?"them":"it","? This cannot be undone."]}),(0,l.BX)(U.G7,{css:[U.l0.rowWithGap(12),U.l0.justify.end],children:[(0,l.tZ)(U.zx,{onClick:function(){return r()},text:"Cancel"}),(0,l.tZ)(U.zx,{colorway:"negative",onClick:function(){return i()},text:"Yes, overwrite ".concat(n.length>1?"these files":"this file"),iconLeft:(0,l.tZ)(O.RefreshCcw,{})})]})]})}var L=n(93058),F=n(29163),X=n(86851),M=n(9252),W=/\(copy\)( \d+)?$/,j=/\d+$/;var H=n(12365),z=n(31470),V=n(83043),q=function(e){var t=e.filetreeApi,n=e.fileOpeners;return(0,H.S)(t),(0,z.xj)(n),(0,V.Yc)(),null},K=n(94135),$=n(74591),Y=n(7182),Q=n(80086),J=n(70034),ee=n(15165),te=function(){var e=(0,Q.lV)((0,c.useCallback)((function(e,t){t(J.tO,[])}),[]),ee.l),t=(0,Q.lV)((0,c.useCallback)(function(){var e=(0,i.Z)((function(e,t){var n;return(0,a.__generator)(this,(function(r){return n=e(J.tO),t(J._7,n),t(J.tO,[]),[2]}))}));return function(t,n){return e.apply(this,arguments)}}(),[]),ee.l),n=(0,Y.Dv)(J.tO,ee.l),r=(0,Y.Dv)(J.Fe,ee.l),o=(0,Y.Dv)(J.zA,ee.l);return(0,l.tZ)(B.u,{isOpen:Boolean(n.length>0),onRequestClose:e,children:n.length>0?(0,l.tZ)($.Z,{name:n.length>1?o:r,description:r,confirmDescription:o,hideModal:e,delete:t}):null})},ne=n(48730),re=n(85216),ie=function(){var e=(0,o.Z)((0,Y.KO)(re.oV,ee.l),2),t=e[0],n=e[1],r=(0,Y.b9)(re.nx,ee.l),s=c.useCallback((function(){n([]),r([])}),[n,r]),u=(0,Q.lV)(c.useCallback(function(){var e=(0,i.Z)((function(e,n){var r;return(0,a.__generator)(this,(function(i){switch(i.label){case 0:if(0===(r=e(re.nx)).length)return[2];i.label=1;case 1:return i.trys.push([1,,3,4]),[4,n(re.GC,{moveOps:r,dstConflicts:t})];case 2:return i.sent(),[3,4];case 3:return n(re.oV,[]),n(re.nx,[]),[7];case 4:return[2]}}))}));return function(t,n){return e.apply(this,arguments)}}(),[t]),ee.l);return(0,l.tZ)(B.u,{isOpen:t.length>0,onRequestClose:s,children:t.length>0?(0,l.tZ)(N,{paths:t.map((function(e){return e.path})),onCancel:s,onConfirm:u}):null})},oe=n(44659),ae=n(70917),le=n(12824),ce=n(93622),se=n(69346),ue=n(94058),de=n(59163),fe=n(6307),pe=se.K.div,he={position:"fixed",pointerEvents:"none",zIndex:de.MI.filetreeDragLayer,left:0,top:0,width:"100%",height:"100%"},ve=Math.floor(16),me=[U.l0.display.flex,U.l0.flex.row,U.l0.align.center,U.l0.overflow("hidden"),U.l0.flex.grow(1),U.l0.width(160)],ge=(0,ae.iv)((0,v.Z)(me).concat([{opacity:.75,zIndex:1}])),ye=(0,ae.iv)([[{transform:"rotate(1deg) translate(-4px, -4px)",opacity:.5},U.l0.position.absolute]]),Ze=(0,ae.iv)([(0,v.Z)(me).concat([{opacity:0}])]),be=function(){var e=(0,ue.u)();if(!e.display)return null;var t=e.item,n=e.monitor.getClientOffset();if(!n)return null;if("dirContent"in t)return null;var r=n.x,i=n.y,o={transform:"translate(".concat(r,"px, ").concat(i-ve,"px)")},a=t.nodes.length,c=t.previewNode,s=c.path,u=c.type,d=(0,A.UO)(s);return(0,l.tZ)(pe,{css:[o,U.l0.position.relative,U.l0.width(160)],children:(0,l.BX)(pe,{css:[{transform:"scale(".concat(.9,")")},U.l0.position.absolute,U.l0.left("-".concat("40%")),U.l0.shadow(3),U.l0.borderRadius(8)],children:[(0,l.tZ)(ce.ZP,{active:!0,selected:!0,children:(0,l.BX)(pe,{css:ge,children:[(0,l.tZ)(ce.qh,{type:u,path:s,active:!0}),(0,l.tZ)(ce.tJ,{title:d,children:d})]})}),a>1?(0,l.tZ)(pe,{css:ye,children:(0,l.tZ)(ce.ZP,{active:!0,selected:!0,children:(0,l.BX)(pe,{css:Ze,children:[(0,l.tZ)(ce.qh,{type:u,path:s,active:!0}),(0,l.tZ)(ce.tJ,{title:d,children:d})]})})}):null,a>1?(0,l.tZ)(U.DR,{text:String(a),css:[U.l0.backgroundColor.accentPrimaryDimmest,U.l0.color.accentPrimaryStrongest,U.l0.fontWeight.medium,U.l0.position.absolute,U.l0.left("40%"),U.l0.top("calc(100% - 4px)")]}):null]})})},we=function(){var e=(0,le.f)((function(e){return{item:e.getItem(),itemType:e.getItemType(),isDragging:e.isDragging()}})),t=e.isDragging,n=e.itemType,r=n===s.Tv.File||n===s.Tv.Directory;return t&&r?(0,l.BX)("div",{style:he,children:[(0,l.tZ)(be,{}),(0,l.tZ)(fe.a,{cursor:"grabbing"})]}):null},xe=c.forwardRef((function(e,t){return(0,l.tZ)(H.D,{children:(0,l.BX)(l.HY,{children:[(0,l.tZ)(q,{filetreeApi:e.filetreeApi,fileOpeners:e.fileOpeners||[]}),(0,l.tZ)(Se,{ref:t,readOnly:e.readOnly,showResources:e.showResources,showHeader:e.showHeader})]})})}));xe.displayName="FiletreeWithJotaiProvider";var Ee=xe,Ce=c.forwardRef((function(e,t){var n=e.readOnly,v=void 0!==n&&n,m=e.showResources,g=void 0===m||m,y=e.showHeader,Z=void 0===y||y,w=(0,L.Z)().showError,x=(0,d.Z)().fs,E=(0,K.z)(),C=(0,ne.Hl)(),k=(0,o.Z)(c.useState(null),2),_=k[0],R=k[1],D=b({onDone:function(e){var t=e.parentPath,n=e.errors;if(n.length){var i=n.filter((function(e){return e.error===r.AlreadyExists}));i.length&&R({parentPath:t,errors:i});var o=n.filter((function(e){return e.error!==r.AlreadyExists}));o.length&&w("There was an error uploading: ".concat(o.map((function(e){return e.path})).join(", ")))}},fs:x}),I=D.uploadFiles,O=D.pendingUploads,H=(0,oe.D3)();return c.useImperativeHandle(t,(function(){return{uploadFiles:I,addFileType:C}})),(0,l.tZ)(S.i.Provider,{value:{fs:x,pendingUploads:O,uploadFiles:I,duplicateFile:function(){var e=(0,i.Z)((function(e,t){var n,r,i,o;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return n=function(e,t){for(var n=(0,A.r6)(e),r=(0,A.eb)(e),i=W.test(r)?e:"".concat(r," (copy)").concat(n.length>0?".".concat(n):""),o=1;o<=t.size;o++){if(!t.has(i))return i;var a=(0,A.eb)(i),l=a.split(" ");j.test(a)&&l.pop(),i="".concat(l.join(" ")," ").concat(o),n.length>0&&(i+=".".concat(n))}return i}((0,A.UO)(e),new Set(t)),r=(0,A.Il)(e),i=r?"".concat(r,"/").concat(n):n,[4,x.copyFile(e,i)];case 1:return(o=a.sent()).error?(w(o.error),[2]):(H(i),[2])}}))}));return function(t,n){return e.apply(this,arguments)}}()},children:(0,l.BX)(h.Z,{children:[(0,l.tZ)(we,{}),(0,l.BX)(U.G7,{css:[U.l0.height("100%"),(0,T.isMobile)()&&U.l0.backgroundColor.backgroundDefault],children:[Z?(0,l.BX)(U.G7,{css:[U.l0.flex.row,U.l0.justify.spaceBetween,U.l0.p(8)],children:[(0,l.tZ)(f.Z,{level:4,css:[{userSelect:"none"}],children:"Files"}),(0,l.BX)(U.G7,{css:[U.l0.flex.row,U.l0.align.center],children:[v?null:(0,l.BX)(l.HY,{children:[(0,l.tZ)(F.h,{css:[U.l0.color.foregroundDimmer],onClick:function(){C(s.Tv.File)},"data-cy":"filetree-add-file",alt:"Add file",children:(0,l.tZ)(X.Z,{})}),(0,l.tZ)(U.G7,{css:{height:6,width:0,marginLeft:4,marginRight:4,borderRight:"1px solid var(--foreground-dimmest)"}}),(0,l.tZ)(F.h,{css:[U.l0.color.foregroundDimmer],onClick:function(){C(s.Tv.Directory)},alt:"Add folder",children:(0,l.tZ)(M.Z,{})})]}),(0,l.tZ)(P,{readOnly:v,onDownloadZip:E})]})]}):null,(0,l.tZ)(U.G7,{css:[U.l0.flex.growAndShrink(1),{overflowY:"auto"}],children:(0,l.tZ)(p.Z,{siblings:[],readOnly:v,path:u.Ql})}),g?(0,l.tZ)(G.w3,{}):null,(0,l.tZ)(B.u,{isOpen:Boolean(_),onRequestClose:function(){return R(null)},children:_?(0,l.tZ)(N,{paths:_.errors.map((function(e){return e.path})),onCancel:function(){return R(null)},onConfirm:function(){I({overwrite:!0,parentPath:_.parentPath,files:_.errors.map((function(e){return e.file}))}),R(null)}}):null}),(0,l.tZ)(ie,{}),(0,l.tZ)(te,{})]})]})})}));Ce.displayName="Filetree";var Se=c.memo(Ce)},39705:function(e,t,n){var r=n(35944),i=(n(67294),n(1879)),o=n(1144),a=n(61756),l=n(69346),c=n(11163),s=n(18751),u=n(81255);t.Z=function(e){var t=e.isOpen,n=(0,c.useRouter)();return(0,r.tZ)(i.u,{preventClose:!0,isOpen:t,centered:!0,onRequestClose:function(){},maxWidth:600,children:(0,r.BX)(l.G,{css:[u.l0.colWithGap(32)],children:[(0,r.BX)(l.G,{css:[u.l0.rowWithGap(16),u.l0.align.center],children:[(0,r.tZ)(s.Z,{size:24,css:[u.l0.color.orangeStrongest]}),(0,r.tZ)(o.h,{css:[{width:"fit-content"}],level:2,variant:"headerDefault",children:"You can\u2019t join this Repl from Firewall Mode."})]}),(0,r.BX)(l.G,{css:[u.l0.pr(32),u.l0.colWithGap(16)],children:[(0,r.tZ)(o.x,{multiline:!0,children:"This Repl was started by someone not in Firewall Mode. If you would like to join, please do one of the following:"}),(0,r.BX)(l.G,{css:[u.l0.colWithGap(16),u.l0.pl(16)],children:[(0,r.tZ)(o.x,{children:"\u2022 Exit Firewall Mode."}),(0,r.tZ)(o.x,{children:"\u2022 Ask the creator to open this Repl in Firewall Mode."})]})]}),(0,r.BX)(l.G,{css:[u.l0.rowWithGap(16),u.l0.justify.end],children:[(0,r.tZ)(a.zx,{text:"Exit Firewall Mode",onClick:function(){window.location.href="https://www.replit.com".concat(n.asPath)}}),(0,r.tZ)(a.zx,{text:"Leave",onClick:function(){n.push("/home","~/")}})]})]})})}},18455:function(e,t,n){n.d(t,{qe:function(){return B},kq:function(){return G},Gb:function(){return P}});var r=n(35944),i=n(60357),o=n.n(i),a=n(73604),l=n(29163),c=n(77365),s=n(81255),u=n(9117),d=n(79652),f=n(59641),p=n(34727),h=n(9941),v=n(70655),m=n(67294),g=n(99408),y=n(83261),Z=n(93449),b=n(15519),w=n(93058),x=n(12890);function E(e){var t=e.filePath,n=e.replLanguage,r=(0,g.Z)(),i=r.fs,o=r.container,a=(0,y.Z)({container:o,service:"format",skip:!b.Z.supportsFormatting(n)}).channel,l=(0,h.Z)(m.useState(!1),2),c=l[0],s=l[1],u=(0,w.Z)().showError,d=function(){return s(!1)};return m.useEffect((function(){if(c&&a){var e=!1,n=null,r=i.watchTextFile(t,{onReady:function(e){!function(e,t){o.apply(this,arguments)}(e.initialContent,e.writeChange)},onChange:function(e){var t=e.changes;n=n?n.compose(t):t},onError:function(){d()},onMoveOrDelete:function(){d()}});return function(){e=!0,r()}}function o(){return(o=(0,p.Z)((function(r,i){var o,l,c,s;return(0,v.__generator)(this,(function(f){switch(f.label){case 0:return e||!a?[2]:0===r.length?(d(),[2]):[4,a.request({file:{path:t,content:Z.Z.from(r).toBuffer()}})];case 1:return o=f.sent(),e?[2]:o.error||!o.file?(u("Failed to format ".concat(t),1500),d(),[2]):0===(l=Z.Z.from(o.file.content).toString()).length||0===(c=(0,x.F)(r,l)).length||0===(s=n?c.map(c,!0):c).length?(d(),[2]):(i(s),d(),[2])}}))}))).apply(this,arguments)}}),[a,t,i,c,u]),m.useEffect(d,[t]),b.Z.supportsFormatting(n)?function(){return s(!0)}:null}var C=n(69779),S=n(43186),T=n(55528),k=n(50829);var _=n(60977);var R=n(76216),D=36,I=function(){return(0,r.BX)("div",{className:"jsx-3e741e4d889c73d "+o().dynamic([["7b5cc3030f1a201a",[D]]])+" file-header-format-button",children:[(0,r.tZ)("div",{className:"jsx-3e741e4d889c73d "+o().dynamic([["7b5cc3030f1a201a",[D]]])+" file-header-format-icon",children:(0,r.BX)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16.581 16.428",className:"jsx-3e741e4d889c73d "+o().dynamic([["7b5cc3030f1a201a",[D]]]),children:[(0,r.tZ)("path",{d:"M13.26.747H3.323A2.569,2.569,0,0,0,.754,3.316h0v9.795a2.569,2.569,0,0,0,2.568,2.57h9.937a2.569,2.569,0,0,0,2.569-2.569h0V3.316A2.569,2.569,0,0,0,13.26.747Z",className:"jsx-3e741e4d889c73d "+o().dynamic([["7b5cc3030f1a201a",[D]]])+" cls-1"}),(0,r.tZ)("path",{d:"M13.118,11.269a.759.759,0,0,1-.759.759H3.921a.759.759,0,0,1-.759-.759V11.23a.671.671,0,0,1,.689-.653l.07.006h8.438a.671.671,0,0,1,.753.578.7.7,0,0,1,.006.069ZM3.161,5.111V5.073a.759.759,0,0,1,.759-.759h8.439a.759.759,0,0,1,.759.759v.038a.759.759,0,0,1-.759.759H3.921a.759.759,0,0,1-.76-.758ZM3.148,8.2a.759.759,0,0,1,.758-.76H8.4a.759.759,0,0,1,.759.759v.038a.759.759,0,0,1-.759.759H3.907a.759.759,0,0,1-.759-.759Z",className:"jsx-3e741e4d889c73d "+o().dynamic([["7b5cc3030f1a201a",[D]]])+" cls-2"})]})}),(0,r.tZ)(o(),{id:"3e741e4d889c73d",children:".file-header-format-button.jsx-3e741e4d889c73d .cls-1{fill:var(--foreground-default)}.file-header-format-button.jsx-3e741e4d889c73d .cls-2{fill:var(--background-default)}"}),(0,r.tZ)(o(),{id:"7b5cc3030f1a201a",dynamic:[D],children:".file-header-format-button.__jsx-style-dynamic-selector{padding:0 10px;height:100%;width:".concat(D,"px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;cursor:pointer;opacity:.7}.file-header-format-button.__jsx-style-dynamic-selector:hover{opacity:1}.file-header-format-icon.__jsx-style-dynamic-selector{height:16px;width:16px;cursor:pointer}")})]})};function P(e){var t=e.filePath,n=e.onComplete,r=(0,R.Z)(),i=E({filePath:t,replLanguage:r}),o=function(e){var t,n=e.filePath,r=(0,S.Z)().preferences,i=(0,g.Z)().fs,o=(0,T.Z)(n),a=Boolean(null===(t=null===o||void 0===o?void 0:o.getServerCapabilities())||void 0===t?void 0:t.documentFormattingProvider),l=(0,m.useState)([]),c=l[0],s=l[1],u=(0,w.Z)(),d=u.showError,f=u.showConfirm;return a?{fn:function(){if(!c.includes(n)){s((function(e){return(0,C.Z)(e).concat([n])}));var e=null,t=function(e){e?d("Sorry, formatting ".concat(n," failed"),1500):f("Formatted ".concat(n," successfully"),1500),a(),s((function(e){return e.filter((function(e){return e!==n}))}))},a=i.watchTextFile(n,{onReady:function(){var i=(0,p.Z)((function(i){var a,l,c,s,u;return(0,v.__generator)(this,(function(d){switch(d.label){case 0:if(a=i.initialContent,l=i.writeChange,!o)throw new Error("LSP client not found");return[4,o.request.format(n,{insertSpaces:r.indentIsSpaces,tabSize:r.indentSize})];case 1:return"error"in(c=d.sent())||c.cancelled?(t(!0),[2]):c.result?(s=(0,k.Z)(c.result,a.toString()),0===(u=e?s.map(e,!0):s).length?(t(),[2]):(l(u),t(),[2])):(t(!0),[2])}}))}));return function(e){return i.apply(this,arguments)}}(),onChange:function(t){var n=t.changes;e=e?e.compose(n):n}})}},isFormatting:c.includes(n)}:null}({filePath:t});return(0,a.Mb)(t)&&(o||i)?{format:function(){!function(e){var t=e.formatWithLsp,n=e.formatWithService,r=e.replLanguage,i=e.filePath,o=(null===t||void 0===t?void 0:t.fn)||n;if(!o)throw new Error("Expected format function");(0,_.j)(_.U3.AUTO_FORMAT_USED,{language:r,extension:(0,a.r6)(i)}),o()}({formatWithLsp:o,formatWithService:i,replLanguage:r,filePath:t}),n&&n()},isFormatting:Boolean(null===o||void 0===o?void 0:o.isFormatting)}:null}var G={cmdOrCtrlKey:!0,altKey:!1,shiftKey:!1,key:"S"},B=function(e){var t=e.filePath,n=e.inline,i=e.onComplete,o=e.disableKeyboardShortcut,p=P({filePath:t,onComplete:i});if((0,u.x)(G,{enabled:Boolean(!o&&p),run:function(){null===p||void 0===p||p.format()}}),!p)return null;var h=(0,a.eb)(t);return n?(0,r.tZ)(f.zx,{text:"Format",iconLeft:(0,r.tZ)(d.Z,{}),onClick:function(){return p.format()}}):(0,r.tZ)(l.h,{css:[s.l0.zIndex(1),{alignSelf:"center"}],alt:p.isFormatting?"Formatting ".concat(h,", please wait"):"Format ".concat(h," code"),tooltipPlacement:"left-end",onClick:function(){return p.format()},children:(null===p||void 0===p?void 0:p.isFormatting)?(0,r.tZ)(c.Z,{}):(0,r.tZ)(I,{})})}},92467:function(e,t,n){n.d(t,{z:function(){return jn}});var r={};n.r(r),n.d(r,{Component:function(){return Nn},receiver:function(){return et},reducer:function(){return nt}});var i=n(9941),o=n(35944),a=n(67294),l=n(59641),c=n(75815),s=n(18352),u=n(67573),d=n(90132),f=n(14251),p=n(48270),h=n(64487);var v=function(e,t,n,r){return function(i){return function(o){return function(a){o(a);var l=i.getState();if(l){var c=l.plugins,s=Object.keys(c),u=!0,d=!1,f=void 0;try{for(var p,h=function(){var o=p.value;if(a.pud&&a.pud!==o)return"continue";var c=l.plugins[o];if(c.broken)return"continue";var s=c.type,u=n[s];if(u)try{var d=u(t,o,a);if(d){var f=e(o).dispatch(d);f&&"object"===typeof f&&"function"===typeof f.catch&&f.catch((function(e){i.dispatch({type:"PLUGIN_BROKE",pud:o,message:e.toString()}),r({error:e,pluginType:s,source:"receiver",pud:o})}))}}catch(h){i.dispatch({type:"PLUGIN_BROKE",pud:o,message:h.toString()}),r({error:h,pluginType:s,source:"receiver",pud:o})}},v=s[Symbol.iterator]();!(u=(p=v.next()).done);u=!0)h()}catch(m){d=!0,f=m}finally{try{u||null==v.return||v.return()}finally{if(d)throw f}}}}}}},m=n(52875),g=n(93456),y=n(69779),Z=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(0===t.length)return e;var n=(0,g.Z)(t),r=n[0],i=n.slice(1);return Z(e[r],i)},b=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0;if(0===t.length)return n;var r=(0,g.Z)(t),i=r[0],o=r.slice(1);return Array.isArray(e)?(e[i]=b(e[i],o,n),e):(0,m.Z)((0,f.Z)({},e),(0,u.Z)({},i,b(e[i],o,n)))};var w=function(e,t,n){var r=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;for(var o in r)if(!i.pud||i.pud===o){var a=r[o];if(!a.broken){var l=t[a.type];if(l)if("PLUGIN_BROKE"!==i.type){var c=void 0;try{c=l(a.state,(0,m.Z)((0,f.Z)({},i),{wid:e}))}catch(s){r=(0,m.Z)((0,f.Z)({},r),(0,u.Z)({},o,(0,m.Z)((0,f.Z)({},a),{broken:!0,errorMessage:s.toString()}))),n({error:s,pluginType:a.type,source:"reducer",pud:o});continue}c!==a.state&&(r=(0,m.Z)((0,f.Z)({},r),(0,u.Z)({},o,(0,m.Z)((0,f.Z)({},a),{state:c}))))}else r=(0,m.Z)((0,f.Z)({},r),(0,u.Z)({},o,(0,m.Z)((0,f.Z)({},a),{broken:!0,errorMessage:i.message})))}}return r},i=function(e,t){switch(t.type){case"UPDATE_LAYOUT":return(0,f.Z)({},e,b(e,t.path.concat(t.property||[]),t.to));case"SET_ACTIVE_TAB":return(0,f.Z)({},e,b(e,t.path.concat("active"),t.tabIndex));case"SET_SPLIT_POSITION":return(0,f.Z)({},e,b(e,t.path.concat("position"),t.position));case"NEW_TAB":if("tabs"!==Z(e,t.path.concat("type"))){var r=new Error("trying to add tab to non tab component");return n({error:r,pluginType:"layout",pud:null,source:"reducer"}),e}var i=(0,f.Z)({},e,b(e,t.path.concat("tabs"),(0,y.Z)(Z(e,t.path.concat("tabs"))).concat([t.layout])));if(!t.setActiveTab)return i;var o=Z(i,t.path.concat("tabs")).findIndex((function(e){return e.pud===t.layout.pud}));return(0,f.Z)({},i,b(i,t.path.concat("active"),o));case"CLOSE_TAB":var a=Z(e,t.path.concat("tabs")),l=t.tabIndex||a.findIndex((function(e){return e.pud===t.tabPud}));if(!a[l]){var c=new Error("trying to remove nonexistent tab");return n({error:c,pluginType:"layout",pud:null,source:"reducer"}),e}var s=Z(e,t.path.concat("active")),d=s===l?Math.max(s-1,0):s,p=(0,f.Z)({},e,b(e,t.path.concat("active"),d));return(0,f.Z)({},p,b(p,t.path.concat("tabs"),(0,y.Z)(a.slice(0,l).concat(a.slice(l+1)))));case"LOAD_PLUGIN":return(0,m.Z)((0,f.Z)({},e),{pluginTitles:(0,m.Z)((0,f.Z)({},e.pluginTitles),(0,u.Z)({},t.pluginPud,t.title))});default:return e}},o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{plugins:{},layout:{}},n=arguments.length>1?arguments[1]:void 0,o=r(e.plugins,n);o!==e.plugins&&(e=(0,m.Z)((0,f.Z)({},e),{plugins:o}));var a=i(e.layout,n);switch(a!==e.layout&&(e=(0,m.Z)((0,f.Z)({},e),{layout:a})),n.type){case"OPEN_FILE":return(0,m.Z)((0,f.Z)({},e),{activeFile:n.path});case"MOVE_FILE":return e.activeFile===n.path?(0,m.Z)((0,f.Z)({},e),{activeFile:n.to}):e;case"LOAD_PLUGIN":var l=t[n.pluginType];l||(l=function(e,t){});var c=n.initialState||{},s=l(void 0,{type:"@@INIT",initialState:c});return(0,m.Z)((0,f.Z)({},e),{plugins:(0,m.Z)((0,f.Z)({},e.plugins),(0,u.Z)({},n.pluginPud,{type:n.pluginType,state:s,isClosable:n.isClosable,isDraggable:n.isDraggable}))});case"UNLOAD_PLUGIN":return(0,m.Z)((0,f.Z)({},e),{plugins:Object.keys(e.plugins).reduce((function(t,r){return r!==n.pud?(0,m.Z)((0,f.Z)({},t),(0,u.Z)({},r,e.plugins[r])):t}),{})});default:return e}};return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_WORKSPACE":return t.state;case"CREATE_WORKSPACE":return{layout:t.layout,plugins:r(void 0,t),activeFile:t.activeFile};default:return o(e,t)}}},x=n(95209),E=n(15366);function C(e,t){if("split"===e.type){var n=C(e.left,t);if(n)return["left"].concat(n);var r=C(e.right,t);if(r)return["right"].concat(r)}else if("tabs"===e.type)for(var i=0;i<e.tabs.length;i++){var o=C(e.tabs[i],t);if(o)return["tabs",i].concat(o)}else if("pane"===e.type&&e.pud===t)return[];return null}function S(e,t){for(var n=0;n<e.floating.length;n++)if(e.floating[n]===t)return["floating",n];var r=C(e.tiling,t);return r?["tiling"].concat(r):null}function T(e,t){var n,r=S(e,t);if(!r)return{path:["tiling"],to:e.tiling};if("floating"===r[0]){var i=e.floating.indexOf(t);return{path:["floating"],to:e.floating.slice(0,i).concat(e.floating.slice(i+1))}}if("split"!==k(e,r.slice(0,-1)).type)throw new Error("remove only supports splits right now");return n="left"===r[r.length-1]?"right":"left",{path:r.slice(0,-1).map((function(e){return e.toString()})),to:k(e,r.slice(0,-1).concat(n))}}var k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(0===t.length)return e;var n=(0,g.Z)(t),r=n[0],i=n.slice(1);return k(e[r],i)};function _(e){return"tabs"===e.slice(0,-1).pop()}var R=function(e){var t={strokeMiterlimit:10,fill:"none",stroke:e.color,strokeWidth:1};return(0,o.tZ)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",children:(0,o.BX)("g",{children:[(0,o.tZ)("line",{style:t,x1:"3",y1:"3",x2:"13",y2:"13"}),(0,o.tZ)("line",{style:t,x1:"13",y1:"3",x2:"3",y2:"13"})]})})};var D=function(e){var t=e.onClick,n=e.onMouseDown,r=e.Icon,i=e.color,a=e.style;return(0,o.tZ)("button",{onClick:t,onMouseDown:n,style:(0,f.Z)({color:"var(--foreground-default)",backgroundColor:"transparent",border:"none",cursor:"pointer",margin:"0",outline:"none",padding:"0"},a),children:(0,o.tZ)(r,{color:i})})},I=function(e){var t=e.color;return(0,o.tZ)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 8.467 10.583",children:(0,o.tZ)("path",{d:"M4.233.684L2.988 1.93l.374.374.607-.607V3.97H1.697l.607-.607-.374-.374L.684 4.233 1.93 5.48l.374-.374-.607-.607H3.97V6.77l-.607-.607-.374.374 1.245 1.245L5.48 6.537l-.374-.374-.607.607V4.498H6.77l-.607.607.374.374 1.245-1.246-1.245-1.245-.374.374.607.607H4.498V1.697l.607.607.374-.374z",fill:t,"white-space":"normal",overflow:"visible"})})},P={height:"12px",width:"12px",margin:"0 4px"},G=function(e){var t=e.isTabbed,n=e.isClosable,r=e.isDraggable,i=e.HeaderPlugin,l=e.onClose,c=e.onDrag;return(0,o.BX)(a.Fragment,{children:[i,(0,o.BX)("div",{style:{alignItems:"center",display:"flex",height:"100%",marginLeft:"auto"},children:[r&&!t?(0,o.tZ)(D,{Icon:I,onMouseDown:c,style:P}):null,n&&!t?(0,o.tZ)(D,{Icon:R,onClick:l,style:P}):null]})]})};var B=1e5,A=32,U={width:"100%",height:"100%"},O=function(e){return e.getBoundingClientRect()},N=function(e,t){var n=t.px,r=t.pc;return{px:e.px+(n||0),pc:e.pc+(r||0)}},L=function(e,t){return{px:e.px*t,pc:e.pc*t}},F={px:0,pc:0},X=function(e){return{px:e,pc:0}},M=function(e){return{px:0,pc:e}},W=function(e){var t=e.px,n=e.pc;return 0===t&&0===n},j=function(e,t,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{x:F,y:F,w:M(100),h:M(100),p:[]};if("tabs"===r.type){var a=r.active||0;n.push((0,m.Z)((0,f.Z)({},o),{h:X(A),tabs:r.tabs.map((function(e){return e.pud||e.type})),active:a}));for(var l=0;l<r.tabs.length;l++)j(e,t,n,(0,f.Z)({},r.tabs[l]),i,(0,m.Z)((0,f.Z)({},o),{p:(0,y.Z)(o.p).concat(["tabs",l.toString()]),y:N(o.y,X(A)),h:l===a?N(o.h,X(-32)):F,w:l===a?o.w:F}))}if("split"===r.type){var c=void 0===r.position?50:r.position,s=!1;if("undefined"!==typeof r.fixed?s=r.fixed:("undefined"!==typeof r.leftSize||"undefined"!==typeof r.rightSize)&&(s=!0),"undefined"!==typeof r.leftSize&&"undefined"!==typeof r.rightSize)throw new Error("Cannot have both leftSize and rightSize specified");var u=null;if(0===c?u="left":100===c&&(u="right"),r.stacked){var d=!W(o.h)&&!s,p=L(o.h,c/100);r.rightSize?p=N(o.h,X(-r.rightSize)):r.leftSize?p=X(r.leftSize):"left"===u||W(o.h)?p=F:"right"===u&&(p=N(p,X(-8))),j(e,t,n,r.left,i,(0,m.Z)((0,f.Z)({},o),{p:(0,y.Z)(o.p).concat(["left"]),h:p}));var h=N(o.y,L(o.h,c/100));r.rightSize?h=N(o.y,p):r.leftSize?h=N(o.y,X(r.leftSize)):"left"===u?h=o.y:"right"===u&&d&&(h=N(h,X(-8)));var v=L(o.h,(100-c)/100);r.rightSize?v=X(r.rightSize):r.leftSize?v=N(o.h,X(-r.leftSize)):("right"===u||W(o.h))&&(v=F),j(e,t,n,r.right,i,(0,m.Z)((0,f.Z)({},o),{p:(0,y.Z)(o.p).concat(["right"]),y:d?N(h,X(8)):h,h:d?N(v,X(-8)):v})),d&&t.push((0,m.Z)((0,f.Z)({},o),{y:h,snapped:u,h:X(8),stacked:r.stacked}))}else{var g=!W(o.w)&&!s,Z=L(o.w,c/100);r.rightSize?Z=N(o.w,X(-r.rightSize)):r.leftSize?Z=X(r.leftSize):"left"===u||W(o.w)?Z=F:"right"===u&&(Z=N(Z,X(-8))),j(e,t,n,r.left,i,(0,m.Z)((0,f.Z)({},o),{p:(0,y.Z)(o.p).concat(["left"]),w:Z}));var b=N(o.x,L(o.w,c/100));"left"===u?b=o.x:r.rightSize?b=N(o.x,Z):r.leftSize?b=N(o.x,X(r.leftSize)):"right"===u&&(b=N(b,X(-8)));var w=L(o.w,(100-c)/100);r.rightSize?w=X(r.rightSize):r.leftSize?w=N(o.w,X(-r.leftSize)):("right"===u||W(o.w))&&(w=F),j(e,t,n,r.right,i,(0,m.Z)((0,f.Z)({},o),{p:(0,y.Z)(o.p).concat(["right"]),x:g?N(b,X(8)):b,w:g?N(w,X(-8)):w})),g&&t.push((0,m.Z)((0,f.Z)({},o),{x:b,snapped:u,w:X(8),stacked:r.stacked}))}}if("pane"===r.type){var x=r.header,E=r.pud,C=i[E]||{isDraggable:!1,isClosable:!1},S=_(o.p),T=x||!S&&(C.isClosable||C.isDraggable),k=T?x&&x.height||32:0;e.push({header:T&&{pud:x&&x.pud,p:(0,m.Z)((0,f.Z)({},o),{h:X(k)})},pud:E,p:(0,m.Z)((0,f.Z)({},o),{y:N(o.y,X(k)),h:N(o.h,X(-k))}),isDraggable:C.isDraggable,isClosable:C.isClosable})}},H=function(e){var t,n,r,a=e.stacked,l=e.onMouseDown,c=e.snapped,s=e.style,d=(0,i.Z)(Q(),2),p=d[0],h=d[1],v=p?"var(--outline-default)":"var(--outline-dimmest)";c?(n="left"===c?a?"translate(0px, -2px) rotate(135deg)":"translate(-2px, 0px) rotate(45deg)":a?"translate(0px, 2px) rotate(-45deg)":"translate(2px, 0px) rotate(-135deg)",t={width:6,height:6,borderRight:"solid 1px ".concat(v),borderTop:"solid 1px ".concat(v),transition:"0.1s background-color",transform:n}):(r={backgroundColor:v,borderRadius:"var(--border-radius-4)"},(0,u.Z)(r,a?"height":"width",2),(0,u.Z)(r,a?"width":"height",25),(0,u.Z)(r,"transition","0.1s background-color"),t=r);return(0,o.tZ)("div",(0,m.Z)((0,f.Z)({},h),{onMouseDown:l,onTouchStart:l,style:(0,f.Z)({position:"absolute",display:"flex",justifyContent:"center",alignItems:"center",flex:"1 0 auto",overflow:"hidden",borderRadius:"var(--border-radius-4)",background:"var(--background-root)",cursor:a?"row-resize":"col-resize",zIndex:1},s),children:(0,o.tZ)("div",{style:t})}))},z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0;if(0===t.length)return n;var r=(0,g.Z)(t),i=r[0],o=r.slice(1);return Array.isArray(e)?(e[i]=z(e[i],o,n),e):(0,m.Z)((0,f.Z)({},e),(0,u.Z)({},i,z(e[i],o,n)))},V=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(0===t.length)return e;var n=(0,g.Z)(t),r=n[0],i=n.slice(1);return V(e[r],i)},q=function(e){(0,d.Z)(n,e);var t=(0,p.Z)(n);function n(){var e;return(0,c.Z)(this,n),e=t.apply(this,arguments),(0,u.Z)((0,x.Z)(e),"state",{protectEvents:!1,newLayout:null,debug:!1,dragging:null,resizing:null,layout:e.props.store.getState().layout,plugins:e.props.store.getState().plugins}),(0,u.Z)((0,x.Z)(e),"getPluginComponent",(function(t,n){var r=e.state.plugins[n],i=e.props,a=i.pluginComponents,l=i.wid,c=null;return c=r?r.broken?(0,o.tZ)($,{handleError:function(t){return e.handleError({error:t,pluginType:r.type,source:"component",pud:n})},message:r.errorMessage||"Plugin broken with no error :/"}):(c=a[r.type])?(0,o.tZ)(c,{wid:l,pud:n,dimensions:e.getPluginDims(n,{w:t.w,h:t.h}),style:U}):(0,o.tZ)($,{handleError:function(t){return e.handleError({error:t,pluginType:r.type,source:"component",pud:n})},message:"No plugin component by the name ".concat(n)}):(0,o.tZ)($,{handleError:function(t){return e.handleError({error:t,pluginType:"none",source:"component",pud:n})},message:"No known plugin by the name ".concat(n)})})),(0,u.Z)((0,x.Z)(e),"onResizerDown",(function(t,n,r){var i=t.target;e.setState({protectEvents:!0,resizing:{stacked:r}}),t.preventDefault(),t.stopPropagation();var o=0,a=function(t,n){if("pane"===t.type){var i=e.nodes[n.join(".")].ref;if(!i)return;o+=r?O(i).height:O(i).width}else if("split"===t.type)t.stacked===r?(a(t.left,(0,y.Z)(n).concat(["left"])),a(t.right,(0,y.Z)(n).concat(["right"]))):a(t.left,(0,y.Z)(n).concat(["left"]));else if("tabs"===t.type){var l=t.active||0;a(t.tabs[l],(0,y.Z)(n).concat(["tabs",l.toString()]))}};a(V(e.state.layout,["tiling"].concat((0,y.Z)(n))),n),o+=8;var l=r?O(i).top:O(i).left,c=V(e.state.layout,["tiling"].concat((0,y.Z)(n),["position"]));"number"!==typeof c&&(c=50);var s=function(t){t.preventDefault(),t.stopPropagation();var i,a=t.touches?t.touches[0]:t,s=(r?a.pageY:a.pageX)-l,u=o*(c/100)+s;i=u>o-32?100:u<32?0:u/o*100,e.setState({newLayout:z(e.state.layout,["tiling"].concat((0,y.Z)(n),["position"]),i)})},u=function(){document.removeEventListener("touchmove",s),document.removeEventListener("mousemove",s),document.removeEventListener("touchend",u),document.removeEventListener("mouseup",u),e.setState({protectEvents:!1,resizing:null}),null!==e.state.newLayout&&(e.props.store.dispatch({type:"SET_SPLIT_POSITION",position:V(e.state.newLayout,["tiling"].concat((0,y.Z)(n),["position"])),path:["tiling"].concat((0,y.Z)(n))}),e.setState({newLayout:null}))};document.addEventListener("touchmove",s),document.addEventListener("mousemove",s),document.addEventListener("touchend",u),document.addEventListener("mouseup",u)})),(0,u.Z)((0,x.Z)(e),"onDrag",(function(t,n){t.stopPropagation(),t.preventDefault();var r=t.pageX,i=t.pageY,o=null,a=[];for(var l in e.nodes){var c=e.nodes[l];if(c.ref){var s=O(c.ref),u=s.top,d=s.left,p=s.width,h=s.height,v={p:c.p,x:d,y:u,w:p,h:h,pud:c.pud};c.pud===n?o=v:a.push(v)}}e.setState({protectEvents:!0});var m=function(t){t.preventDefault(),t.stopPropagation();var l=t.pageX,c=t.pageY,s={target:null,side:"bottom",left:l,top:c},u=!0,d=!1,p=void 0;try{for(var h,v=a[Symbol.iterator]();!(u=(h=v.next()).done);u=!0){var m=h.value;if((e.state.plugins[m.pud]||{}).isDraggable&&(l>m.x&&l<m.x+m.w&&c>m.y&&c<m.y+m.h)){var g=l-m.x,y=m.x+m.w-l,Z=c-m.y,b=m.y+m.h-c,w=Math.min(g,y,Z,b);s.target=m.pud,w===g?s.side="left":w===y?s.side="right":w===Z&&(s.side="top");break}}}catch(C){d=!0,p=C}finally{try{u||null==v.return||v.return()}finally{if(d)throw p}}var x=l-r,E=c-i;s.left=o.x+x,s.top=o.y+E,e.setState({dragging:(0,f.Z)({pud:n,width:o.w,height:o.h},s)})},g=function(){e.state.dragging&&e.state.dragging.target&&e.props.store.dispatch(K({pud:n,side:e.state.dragging.side,target:e.state.dragging.target})),e.setState({protectEvents:!1,dragging:null}),document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",g)};document.addEventListener("mousemove",m),document.addEventListener("mouseup",g)})),(0,u.Z)((0,x.Z)(e),"nodes",{}),(0,u.Z)((0,x.Z)(e),"dimMap",{}),(0,u.Z)((0,x.Z)(e),"getPluginDims",(function(t,n){var r=e.dimMap[t];return r&&r.h.pc===n.h.pc&&r.h.px===n.h.px&&r.w.pc===n.h.pc&&r.w.px===n.w.px?r:(e.dimMap[t]=n,n)})),e}return(0,s.Z)(n,[{key:"cancelContextMenuIntercept",value:function(e){e.shiftKey&&e.altKey&&e.preventDefault()}},{key:"componentDidMount",value:function(){this.isWeMounted=!0,this.subscribe(),document.addEventListener("contextmenu",this.cancelContextMenuIntercept)}},{key:"componentWillUnmount",value:function(){this.unsubscribe&&this.unsubscribe(),document.removeEventListener("contextmenu",this.cancelContextMenuIntercept),this.isWeMounted=!1}},{key:"subscribe",value:function(){var e=this,t=this.props.store;this.unsubscribe=t.subscribe((function(){var n=t.getState(),r=n.layout,i=n.plugins;e.isWeMounted&&e.setState((function(e){for(var t in e.plugins){if(!i[t])return{layout:r,plugins:i};if(i[t].broken!==e.plugins[t].broken)return{layout:r,plugins:i}}return e.layout===r?null:{layout:r,plugins:i}}))}))}},{key:"shouldComponentUpdate",value:function(e,t){if(this.state!==t)return!0;for(var n in this.props)if(this.props[n]!==e[n])return!0;return!1}},{key:"onMaybeDrag",value:function(e,t){var n=this.state.plugins[t]&&this.state.plugins[t].isDraggable;(e.altKey||e.shiftKey)&&n&&this.onDrag(e,t)}},{key:"closeTabbedPlugin",value:function(e){var t=e.path,n=e.tabIndex,r=e.activeTabIndex;return function(e,i){var o=i().layout,a=k(o,t).tabs,l=a[n].pud;if(e({type:"CLOSE_TAB",path:t,tabIndex:n}),a.length-1===0)e((0,f.Z)({type:"UPDATE_LAYOUT"},T({layout:o,nodePath:t})));else if(n<=r){e({type:"SET_ACTIVE_TAB",tabIndex:Math.max(r-1,0),path:t})}e({type:"PLUGIN_CLOSED",closedPud:l})}}},{key:"closePlugin",value:function(e){var t=e.pud;return function(e,n){var r=n().layout;e((0,f.Z)({type:"UPDATE_LAYOUT"},T({layout:r,pud:t}))),e({type:"PLUGIN_CLOSED",closedPud:t})}}},{key:"getPaneStyles",value:function(e,t){var n=W(t.w)||W(t.h),r=t.p.includes("tabs");return e?{opacity:.75,overflow:"hidden",visibility:n?"hidden":void 0,height:this.state.dragging.height,position:"absolute",left:0,top:0,transform:"translate(".concat(this.state.dragging.left,"px, ").concat(this.state.dragging.top-(t.h.px>0?t.h.px:0),"px)"),width:this.state.dragging.width,zIndex:99999,transition:"opacity 0.2s, max-width 0.2s, max-height 0.2s",maxWidth:"100vw",maxHeight:"100vh"}:{position:"absolute",visibility:n&&!r?"hidden":void 0,display:n&&r?"none":void 0,height:"calc(".concat(t.h.pc,"% + ").concat(t.h.px,"px)"),width:"calc(".concat(t.w.pc,"% + ").concat(t.w.px,"px)"),left:"calc(".concat(t.x.pc,"% + ").concat(t.x.px,"px)"),top:"calc(".concat(t.y.pc,"% + ").concat(t.y.px,"px)"),opacity:"1",transition:"opacity 0.2s, max-width 0.2s, max-height 0.2s",maxWidth:"100vw",maxHeight:"100vh"}}},{key:"render",value:function(){var e=this,t=this.state.newLayout||this.state.layout,n=t.tiling,r=t.floating,i=this.state.plugins,l=[],c=[],s=[];j(l,c,s,n,i);var u="default";return this.state.resizing?u=this.state.resizing.stacked?"row-resize":"col-resize":this.state.dragging&&(u="grabbing"),(0,o.BX)("div",{style:{height:"100%",width:"100%",position:"absolute"},children:[l.map((function(t){var n=t.pud,r=t.p,i=t.header,l=t.isClosable,c=t.isDraggable,s=e.state.plugins[n]||{},u=e.state.plugins[i&&i.pud]||{},d=i&&i.p.h.px,p=i&&i.pud&&(0,o.tZ)($,{handleError:function(t){return e.props.handleError({error:t,pluginType:u.type,source:"component",pud:n})},message:u.broken?u.errorMessage:void 0,children:(0,o.tZ)(E.zt,{store:e.props.classicStoreFor(n),children:e.getPluginComponent(i.p,i.pud)})}),h=e.state.dragging&&e.state.dragging.pud===n;return(0,o.BX)(a.Fragment,{children:[i?(0,o.tZ)("div",{className:"WHO AM I??",style:(0,m.Z)((0,f.Z)({},e.getPaneStyles(h,i.p)),{backgroundColor:"var(--background-default)",color:"var(--foreground-default)",height:"".concat(d,"px"),alignItems:"center",display:"flex",justifyContent:"spaceBetween"}),children:(0,o.tZ)(G,{HeaderPlugin:p,isClosable:l,isDraggable:c,isTabbed:_(r.p),onClose:function(){e.props.store.dispatch(e.closePlugin({pud:n}))},onDrag:function(t){return e.onDrag(t,n)}})}):null,(0,o.BX)("div",{ref:function(t){return e.nodes[r.p.join(".")]={ref:t,p:r,pud:n}},style:(0,m.Z)((0,f.Z)({},e.getPaneStyles(h,r)),{borderRadius:"var(--border-radius-4)",boxShadow:h?"var(--shadow-2)":"none"}),onMouseDown:function(t){return e.onMaybeDrag(t,n)},children:[e.state.debug?(0,o.BX)("div",{style:{backgroundColor:"hsl(".concat(n.split("").map((function(e){return e.charCodeAt(0)})).reduce((function(e,t){return e+t})),", 50%, 50%)"),width:"100%",height:"100%",border:"inset 5px"},children:[n,(0,o.BX)("pre",{children:["x: ","calc(".concat(r.x.pc,"% + ").concat(r.x.px,"px)"),(0,o.tZ)("br",{}),"y: ","calc(".concat(r.y.pc,"% + ").concat(r.y.px,"px)"),(0,o.tZ)("br",{}),"w: ","calc(".concat(r.w.pc,"% + ").concat(r.w.px,"px)"),(0,o.tZ)("br",{}),"h: ","calc(".concat(r.h.pc,"% + ").concat(r.h.px,"px)"),(0,o.tZ)("br",{}),"p: ",r.p.join(" ")]})]}):(0,o.tZ)($,{handleError:function(t){return e.props.handleError({error:t,pluginType:s.type,source:"component",pud:n})},message:s.broken?s.errorMessage:void 0,children:(0,o.tZ)(E.zt,{store:e.props.classicStoreFor(n),children:e.getPluginComponent(r,n)})}),e.state.dragging&&e.state.dragging.target===n?(0,o.tZ)("div",{style:{position:"absolute",top:0,left:0,bottom:0,right:0,background:"rgba(127, 127, 127, 0.6)",transition:"transform 0.2s",transformOrigin:"top left",transform:"translate(".concat("right"===e.state.dragging.side?"50%":0,", ").concat("bottom"===e.state.dragging.side?"50%":0,") ").concat("left"===e.state.dragging.side||"right"===e.state.dragging.side?"scaleX(.5)":"scaleY(.5)")}}):null]})]},n)})),this.state.protectEvents?(0,o.tZ)("div",{style:{zIndex:B,position:"absolute",top:0,bottom:0,left:0,right:0,cursor:u}}):null,c.map((function(t,n){var r=t.x,i=t.y,a=t.w,l=t.h,c=t.p,s=t.snapped,u=t.stacked;return(0,o.tZ)(H,{onMouseDown:function(t){return e.onResizerDown(t,c,u)},snapped:s,stacked:u,style:{left:"calc(".concat(r.pc,"% + ").concat(r.px,"px)"),top:"calc(".concat(i.pc,"% + ").concat(i.px,"px)"),width:"calc(".concat(a.pc,"% + ").concat(a.px,"px)"),height:"calc(".concat(l.pc,"% + ").concat(l.px,"px)")}},n)})),s.map((function(t,n){var r=t.x,i=t.y,a=t.w,l=t.h,c=t.p,s=t.tabs,u=t.active;return(0,o.tZ)(Y,{tabsMetadata:s.map((function(t){if("split"===t){var r=V(e.state.layout,["tiling"].concat((0,y.Z)(c),["tabs"]))[n];t=r.left.pud||r.right.pud}return{title:e.state.layout.pluginTitles[t]||"untitled",isClosable:e.state.plugins[t]&&e.state.plugins[t].isClosable}})),active:u,setActive:function(t){return e.props.store.dispatch((function(e){var n=["tiling"].concat((0,y.Z)(c));e({type:"SET_ACTIVE_TAB",tabIndex:t,path:n})}))},close:function(t){var n=["tiling"].concat((0,y.Z)(c));e.props.store.dispatch(e.closeTabbedPlugin({path:n,tabIndex:t,activeTabIndex:u}))},style:{position:"absolute",left:"calc(".concat(r.pc,"% + ").concat(r.px,"px)"),top:"calc(".concat(i.pc,"% + ").concat(i.px,"px)"),width:"calc(".concat(a.pc,"% + ").concat(a.px,"px)"),height:"calc(".concat(l.pc,"% + ").concat(l.px,"px)")}},n)})),r.map((function(t){if(!e.state.plugins[t])return(0,o.tZ)($,{handleError:function(n){return e.props.handleError({error:n,pluginType:e.state.plugins[t].type,source:"component",pud:t})},message:"No plugin by the name ".concat(t)},t);var n=e.props.pluginComponents[e.state.plugins[t].type];return n?(0,o.tZ)($,{handleError:function(n){return e.props.handleError({error:n,pluginType:e.state.plugins[t].type,source:"component",pud:t})},children:(0,o.tZ)(E.zt,{store:e.props.classicStoreFor(t),children:(0,o.tZ)(n,{wid:e.props.wid,pud:t},t)})},t):(0,o.tZ)($,{handleError:function(n){return e.props.handleError({error:n,pluginType:e.state.plugins[t].type,source:"component",pud:t})},message:"No component found for plugin by the name ".concat(t)},t)}))]})}}]),n}(a.Component);function K(e){var t=e.pud,n=e.side,r=e.target;return function(e,i){var o=i().layout,a=S(o,t),l=k(o,a);e((0,f.Z)({type:"UPDATE_LAYOUT"},T({layout:o,pud:t})));var c=S(o=i().layout,r);if(c){_(c)&&(c=function(e){return e.slice(0,-1)}(c));var s="leftOf";"right"===n?s="rightOf":"top"===n?s="above":"bottom"===n&&(s="below"),e((0,f.Z)({type:"UPDATE_LAYOUT"},function(e,t,n,r,i){if("inside"===n){if(1!==r.length||"floating"!==r[0])throw new Error("position 'inside' should only be used for the path ['floating']");return i&&i.once&&e.floating.includes(t)?{path:["floating"],to:e.floating}:{path:["floating"],to:e.floating.concat(t)}}var o={type:"split"};if("undefined"!==typeof i?"undefined"!==typeof i.position?o=(0,m.Z)((0,f.Z)({},o),{fixed:!!i.fixed,position:i.position||50}):"undefined"!==typeof i.leftSize?o=(0,m.Z)((0,f.Z)({},o),{leftSize:i.leftSize}):"undefined"!==typeof i.rightSize&&(o=(0,m.Z)((0,f.Z)({},o),{rightSize:i.rightSize})):o=(0,m.Z)((0,f.Z)({},o),{fixed:!1,position:50}),"leftOf"===n)o=(0,m.Z)((0,f.Z)({},o),{stacked:!1,right:k(e,r),left:{type:"pane",pud:t}});else if("rightOf"===n)o=(0,m.Z)((0,f.Z)({},o),{stacked:!1,right:{type:"pane",pud:t},left:k(e,r)});else if("above"===n)o=(0,m.Z)((0,f.Z)({},o),{stacked:!0,left:{type:"pane",pud:t},right:k(e,r)});else{if("below"!==n)throw new Error("unsupported new plugin type");o=(0,m.Z)((0,f.Z)({},o),{stacked:!0,right:{type:"pane",pud:t},left:k(e,r)})}return{path:r.map((function(e){return e.toString()})),to:o}}(o,l.pud,s,c,{position:50})))}}}var $=function(e){(0,d.Z)(n,e);var t=(0,p.Z)(n);function n(){var e;return(0,c.Z)(this,n),e=t.apply(this,arguments),(0,u.Z)((0,x.Z)(e),"state",{hasError:!!e.props.message,error:new Error(e.props.message)}),e}return(0,s.Z)(n,[{key:"componentDidCatch",value:function(e,t){this.setState({hasError:!0,error:e,info:t}),this.props.handleError(e)}},{key:"render",value:function(){return this.state.hasError?(0,o.BX)("div",{style:{background:"red",color:"white",width:"100%",height:"100%",padding:"0",margin:"0",overflow:"hidden"},children:[(0,o.tZ)("h1",{children:"This Plugin Crashed!"}),this.state.info?(0,o.tZ)("pre",{children:this.state.info.componentStack||JSON.stringify(this.state.info)}):null,this.state.error?(0,o.tZ)("pre",{children:this.state.error.toString()}):null]}):this.props.children||null}}]),n}(a.Component);function Y(e){var t=e.active,n=void 0===t?0:t,r=e.setActive,i=void 0===r?function(){}:r,a=e.close,l=void 0===a?function(){}:a,c=e.tabsMetadata,s=e.style;return(0,o.tZ)("div",{style:s,children:(0,o.tZ)("div",{style:{height:A,fontFamily:"'IBM Plex Sans', sansSerif",backgroundColor:"var(--background-root)",display:"flex",alignItems:"flex-end",position:"relative",zIndex:2},children:c.map((function(e,t){return(0,o.tZ)(ee,{title:e.title,isClosable:e.isClosable,onClose:function(){return l(t)},onClick:function(){return i(t)},isActive:t===n},t)}))})})}function Q(){var e=(0,i.Z)(a.useState(!1),2),t=e[0],n=e[1];return[t,{onMouseEnter:function(){n(!0)},onMouseLeave:function(){n(!1)}}]}function J(e){var t=e.isHovering,n=e.isActive;return(0,f.Z)({height:"100%",boxSizing:"border-box",display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",padding:"var(--space-8)",backgroundColor:"var(--background-root)",color:"var(--foreground-dimmer)",fontSize:"var(--font-size-default)",fontFamily:"var(--font-family-default)",borderTopRightRadius:"var(--border-radius-4)",borderTopLeftRadius:"var(--border-radius-4)",cursor:"pointer",transition:"0.2s background-color"},t?{backgroundColor:"var(--background-root)",color:"var(--foreground-default)"}:{},n?{backgroundColor:"var(--background-default)",color:"var(--foreground-default)"}:{})}function ee(e){var t,n=e.isActive,r=e.onClick,a=e.title,l=e.isClosable,c=e.onClose,s=(0,i.Z)(Q(),2),u=s[0],d=s[1];return(0,o.tZ)("div",(0,m.Z)((0,f.Z)({},d),{style:J({isHovering:u,isActive:n}),onClick:r,children:(0,o.BX)("div",{style:{alignItems:"center",display:"flex",justifyContent:"space-between"},children:[(t=a,t?t[0].toUpperCase()+t.slice(1):t),l?(0,o.tZ)(D,{onClick:function(e){e.stopPropagation(),c()},Icon:R,style:{height:"8px",width:"8px",padding:0,marginLeft:"7px"}}):null]})}))}var te=q,ne=n(25108),re=function(e){return function(t){return function(n){return"function"===typeof n?n(e.dispatch,e.getState):t(n)}}},ie=["activeFile"],oe=function(){function e(){var t=this;(0,c.Z)(this,e),(0,u.Z)(this,"marshal",(function(){var e=t.store.getState();return JSON.stringify(e)})),(0,u.Z)(this,"unmarshal",(function(e){var n=JSON.parse(e);t.store.dispatch({type:"SET_WORKSPACE",state:n})})),(0,u.Z)(this,"bootstrap",(function(e){t.store.dispatch(function(e){var t=e.wid,n=e.config;return function(e){for(var r in e({wid:t,type:"CREATE_WORKSPACE",language:n.language,layout:n.layout,activeFile:n.activeFile}),n.plugins)e(le({wid:t,pluginPud:r,pluginType:n.plugins[r].type,title:n.plugins[r].title,initialState:n.plugins[r].state,isClosable:n.plugins[r].isClosable,isDraggable:n.plugins[r].isDraggable}))}}({config:e}))})),(0,u.Z)(this,"register",(function(e,n){t.reducers[e]=n.reducer,t.receivers[e]=n.receiver,t.components[e]=n.Component})),(0,u.Z)(this,"yikesInjectStore",(function(e){t.yikesExtraStore=e})),(0,u.Z)(this,"injectServices",(function(e){t.services=e})),(0,u.Z)(this,"handleError",(function(e){var n=e.error,r=e.pluginType,i=e.source,o=e.pud;if(0===t.errorHandlers.length)return ne.error("Plugin with type ",r," errored in ",i," error is: "),void ne.error(n);t.errorHandlers.forEach((function(e){return e({error:n,pluginType:r,source:i,pud:o})}))})),(0,u.Z)(this,"registerErrorHandler",(function(e){return t.errorHandlers.push(e),function(){t.errorHandlers=t.errorHandlers.filter((function(t){return t!==e}))}})),window.performance.clearMarks("create-workspace"),window.performance.mark("create-workspace"),this.wid=""+Math.random(),this.reducers={},this.receivers={},this.components={},this.pluginStores={},this.yikesExtraStore={getState:function(){return{}},subscribe:function(){return function(){}},dispatch:function(){}},this.errorHandlers=[];var n=[];this.classicStoreFor=function(e){var i={};if(t.pluginStores[e])return t.pluginStores[e];var o=t,c={getState:function(){return{get user(){return i.user=!0,o.yikesExtraStore.getState().user},get banners(){return i.banners=!0,o.yikesExtraStore.getState().banners},get replEnvironment(){return i.replEnvironment=!0,o.yikesExtraStore.getState().replEnvironment},get repls(){throw new Error("Please use repl shared reducer")},get replsByUrl(){throw new Error("Please use repl shared reducer")},get replsByUser(){throw new Error("Please use repl shared reducer")},get files(){throw new Error("Please use files shared reducer")},get messages(){return i.messages=!0,o.yikesExtraStore.getState().messages},get plans(){return i.plans=!0,o.yikesExtraStore.getState().plans},workspace:(0,u.Z)({},t.wid,t.store.getState()),get services(){return o.services}}},subscribe:function(n){var r={},o={},a=ie.reduce((function(e,n){return e[n]=t.store.getState()[n],e}),{});return t.store.subscribe((function(){var l=t.store.getState().plugins[e];if(l!==r)return r=l,void n();var c=!1,s=t.yikesExtraStore.getState();for(var u in i)s[u]!==o[u]&&(o[u]=s[u],c=!0);var d=t.store.getState();for(var f in a)d[f]!==a[f]&&(a[f]=d[f],c=!0);c&&n()}))},dispatch:function(i){if(i.type){var o={};i.path&&(o={path:i.path}),h.n_({category:"redux",message:"workspace action",data:(0,f.Z)({type:i?i.type:null},o)})}if(i.wid||"function"===typeof i){var c=re(t.classicStoreFor(e))(r(l)(a))(i),s=!0,u=!1,d=void 0;try{for(var p,v=n[Symbol.iterator]();!(s=(p=v.next()).done);s=!0){p.value.cb()}}catch(m){u=!0,d=m}finally{try{s||null==v.return||v.return()}finally{if(u)throw d}}return c}return t.yikesExtraStore.dispatch(i)}};return t.pluginStores[e]=c,c};var r=v(this.classicStoreFor,this.wid,this.receivers,this.handleError),i=w(this.wid,this.reducers,this.handleError),o=i(void 0,{type:"@@INIT"}),a=function(e){o=i(o,e)},l={getState:function(){return o},subscribe:function(e){var t=function(){n=n.filter((function(e){return e.unsub!==t}))};return n.push({cb:e,unsub:t}),t},dispatch:function(e){if(e.type){var t={};e.path&&(t={path:e.path}),h.n_({category:"redux",message:"workspace action",data:(0,f.Z)({type:e?e.type:null},t)})}var i=re(l)(r(l)(a))(e),o=!0,c=!1,s=void 0;try{for(var u,d=n[Symbol.iterator]();!(o=(u=d.next()).done);o=!0){u.value.cb()}}catch(p){c=!0,s=p}finally{try{o||null==d.return||d.return()}finally{if(c)throw s}}return i}};window.store=l,this.store=l}return(0,s.Z)(e,[{key:"component",value:function(){var e=this;return function(){return(0,o.tZ)(ae,{store:e.store,classicStoreFor:e.classicStoreFor,wid:e.wid,pluginComponents:e.components,handleError:e.handleError})}}}]),e}(),ae=function(e){(0,d.Z)(n,e);var t=(0,p.Z)(n);function n(){return(0,c.Z)(this,n),t.apply(this,arguments)}return(0,s.Z)(n,[{key:"componentDidMount",value:function(){this.props.store.dispatch({type:"WORKSPACE_MOUNTED"})}},{key:"componentWillUnmount",value:function(){this.props.store.dispatch({type:"WORKSPACE_WILL_UNMOUNT"})}},{key:"render",value:function(){return(0,o.tZ)("div",{style:{height:"100%",position:"relative",display:"flex"},children:(0,o.tZ)(te,{wid:this.props.wid,store:this.props.store,classicStoreFor:this.props.classicStoreFor,pluginComponents:this.props.pluginComponents,handleError:this.props.handleError})})}}]),n}(a.Component);function le(e){var t=e.wid,n=e.pluginPud,r=e.pluginType,i=e.title,o=e.initialState,a=e.isClosable,l=void 0!==a&&a,c=e.isDraggable;return{type:"LOAD_PLUGIN",wid:t,pluginPud:n,pluginType:r,title:i,initialState:o,isClosable:l,isDraggable:void 0!==c&&c}}var ce=n(34727),se=n(70655),ue=n(32692),de=n(31230),fe=n(37887);function pe(){var e=(0,ue.Z)(["\n  fragment GitCurrentUser on CurrentUser {\n    id\n    fullName\n    username\n    gitHubInfo {\n      accessToken\n      installations {\n        id\n        type\n        name\n        avatarUrl\n      }\n      userInfo {\n        name\n        email\n        avatarUrl\n      }\n    }\n  }\n"]);return pe=function(){return e},e}function he(){var e=(0,ue.Z)(["\n  query GitHubRepoCreationModal($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        title\n        isPrivate\n        isRenamed\n        description\n      }\n    }\n  }\n"]);return he=function(){return e},e}function ve(){var e=(0,ue.Z)(["\n  query GitCurrentUser {\n    currentUser {\n      id\n      ...GitCurrentUser\n    }\n  }\n  ","\n"]);return ve=function(){return e},e}var me={},ge=(0,de.Ps)(pe()),ye=(0,de.Ps)(he());var Ze=(0,de.Ps)(ve(),ge);var be=n(92776),we=n(30019);function xe(e,t,n){var r=e.workspace[t].plugins[n];if("git"!==r.type)throw new Error("expected type to be git");return r.state}function Ee(e,t,n){return[(0,E.v9)((function(n){return xe(n,e,t)}),n),function(){throw new Error("Not implemented")}]}var Ce=n(16799),Se=n(67128),Te=n(60018),ke=n(54098),_e=n.n(ke),Re=n(92157),De="https://api.github.com",Ie=function(e){(0,d.Z)(n,e);var t=(0,p.Z)(n);function n(){var e;return(0,c.Z)(this,n),(e=t.call(this)).message="GitHub Auth Error",e}return n}((0,Te.Z)(Error)),Pe=function(e){(0,d.Z)(n,e);var t=(0,p.Z)(n);function n(){var e;return(0,c.Z)(this,n),(e=t.call(this)).message="GitHub Repo Already Exists",Error.captureStackTrace&&Error.captureStackTrace((0,x.Z)(e),n),e.name="GitHubRepoAlreadyExistsError",e}return n}((0,Te.Z)(Error));function Ge(e,t){return Be.apply(this,arguments)}function Be(){return(Be=(0,ce.Z)((function(e,t){var n,r,o,a,l;return(0,se.__generator)(this,(function(c){switch(c.label){case 0:return n=(0,i.Z)((0,Re.JE)(t),2),r=n[0],o=n[1],a={cache:"no-store"},e&&(a.headers={Authorization:"Bearer ".concat(e)}),[4,_e()("".concat(De,"/repos/").concat(r,"/").concat(o),a)];case 1:return[4,Oe(c.sent())];case 2:return l=c.sent(),[2,(0,f.Z)({},l)]}}))}))).apply(this,arguments)}function Ae(e){return Ue.apply(this,arguments)}function Ue(){return(Ue=(0,ce.Z)((function(e){var t,n,r,i,o;return(0,se.__generator)(this,(function(a){switch(a.label){case 0:if(t=e.token,n=e.owner,r=e.ownerType,i=e.repoData,!t)throw new Error("Unable to create repository");return"User"!==r?[3,2]:[4,_e()("".concat(De,"/user/repos"),{method:"POST",headers:{Authorization:"Bearer ".concat(t)},body:JSON.stringify(i)})];case 1:return o=a.sent(),[3,4];case 2:return[4,_e()("".concat(De,"/orgs/").concat(n,"/repos"),{method:"POST",headers:{Authorization:"Bearer ".concat(t),Accept:"application/vnd.github.nebula-preview+json"},body:JSON.stringify(i)})];case 3:o=a.sent(),a.label=4;case 4:return[2,Oe(o)]}}))}))).apply(this,arguments)}function Oe(e){return Ne.apply(this,arguments)}function Ne(){return(Ne=(0,ce.Z)((function(e){var t,n,r;return(0,se.__generator)(this,(function(i){switch(i.label){case 0:return e.ok?[2,e.json()]:[4,e.json()];case 1:switch(t=i.sent(),n=new Error("Bad GitHub Response"),e.status){case 401:case 404:n=new Ie;break;case 422:(null===t||void 0===t||null===(r=t.errors)||void 0===r?void 0:r.length)>0&&t.errors[0].message.startsWith("name already exists")&&(n=new Pe)}throw n}}))}))).apply(this,arguments)}var Le=n(81516),Fe=n(60977),Xe=new(function(){function e(){(0,c.Z)(this,e),this.map=new WeakMap}return(0,s.Z)(e,[{key:"getHandle",value:function(e){if(!e||"object"!==typeof e&&"function"!==typeof e)throw new Error("Only objects");var t={type:"handle",identity:e.constructor?Object.prototype.toString.call(e.constructor):Object.prototype.toString.call(e)};return this.map.set(t,e),t}},{key:"get",value:function(e){return this.map.get(e)}},{key:"safeGet",value:function(e){if(!e)throw new Error("Expected object handle to be truthy");var t=this.map.get(e);if(!t)throw new Error("Expected object handle to return object");return t}}]),e}()),Me=n(84519);function We(){return je.apply(this,arguments)}function je(){return(je=(0,ce.Z)((function(){var e;return(0,se.__generator)(this,(function(t){switch(t.label){case 0:if(!Le.l)throw new Error("Expected apollo");return[4,Le.l.query({query:Ze})];case 1:if(!(null===(e=t.sent().data)||void 0===e?void 0:e.currentUser))throw new Error("Expected current user");return[2,e.currentUser]}}))}))).apply(this,arguments)}function He(e){var t=e.cmd,n=e.args,r=void 0===n?[]:n,i=e.wid,o=e.pud,a=t.format,l=t.parse;return function(){var e=(0,ce.Z)((function(e,n){var c,s,u,d,f,p;return(0,se.__generator)(this,(function(h){if(c=xe(n(),i,o),s=c.gitState,u=c.execer,d=c.isExecInProgress,f=c.execQueue,!u)throw new Error("Expected execer to be registered");if(!d){if(e({type:"SEND_GIT_EXEC_COMMAND",wid:i,pud:o}),!(p=Xe.get(u)))throw new Error("Expected exec handle to contain exec service");p.request({args:a.apply(void 0,[s].concat((0,y.Z)(r)))})}return 0===f.length||d?[2,new Promise((function(n,a){e({type:"QUEUE_GIT_EXEC",cmd:t,args:r,parser:void 0!==l?l:function(e){return e},callback:n,wid:i,pud:o})}))]:[2]}))}));return function(t,n){return e.apply(this,arguments)}}()}function ze(e){var t=e.history,n=void 0!==t&&t,r=e.write,i=void 0!==r&&r,o=e.persist,a=void 0!==o&&o,l=e.persistMirror,c=void 0!==l&&l,s=e.prefer,u=void 0===s?null:s,d=e.wid,f=e.pud;return function(){var e=(0,ce.Z)((function(e,t){var r,o,l,s,p,h,v,m,g,y,Z,b,w,x,E;function C(t,n){return e(He({cmd:t,wid:d,pud:f,args:n}))}return(0,se.__generator)(this,(function(S){switch(S.label){case 0:return[4,C(Ce.bb)];case 1:return S.sent(),r=xe(t(),d,f),o=r.gitState,l=o.isInitialized,s=o.remote,l?[4,C(Ce.GE)]:[2];case 2:return S.sent(),[4,C(Ce.LO)];case 3:return S.sent(),i&&s?null!==u?[3,5]:[4,C(Ce.kT)]:[3,16];case 4:S.sent(),S.label=5;case 5:return xe(t(),d,f).gitState.hasConflictsWithFetchedRemote||null!==u?"remote"!==u?[3,8]:[4,C(Ce.cF)]:[3,12];case 6:return S.sent(),[4,C(Ce.VF)];case 7:return S.sent(),[3,11];case 8:return"repl"!==u?[3,11]:[4,C(Ce.Ud)];case 9:return S.sent(),[4,C(Ce.VF)];case 10:return S.sent(),[3,11];case 11:return[3,15];case 12:return[4,C(Ce.jW)];case 13:return S.sent(),[4,C(Ce.VF)];case 14:S.sent(),S.label=15;case 15:return[3,18];case 16:return n&&s?[4,C(Ce.jW)]:[3,18];case 17:S.sent(),S.label=18;case 18:return i||n||a?(p=t().services,h=p.fs,v=p.container,e({type:"SET_GIT_LOADING_STATE",wid:d,isLoading:!0}),[4,h.persist()]):[3,24];case 19:return S.sent().success?[3,21]:[4,h.persist()];case 20:S.sent(),S.label=21;case 21:return c?[4,(0,Me.r)(v)]:[3,23];case 22:S.sent(),S.label=23;case 23:e({type:"SET_GIT_LOADING_STATE",wid:d,isLoading:!1}),S.label=24;case 24:return m=xe(t(),d,f),g=m.gitState,y=g.remote,Z=!1,y&&(b=new Promise((function(e){setTimeout((function(){Z=!0,e()}),3e4)})),w=function(){var e=(0,ce.Z)((function(e){var n,r;return(0,se.__generator)(this,(function(i){switch(i.label){case 0:return n=e.deepen,Z?[2,Promise.reject()]:[4,C(Ce.he,[n])];case 1:return i.sent(),[4,C(Ce.cM)];case 2:return i.sent(),[4,C(Ce.zq)];case 3:return i.sent(),r=xe(t(),d,f),r.gitState.hasMergeBaseWithFetchedRemote?[3,5]:[4,w({deepen:!0})];case 4:i.sent(),i.label=5;case 5:return[2]}}))}));return function(t){return e.apply(this,arguments)}}(),Promise.race([w({deepen:!1}),b]).then((function(){var n=xe(t(),d,f).gitState,r=n.hasMergeBaseWithFetchedRemote,i=n.badState,o=n.remote;r||e({type:"UPDATE_GIT_STATE",updates:{badState:i===Se.$U.None&&o?Se.$U.NoMergeBase:i},wid:d,pud:f})}))),C(Ce.Pz),C(Ce.cM),[4,C(Ce.i7)];case 25:return S.sent(),[4,C(Ce.Hl)];case 26:return S.sent(),x=xe(t(),d,f),E=x.gitState.branch,C(Ce.k6,[E]),[2]}}))}));return function(t,n){return e.apply(this,arguments)}}()}function Ve(e){var t=e.wid,n=e.pud,r=e.remote;return function(){var e=(0,ce.Z)((function(e,i){var o,a,l,c,s,u,d,f,p;function h(r,i){return e(He({cmd:r,args:i,wid:t,pud:n}))}return(0,se.__generator)(this,(function(v){switch(v.label){case 0:return[4,e({type:"START_GIT_CLONE",wid:t})];case 1:return v.sent(),o=!!r.match(/^https?:\/\/github\.com/i),a=!!r.match(/^https?:\/\/api\.glitch\.com/i),[4,We()];case 2:if(l=v.sent(),o)try{(null===(c=l.gitHubInfo)||void 0===c?void 0:c.accessToken)&&(f=l.gitHubInfo,e({type:"UPDATE_GIT_STATE",updates:{remoteToken:f.accessToken,gitHubName:null===(s=f.userInfo)||void 0===s?void 0:s.name,gitHubEmail:null===(u=f.userInfo)||void 0===u?void 0:u.email,gitHubAvatarUrl:null===(d=f.userInfo)||void 0===d?void 0:d.avatarUrl,installations:f.installations},wid:t,pud:n}))}catch(m){}return[4,h(Ce.D6,[l])];case 3:return v.sent(),[4,h(Ce.M7,[r])];case 4:return v.sent(),[4,h(Ce.LO)];case 5:return v.sent(),[4,e({type:"START_CLONE_PROGRESS",wid:t,pud:n})];case 6:return v.sent(),[4,h(a?Ce.TE:Ce.he)];case 7:return v.sent(),[4,h(Ce.Di)];case 8:return v.sent(),[4,h(Ce.xY)];case 9:return v.sent(),[4,e({type:"END_CLONE_PROGRESS",wid:t,pud:n})];case 10:return v.sent(),a?[3,12]:[4,e(ze({wid:t,pud:n,history:!0}))];case 11:return v.sent(),[3,15];case 12:return[4,h(Ce.i7)];case 13:return v.sent(),[4,new Promise((function(e){return setTimeout(e,1e3)}))];case 14:v.sent(),v.label=15;case 15:return p=function(){var r=xe(i(),t,n),o=r.execQueue,a=r.isExecInProgress;0!==o.length||a?setTimeout(p,1e3):e({type:"END_GIT_CLONE",wid:t})},p(),[2]}}))}));return function(t,n){return e.apply(this,arguments)}}()}function qe(e,t){return function(){var n=(0,ce.Z)((function(n){var r;function i(r,i){return n(He({cmd:r,args:i,wid:e,pud:t}))}return(0,se.__generator)(this,(function(o){switch(o.label){case 0:return[4,We()];case 1:return r=o.sent(),[4,i(Ce.Hl)];case 2:return o.sent(),[4,i(Ce.th,["Initial commit",r])];case 3:return o.sent(),[4,n(ze({wid:e,pud:t,write:!0}))];case 4:return o.sent(),[2]}}))}));return function(e){return n.apply(this,arguments)}}()}function Ke(e,t){return function(){var n=(0,ce.Z)((function(n){var r;function i(r,i){return n(He({cmd:r,args:i,wid:e,pud:t}))}return(0,se.__generator)(this,(function(o){switch(o.label){case 0:return[4,We()];case 1:return r=o.sent(),[4,i(Ce.GE)];case 2:return o.sent(),[4,i(Ce.th,["Initial commit",r,!0])];case 3:return o.sent(),[4,i(Ce.Hl)];case 4:return o.sent(),[4,n(ze({wid:e,pud:t,write:!0}))];case 5:return o.sent(),[2]}}))}));return function(e){return n.apply(this,arguments)}}()}function $e(e){var t=e.wid,n=e.pud;return function(){var e=(0,ce.Z)((function(e,r){var i,o,a,l,c,s,u,d,f;return(0,se.__generator)(this,(function(p){switch(p.label){case 0:return[4,e(He({cmd:Ce.LO,wid:t,pud:n}))];case 1:if(p.sent(),i=xe(r(),t,n),o=i.gitState,a=o.remote,l=o.remoteToken,c=!1,!a||!l)return[3,6];p.label=2;case 2:return p.trys.push([2,5,,6]),[4,Ge(l,a)];case 3:return s=p.sent(),u=s.permissions,d=s.id,f=s.owner,c=u&&u.push,[4,e({type:"UPDATE_GIT_STATE",pud:n,wid:t,updates:{repoId:d,ownerId:f.id}})];case 4:return p.sent(),[3,6];case 5:return p.sent(),[3,6];case 6:return e({type:"GIT_REMOTE_CHECKED",wid:t,canPush:c,remote:a}),[2]}}))}));return function(t,n){return e.apply(this,arguments)}}()}var Ye=n(41847),Qe=n(50055),Je=n(11887);function et(e,t,n){switch(n.type){case"WORKSPACE_MOUNTED":return function(){var n=(0,ce.Z)((function(n,r){var i;function o(e){return a.apply(this,arguments)}function a(){return(a=(0,ce.Z)((function(o){var a,l,c,s;return(0,se.__generator)(this,(function(u){switch(u.label){case 0:return o!==Je.em.CONNECTED?[2]:(a=xe(r(),e,t),l=a.gitState,(c=(0,Ye.Z)({container:i})).onOutput((function(n){xe(r(),e,t).shouldDisplayCloneLogs})),c.onStateChanged((function(i){var o=i.state,a=i.outputBuffer,l=xe(r(),e,t).execQueue;o===Qe.api.State.Stopped&&0!==l.length&&n({type:"EXIT_GIT_EXEC_COMMAND",output:a,wid:e})})),n({type:"REGISTER_EXECER_SERVICE_HANDLE",execer:Xe.getHandle(c),wid:e,pud:t}),l.remoteToken?[3,2]:[4,n($e({wid:e,pud:t}))]);case 1:u.sent(),u.label=2;case 2:return(s=l.remote)?[4,n(He({cmd:Ce.bb,wid:e,pud:t}))]:[2];case 3:return u.sent(),xe(r(),e,t).gitState.isInitialized||((0,Fe.j)(Fe.U3.VERSION_CONTROL_FEATURE_USED,{action:"cloned"}),n(Ve({remote:s,wid:e,pud:t}))),[2]}}))}))).apply(this,arguments)}return(0,se.__generator)(this,(function(e){return(i=r().services.container).getConnectionState()===Je.em.CONNECTED?o(Je.em.CONNECTED):i.onConnectionStateChanged(o),[2]}))}));return function(e,t){return n.apply(this,arguments)}}();case"FILE_CLEAN":return function(n,r){var i=xe(r(),e,t),o=i.gitState,a=i.hasOpened;o.isInitialized&&a&&n(He({cmd:Ce.i7,wid:e,pud:t}))};case"EXIT_GIT_EXEC_COMMAND":return function(){var r=(0,ce.Z)((function(r,i){var o,a,l,c,s,u;return(0,se.__generator)(this,(function(d){switch(d.label){case 0:return o=xe(i(),e,t),a=o.execQueue[0],l=Xe.safeGet(a.parser),c=Xe.safeGet(a.callback),[4,r({type:"DEQUEUE_GIT_EXEC",wid:e,pud:t})];case 1:return d.sent(),[4,r({type:"UPDATE_GIT_STATE",updates:(0,f.Z)({},l(o.gitState,n.output)),wid:e,pud:t})];case 2:return d.sent(),c(),(s=xe(i(),e,t)).execQueue.length>0&&(u=s.execQueue[0],r(He({cmd:u.cmd,args:u.args,wid:e,pud:t}))),[2]}}))}));return function(e,t){return r.apply(this,arguments)}}();case"START_GIT_CLONE":return function(){var t=(0,ce.Z)((function(t){return(0,se.__generator)(this,(function(n){return t({type:"LOCK_WORKSPACE",showSpinner:!0,reason:"Cloning",wid:e}),[2]}))}));return function(e){return t.apply(this,arguments)}}();case"END_GIT_CLONE":return function(){var n=(0,ce.Z)((function(n){return(0,se.__generator)(this,(function(r){switch(r.label){case 0:return n({type:"UNLOCK_WORKSPACE",wid:e}),[4,n($e({wid:e,pud:t}))];case 1:return r.sent(),[2]}}))}));return function(e){return n.apply(this,arguments)}}();case"GITHUB_REPOSITORY_CREATED":case"CHECK_GIT_REMOTE":return function(){var n=(0,ce.Z)((function(n){return(0,se.__generator)(this,(function(r){switch(r.label){case 0:return[4,n($e({wid:e,pud:t}))];case 1:return r.sent(),[2]}}))}));return function(e){return n.apply(this,arguments)}}();default:return null}}var tt,nt=function(e,t){switch(t.type){case"@@INIT":return{gitState:{isInitialized:!1,hasConflictsWithFetchedRemote:!1,hasMergeBaseWithFetchedRemote:!0,authError:Se.l4.NONE,badState:Se.$U.None,remote:t.initialState.gitRemoteUrl||"",repoId:null,branch:"",defaultBranch:"main",branches:[],installations:[],changedFiles:[],commits:[],commitsAhead:null,commitsBehind:null,remoteToken:null,gitHubName:null,ownerId:null,gitHubAvatarUrl:null,gitHubEmail:null},hasOpened:!1,isSidebarVisible:!1,isCloneInProgress:!1,shouldDisplayCloneLogs:!1,isExecInProgress:!1,isLoading:!0,execQueue:[],execer:null};case"REGISTER_EXECER_SERVICE_HANDLE":return(0,m.Z)((0,f.Z)({},e),{execer:t.execer});case"SEND_GIT_EXEC_COMMAND":return(0,m.Z)((0,f.Z)({},e),{isExecInProgress:!0,isLoading:!0});case"EXIT_GIT_EXEC_COMMAND":return(0,m.Z)((0,f.Z)({},e),{isExecInProgress:!1});case"QUEUE_GIT_EXEC":var n=Xe.getHandle(t.parser),r=Xe.getHandle(t.callback);return(0,m.Z)((0,f.Z)({},e),{execQueue:e.execQueue.concat({cmd:t.cmd,args:t.args,parser:n,callback:r})});case"DEQUEUE_GIT_EXEC":return(0,m.Z)((0,f.Z)({},e),{execQueue:e.execQueue.slice(1)});case"START_GIT_CLONE":return(0,m.Z)((0,f.Z)({},e),{isCloneInProgress:!0});case"START_CLONE_PROGRESS":return(0,m.Z)((0,f.Z)({},e),{shouldDisplayCloneLogs:!0});case"END_CLONE_PROGRESS":return(0,m.Z)((0,f.Z)({},e),{shouldDisplayCloneLogs:!1});case"END_GIT_CLONE":return(0,m.Z)((0,f.Z)({},e),{isCloneInProgress:!1});case"SET_GIT_LOADING_STATE":return(0,m.Z)((0,f.Z)({},e),{isLoading:t.isLoading});case"UPDATE_GIT_STATE":return(0,m.Z)((0,f.Z)({},e),{gitState:(0,f.Z)({},e.gitState,t.updates),isLoading:(t.updates.badState!==Se.$U.None||t.updates.authError!==Se.l4.NONE)&&(e.execQueue.length>0||e.isCloneInProgress)});case"SET_GIT_SIDEBAR_VISIBILITY":return(0,m.Z)((0,f.Z)({},e),{isSidebarVisible:t.isSidebarVisible,hasOpened:!0});default:return e}},rt=n(60357),it=n.n(rt),ot=n(6951),at=n(40381),lt=n(64375),ct=n(93373),st=function(e,t){var n=(0,Re.mJ)(t),r="";switch(e){case Se.l4.PUSH:r="push to ".concat(n);break;case Se.l4.FETCH:r="fetch from ".concat(n);break;case Se.l4.CLONE:r="clone from ".concat(n);break;case Se.l4.GITHUB_CREATE:case Se.l4.GITHUB_GET_INFO:default:r="create new repositories"}return"Please grant Replit permission to access GitHub on your behalf. As well, confirm that "+(e===Se.l4.FETCH?"".concat(n," exists and you have permission to fetch from it."):"you have permission to ".concat(r,"."))},ut=function(e){var t=e.repoId,n=e.ownerId,r=e.wid,c=e.pud,s=e.authError,u=e.onAuth,d=(0,E.I0)(),f=(0,E.v9)((function(e){return xe(e,r,c)})).gitState,p="Connect to GitHub";f.remote&&(p="Unable to connect to this repository");var h=(0,lt.v)({suggestedRepoId:t,ownerId:n,onAuth:(0,ce.Z)((function(){return(0,se.__generator)(this,(function(e){return g(!1),u(),d({type:"UPDATE_GIT_STATE",updates:{authError:Se.l4.NONE,badState:Se.$U.None},wid:r,pud:c}),[2]}))}))}),v=(0,i.Z)(a.useState(!0),2),m=v[0],g=v[1];return(0,o.tZ)(l.u_,{onRequestClose:function(){g(!1),s!==Se.l4.FETCH?d({type:"UPDATE_GIT_STATE",updates:{authError:Se.l4.NONE},wid:r,pud:c}):d({type:"UPDATE_GIT_STATE",updates:{badState:Se.$U.AuthFetchError},wid:r,pud:c})},isOpen:m,children:(0,o.BX)(l.G7,{css:[l.l0.colWithGap(24)],children:[(0,o.tZ)(l.h4,{level:1,variant:"headerDefault",children:p}),(0,o.BX)(l.G7,{css:[l.l0.colWithGap(8)],children:[(0,o.tZ)(l.xv,{multiline:!0,children:st(s,f.remote)}),(0,o.BX)(l.xv,{multiline:!0,children:["See"," ",(0,o.tZ)("a",{href:"https://docs.replit.com/programming-ide/using-git-on-replit/github-auth-errors",target:"_blank",rel:"noreferrer",children:"our docs"})," ","for more help with GitHub authentication errors."]})]}),(0,o.tZ)(l.G7,{css:[l.l0.rowWithGap(12),l.l0.justify.end],children:(0,o.tZ)(l.zx,{colorway:"primary",onClick:h,text:"Connect Replit to your GitHub Account",iconLeft:(0,o.tZ)(ct.Z,{})})})]})})},dt=n(30992),ft=n(94561),pt=n(27206),ht=n(34193),vt=function(e){return e.trim().split(" ").join("-")},mt=function(e){var t=e.isOpen,n=e.isCreatingBranch,r=e.onClose,i=e.currentBranch,a=e.branches,l=e.successHandler;if(!t)return null;var c=(0,dt.Y)("",(function(e){return e?a.includes(vt(e))?{message:"* this branch name already exists"}:void 0:{message:"* branch names cannot be blank"}})),s=function(){var e=(0,ce.Z)((function(e){return(0,se.__generator)(this,(function(t){return e.preventDefault(),c.validate()||l(vt(c.value)),[2]}))}));return function(t){return e.apply(this,arguments)}}();return(0,o.tZ)(ht.Z,{onRequestClose:r,isOpen:!0,children:(0,o.BX)("div",{className:"jsx-4a406bdd6aef82a6 container",children:[(0,o.BX)("form",{onSubmit:s,autoComplete:"off",className:"jsx-4a406bdd6aef82a6",children:[(0,o.tZ)("h1",{className:"jsx-4a406bdd6aef82a6",children:"Create a new branch"}),(0,o.tZ)("h2",{className:"jsx-4a406bdd6aef82a6",children:n?"Creating your new branch":"This branch will be created from ".concat(i)}),(0,o.tZ)("div",{className:"jsx-4a406bdd6aef82a6 creation-error",children:c.error?c.error.message:null}),(0,o.tZ)("div",{className:"jsx-4a406bdd6aef82a6 section",children:(0,o.tZ)(pt.ZP,{value:c.value,type:"text",autoFocus:!0,name:"branch-name",autoComplete:"off",onChange:function(e){c.setValue(e.currentTarget.value)},placeholder:"name your branch (required)",onFocus:function(e){return e.target.select()}})}),(0,o.tZ)(ot.Z,{type:"submit","data-testid":"git-confirm-github-repo",color:"primary",filled:!0,children:n?(0,o.BX)("span",{className:"jsx-4a406bdd6aef82a6",children:["creating",(0,o.tZ)(ft.Z,{style:{fontSize:"20px",padding:"1px"}})]}):"create"})]}),(0,o.tZ)(it(),{id:"4a406bdd6aef82a6",children:".container.jsx-4a406bdd6aef82a6{font-size:1rem;width:510px;padding:60px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:start;-webkit-align-items:flex-start;-moz-box-align:start;-ms-flex-align:start;align-items:flex-start;height:100%;color:var(--foreground-default)}.container.jsx-4a406bdd6aef82a6 form.jsx-4a406bdd6aef82a6{width:90%}.container.jsx-4a406bdd6aef82a6 h1.jsx-4a406bdd6aef82a6{font-size:23px;margin-bottom:10px;font-weight:normal}.container.jsx-4a406bdd6aef82a6 h2.jsx-4a406bdd6aef82a6{color:var(--foreground-dimmer);font-size:16px;margin-bottom:15px;font-weight:normal}.creation-error.jsx-4a406bdd6aef82a6{min-height:16px;margin:10px;color:var(--accent-negative-default)}.section.jsx-4a406bdd6aef82a6{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;padding-bottom:25px;width:100%}"})]})})},gt=n(92002),yt=function(e){var t=e.checkoutBranch,n=e.gitState,r=e.isLoading,i=(0,a.useState)(!1),c=i[0],s=i[1];(0,a.useEffect)((function(){!r&&c&&s(!1)}),[r,s]);var u,d,f=(u=n.branches,d=n.defaultBranch,0===u.length?[]:u.sort((function(e){return e===d?-1:0})).map((function(e){return{title:e}})));return(0,o.BX)(l.G7,{css:[l.l0.rowWithGap(8),l.l0.align.center],children:[(0,o.tZ)(l.G7,{css:[l.l0.flex.growAndShrink(1)],children:(0,o.tZ)(l.Ph,{items:f,selectedItem:f.find((function(e){return e.title===n.branch})),onChange:function(e){e.title!==n.branch&&t(e.title)}})}),(0,o.tZ)(l.hU,{onClick:function(){s(!0)},alt:"Create new branch",css:[l.l0.width(32),l.l0.height(32),l.gU.filled],children:(0,o.tZ)(gt.Z,{})}),(0,o.tZ)(mt,{branches:n.branches,currentBranch:n.branch,isCreatingBranch:c&&r,isOpen:c,onClose:function(){return s(!1)},successHandler:function(e){t(e)}})]})},Zt=n(61756),bt=n(1144),wt=n(1879),xt=n(69346),Et=n(81255),Ct=n(57704),St=n(99408),Tt=n(97648),kt=n(70931),_t=function(e){var t=(0,St.Z)().container,n=(0,kt.J)(e.remote),r=n?"".concat(n.username,"/").concat(n.repository):e.remote,i=(0,be.I)();return(0,o.BX)(xt.G,{css:[Et.l0.colWithGap(16)],children:[(0,o.BX)(bt.h,{variant:"headerDefault",level:2,children:["Remove ",r," as a remote?"]}),(0,o.BX)(bt.x,{multiline:!0,children:["Are you sure you want to remove ",r,"?"]}),(0,o.BX)(bt.x,{multiline:!0,children:["This can be undone by re-connecting to the repository in the Git sidebar or running ",(0,o.BX)(Tt.Z,{children:["git remote add origin ",e.remote]})," ","in the Shell."]}),(0,o.BX)(xt.G,{css:[Et.l0.rowWithGap(12),Et.l0.justify.end],children:[(0,o.tZ)(l.zx,{text:"Cancel",onClick:e.hideModal}),(0,o.tZ)(l.zx,{iconLeft:(0,o.tZ)(Ct.Z,{}),onClick:function(){var n;(n=t).exec.apply(n,(0,y.Z)(Ce.rO.format(Se.Xe))),i(ze({wid:e.wid,pud:e.pud})),e.hideModal()},text:"Yes, remove ".concat(r),colorway:"negative"})]})]})},Rt=n(29163),Dt=n(75301),It=n(38630);function Pt(e){var t=e.count,n=e.message;return(0,o.BX)(bt.x,{children:[(0,o.tZ)(bt.x,{css:Et.l0.fontWeight.bold,children:t})," ",(0,o.tZ)(bt.x,{color:"dimmer",children:n})]})}!function(e){e.RemoveRemote="RemoveRemote",e.ConnectExistingRemote="ConnectExistingRemote"}(tt||(tt={}));var Gt=function(e){var t=e.branch,n=e.commitsBehind;return e.isLoading?(0,o.tZ)(bt.x,{children:" checking latest changes... "}):t?null===n?null:n&&1===n?(0,o.tZ)(Pt,{count:1,message:"commit behind ".concat(t)}):n&&n>1?(0,o.tZ)(Pt,{count:n,message:"commits behind ".concat(t)}):(0,o.BX)(bt.x,{children:["up to date with ",t]}):(0,o.tZ)(bt.x,{children:"could not find a default branch - try adding some commits!"})},Bt=function(e){var t=e.gitState,n=e.isLoading,r=e.pull,l=e.setExistingRepoConnectionIsOpen,c=e.setGitHubCreationModalOpen,s=e.wid,u=e.pud,d=""!==t.remote,f=(0,i.Z)(a.useState(null),2),p=f[0],h=f[1];return(0,o.BX)(xt.G,{css:[Et.l0.colWithGap(16)],children:[d?(0,o.BX)(xt.G,{css:[Et.l0.rowWithGap(8),Et.l0.justify.spaceBetween,Et.l0.align.center,Et.l0.width("100%")],children:[(0,o.BX)(xt.G,{css:[Et.l0.rowWithGap(8),Et.l0.align.center,Et.l0.flex.growAndShrink(1)],title:"Repository origin: ".concat(t.remote),children:[(0,o.tZ)(ct.Z,{size:16}),(0,o.tZ)(xt.G,{tag:"a",css:[Et.l0.truncate,Et.l0.flex.growAndShrink(1)],href:t.remote,target:"_blank",rel:"noreferrer noopener",children:(0,Re.mJ)(t.remote)})]}),(0,o.tZ)(Rt.h,{alt:"Remove remote",colorway:"negative",onClick:function(){return h(tt.RemoveRemote)},children:(0,o.tZ)(Ct.Z,{})})]}):(0,o.BX)(xt.G,{css:[Et.l0.rowWithGap(8),Et.l0.align.center,Et.l0.maxWidth("100%"),Et.l0.width("100%")],children:[(0,o.tZ)(Zt.zx,{stretch:!0,onClick:function(){c(!0)},iconLeft:(0,o.tZ)(ct.Z,{}),text:t.remoteToken?"New repo":"Connect to GitHub",css:[Et.l0.flex.grow(1)]}),t.remoteToken?(0,o.tZ)(Zt.zx,{stretch:!0,text:"Existing repo",onClick:function(){return l(!0)},iconLeft:(0,o.tZ)(Dt.Z,{}),css:[Et.l0.flex.grow(1)]}):null]}),d?(0,o.BX)(xt.G,{css:[Et.l0.flex.row,Et.l0.flex.wrap,Et.l0.justify.spaceBetween],children:[(0,o.tZ)(Gt,{branch:t.branch,commitsBehind:t.commitsBehind,isLoading:n}),t.commitsBehind&&t.commitsBehind>0?(0,o.tZ)(Zt.zx,{colorway:"warning",onClick:r,text:"Pull",iconRight:(0,o.tZ)(It.Z,{})}):null]}):null,(0,o.tZ)(wt.u,{isOpen:p===tt.RemoveRemote,onRequestClose:function(){return h(null)},maxWidth:512,children:(0,o.tZ)(_t,{remote:t.remote,hideModal:function(){return h(null)},wid:s,pud:u})})]})},At=n(16449),Ut=n(94158),Ot=n(9517),Nt=n(75444),Lt=n(37552),Ft=n(66060);function Xt(e){var t=e.gitCommit,n=e.gitPush,r=e.gitAddAll,i=e.hasRemote,a=e.hasChangedFiles,l=e.hasStagedFiles,c=e.commitDisabled,s=[];return l||s.push("commit"),i||s.push("push"),(0,o.BX)(xt.G,{css:[Et.l0.rowWithGap(4),Et.l0.position.relative],children:[(0,o.tZ)("div",{css:[Et.l0.flex.growAndShrink(1)],children:(0,o.tZ)(Ft.u,{tooltip:"A commit summary is required to make a commit",placement:"right",isDisabled:!c,css:[Et.l0.flex.growAndShrink(1)],children:(0,o.tZ)(Zt.zx,{colorway:"primary",css:[Et.l0.flex.growAndShrink(1),{":disabled":{cursor:"not-allowed"}}],disabled:!a||c,iconRight:(0,o.tZ)(Ot.Z,{}),onClick:function(){c||(r(),t(),n())},text:"Commit All"+(i?" & Push":"")})})}),(0,o.BX)(Lt.ZE,{onAction:function(e){switch(e){case"commit":t();break;case"push":n()}},disabledKeys:s,children:[(0,o.tZ)(Lt.ck,{children:(0,o.BX)(Ft.u,{tooltip:"You must stage some files using the plus icon beside a file before you can commit",placement:"right",isDisabled:l,children:[(0,o.tZ)(bt.x,{variant:"subheadDefault",css:l?[]:[Et.l0.color.foregroundDimmest],children:"Commit"}),(0,o.tZ)(bt.x,{variant:"text",css:l?[]:[Et.l0.color.foregroundDimmest],children:"Locally save your staged changes"})]})},"commit"),(0,o.tZ)(Lt.ck,{children:(0,o.BX)(Ft.u,{tooltip:"Push is only available if you have a GitHub repository connected",placement:"right",isDisabled:i,children:[(0,o.tZ)(bt.x,{variant:"subheadDefault",css:i?[]:[Et.l0.color.foregroundDimmest],children:"Push"}),(0,o.tZ)(bt.x,{variant:"text",css:i?[]:[Et.l0.color.foregroundDimmest],children:"Update remote repo with newest commits"})]})},"push")]})]})}var Mt=n(77365),Wt=function(e){switch(e.change){case Se.pD.UNTRACKED:return"new";case Se.pD.MODIFIED:return"modified";case Se.pD.MOVED:return"renamed";case Se.pD.DELETED:return"deleted";default:return""}},jt=function(e){switch(e){case Se.pD.UNTRACKED:return[l.l0.backgroundColor.accentPositiveDimmest,l.l0.border({color:l.TV.accentPositiveDefault}),l.l0.color.accentPositiveDefault];case Se.pD.MODIFIED:return[l.l0.backgroundColor.orangeDimmest,l.l0.border({color:l.TV.orangeDefault}),l.l0.color.orangeDefault];case Se.pD.MOVED:return[l.l0.backgroundColor.accentPrimaryDimmest,l.l0.border({color:l.TV.accentPrimaryDefault}),l.l0.color.accentPrimaryDefault];case Se.pD.DELETED:return[l.l0.backgroundColor.accentNegativeDimmest,l.l0.border({color:l.TV.accentNegativeStronger}),l.l0.color.accentNegativeStronger]}return[]},Ht=n(27354),zt=function(e){var t,n,r=e.file,i=e.active,a=e.handleChangedFileClick,c=e.isStaged,s=e.gitRestore,u=e.gitAdd,d=!1;if(r.targetPath.endsWith("/")){d=!0;var p=r.targetPath.substr(0,r.targetPath.length-1).split("/");t=p[p.length-1]+"/",n=p.slice(0,p.length-1).join("/")}else{var h=r.targetPath.split("/");t=h[h.length-1],n=h.slice(0,h.length-1).join("/")}var v=Wt(r),g=v.charAt(0).toUpperCase(),y=r.change!==Se.pD.DELETED,Z=(0,Ht.XI)({}),b=Z.hoverProps,w=Z.isHovered;return(0,o.BX)("div",(0,m.Z)((0,f.Z)({},b),{onClick:function(){!d&&y&&a(r.targetPath)},css:[l.l0.p(4),l.l0.height("100%"),l.l0.width("100%"),l.l0.flex.row,l.l0.align.center,l.l0.justify.spaceBetween,l.l0.rowWithGap(4),l.l0.borderRadius(8),l.l0.noSelect,l.l0.border({color:l.TV.backgroundHighest}),{marginBottom:l.TV.space4,cursor:y?"pointer":"not-allowed"},i?[l.l0.backgroundColor.accentPrimaryDefault,l.l0.border({color:"transparent"}),l.l0.color.white]:[l.l0.border({color:l.TV.backgroundHighest}),{"&:hover":{backgroundColor:l.TV.accentPrimaryDimmer}}]],children:[(0,o.BX)("div",{css:[l.l0.flex.row,l.l0.align.center,l.l0.rowWithGap(4),l.l0.overflow("hidden")],children:[(0,o.tZ)(l.hU,{css:[{"&:hover":[l.l0.color.black]}],alt:c?"Unstage":"Stage",onClick:(0,ce.Z)((function(){return(0,se.__generator)(this,(function(e){return c?s(r.targetPath,!0):u(r.targetPath),[2]}))})),children:c?(0,o.tZ)(Ut.Z,{}):(0,o.tZ)(gt.Z,{})}),c?null:(0,o.tZ)(l.hU,{css:[{"&:hover":[l.l0.color.black]}],alt:"Restore",onClick:(0,ce.Z)((function(){return(0,se.__generator)(this,(function(e){return s(r.targetPath,!1),[2]}))})),children:(0,o.tZ)(Nt.Z,{})}),(0,o.tZ)("div",{title:t,css:[l.l0.display.block,l.l0.flex.shrink(0),l.l0.maxWidth("60%"),l.l0.truncate,y&&{"&:hover":{textDecoration:"underline"}}],children:t}),(0,o.tZ)("div",{title:n,css:[l.l0.display.block,l.l0.flex.shrink(0),l.l0.maxWidth("60%"),l.l0.truncate,{opacity:.7},y&&{"&:hover":{textDecoration:"underline"}}],children:n})]}),(0,o.tZ)("div",{css:[l.l0.display.block,l.l0.flex.shrink(0),l.l0.ml(8),{whiteSpace:"nowrap"}],children:(0,o.tZ)("div",{css:[l.l0.flex.row,l.l0.align.center,l.l0.justify.center,l.l0.backgroundColor.backgroundHighest,l.l0.borderRadius(8),l.l0.color.black,l.l0.minWidth("24px"),l.l0.px(4),l.l0.py(2),jt(r.change)],children:(0,o.BX)("div",{children:[g,(0,o.tZ)("span",{css:[w?l.l0.display.inlineBlock:l.l0.display.none],children:v.substring(1)})]})})})]}))},Vt=function(e){var t=e.changedFiles,n="changed files or folders";if(1===t.length){var r=Wt(t[0])||"changed";n="".concat(r," file or folder")}return(0,o.tZ)(Pt,{count:t.length,message:n})},qt=function(e){var t=e.stagedFiles,n="staged files or folders";return 1===t.length&&(n="staged file or folder"),(0,o.tZ)(Pt,{count:t.length,message:n})},Kt=function(e){var t=e.branch,n=e.commitsAhead,r="commit ahead of";return n&&n>1&&(r="commits ahead of"),(0,o.tZ)(Pt,{count:n,message:"".concat(r," ").concat(t)})},$t=function(e){var t=e.disabled,n=e.onClick;return(0,o.tZ)(l.zx,{colorway:"primary",disabled:t,onClick:n,text:"Push",iconRight:(0,o.tZ)(Ot.Z,{})})},Yt=function(e){var t=e.activeFile,n=e.branch,r=e.changedFiles,i=e.commits,c=e.commitsAhead,s=e.commitsBehind,u=e.isLoading,d=e.remote,f=e.gitCommit,p=e.gitPush,h=e.gitAddAll,v=e.gitRestore,m=e.gitAdd,g=function(){var e=b.trim();""!==e&&(f(e),w(""))},y=function(e){S.openFile(e)},Z=(0,a.useState)(""),b=Z[0],w=Z[1],x=(0,a.useState)(!1),E=x[0],C=x[1],S=(0,St.Z)().session,T=r.filter((function(e){return e.isStaged})),k=r.filter((function(e){return!e.isStaged})),_=T.slice(0,E?T.length:3),R=k.slice(0,E?k.length:Math.max(3-_.length,0)),D=(0,At.Z)().ref,I=r.length>0,P=null!==c,G=null!==s,B=!!c&&c>0,A=!!s&&s>0;return u&&!I?(0,o.tZ)(l.G7,{css:[l.l0.center,l.l0.p(16)],children:(0,o.tZ)(Mt.Z,{})}):I||B||A||!P||!G?(0,o.BX)(l.G7,{css:[l.l0.colWithGap(16)],children:[B&&P?(0,o.tZ)(Kt,{branch:n,commitsAhead:c}):null,I||!B&&P?null:(0,o.tZ)(l.G7,{css:[l.l0.mb(16),l.l0.position.relative],children:(0,o.tZ)(l.u,{placement:"right",tooltip:"You do not have a remote repository to push to. Connect a remote github repository to push.",isDisabled:Boolean(d),children:(0,o.tZ)($t,{disabled:!d,onClick:p})})}),I?(0,o.BX)(l.G7,{css:[l.l0.colWithGap(8)],children:[(0,o.tZ)(l.B,{css:{resize:"vertical"},ref:D,required:!0,name:"commitAuthorInput",disabled:0===r.length,placeholder:i.length>0?"What did you change?":"What did you add?",value:b,onChange:function(e){w(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&(e.metaKey||e.ctrlKey)&&g()}}),(0,o.tZ)(Xt,{gitAddAll:h,gitCommit:g,gitPush:p,hasRemote:Boolean(d),hasChangedFiles:r.length>0,hasStagedFiles:T.length>0,commitDisabled:0===b.trim().length})]}):null,T.length?(0,o.BX)(l.G7,{css:l.l0.colWithGap(8),children:[(0,o.tZ)(qt,{stagedFiles:T}),(0,o.tZ)(l.G7,{children:_.map((function(e){return(0,o.tZ)(zt,{file:e,handleChangedFileClick:y,active:Boolean(t)&&t.endsWith(e.targetPath),isStaged:e.isStaged,gitRestore:v,gitAdd:m},e.targetPath)}))})]}):null,k.length?(0,o.BX)(l.G7,{css:l.l0.colWithGap(8),children:[(0,o.tZ)(Vt,{changedFiles:k}),(0,o.tZ)(l.G7,{children:R.map((function(e){return(0,o.tZ)(zt,{file:e,handleChangedFileClick:y,active:Boolean(t)&&t.endsWith(e.targetPath),isStaged:e.isStaged,gitRestore:v,gitAdd:m},e.targetPath)}))})]}):null,r.length>3&&(0,o.tZ)(l.zx,{css:[l.l0.backgroundColor.backgroundDefault,l.l0.color.foregroundDefault,l.l0.cursor.pointer,{textDecoration:"underline"},l.l0.width("100%")],onClick:function(){return C((function(e){return!e}))},text:E?"show fewer":"show all"})]}):(0,o.tZ)(l.xv,{color:"dimmer",children:"Your file changes will appear here."})},Qt=n(7055),Jt=n(30791),en=n(70917),tn={root:(0,en.iv)([l.l0.py(8),l.l0.pl(24),l.l0.position.relative]),line:(0,en.iv)([l.l0.position.absolute,l.l0.top(22),l.l0.left(8),l.l0.height("100%"),l.l0.width(1),l.l0.backgroundColor.outlineDimmest]),dot:(0,en.iv)([l.l0.position.absolute,l.l0.top(0),l.l0.left(0),l.l0.height(12),l.l0.width(12),l.l0.borderRadius("full"),{transform:"translateX(-50%)",border:"1px solid",borderColor:l.TV.outlineDimmest}])},nn=function(e){var t=e.children,n=e.renderDot,r=void 0===n||n;return(0,o.BX)(l.G7,{tag:"li",css:tn.root,children:[(0,o.tZ)(l.G7,{css:tn.line,children:r?(0,o.tZ)(l.Tg,{css:tn.dot}):null}),(0,o.tZ)(l.G7,{children:t})]})},rn={root:(0,en.iv)([l.l0.borderRadius(8),l.l0.colWithGap(8),l.l0.p(8),{border:"1px solid",borderColor:l.TV.outlineDimmer}]),author:(0,en.iv)([l.l0.colWithGap(4)]),commitHash:(0,en.iv)([l.l0.rowWithGap(8),l.l0.align.center,{"& a":l.l0.color.foregroundDimmer,"& a:hover":l.l0.color.foregroundDefault}])},on=function(e){var t=e.commit,n=e.handleRevertToCommit,r=e.displayTimeSinceUnix,i=e.gitHubLink;return(0,o.tZ)(nn,{children:(0,o.BX)(l.G7,{css:rn.root,children:[(0,o.tZ)(an,{message:t.message}),(0,o.BX)(l.G7,{css:rn.author,children:[(0,o.BX)(l.xv,{children:[t.authorName," \u2022"," ",(0,Qt.Z)(t.authorDate,r,{addSuffix:!0})]}),(0,o.tZ)(l.xv,{variant:"small",color:"dimmer",title:t.authorEmail,children:t.authorEmail})]}),(0,o.BX)(l.G7,{css:rn.commitHash,title:t.hash,children:[(0,o.tZ)(l.xv,{css:l.l0.font.code,variant:"small",children:t.hash.substring(0,9)}),null!==i?(0,o.tZ)(l.u,{tooltip:"See on GitHub",children:(0,o.tZ)(l.G7,{tag:"a",href:i,target:"_blank",rel:"noopener noreferer",children:(0,o.tZ)(ct.Z,{})})}):null]}),(0,o.tZ)(l.G7,{css:l.l0.flex.row,children:(0,o.tZ)(Zt.zx,{outlined:!0,colorway:"warning",small:!0,onClick:function(){return n(t)},text:"Revert to here"})})]})})},an=function(e){var t=e.message,n=(0,g.Z)(t.split("\n").filter((function(e){return Boolean(e.trim())})).map((function(e){return e.replace(/:[\w\-+]+:/g,(function(e){return Jt.$M[e.slice(1,-1)]||e}))}))),r=n[0],i=n.slice(1),c=i.length?i.join("\n"):null,s=(0,a.useState)(!1),u=s[0],d=s[1];return(0,o.BX)(l.G7,{children:[(0,o.tZ)(l.xv,{multiline:!0,children:r}),u?(0,o.tZ)(l.xv,{color:"dimmer",multiline:!0,children:c}):null,u?(0,o.tZ)("a",{href:"#",className:"more-link",onClick:function(){return d(!1)},children:"see less"},"more"):null,!u&&c?(0,o.tZ)("a",{href:"#",className:"more-link",onClick:function(){return d(!0)},children:"see more"},"more"):null]})},ln=function(e){var t=e.gitState,n=e.handleRevertToCommit,r=e.fetchMoreCommits,i=t.commits[t.commits.length-1],c=Boolean(i&&""!==i.parentHash),s=(0,a.useState)(Date.now()),u=s[0],d=s[1];(0,a.useEffect)((function(){d(Date.now())}),[t.commits]);var f=t.commitsAhead||0;return 0===t.commits.length?null:(0,o.BX)(l.G7,{css:l.l0.colWithGap(8),children:[(0,o.tZ)(l.h4,{level:2,variant:"subheadDefault",children:"Previous Commits"}),(0,o.BX)(l.G7,{children:[(0,o.tZ)(l.G7,{tag:"ul",children:t.commits.map((function(e,r){return(0,o.tZ)(on,{handleRevertToCommit:n,commit:e,displayTimeSinceUnix:u,gitHubLink:""!==t.remote&&r>=f?(0,Re.cW)(t.remote,e.hash):null},e.hash)}))}),c?(0,o.tZ)(nn,{renderDot:!1,children:(0,o.tZ)(Zt.zx,{onClick:r,text:"Load more commits"})}):null]})]})},cn=n(76216);function sn(e){var t=e.wid,n=e.pud,r=e.gitState,l=(0,be.I)(),c=function(){l({type:"UPDATE_GIT_STATE",wid:t,pud:n,updates:{hasConflictsWithFetchedRemote:!1}})},s=(0,i.Z)(a.useState(null),2),u=s[0],d=s[1],f=(0,i.Z)(a.useState(!0),2),p=f[0],h=f[1],v="Confirm",m=["conflictChoices"];return"repl"===u?(m.push("chosen-repl"),v="Confirm keep Replit"):"remote"===u&&(m.push("chosen-remote"),v="Confirm overwrite from GitHub"),p||m.push("invalid"),(0,o.BX)(ht.Z,{isOpen:!0,onRequestClose:c,children:[(0,o.tZ)(it(),{id:"5da074ca0af64a21",children:".conflictChoices.jsx-5da074ca0af64a21{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-moz-box-orient:horizontal;-moz-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}.conflictPreference.jsx-5da074ca0af64a21{width:48%;border:1px solid var(--foreground-default);cursor:pointer;-webkit-border-radius:3px;-moz-border-radius:3px;border-radius:3px;overflow:hidden;-webkit-transition:-webkit-transform.2s;-moz-transition:-moz-transform.2s;-o-transition:-o-transform.2s;transition:-webkit-transform.2s;transition:-moz-transform.2s;transition:-o-transform.2s;transition:transform.2s}.conflictPreference.jsx-5da074ca0af64a21:hover{-webkit-transform:translate(0,-3px);-moz-transform:translate(0,-3px);-ms-transform:translate(0,-3px);-o-transform:translate(0,-3px);transform:translate(0,-3px)}.conflictPreference.jsx-5da074ca0af64a21 .header.jsx-5da074ca0af64a21{padding:8px 12px;font-weight:bold;background:var(--background-root)}.conflictPreference.jsx-5da074ca0af64a21 .body.jsx-5da074ca0af64a21{padding:8px 12px;line-height:1.4em}.chosen-repl.jsx-5da074ca0af64a21 .replPreference.jsx-5da074ca0af64a21 .header.jsx-5da074ca0af64a21,.chosen-remote.jsx-5da074ca0af64a21 .remotePreference.jsx-5da074ca0af64a21 .header.jsx-5da074ca0af64a21{color:var(--background-default);background:var(--foreground-default)}.chosen-repl.jsx-5da074ca0af64a21 .remotePreference.jsx-5da074ca0af64a21,.chosen-remote.jsx-5da074ca0af64a21 .replPreference.jsx-5da074ca0af64a21{border-color:var(--foreground-dimmer)}"}),(0,o.BX)(xt.G,{css:[Et.l0.maxWidth(600),Et.l0.px(16),Et.l0.py(24),Et.l0.color.foregroundDefault,Et.l0.backgroundColor.backgroundDefault],children:[(0,o.tZ)(bt.x,{css:[Et.l0.mb(16)],variant:"headerDefault",children:"Conflicting Changes"}),(0,o.BX)(bt.x,{css:[Et.l0.mb(24)],multiline:!0,children:["There are changes from the remote (",(0,o.tZ)("a",{href:r.remote,target:"_blank",rel:"nofererer noopener",className:"jsx-5da074ca0af64a21",children:r.remote}),") that have been made since your changes on Replit that conflict with each other. Which version would you like to keep?"]}),(0,o.BX)("div",{className:"jsx-5da074ca0af64a21 "+(m.join(" ")||""),children:[(0,o.BX)("div",{onClick:function(){return d("remote")},className:"jsx-5da074ca0af64a21 remotePreference conflictPreference",children:[(0,o.tZ)("div",{className:"jsx-5da074ca0af64a21 header",children:"Keep version on GitHub"}),(0,o.tZ)("div",{className:"jsx-5da074ca0af64a21 body",children:"Permanently delete any changes in your Repl that are not on GitHub."})]}),(0,o.BX)("div",{onClick:function(){return d("repl")},className:"jsx-5da074ca0af64a21 replPreference conflictPreference",children:[(0,o.tZ)("div",{className:"jsx-5da074ca0af64a21 header",children:"Keep version on Replit"}),(0,o.tZ)("div",{className:"jsx-5da074ca0af64a21 body",children:"Permanently delete any changes in your GitHub repository that are not on Replit"})]})]}),(0,o.BX)(xt.G,{css:[Et.l0.mt(24),Et.l0.flex.row,Et.l0.justify.end],children:[(0,o.tZ)(ot.Z,{css:[Et.l0.ml(8)],onClick:c,children:"Cancel"}),(0,o.tZ)(Ft.u,{tooltip:"You must choose a preference to continue",placement:"right",isDisabled:Boolean(u),children:(0,o.tZ)(ot.Z,{color:"negative",css:[Et.l0.ml(8)],disabled:!u,onClick:function(){null!==u?(l(ze({write:!0,prefer:u,wid:t,pud:n})),c()):h(!1)},children:v})})]})]})]})}function un(e){var t=e.actionDescription,n=e.onConfirm,r=e.onCancel,i={marginLeft:8};return(0,o.BX)("div",{className:"jsx-a6b618bf6ea164ac gitRevertConfirmModal",children:[(0,o.tZ)(it(),{id:"a6b618bf6ea164ac",children:".gitRevertConfirmModal.jsx-a6b618bf6ea164ac{max-width:600px;padding:20px 24px;background:var(--background-default);color:var(--foreground-default)}h2.jsx-a6b618bf6ea164ac{margin-bottom:16px}p.jsx-a6b618bf6ea164ac{margin-bottom:24px;line-height:1.4em}.buttonGroup.jsx-a6b618bf6ea164ac{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-moz-box-orient:horizontal;-moz-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:end;-webkit-justify-content:flex-end;-moz-box-pack:end;-ms-flex-pack:end;justify-content:flex-end;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}"}),(0,o.tZ)("h2",{className:"jsx-a6b618bf6ea164ac",children:"Overwrite existing changes?"}),(0,o.BX)("p",{className:"jsx-a6b618bf6ea164ac",children:["You have some changes that are not committed yet. ",t," ","will overwrite any un-committed changes. Overwrite and continue?"]}),(0,o.BX)("div",{className:"jsx-a6b618bf6ea164ac buttonGroup",children:[(0,o.tZ)(ot.Z,{style:i,onClick:r,autoFocus:!0,children:"Cancel"}),(0,o.tZ)(ot.Z,{color:"negative",style:i,onClick:n,children:"Overwrite and continue"})]})]})}var dn=function(e){var t=e.wid,n=e.pud,r=e.isLoading,l=e.currentUser,c=e.refetchUser,s=e.setGitHubCreationModalOpen,u=e.setExistingRepoConnectionModalOpen,d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.history,i=void 0!==r&&r,o=e.write,a=void 0!==o&&o,l=e.persist,c=void 0!==l&&l,s=e.persistMirror,u=void 0!==s&&s;p(ze({history:i,write:a,persist:c,persistMirror:u,wid:t,pud:n}))},f=function(e,r){return p(He({cmd:e,args:r,wid:t,pud:n}))},p=(0,be.I)(),h=(0,at.Z)(),v=(0,i.Z)(Ee(t,n),1)[0].gitState,m=v.hasConflictsWithFetchedRemote&&(0,o.tZ)(sn,{wid:t,pud:n,gitState:v}),g=(0,i.Z)(a.useState(null),2),y=g[0],Z=g[1],b=null!==y&&(0,o.tZ)(ht.Z,{isOpen:!0,onRequestClose:function(){return Z(null)},children:(0,o.tZ)(un,{actionDescription:"Reverting to this previous version",onConfirm:(0,ce.Z)((function(){return(0,se.__generator)(this,(function(e){return Z(null),f(Ce.y6),f(Ce.CU,[y.hash]),d({persist:!0}),[2]}))})),onCancel:function(){return Z(null)}})}),w=(0,i.Z)(a.useState(null),2),x=w[0],E=w[1],C=null!==x&&(0,o.tZ)(ht.Z,{isOpen:!0,onRequestClose:function(){return E(null)},children:(0,o.tZ)(un,{actionDescription:"Checking out branch ".concat(x),onConfirm:(0,ce.Z)((function(){return(0,se.__generator)(this,(function(e){switch(e.label){case 0:return E(null),f(Ce.y6),[4,f(Ce.JE,[x])];case 1:return e.sent(),d({persist:!0}),[2]}}))})),onCancel:function(){return E(null)}})});function S(){return(S=(0,ce.Z)((function(e){return(0,se.__generator)(this,(function(t){return(0,Fe.j)(Fe.U3.VERSION_CONTROL_FEATURE_USED,{action:"reverted"}),v.changedFiles.length>0?(Z(e),[2]):(f(Ce.CU,[e.hash]),d({persist:!0}),[2])}))}))).apply(this,arguments)}function T(){return(T=(0,ce.Z)((function(e){return(0,se.__generator)(this,(function(t){switch(t.label){case 0:return e===v.branch?[2]:((0,Fe.j)(Fe.U3.VERSION_CONTROL_FEATURE_USED,{action:"checkedOut"}),v.changedFiles.length>0&&v.branches.includes(e)?(E(e),[2]):[4,f(Ce.JE,[e])]);case 1:return t.sent(),d({persist:!0}),[2]}}))}))).apply(this,arguments)}var k="html"===(0,cn.Z)();return(0,o.BX)(xt.G,{css:Et.l0.colWithGap(32),children:[(0,o.BX)(xt.G,{css:Et.l0.colWithGap(8),children:[(0,o.tZ)(Bt,{gitState:v,isLoading:r,pull:function(){(0,Fe.j)(Fe.U3.VERSION_CONTROL_FEATURE_USED,{action:"pulled"}),d({history:!0,persistMirror:k})},setGitHubCreationModalOpen:function(){v.remoteToken&&v.installations.length>0?s(!0):p({type:"UPDATE_GIT_STATE",wid:t,pud:n,updates:{authError:Se.l4.GITHUB_GET_INFO}})},wid:t,pud:n,setExistingRepoConnectionIsOpen:u}),(0,o.tZ)(yt,{isLoading:r,gitState:v,checkoutBranch:function(e){return T.apply(this,arguments)}})]}),(0,o.tZ)(Yt,{branch:v.branch,changedFiles:v.changedFiles,commits:v.commits,isLoading:r,commitsAhead:v.commitsAhead,commitsBehind:v.commitsBehind,activeFile:h||"",remote:v.remote,gitAddAll:function(){f(Ce.Hl)},gitCommit:function(){var e=(0,ce.Z)((function(e){return(0,se.__generator)(this,(function(t){switch(t.label){case 0:return(0,Fe.j)(Fe.U3.VERSION_CONTROL_FEATURE_USED,{action:"committed"}),[4,f(Ce.th,[e,l])];case 1:return t.sent(),d({persist:!0}),[2]}}))}));return function(t){return e.apply(this,arguments)}}(),gitPush:function(){d({write:!0})},gitRestore:function(){var e=(0,ce.Z)((function(e,t){return(0,se.__generator)(this,(function(n){switch(n.label){case 0:return[4,f(Ce.sh,[e,t])];case 1:return n.sent(),[4,f(Ce.i7)];case 2:return n.sent(),[2]}}))}));return function(t,n){return e.apply(this,arguments)}}(),gitAdd:function(){var e=(0,ce.Z)((function(e){return(0,se.__generator)(this,(function(t){switch(t.label){case 0:return[4,f(Ce.N2,[e])];case 1:return[2,t.sent()]}}))}));return function(t){return e.apply(this,arguments)}}()}),(0,o.tZ)(ln,{gitState:v,handleRevertToCommit:function(e){return S.apply(this,arguments)},fetchMoreCommits:function(){v.remote&&f(Ce.he,[!0]),f(Ce.cM,[!0])}}),b,C,m,v.authError===Se.l4.NONE||v.authError===Se.l4.FETCH&&!v.remote?null:(0,o.tZ)(ut,{wid:t,pud:n,repoId:v.repoId,ownerId:v.ownerId,authError:v.authError,onAuth:c})]})},fn=n(15902),pn=n(44524),hn=n(7889),vn=function(e){var t=e.onInit,n=e.onConnect,r=e.isLoggedIn,i=(0,fn.T3)(),a=(0,pn.i)(),c=i&&a.width&&a.height&&a.width>a.height;return(0,o.BX)(l.G7,{css:[l.l0.colWithGap(32),l.l0.justify.spaceBetween,l.l0.align.center,l.l0.justify.center,l.l0.maxWidth(600),l.l0.pt(16),{margin:"0 auto"}],children:[(0,o.BX)(l.G7,{css:[l.l0.colWithGap(16)],children:[(0,o.tZ)(l.G7,{css:[l.l0.flex.column,l.l0.align.center],children:(0,o.BX)(l.xv,{multiline:!0,children:["Track and rollback changes to your Repl."," ",(0,o.tZ)("a",{href:"https://docs.replit.com/programming-ide/git-with-replit",target:"_blank",rel:"noopener noreferrer",onClick:function(e){e.preventDefault(),window.open(e.target.href,"_blank")},children:"Learn more here."})]})}),(0,o.tZ)(l.G7,{children:r?(0,o.BX)(l.G7,{css:[l.l0.colWithGap(8),{width:"100%",maxWidth:200,margin:"auto"}],children:[(0,o.tZ)(l.zx,{colorway:"primary",onClick:t,text:"Create a Git repo",iconLeft:(0,o.tZ)(gt.Z,{})}),(0,o.tZ)(l.zx,{onClick:n,text:"Existing Git repo?",outlined:!0})]}):(0,o.BX)(l.G7,{children:[(0,o.tZ)("a",{href:"/signup",children:"Create an account"})," to use version control with Replit!"]})})]}),c?(0,o.tZ)(hn.Z,{path:"/public/animations/flyinggit.json"}):(0,o.tZ)("img",{src:"/public/images/gitart.png",alt:"Robot lifting C+ box with git octocat using winch",css:{maxWidth:200}})]})},mn=n(25675),gn=n.n(mn),yn=n(61029),Zn=function(e){var t=e.wid,n=e.pud,r=e.badState,i=e.remote,a=(0,St.Z)().container,c=(0,E.I0)(),s=function(){switch(r){case Se.$U.NoMergeBase:return(0,o.BX)(bt.x,{multiline:!0,children:["We couldn\u2019t find commits in common with that GitHub repository. Try"," ",(0,o.tZ)("a",{href:"/github/"+i,target:"_blank",rel:"noreferrer noopener",children:"importing the repo"})," ","into a new Repl instead, or connecting the remote via the Git sidebar again."]});case Se.$U.AuthFetchError:return(0,o.BX)(bt.x,{multiline:!0,children:["We couldn\u2019t find that repository on GitHub. Try connecting your GitHub account in your"," ",(0,o.tZ)("a",{href:"/account",target:"_blank",rel:"noreferrer noopener",children:"Account Settings"}),"."]});case Se.$U.IndexFilesCorrupted:return(0,o.tZ)(bt.x,{multiline:!0,children:"Your Git index files were corrupted. Try resetting your index file to restore your repository."});default:return(0,o.tZ)(bt.x,{multiline:!0,children:"We ran into an error trying to sync your repository."})}},u=function(){c({type:"UPDATE_GIT_STATE",wid:t,pud:n,updates:{remote:"",commitsAhead:0,commitsBehind:0,repoId:null,ownerId:null,badState:Se.$U.None,authError:Se.l4.NONE}})};return(0,o.BX)(xt.G,{css:[Et.l0.p(8),Et.l0.colWithGap(8)],children:[(0,o.tZ)(bt.x,{variant:"subheadDefault",multiline:!0,children:"There\u2019s something wrong with this repository..."}),(0,o.tZ)(s,{}),r!==Se.$U.IndexFilesCorrupted?(0,o.BX)(o.HY,{children:[(0,o.tZ)(bt.x,{multiline:!0,children:"You can also try disconnecting this repository from GitHub and trying again."}),(0,o.tZ)(l.zx,{colorway:"negative",text:"Disconnect repo",iconLeft:(0,o.tZ)(yn.Z,{}),css:[Et.l0.mt(12),Et.l0.mb(16)],onClick:function(){var e;(e=a).exec.apply(e,(0,y.Z)(Ce.rO.format(Se.Xe))),u()}})]}):(0,o.tZ)(l.zx,{colorway:"negative",text:"Reset index",iconLeft:(0,o.tZ)(Nt.Z,{}),css:[Et.l0.mt(12),Et.l0.mb(16)],onClick:function(){a.exec("bash","-c","rm .git/index; git reset HEAD ."),u()}}),(0,o.tZ)(gn(),{src:"/images/gitart.png",alt:"GitHub integration decoration art.",layout:"responsive",width:1694,height:3543,css:[Et.l0.maxWidth(200)]})]})},bn=n(48732),wn=n(63377),xn=n(33319),En=n(82893),Cn=n(37424),Sn=l.KD.a;function Tn(e){var t=e.replIsPrivate,n=e.replDescription,r=e.replIsRenamed,c=e.replTitle,s=e.wid,u=e.pud,d=e.authToken,f=e.onConnect,p=e.onClose,v=e.successHandler,m=(0,Cn.H)(),g=(0,E.v9)((function(e){return xe(e,s,u)})).gitState,y=(0,i.Z)(a.useState(!1),2),Z=y[0],b=y[1],w=(0,i.Z)(a.useState(t),2),x=w[0],C=w[1],S=(0,i.Z)(a.useState(null),2),T=S[0],k=S[1],_=(0,be.I)(),R=(0,dt.Y)(r?c:"",(function(e){return e&&e.length>100?{message:"* GitHub repository names cannot exceed 100 characters"}:e?void 0:{message:"* Repository name is required"}})),D=g.installations,I=D.find((function(e){return"User"===e.type}))||D[0],P=D.map((function(e){return{value:e.name,title:e.name,icon:(0,o.tZ)(l.G7,{css:[l.l0.mr(8)],children:(0,o.tZ)(gn(),{src:e.avatarUrl,alt:"".concat(e.name,"'s profile photo"),layout:"fixed",width:16,height:16,css:[l.l0.borderRadius(8)]})})}})),G=(0,i.Z)(a.useState({value:I.name,label:I.name,avatar:I.avatarUrl,type:I.type}),2),B=G[0],A=G[1],U=(0,dt.Y)((n||"").replace(/(\r\n|\n|\r)/gm," "),(function(e){if(e&&e.length>140)return{message:"* GitHub descriptions cannot exceed 140 characters"}})),O=!(!R.error&&!U.error),N=function(){var e=(0,ce.Z)((function(e){var t,n,r,i,o;return(0,se.__generator)(this,(function(a){switch(a.label){case 0:if(k(null),e.preventDefault(),b(!0),t=R.validate(),n=U.validate(),t||n)return b(!1),[2];r={name:R.value,description:U.value,private:x},g.commits.length||_(Ke(s,u)),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,Ae({token:d,repoData:r,owner:B.value,ownerType:B.type})];case 2:return i=a.sent(),v(i.html_url),[3,4];case 3:return o=a.sent(),(0,bn.Z)(o,Ie)?_({type:"UPDATE_GIT_STATE",wid:s,pud:u,updates:{authError:Se.l4.GITHUB_CREATE}}):(0,bn.Z)(o,Pe)?k("Another GitHub repository with the same name already exists"):(h.$e((function(e){e.setTag("source","git"),h.Tb(o)})),k("Unable to create a GitHub repository")),[3,4];case 4:return b(!1),[2]}}))}));return function(t){return e.apply(this,arguments)}}();return(0,o.tZ)(l.u_,{onRequestClose:p,isOpen:!0,children:(0,o.tZ)("form",{onSubmit:N,style:{opacity:Z?.6:1},autoComplete:"off",children:(0,o.BX)(l.G7,{css:[l.l0.colWithGap(24)],children:[(0,o.tZ)(l.h4,{variant:"headerDefault",level:1,children:"Create a new GitHub repository"}),(0,o.tZ)(l.xv,{children:(0,o.tZ)(Sn,{onClick:function(){p(),f()},children:"Connect an existing repository instead."})}),(0,o.tZ)(l.xv,{multiline:!0,css:{marginTop:-12},children:"You can always edit this information on GitHub."}),(0,o.BX)(l.G7,{css:[l.l0.rowWithGap(8),l.l0.align.center],children:[(0,o.BX)(l.G7,{css:[l.l0.colWithGap(4)],children:[(0,o.tZ)("label",{htmlFor:m("owner"),children:(0,o.tZ)(l.xv,{color:"dimmer",variant:"small",children:"Owner"})}),(0,o.tZ)(l.Ph,{items:P,initialSelectedItem:P.length?P[0]:void 0,placeholder:"Select a user",disabled:D.length<=1||Z,onChange:function(e){A(e)},css:[l.l0.height(48),l.l0.flex.grow(1),{flexBasis:"50%"},l.l0.minWidth(80)],id:m("owner")})]}),(0,o.tZ)("span",{className:"slash",css:[l.l0.fontSize(20),l.l0.mt(16)],children:"/"}),(0,o.BX)(l.G7,{css:[l.l0.colWithGap(4),{flexShrink:1}],children:[(0,o.tZ)("label",{htmlFor:m("name"),children:(0,o.tZ)(l.xv,{color:"dimmer",variant:"small",children:"Title"})}),(0,o.tZ)(l.G7,{css:[l.l0.height(35)],children:(0,o.tZ)(l.II,{name:"title",placeholder:"Name your repo",disabled:Z,value:R.value,onChange:function(e){R.setValue(e.currentTarget.value),k(null)},onFocus:function(e){return e.target.select()},onBlur:R.handleBlur,css:[{flexBasis:"50%"},l.l0.minWidth(80)],id:m("name")})}),R.error?(0,o.tZ)(l.xv,{variant:"small",css:[l.l0.color.accentNegativeStronger],multiline:!0,children:R.error.message}):null]})]}),(0,o.BX)(l.G7,{css:[l.l0.colWithGap(8)],children:[(0,o.BX)(l.G7,{css:[l.l0.colWithGap(4)],children:[(0,o.tZ)("label",{htmlFor:m("description"),children:(0,o.tZ)(l.xv,{color:"dimmer",variant:"small",children:"Repo description (optional)"})}),(0,o.tZ)(l.B,{name:"description",value:U.value,disabled:Z,placeholder:U.value||"What does this repo do?",onChange:function(e){U.setValue(e.target.value),k(null)},onBlur:U.handleBlur,css:[l.l0.minHeight(64),l.l0.maxHeight(96),{resize:"vertical"}],id:m("description")})]}),U.error?(0,o.tZ)(l.xv,{variant:"small",css:[l.l0.color.accentNegativeStronger],children:U.error.message}):null]}),(0,o.BX)(l.G7,{css:[l.l0.colWithGap(8)],children:[(0,o.BX)(l.G7,{css:[l.l0.colWithGap(4)],children:[(0,o.tZ)("label",{htmlFor:m("github-privacy"),children:(0,o.tZ)(l.xv,{color:"dimmer",variant:"small",children:"GitHub privacy"})}),(0,o.BX)(l.hE,{name:m("github-privacy"),value:(!x).toString(),onChange:function(e){return C(e)},row:!0,stretch:!0,primary:!0,disabled:Z,children:[(0,o.tZ)(l.rK,{id:m("github-repo-creation-modal-true"),value:!1,text:"Public",icon:(0,o.tZ)(xn.Z,{})}),(0,o.tZ)(l.rK,{id:m("github-repo-creation-modal-false"),value:!0,text:"Private",icon:(0,o.tZ)(En.Z,{})})]})]}),(0,o.tZ)(l.xv,{css:[l.l0.color.foregroundDimmer],children:(x?"You choose who can see this repo":"Anyone can see this repo")+", and you choose who can commit."})]}),(0,o.BX)(l.G7,{css:[l.l0.rowWithGap(12),l.l0.justify.end],children:[(0,o.tZ)(l.zx,{disabled:Z,"data-testid":"git-confirm-github-repo",text:"Cancel",onClick:p}),(0,o.tZ)(l.zx,{colorway:"primary",disabled:Z||O,type:"submit","data-testid":"git-confirm-github-repo",text:Z?"Creating repository...":"Create repository",iconLeft:(0,o.tZ)(gt.Z,{})})]}),T?(0,o.BX)(l.xv,{multiline:!0,css:[l.l0.color.accentNegativeStronger],children:[T,(0,o.tZ)("br",{}),"Let us know if there is an issue by opening up the sidebar and submitting a ticket via the get help button."]}):null]})})})}var kn=function(e){var t=e.authToken,n=e.onClose,r=e.onConnect,i=e.pud,a=e.successHandler,c=e.wid,s=function(e){var t=(0,f.Z)({},me,e);return fe.a(ye,t)}({variables:{replId:(0,wn.Z)()}}),u=s.data;if(s.loading)return null;if("Repl"!==(null===u||void 0===u?void 0:u.repl.__typename))return(0,o.tZ)(l.u_,{onRequestClose:n,isOpen:!0,children:(0,o.BX)(l.G7,{css:[l.l0.colWithGap(24)],children:[(0,o.tZ)(l.h4,{variant:"headerDefault",level:1,children:"Something went wrong."}),(0,o.tZ)(l.xv,{children:"Please try again later."})]})});var d=u.repl;return(0,o.tZ)(Tn,{replDescription:d.description,replIsPrivate:d.isPrivate,replIsRenamed:d.isRenamed,replTitle:d.title,pud:i,wid:c,authToken:t,onConnect:r,onClose:n,successHandler:a})},_n=n(68757),Rn=n(83971),Dn=n(62187),In=n(88961),Pn=xt.K.a,Gn=function(e){var t=(0,St.Z)().container,n=(0,Rn.Z)(t),r=(0,be.I)(),c=(0,i.Z)(a.useState(null),2),s=c[0],u=c[1],d=(0,i.Z)(a.useState(!1),2),p=d[0],h=d[1],v=function(){var t=(0,ce.Z)((function(){var t;return(0,se.__generator)(this,(function(n){return s?(h(!0),e.gitState.commits.length||r(Ke(e.wid,e.pud)),t="https://github.com/".concat(s.nameWithOwner),r(He({cmd:Ce.M7,args:[t],wid:e.wid,pud:e.pud})),r(ze({wid:e.wid,pud:e.pud})),e.hideModal(),[2]):[2]}))}));return function(){return t.apply(this,arguments)}}(),g=function(){var t=(0,ce.Z)((function(){var t,i,o,a,l;return(0,se.__generator)(this,(function(c){switch(c.label){case 0:return s?(h(!0),t="https://github.com/".concat(s.nameWithOwner),[4,We()]):[2];case 1:return i=c.sent(),e.gitState.isInitialized?[3,3]:[4,n({args:Ce.D6.format(e.gitState,i)})];case 2:c.sent(),c.label=3;case 3:return e.gitState.commits.length?[3,8]:[4,n({args:Ce.M7.format(e.gitState,t)})];case 4:return c.sent(),[4,n({args:Ce.GE.format(e.gitState)})];case 5:return c.sent(),[4,n({args:Ce.th.format(e.gitState,"Initial commit",i,!0)})];case 6:return c.sent(),[4,n({args:Ce.Hl.format(e.gitState)})];case 7:c.sent(),c.label=8;case 8:return[4,n({args:Ce.hU.format(e.gitState)})];case 9:return c.sent(),[4,n({args:Ce.M7.format(e.gitState,t)})];case 10:return c.sent(),[4,n({args:Ce.he.format((0,m.Z)((0,f.Z)({},e.gitState),{remote:t}),!1)})];case 11:return c.sent(),[4,n({args:Ce.Di.format((0,m.Z)((0,f.Z)({},e.gitState),{remote:t}))})];case 12:return o=c.sent(),Ce.Di.parse?(a=Ce.Di.parse(e.gitState,null===o.error?o.output:"HEAD branch: main"),l=a.defaultBranch,[4,n({args:Ce.Z$.format(e.gitState,i,l)})]):[2];case 13:return c.sent(),[4,n({args:Ce.eg.format(e.gitState)})];case 14:return c.sent(),r(ze({wid:e.wid,pud:e.pud})),e.hideModal(),[2]}}))}));return function(){return t.apply(this,arguments)}}();return(0,o.BX)(xt.G,{css:[Et.l0.colWithGap(16)],children:[(0,o.tZ)(bt.h,{variant:"headerDefault",level:2,children:"Connect an existing repository"}),(0,o.tZ)(bt.x,{children:(0,o.tZ)(Pn,{onClick:function(){e.setGitHubCreationModalOpen(!0),e.hideModal()},children:"Create a new GitHub repository instead."})}),(0,o.tZ)("label",{htmlFor:"git-sidebar-existing-repo-connection",css:{marginBottom:8},children:"Choose a repository to import."}),(0,o.tZ)(_n.Z,{id:"git-sidebar-existing-repo-connection",onRepoSelect:u,onInputValueChange:function(){},isPrivate:!1}),e.gitState.remoteToken?null:(0,o.BX)(bt.x,{multiline:!0,css:[Et.l0.color.accentNegativeStronger,{marginTop:-12}],children:[(0,o.tZ)(In.Z,{})," Please connect your GitHub account to connect existing repositories."]}),(0,o.BX)(bt.x,{multiline:!0,css:{marginTop:-8},children:["This will set ",s?s.nameWithOwner:"this repository"," as the remote",e.fromEmptyState?" and pull in changes.":". Optionally, you can also pull in any changes from the repository, which will reflect this Repl's changes in the case of conflicts."]}),(0,o.BX)(bt.x,{multiline:!0,children:["This can be undone by removing the repository in the Git sidebar or running ",(0,o.tZ)(Tt.Z,{children:"git remote remove origin"})," in the Shell."]}),(0,o.BX)(xt.G,{css:[Et.l0.rowWithGap(12),Et.l0.justify.end,{flexWrap:"wrap",marginTop:"-8px"}],children:[(0,o.tZ)(l.zx,{text:"Cancel",onClick:e.hideModal,css:[Et.l0.mt(8)],disabled:p}),e.fromEmptyState?null:(0,o.tZ)(l.zx,{iconLeft:(0,o.tZ)(Dt.Z,{}),onClick:v,text:p?"Connecting...":"Connect"+(s?" "+s.nameWithOwner:""),colorway:"primary",outlined:!0,css:[Et.l0.mt(8)],disabled:p||!s}),(0,o.tZ)(l.zx,{iconLeft:(0,o.tZ)(Dn.Z,{}),onClick:g,text:p?"Connecting...":"Pull changes"+(s?" from "+s.nameWithOwner:""),colorway:"primary",css:[Et.l0.mt(8)],disabled:p||!s})]})]})},Bn=n(89224),An=n(74963),Un=n(11163),On=(0,An.Z)(function(){var e=(0,ce.Z)((function(e){return(0,se.__generator)(this,(function(t){return e(),[2]}))}));return function(t){return e.apply(this,arguments)}}(),{wait:1e3});function Nn(e){var t=e.wid,n=e.pud,r=(0,be.I)(),c=(0,fn.Vg)((0,Un.useRouter)()),s=(0,St.Z)(),u=s.container,d=s.fs,p=(0,i.Z)(Ee(t,n),1)[0],h=p.gitState,v=p.isLoading,m=p.isCloneInProgress,g=function(e){var t=(0,f.Z)({},me,e);return fe.a(Ze,t)}(),y=g.data,Z=g.loading,b=g.refetch;a.useEffect((function(){var e,i,o,a,l;if("GitHubInfo"===(null===y||void 0===y||null===(e=y.currentUser)||void 0===e||null===(i=e.gitHubInfo)||void 0===i?void 0:i.__typename)){var c=y.currentUser.gitHubInfo;c.accessToken&&r({type:"UPDATE_GIT_STATE",updates:{remoteToken:c.accessToken,gitHubName:null===(o=c.userInfo)||void 0===o?void 0:o.name,gitHubEmail:null===(a=c.userInfo)||void 0===a?void 0:a.email,gitHubAvatarUrl:null===(l=c.userInfo)||void 0===l?void 0:l.avatarUrl,installations:c.installations},wid:t,pud:n})}}),[y]);var w=(0,i.Z)(function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=(0,a.useState)(t),r=n[0],i=n[1],o=(0,a.useRef)();return(0,a.useEffect)((function(){return o.current&&clearTimeout(o.current),o.current=setTimeout((function(){i(e)}),250),function(){o.current&&clearTimeout(o.current)}}),[e]),[r||e,i]}(v||Z,!0),2),x=w[0],E=w[1];(0,a.useEffect)((function(){return m||Z||(E(!0),r(ze({history:!1,write:!1,persist:!1,wid:t,pud:n}))),r({type:"SET_GIT_SIDEBAR_VISIBILITY",isSidebarVisible:!0,wid:t}),function(){r({type:"SET_GIT_SIDEBAR_VISIBILITY",isSidebarVisible:!1,wid:t})}}),[Z,u]),d.onStatusChange((function(e){e===Bn.kO.Clean&&On((function(){r(ze({history:!1,write:!1,persist:!1,wid:t,pud:n}))}))}));var C=(0,i.Z)(a.useState(!1),2),S=C[0],T=C[1],k=(0,i.Z)(a.useState(!1),2),_=k[0],R=k[1],D=null;return Z||x&&!h.isInitialized?D=(0,o.tZ)(l.G7,{css:[l.l0.center,l.l0.flex.growAndShrink(1)],children:(0,o.tZ)(Mt.Z,{size:24})}):h.remote||h.isInitialized?h.badState!==Se.$U.None?D=(0,o.tZ)(Zn,{wid:t,pud:n,badState:h.badState,remote:h.remote}):(null===y||void 0===y?void 0:y.currentUser)&&(D=(0,o.tZ)(dn,{wid:t,pud:n,isLoading:x,currentUser:y.currentUser,refetchUser:b,setExistingRepoConnectionModalOpen:R,setGitHubCreationModalOpen:T})):D=(0,o.tZ)(vn,{isLoggedIn:Boolean(null===y||void 0===y?void 0:y.currentUser),onInit:function(){r(function(e,t){return function(){var n=(0,ce.Z)((function(n){var r;return(0,se.__generator)(this,(function(i){switch(i.label){case 0:return(0,Fe.j)(Fe.U3.VERSION_CONTROL_FEATURE_USED,{action:"initialized"}),[4,We()];case 1:return r=i.sent(),[4,(o=Ce.D6,a=[r],n(He({cmd:o,args:a,wid:e,pud:t})))];case 2:return i.sent(),[4,n(qe(e,t))];case 3:return i.sent(),[2]}var o,a}))}));return function(e){return n.apply(this,arguments)}}()}(t,n))},onConnect:function(){return R(!0)}}),(0,o.BX)(l.G7,{css:l.l0.height("100%"),children:[(0,o.tZ)(l.G7,{css:[l.l0.p(8)],children:(0,o.tZ)(we.Z,{truncate:!0,level:4,children:"Git"})}),(0,o.tZ)(l.G7,{css:[l.l0.flex.growAndShrink(1),l.l0.px(8),l.l0.overflowY("auto"),x&&h.badState===Se.$U.None&&{pointerEvents:"none",opacity:.5}],children:D}),c?null:(0,o.tZ)(Ln,{}),(0,o.tZ)(wt.u,{isOpen:_,onRequestClose:function(){return R(!1)},maxWidth:600,children:(0,o.tZ)(Gn,{gitState:h,hideModal:function(){return R(!1)},setGitHubCreationModalOpen:T,fromEmptyState:!h.remote&&!h.isInitialized,wid:t,pud:n})}),S?(0,o.tZ)(kn,{authToken:h.remoteToken,onClose:function(){return T(!1)},onConnect:function(){return R(!0)},successHandler:function(e){r(function(e){var t=e.remote,n=e.wid,r=e.pud;return function(){var e=(0,ce.Z)((function(e){function i(t,i){return e(He({cmd:t,args:i,wid:n,pud:r}))}return(0,se.__generator)(this,(function(o){switch(o.label){case 0:return[4,i(Ce.M7,[t])];case 1:return o.sent(),[4,i(Ce.LO)];case 2:return o.sent(),[4,i(Ce.VF)];case 3:return o.sent(),[4,e({type:"GITHUB_REPOSITORY_CREATED",wid:n,pud:r})];case 4:return o.sent(),[4,e(ze({wid:n,pud:r,persist:!0}))];case 5:return o.sent(),[2]}}))}));return function(t){return e.apply(this,arguments)}}()}({wid:t,pud:n,remote:e})),T(!1)},wid:t,pud:n}):null]})}function Ln(){return(0,o.tZ)(l.G7,{css:l.l0.p(8),children:(0,o.tZ)("a",{className:"feedbackLink",href:"https://replit.com/talk/announcements/Feedback-for-git-support-the-new-GitHub-integration/21631",target:"_blank",rel:"noopener",children:"Send feedback"})})}var Fn=n(7182),Xn=n(16965),Mn=n(27178),Wn=(0,Fn.cn)(null);function jn(){var e=(0,St.Z)(),t=e.container,n=e.fs,c=(0,i.Z)((0,Fn.KO)(Wn),2),s=c[0],u=c[1],d=(0,Xn.Z)(s),f=(0,E.oR)();return a.useEffect((function(){if(!d.current){var e=new oe;return e.yikesInjectStore(f),e.injectServices({container:t,fs:n}),e.register("git",r),e.bootstrap({plugins:{git:{type:"git"}},layout:{tiling:{type:"pane",pud:"git"},floating:[]}}),e.store.dispatch({type:"WORKSPACE_MOUNTED"}),u({Component:e.component()}),function(){u(null)}}}),[d,t,n,u,f]),(null===s||void 0===s?void 0:s.Component)?(0,o.tZ)(l.Tg,{background:"default",css:[l.l0.flex.growAndShrink(1),Mn.F3],id:"workspace-root",children:(0,o.tZ)(s.Component,{})}):null}},16799:function(e,t,n){n.d(t,{CU:function(){return F},D6:function(){return g},Di:function(){return O},GE:function(){return X},Hl:function(){return P},JE:function(){return U},LO:function(){return _},M7:function(){return R},N2:function(){return G},Pz:function(){return j},TE:function(){return E},Ud:function(){return T},VF:function(){return b},Z$:function(){return V},bb:function(){return M},cF:function(){return S},cM:function(){return I},eg:function(){return z},hU:function(){return H},he:function(){return w},i7:function(){return Z},jW:function(){return k},k6:function(){return y},kT:function(){return C},lR:function(){return L},rO:function(){return D},sh:function(){return B},th:function(){return A},xY:function(){return N},y6:function(){return W},zq:function(){return x}});var r=n(14251),i=n(52875),o=n(9941),a=n(93456),l=n(67128),c=n(92157),s='[ "git remote get-url origin" ]',u="git symbolic-ref HEAD --short",d="git log -0 2>/dev/null && ".concat(u," || echo 'HEAD'");function f(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return["bash","-c",t.join("&&")]}function p(e){return"if ! (( $(busybox ps -o comm | grep git) )) ; then rm -rf .git/index.lock; fi ; ".concat(e)}function h(e){var t=e.remote,n=void 0===t?"":t,r=e.remoteToken;if(!r)return n;var i=(0,o.Z)(n.match(/(https:\/\/)(.*)/)||["","",""],3),a=i[1],l=i[2];return"".concat(a).concat(r||"",":x-oauth-basic@").concat(l)}function v(e){return null!==new RegExp(/(^|\n)fatal: Authentication failed/g).exec(e)||null!==new RegExp(/(^|\n)fatal: unable to access/g).exec(e)||null!==new RegExp(/(^|\n)fatal: repository.*not found/g).exec(e)||null!==new RegExp(/(^|\n)fatal: could not read Username/g).exec(e)||null!==new RegExp(/(^|\n)fatal: Could not read from remote repository/g).exec(e)}function m(e){var t=e.split(/ /g);if("1"===t[0]){var n=t[1],r=t.slice(8).join(" "),i=function(e){var t=e.startsWith(".")?e[1]:e[0],n=!e.startsWith(".");switch(t){case"M":case"T":return{changeMode:l.pD.MODIFIED,isStaged:n};case"D":return{changeMode:l.pD.DELETED,isStaged:n};case"A":return{changeMode:l.pD.UNTRACKED,isStaged:n};default:throw new Error("Unknown change type: ".concat(e))}}(n);return{change:i.changeMode,targetPath:r,origPath:r,isStaged:i.isStaged}}if("2"===t[0]){var a=t.slice(9).join(" "),c=(0,o.Z)(a.split("\t"),2),s=c[0],u=c[1];return{change:l.pD.MOVED,targetPath:s,origPath:u,isStaged:!0}}if("?"===t[0]){var d=t.slice(1).join(" ");return{change:l.pD.UNTRACKED,targetPath:d,origPath:null,isStaged:!1}}if("u"===t[0]){var f=t[2];return{change:l.pD.MODIFIED,targetPath:f,origPath:f,isStaged:!1}}throw new Error("Unrecognized git status entry: ".concat(e))}var g={format:function(e,t){return f('[ ! -d ".git" ]',"git init","git checkout -b main",'git config user.name "'.concat(t.username||"Replit user",'"'),'git config user.email "<>"',"touch .git/branches/.keep","touch .git/info/.keep","touch .git/objects/.keep","touch .git/refs/.keep")}},y={format:function(e,t){return["git","rev-list","--left-right","--count","".concat(t,"...origin/").concat(t)]},parse:function(e,t){if(t.startsWith("fatal"))return(0,i.Z)((0,r.Z)({},e),{commitsAhead:null,commitsBehind:null});var n=(0,o.Z)(t.split(/\s+/),2),a=n[0],l=n[1];return(0,i.Z)((0,r.Z)({},e),{commitsAhead:parseInt(a)||0,commitsBehind:parseInt(l)||0})}},Z={format:function(e){return["git","status","--branch","--porcelain=v2"]},parse:function(e,t){if(t.startsWith("fatal"))return e;if(t.includes("index file corrupt")||t.includes("error: index file"))return(0,i.Z)((0,r.Z)({},e),{badState:l.$U.IndexFilesCorrupted});if(""===t.trim())return(0,i.Z)((0,r.Z)({},e),{changedFiles:[]});var n=t.split("\n").filter((function(e){return""!==e.trim()})),a=e.branch,c=e.defaultBranch,s=!0,u=[],d=!0,f=!1,p=void 0;try{for(var h,v=n[Symbol.iterator]();!(d=(h=v.next()).done);d=!0){var g=h.value;if(g.startsWith("#")){var y=(0,o.Z)(g.split(/\s+/),3),Z=(y[0],y[1]),b=y[2];switch(Z){case"branch.head":a=b;break;case"branch.oid":s=!b.includes("(initial)")}}else u.push(m(g))}}catch(w){f=!0,p=w}finally{try{d||null==v.return||v.return()}finally{if(f)throw p}}return s||(c=a,a=""),(0,i.Z)((0,r.Z)({},e),{branch:a,defaultBranch:c,changedFiles:u})}},b={format:function(e){var t=h(e);return f("git push ".concat(t," $(").concat(u,")"))},parse:function(e,t){return v(t)?(0,i.Z)((0,r.Z)({},e),{authError:l.l4.PUSH}):e}},w={format:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=h(e);return f("git fetch ".concat(n,t?" --progress --deepen=10":" +refs/heads/*:refs/remotes/origin/* --progress --depth=10"))},parse:function(e,t){return v(t)?(0,i.Z)((0,r.Z)({},e),{authError:l.l4.FETCH}):e}},x={format:function(e){return 0===e.commits.length?["echo true"]:f(s,"git merge-base origin/$(".concat(u,") $(").concat(u,")"))},parse:function(e,t){return(0,i.Z)((0,r.Z)({},e),{hasMergeBaseWithFetchedRemote:Boolean(t.length)})}},E={format:function(){return f("git fetch origin --progress")},parse:function(e,t){return v(t)?(0,i.Z)((0,r.Z)({},e),{authError:l.l4.FETCH}):e}},C={format:function(e){if(0===e.commits.length)return["true"];var t=["git merge-tree $(git merge-base origin/$(".concat(u,") $(").concat(u,")) origin/$(").concat(u,") $(").concat(u,")"),"grep '^changed in both'","wc -l"].join(" | ");return f(s,t)},parse:function(e,t){return(0,i.Z)((0,r.Z)({},e),{hasConflictsWithFetchedRemote:0!==e.commits.length&&!isNaN(+t.trim())&&"0"!==t.trim()})}},S={format:function(e){return f("git reset --hard origin/$(".concat(u,")"))}},T={format:function(e){var t=h(e);return["git push ".concat(t," $(").concat(u,") --force")]}},k={format:function(){return f(s,"git merge origin/$(".concat(u,")"))},parse:function(e,t){return null!==new RegExp(/(^|\n)error: Your local changes to the following files would be overwritten by merge/g).exec(t)?(0,i.Z)((0,r.Z)({},e),{hasConflictsWithFetchedRemote:!0}):e}},_={format:function(e){return["git","remote","get-url","origin"]},parse:function(e,t){return t.includes("No such remote")||t.startsWith("fatal")?(0,i.Z)((0,r.Z)({},e),{remote:""}):(0,i.Z)((0,r.Z)({},e),{remote:t.trim()})}},R={format:function(e,t){return e.remote?f("git remote remove origin; git remote add origin ".concat(t)):f("git remote add origin ".concat(t))}},D={format:function(e){return f("git rev-parse 2>/dev/null && for i in $(git remote); do git remote remove $i; done")}},I={format:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,r="HEAD";t&&e.commits.length>0&&(r=e.commits[e.commits.length-1].hash);var i=["%D","%H","%an","%ae","%aI","%cn","%ce","%cI","%P","%B"];return["git","log","--pretty=".concat(i.join("%x00"),"%x00%x00"),"-".concat(n+1),r,"--"]},parse:function(e,t){if(t.startsWith("fatal"))return(0,i.Z)((0,r.Z)({},e),{commits:[]});if(t.startsWith("error: index file"))return(0,i.Z)((0,r.Z)({},e),{badState:l.$U.IndexFilesCorrupted});var n=t.split("\0\0\n").filter((function(e){return""!==e})).map((function(e){return e.split("\0")})),o=!!n[0][0];n.map((function(e){return e.shift()}));var c=!1;0===e.commits.length||o||e.commits[e.commits.length-1].hash!==n[0][0]||(c=!0,n.shift());var s=c?e.commits:[];return s=s.concat(n.map((function(e){var t=(0,a.Z)(e),n=t[0],r=t[1],i=t[2],o=t[3],l=t[4],c=t[5],s=t[6];return{hash:n,parentHash:t[7],message:t.slice(8).join("\n"),authorName:r,authorEmail:i,authorDate:new Date(o.trim()),committerName:l,committerEmail:c,committerDate:new Date(s.trim())}}))),(0,i.Z)((0,r.Z)({},e),{commits:s})}},P={format:function(){return f(p("git add -A"))},parse:function(e,t){if(t.startsWith("fatal"))return(0,i.Z)((0,r.Z)({},e),{hasConflictsWithFetchedRemote:!0});var n=e.changedFiles.map((function(e){return(0,i.Z)((0,r.Z)({},e),{isStaged:!0})}));return(0,i.Z)((0,r.Z)({},e),{changedFiles:n})}},G={format:function(e,t){return f("git add ".concat(t," && echo done: ").concat(t))},parse:function(e,t){if(!t.startsWith("fatal")){var n=t.split(" ")[1].trim(),o=e.changedFiles.map((function(e){return e.targetPath===n?(0,i.Z)((0,r.Z)({},e),{isStaged:!0}):e}));return(0,i.Z)((0,r.Z)({},e),{changedFiles:o})}return e}},B={format:function(e,t,n){return f("git restore ".concat(n?"--staged":""," ").concat(t," && echo done: ").concat(t))},parse:function(e,t){if(!t.startsWith("fatal")){var n=t.split(" ")[1].trim();return(0,i.Z)((0,r.Z)({},e),{changedFiles:e.changedFiles.map((function(e){return e.targetPath===n?(0,i.Z)((0,r.Z)({},e),{isStaged:!1}):e}))})}return e}},A={format:function(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];r=e.gitHubName?e.gitHubName:n.fullName||n.username;var o=e.gitHubEmail||"<>",a='-c user.name="'.concat(r,'" -c user.email="').concat(o,'"'),l=t.replace(/'/g,"'\"'\"'");return f(p("git ".concat(a," commit -m '").concat(l,"'").concat(i?" --allow-empty":"")))}},U={format:function(e,t){return e.branches.includes(t)?["git","checkout",t,"--"]:["git","checkout","-b",t,"--"]}},O={format:function(e){var t=h(e);return f("git remote show ".concat(t," | grep 'HEAD branch'"))},parse:function(e,t){var n=(0,o.Z)(t.split(":"),2),a=(n[0],n[1].trim());return(0,i.Z)((0,r.Z)({},e),{defaultBranch:a})}},N={format:function(e){return f("git checkout ".concat(e.defaultBranch))}},L={format:function(e){return f("git checkout -f ".concat(e.defaultBranch))}},F={format:function(e,t){return f("git revert ".concat(t,"..$(").concat(d,") --no-commit"))}},X={format:function(e){return f(p("git reset $(".concat(d,") --")))}},M={format:function(e){return f("git rev-parse --is-inside-work-tree")},parse:function(e,t){return(0,i.Z)((0,r.Z)({},e),{isInitialized:t.startsWith("true")})}},W={format:function(e){return f("git add -A","git reset --hard $(".concat(d,") --"))}},j={format:function(e){return["git","branch","-a","--no-color"]},parse:function(e,t){if(t.startsWith("fatal"))return e;var n=t.split("\n").filter((function(e){return!!e.trim()})).map((function(e){return e.startsWith("* ")?e.replace(/^\*\s+/,""):e})).map((function(e){return e.trim()})).map(c.iF);return(0,i.Z)((0,r.Z)({},e),{branches:Array.from(new Set(n))})}},H={format:function(e){return f("git stash -u")}},z={format:function(e){return f("git checkout stash -- .")}},V={format:function(e,t,n){var r;r=e.gitHubName?e.gitHubName:t.fullName||t.username;var i=e.gitHubEmail||"<>",o='-c user.name="'.concat(r,'" -c user.email="').concat(i,'"');return f("git ".concat(o," merge -Xtheirs --allow-unrelated-histories --no-edit origin/").concat(n))}}},67128:function(e,t,n){var r,i,o;n.d(t,{$U:function(){return i},Xe:function(){return a},l4:function(){return r},pD:function(){return o}}),function(e){e[e.NONE=0]="NONE",e[e.PUSH=1]="PUSH",e[e.CLONE=2]="CLONE",e[e.FETCH=3]="FETCH",e[e.GITHUB_CREATE=4]="GITHUB_CREATE",e[e.GITHUB_GET_INFO=5]="GITHUB_GET_INFO"}(r||(r={})),function(e){e.None="NONE",e.NoMergeBase="NO_MERGE_BASE",e.AuthFetchError="AUTH_FETCH_ERROR",e.IndexFilesCorrupted="INDEX_FILES_CORRUPTED"}(i||(i={})),function(e){e[e.UNTRACKED=0]="UNTRACKED",e[e.MODIFIED=1]="MODIFIED",e[e.MOVED=2]="MOVED",e[e.DELETED=3]="DELETED"}(o||(o={}));var a={isInitialized:!1,hasConflictsWithFetchedRemote:!1,hasMergeBaseWithFetchedRemote:!0,authError:r.NONE,badState:i.None,remote:"",repoId:null,branch:"",defaultBranch:"main",branches:[],installations:[],changedFiles:[],commits:[],commitsAhead:null,commitsBehind:null,remoteToken:null,gitHubName:null,ownerId:null,gitHubAvatarUrl:null,gitHubEmail:null}},92157:function(e,t,n){n.d(t,{JE:function(){return o},cW:function(){return a},iF:function(){return l},mJ:function(){return i}});var r=n(9941);function i(e){if(!e)return"";var t=(0,r.Z)(o(e),2),n=t[0],i=t[1];return n&&i?"".concat(n,"/").concat(i):e}function o(e){if(!e)return["",""];var t=e.match(/^https:\/\/github\.com\/(.+)\/(.+)/);if(null!==t){var n=(0,r.Z)(t,3);return[n[1],n[2]]}return["",""]}function a(e,t){return"".concat(e,"/commit/").concat(t)}function l(e){return e.startsWith("remotes/origin/HEAD ->")?e.split("/").reverse()[0]:(e.startsWith("remotes/origin/")&&(e=e.replace("remotes/origin/","")),e.includes(" -> ")&&(e=e.split(" -> ")[0]),e.trim())}},55183:function(e,t,n){n.d(t,{BI:function(){return f},EI:function(){return g},bA:function(){return v},ox:function(){return m}});var r,i,o,a,l=n(14251),c=n(82378),s=n(2581),u=n(7182),d=n(67294),f=(0,c.u)((function(){return null})),p=(0,u.cn)(null),h=(0,u.cn)((function(e){return e(p)}),(function(e,t,n){if(null===n)t(p,null);else{var c=e(p),s=c?(0,l.Z)({},c,n):(0,l.Z)({},n);if(!s.filePath||!s.changes)throw new Error('"filePath", "changes" required when initializing history state');f.set((function(){return s}));var u,d,h,v,m=s.changes.length;if(0===m)return s.users={},s.version=0,s.playing=!1,s.comparing=!1,s.count=0,void t(p,s);null!==(u=(r=s).count)&&void 0!==u||(r.count=m),null!==(d=(i=s).version)&&void 0!==d||(i.version=m-1),null!==(h=(o=s).playing)&&void 0!==h||(o.playing=!1),null!==(v=(a=s).comparing)&&void 0!==v||(a.comparing=!1),(null===c||void 0===c?void 0:c.changes)&&s.changes!==c.changes&&(s.count=m,s.version=Math.min(s.version,m-1),s.playing=!1,s.comparing=!1),s.version===m-1&&(s.playing=!1),t(p,s)}}));function v(){return(0,u.KO)(h,s.d8)}var m=(0,d.createContext)({});function g(e,t){return(0,d.useMemo)((function(){return{openHistory:function(){return t({type:"history",data:{path:e}})},closeHistory:function(){return t({type:"codeEditor",data:{path:e}})}}}),[e,t])}},96929:function(e,t,n){n.d(t,{j:function(){return s},p:function(){return u}});var r=n(14251),i=n(60977),o=n(37806),a=n(67294),l=n(95716),c=n(55183);function s(){var e=(0,o.uV)();return(0,a.useCallback)((function(t,n,i){e({origin:"History2: useHistoryBSOD",error:t,tags:{source:"ws-history2",type:n},extras:(0,r.Z)({state:c.BI.current()},i)})}),[e])}function u(e){(0,i.j)(l.U3.HISTORY_USED,{action:e,which:"ws"})}},76696:function(e,t,n){n.d(t,{Z:function(){return le}});var r=n(35944),i=n(40705),o=n(44747),a=n(67294),l=n(99408),c=n(6625),s=n(12215),u=n(34727),d=n(9941),f=n(70655),p=n(60977);function h(e,t){return t.some((function(t){var n,r;return(null===(n=t.name)||void 0===n?void 0:n.toLowerCase())===(null===(r=e.name)||void 0===r?void 0:r.toLowerCase())}))}var v=n(64487),m=n(24351);function g(e){var t=e.searchPackagesFn,n=e.query,r=e.packagerType,i=(0,a.useState)([]),o=i[0],l=i[1],c=(0,a.useState)(),s=c[0],u=c[1],d=(0,a.useState)(!1),f=d[0],h=d[1],g=(0,m.Z)(n,400);return(0,a.useEffect)((function(){if(u(null),""===g)return h(!1),void l([]);h(!0),(0,p.j)(p.U3.PACKAGE_MANAGER_USED,{action:"searched",query:g,packagerType:r});var e=!1;return t(g).then((function(t){e||l(t)})).catch((function(t){v.Tb(t),e||u(t)})).finally((function(){e||h(!1)})),function(){e=!0}}),[t,g,r]),{searchResults:o,isLoading:f,error:s}}var y,Z=n(14251),b=n(57704),w=n(77365),x=n(59641),E=n(8941),C=n(6148);!function(e){e.INSTALL="Install",e.INSTALLED="Installed",e.REMOVE="Remove",e.ERROR="Failed to Install"}(y||(y={}));var S=n(88075),T=(0,x.Xb)({self:[x.l0.p(8),x.l0.borderRadius(8),x.l0.width("100%")],header:[x.l0.flex.row,x.l0.justify.spaceBetween],description:[x.l0.colWithGap(16),x.l0.mt(8)]});function k(e){var t=e.onActionClick,n=e.isAlreadyInstalled,i=e.isPackagerRunning,o=e.isIconLoading,l=e.statusMessage,c=e.itemName,s=e.itemDescription,u=e.itemVersion,d=e.itemHomepageURL,f=e.itemLicense,p=e.itemAuthor,h=e.itemDependencies,v=e.htmlItem,m=(0,a.useState)(!1),g=m[0],y=m[1];return(0,r.BX)(x.Tg,{css:T.self,background:"higher",children:[(0,r.BX)(x.G7,{css:T.header,children:[(0,r.tZ)(x.h4,{variant:"subheadDefault",level:3,children:c}),(0,r.tZ)(x.hU,{alt:"Show more about package",tooltipHidden:!0,onClick:function(){return y((function(e){return!e}))},children:(0,r.tZ)(E.Z,{rotate:g?90:0})})]}),(0,r.BX)(x.G7,{css:T.description,children:[(0,r.tZ)(P,{title:"Version ".concat(u),value:s||"This package has no description.",showMore:g}),d&&g?(0,r.tZ)(P,{title:"Website",value:(0,r.tZ)("a",{href:d,rel:"noreferrer noopener",target:"_blank",children:d}),showMore:g}):null,f&&g?(0,r.tZ)(P,{title:"License",value:f,showMore:g}):null,p&&g?(0,r.tZ)(P,{title:"Author",value:p,showMore:g}):null,h&&h.length&&g?(0,r.tZ)(P,{title:"Dependencies",value:(0,r.tZ)("ul",{css:{listStyle:"none"},children:null===h||void 0===h?void 0:h.map((function(e){return(0,r.tZ)("li",{children:e},e||"")}))}),showMore:g}):null,(0,r.tZ)(x.zx,(0,Z.Z)({iconLeft:(0,r.tZ)(G,{isAlreadyInstalled:n,isPackagerRunning:i,isIconLoading:o,htmlItem:!!v}),text:l,onClick:function(){return t()},disabled:i&&!o,loading:o},D(l)))]})]})}var _=(0,x.Xb)({self:[T.self,x.pt.backgroundPulse(),x.l0.height(128)]});function R(){return(0,r.tZ)(r.HY,{children:new Array(3).fill(0).map((function(e,t){return(0,r.tZ)(x.Tg,{css:_.self,background:"higher"},"itemDetailSkeleton".concat(t))}))})}function D(e){switch(e){case y.REMOVE:return{colorway:"negative",outlined:!0};case y.INSTALLED:return{colorway:"positive",outlined:!0};default:return{}}}var I=(0,x.Xb)({self:[x.l0.colWithGap(2)],title:[x.l0.color.foregroundDimmer]});function P(e){var t=e.title,n=e.value,i=e.showMore;return(0,r.BX)(x.G7,{css:I.self,children:[(0,r.tZ)(x.xv,{css:I.title,children:t}),n?(0,r.tZ)(x.xv,{multiline:!0,maxLines:i?void 0:2,children:n}):null]})}function G(e){var t=e.isAlreadyInstalled,n=e.isIconLoading,i=e.htmlItem;return n?(0,r.tZ)(w.Z,{}):t?i?(0,r.tZ)(S.Z,{}):(0,r.tZ)(b.Z,{}):(0,r.tZ)(C.Z,{})}var B=(0,x.Xb)({self:[x.l0.color.foregroundDefault,x.l0.colWithGap(16)],installedHeader:[x.l0.fontSize(x.TV.fontSizeSubheadDefault)],searchResult:[x.l0.flex.column,{gap:x.TV.space8,listStyle:"none","-webkit-overflow-scrolling":"touch"}]}),A=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e?t?y.INSTALLED:y.REMOVE:y.INSTALL},U=n(21131),O=n(24888),N=n(70917),L={fadeIn:{animation:"".concat((0,N.F4)("from{opacity:0}to{opacity:1}")," 100ms forwards ease-in-out alternate")}},F=(0,x.Xb)({header:[x.l0.fontSize(x.TV.fontSizeSubheadDefault),x.l0.flex.row,x.l0.align.center,x.l0.justify.spaceBetween],loading:[x.l0.height(22),x.l0.width("100%"),x.l0.borderRadius(4),x.pt.backgroundPulse()]}),X="No packages installed.",M="Installed packages";function W(e){var t=e.error,n=e.loading,i=e.packagesCount,o=e.displayingInstalledPackages,a=e.affectedFile,c=(0,l.Z)().session,s=(0,U.Z)((function(){return o?0===i?X:M:t?"We couldn't search for your packages. Try again.":0===i?"No packages found":i+" packages found"}),[t,i,o]);return(0,r.tZ)(x.G7,{css:L.fadeIn,children:n?(0,r.tZ)(x.G7,{css:F.loading}):(0,r.BX)(r.HY,{children:[(0,r.BX)(x.G7,{css:F.header,children:[(0,r.tZ)(x.h4,{variant:"subheadDefault",level:2,children:s}),s===M&&o&&a?(0,r.tZ)(x.hU,{alt:"Open "+a,tooltipPlacement:"bottom-start",onClick:function(){return c.openFile(a)},children:(0,r.tZ)(O.Z,{})}):null]}),s===X?(0,r.BX)(x.xv,{multiline:!0,children:["You don\u2019t have any packages installed. Try searching for a package to install, or"," ",(0,r.tZ)("a",{href:"https://docs.replit.com/programming-ide/installing-packages",target:"_blank",rel:"noreferrer",children:"learn more about packages here"}),"."]}):null]})},n?"packagerTitleLoading":"packagerTitleLoaded")}var j=n(67629),H=(0,x.Xb)({self:[x.l0.p(8),x.l0.borderRadius(8),x.l0.colWithGap(16)],header:[x.l0.flex.row,x.l0.align.center,x.l0.justify.spaceBetween],headerTitle:[x.l0.rowWithGap(4),x.l0.align.center]});function z(e){var t=e.title,n=e.children,i=e.onClose,o=void 0===i?function(){}:i,l=(0,a.useState)(!0),c=l[0],s=l[1];return(0,r.BX)(x.Tg,{css:H.self,background:"higher",children:[(0,r.BX)(x.G7,{css:H.header,children:[(0,r.BX)(x.G7,{css:H.headerTitle,children:[(0,r.tZ)(x.h4,{variant:"subheadDefault",level:2,children:t}),(0,r.tZ)(x.hU,{alt:c?"Minimize tip information":"Expand tip information",tooltipHidden:!0,onClick:function(){return s((function(e){return!e}))},children:(0,r.tZ)(E.Z,{rotate:c?90:0})})]}),(0,r.tZ)(x.hU,{alt:"Dismiss tip",tooltipHidden:!0,onClick:o,children:(0,r.tZ)(j.Z,{})})]}),c?(0,r.tZ)(x.G7,{children:n}):null]})}function V(e){var t=e.loading,n=e.children;return(0,r.tZ)(r.HY,{children:(0,r.tZ)("ul",{css:[B.searchResult,L.fadeIn],children:t?(0,r.tZ)(R,{}):n},t?"packagerLoading":"packagerLoaded")})}var q=n(93058),K=x.KD.li;function $(e){var t=e.filesAffected,n=(0,a.useState)(""),i=n[0],o=n[1],c=(0,l.Z)().packager,v=function(e){var t=e.packager,n=(0,d.Z)(a.useState(!1),2),r=n[0],i=n[1],o=(0,d.Z)(a.useState(!1),2),l=o[0],c=o[1],s=(0,d.Z)(a.useState("package name"),2),v=s[0],m=s[1],g=(0,d.Z)(a.useState([]),2),y=g[0],Z=g[1];a.useEffect((function(){i(!0);var e=!1;return t.listSpecfile().then((function(t){e||(t.error?Z([]):t.packages&&Z(t.packages),i(!1))})),function(){e=!0}}),[t]);var b=a.useCallback(function(){var e=(0,u.Z)((function(e){var n,o,a;return(0,f.__generator)(this,(function(l){switch(l.label){case 0:if(r)return[2];if((0,p.j)(p.U3.PACKAGE_MANAGER_USED,{action:"installed",packageId:e.name}),!e.name)throw new Error("Package has no name");return h(e,y)?[2]:(i(!0),[4,t.addPackages([{name:e.name}])]);case 1:return l.sent(),[4,t.listSpecfile()];case 2:return n=l.sent(),o=n.packages,a=n.error,o&&Z(o),a&&Z([]),i(!1),[2]}}))}));return function(t){return e.apply(this,arguments)}}(),[t,y,r]),w=a.useCallback(function(){var e=(0,u.Z)((function(e){var n,o,a;return(0,f.__generator)(this,(function(l){switch(l.label){case 0:return r?[2]:e.name&&h(e,y)?((0,p.j)(p.U3.PACKAGE_MANAGER_USED,{action:"removed",packageId:e.name}),i(!0),[4,t.removePackages([e.name])]):[2];case 1:return l.sent(),[4,t.listSpecfile()];case 2:return n=l.sent(),o=n.packages,a=n.error,o&&(Z(o),c(!0),m(e.name)),a&&Z([]),i(!1),[2]}}))}));return function(t){return e.apply(this,arguments)}}(),[t,y,r]),x=a.useCallback((function(e){return h(e,y)}),[y]);return{install:b,uninstall:w,installedPackages:y,isInstalled:x,isRunning:r,showDeletedTooltip:l,packageDeletedName:v,setDeletedTooltip:c}}({packager:c}),m=g({searchPackagesFn:c.searchPackages,query:i,packagerType:"upm"}),y=m.searchResults,Z=m.isLoading,b=""===i,w=b?v.installedPackages:y,E=(0,s.Z)("packager","show_packager_about_tooltip"),C=E.shouldDisplay,S=E.register,T=E.dismiss;(0,a.useEffect)((function(){S()}),[S]);var k=(0,s.Z)("packager","show_packager_import_tooltip"),_=k.shouldDisplay,R=k.register,D=k.dismiss;return(0,a.useEffect)((function(){R()}),[R]),(0,r.BX)(x.G7,{css:B.self,children:[(0,r.tZ)(x.E1,{value:i,onChange:function(e){return o(e.target.value)},loading:Z}),(0,r.tZ)(W,{loading:Z,packagesCount:w.length,displayingInstalledPackages:b,affectedFile:t[0]}),(0,r.tZ)(x.G7,{children:(0,r.tZ)(V,{loading:Z,children:w.map((function(e,t){return(0,r.tZ)(K,{children:(0,r.tZ)(Y,{packager:c,pkg:e,isPackagerRunning:v.isRunning,isAlreadyInstalled:v.isInstalled(e),installPackage:v.install,uninstallPackage:v.uninstall})},e.name||"Unknown"+t)}))})}),C&&b?(0,r.BX)(z,{title:"What are packages?",onClose:function(){return T()},children:["Packages are collections of code that can extend the functionality of your programs. For example, you could add a package to make adding image carousels easier on websites, or a package to manage currency comparisons."," ",(0,r.tZ)("a",{href:"https://docs.replit.com/programming-ide/installing-packages",target:"_blank",rel:"noreferrer",children:"Learn more about packages"})]}):null,b&&_?(0,r.tZ)(z,{title:"Tip\u2014Auto Import",onClose:function(){return D()},children:"If you know which packages you want to use, you can just import and use them in your files as if they were already installed, and they will be installed automatically the next time you run the repl."}):null]})}function Y(e){var t=e.isPackagerRunning,n=e.isAlreadyInstalled,i=e.installPackage,l=e.uninstallPackage,s=e.packager,u=(0,o.Z)(e,["isPackagerRunning","isAlreadyInstalled","installPackage","uninstallPackage","packager"]),f=function(e){var t=e.packager,n=e.pkg,r=(0,d.Z)(a.useState(!1),2),i=r[0],o=r[1],l=(0,d.Z)(a.useState(null),2),c=l[0],s=l[1];return a.useEffect((function(){if(n.name){var e=!1;return t.fetchPackageInfo(n.name).then((function(t){e||(s(t||null),o(!1))})),function(){e=!0}}s(null)}),[t,n.name]),{isLoading:i,packageInfo:c}}({packager:s,pkg:u.pkg}).packageInfo,p=(0,a.useState)(!1),h=p[0],v=p[1],m=(0,c.Z)(),g=f||u.pkg,y="dependencies"in g&&g.dependencies&&g.dependencies.length>0?g.dependencies.map((function(e){return e.name})):null,Z=(0,q.Z)().showNotice;return(0,r.tZ)(k,{onActionClick:function(){t||(v(!0),n?l(g).then((function(){m.current&&v(!1)})):i(g).then((function(){m.current&&(Z("Installed ".concat(g.name)),v(!1))})))},isAlreadyInstalled:n,isPackagerRunning:t,isIconLoading:h,statusMessage:A(n),itemName:g.name,itemDescription:g.description,itemVersion:g.version,itemHomepageURL:g.homepageURL,itemLicense:g.license,itemAuthor:g.author,itemDependencies:y})}var Q,J=n(69779),ee=n(54098),te=n.n(ee),ne=n(89224),re="index.html";!function(e){e[e.Success=0]="Success",e[e.IndexNotFound=1]="IndexNotFound",e[e.AlreadyInstalled=2]="AlreadyInstalled",e[e.InvalidLib=3]="InvalidLib",e[e.UnknownError=4]="UnknownError"}(Q||(Q={}));var ie=x.KD.li;function oe(){var e=(0,l.Z)(),t=e.fs,n=e.session,i=(0,a.useState)(""),o=i[0],c=i[1],s=(0,a.useState)(!1),p=s[0],h=s[1],v=""===o,m=function(e){var t=e.fs,n=e.session,r=(0,d.Z)(a.useState([]),2),i=r[0],o=r[1],l=(0,d.Z)(a.useState(!1),2),c=l[0],s=l[1],p=(0,d.Z)(a.useState([]),2),h=p[0],v=p[1],m=a.useCallback(function(){var e=(0,u.Z)((function(e){return(0,f.__generator)(this,(function(t){return[2,te()("/data/cdnjs/search/".concat(encodeURIComponent(e)),{credentials:"same-origin",headers:{"Content-Type":"application/json",Accept:"application/json"}}).then((function(e){return e.json()}))]}))}));return function(t){return e.apply(this,arguments)}}(),[]);a.useEffect((function(){var e=!1;s(!0);var n=function(){var n=(0,u.Z)((function(){var n,r;return(0,f.__generator)(this,(function(i){switch(i.label){case 0:return[4,t.stat(re)];case 1:return!i.sent().exists||e?(s(!1),[2]):(n=[],r=t.watchTextFile(re,{onReady:function(e){var t=e.initialContent,r=!0,i=!1,o=void 0;try{for(var a,l=t.split("\n")[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value;if(c.includes('<script src="https')){var u=c.match(/[^/]*(?=\.js)/);u&&n.push(u[0])}}}catch(d){i=!0,o=d}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}v(n),s(!1)},onError:function(){s(!1),r()}}),[2])}}))}));return function(){return n.apply(this,arguments)}}();return n(),function(){e=!0}}),[t,n]),a.useEffect((function(){s(!0);var e=!1,t=function(){var t=(0,u.Z)((function(){var t,n,r,i,a,l,c,u,d;return(0,f.__generator)(this,(function(f){switch(f.label){case 0:if(e)return[2];t=[],n=!0,r=!1,i=void 0,f.label=1;case 1:f.trys.push([1,6,7,8]),a=h[Symbol.iterator](),f.label=2;case 2:return(n=(l=a.next()).done)?[3,5]:(c=l.value,[4,m(c)]);case 3:(u=f.sent()).length>0&&t.push(u[0]),f.label=4;case 4:return n=!0,[3,2];case 5:return[3,8];case 6:return d=f.sent(),r=!0,i=d,[3,8];case 7:try{n||null==a.return||a.return()}finally{if(r)throw i}return[7];case 8:return o(t),s(!1),[2]}}))}));return function(){return t.apply(this,arguments)}}();return t(),function(){e=!0}}),[h,m]);var g=a.useCallback((function(e){return i.includes(e)}),[i]);function y(){return y=(0,u.Z)((function(e){var r;return(0,f.__generator)(this,(function(a){return r=e.lib,[2,new Promise(function(){var e=(0,u.Z)((function(e){var a;return(0,f.__generator)(this,(function(l){switch(l.label){case 0:return[4,t.stat(re)];case 1:return l.sent().exists?(a=t.watchTextFile(re,{onReady:function(l){var c=l.initialContent,s=l.writeChange;if(!r.include)return a(),void e(Q.InvalidLib);var u='<script src="'.concat(r.include,'"><\/script>'),d=c;if(i.includes(r))return a(),void e(Q.AlreadyInstalled);var f=d.indexOf("<script");-1===f&&(f=d.indexOf("</body>")),s({from:f,insert:u+"\n"}),t.flush().then((function(){o((0,J.Z)(i).concat([r])),e(Q.Success)})).catch((function(){e(Q.UnknownError)})).finally((function(){a(),n.openFile(re)}))},onError:function(t){e(t.code===ne.Df.NotFound?Q.IndexNotFound:Q.UnknownError)}}),[2]):[2,e(Q.IndexNotFound)]}}))}));return function(t){return e.apply(this,arguments)}}())]}))})),y.apply(this,arguments)}return{installedPackages:i,loadingPackages:c,searchLibs:m,installLib:function(e){return y.apply(this,arguments)},isInstalled:g}}({fs:t,session:n}),y=g({searchPackagesFn:m.searchLibs,query:o,packagerType:"html"}),Z=y.searchResults,b=y.isLoading,w=y.error,E=v?m.installedPackages:Z,C=b||m.loadingPackages;return(0,r.BX)(x.G7,{css:B.self,children:[(0,r.tZ)(x.E1,{value:o,onChange:function(e){return c(e.target.value)},loading:C}),(0,r.tZ)(W,{loading:C,error:w,packagesCount:E.length,displayingInstalledPackages:v}),(0,r.tZ)(x.G7,{children:(0,r.tZ)(V,{loading:C,children:E.map((function(e,t){return(0,r.tZ)(ie,{children:(0,r.tZ)(ae,{lib:e,install:(0,u.Z)((function(){return(0,f.__generator)(this,(function(t){return h(!0),[2,m.installLib({lib:e}).finally((function(){h(!1)}))]}))})),isInstalling:p,isAlreadyInstalled:m.isInstalled(e)})},e.name||"Unknown"+t)}))})})]})}function ae(e){var t=e.lib,n=e.install,i=e.isInstalling,o=e.isAlreadyInstalled,l=(0,a.useState)(!1),s=l[0],d=l[1],p=(0,c.Z)(),h=(0,q.Z)(),m=h.showNotice,g=h.showError,y=function(){var e=(0,u.Z)((function(){return(0,f.__generator)(this,(function(e){return d(!0),n(t).then((function(e){p.current&&(e===Q.Success?m("Installed ".concat(t.name)):e===Q.IndexNotFound?g("index.html not found."):e===Q.AlreadyInstalled?g("".concat(t.name," was already installed!")):g("Failed to install ".concat(t.name,". Try again.")))})).catch((function(e){v.Tb(e),p.current&&g("Failed to install ".concat(t.name,". Try again."))})).finally((function(){d(!1)})),[2]}))}));return function(){return e.apply(this,arguments)}}();return(0,r.tZ)(k,{onActionClick:function(){i||s||(o?g("".concat(t.name," was already installed!")):y())},isAlreadyInstalled:o,isPackagerRunning:i,isIconLoading:s,statusMessage:A(o,!0),itemName:t.name,itemDescription:t.description,itemVersion:t.version,itemHomepageURL:t.link,htmlItem:!0})}function le(){var e=(0,i.x)();return e?"html"===e.language?(0,r.tZ)(oe,{}):(0,r.tZ)($,{filesAffected:e.packagerFiles}):null}},40705:function(e,t,n){n.d(t,{x:function(){return v}});var r=n(14251),i=n(52875),o=n(67294),a=n(62991),l=n.n(a),c=n(15519),s=n(2916),u=n(67034),d=n(99408),f={nodejs:["package.json","package-lock.json","yarn.lock","node_modules"],python:["poetry.lock","pyproject.toml","requirements.txt",".venv/",".local"],ruby:["Gemfile","Gemfile.lock"],java:["pom.xml","target"]};function p(e){return["python3_classroom","python3_classroom_beta","python3","python3_beta","pygame","pygame_beta"].includes(e)?"python":["nodejs","nodejs_beta","nodejs_prybar","nodejs_prybar_beta","reason_nodejs","nodejs_static"].includes(e)?"nodejs":["ruby","ruby_beta","ruby_classroom","ruby_classroom_beta","rails","rails_beta"].includes(e)?"ruby":c.Z.supportsPackager3(e)?e:null}function h(e){return(0,i.Z)((0,r.Z)({},e),{packagerFiles:f[e.language]||[]})}function v(){var e=(0,o.useState)(null),t=e[0],n=e[1],r=(0,s.Z)(),i=(0,d.Z)().dotReplit;return(0,o.useEffect)((function(){if(r)if("html"!==r.language&&"html_beta"!==r.language){var e=p(r.language);if(e)n(h({language:e,packageSearch:!0,guessImports:!0}));else if("nix"===r.language||"nix_beta"===r.language)return i.watch((function(e){e.error?e.error===u.Yt.NotFound&&n(null):n((function(t){var n,r,i;if(!(null===(n=e.config.packager)||void 0===n?void 0:n.language))return null;var o=e.config.packager.language,a=h({language:p(o)||o,guessImports:Boolean(null===(r=e.config.packager.features)||void 0===r?void 0:r.guessImports),packageSearch:Boolean(null===(i=e.config.packager.features)||void 0===i?void 0:i.packageSearch)});return l()(t,a)?t:a}))}))}else n(h({language:"html",packageSearch:!0,guessImports:!1}))}),[r,i]),t}},92364:function(e,t,n){n.d(t,{Z:function(){return m}});var r=n(69779),i=n(35944),o=n(9008),a=n.n(o),l=n(63377),c=n(40381),s=n(14251),u=n(32692),d=n(31230),f=n(37887);function p(){var e=(0,u.Z)(["\n  query WorkspacePageTitle($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        title\n      }\n    }\n  }\n"]);return p=function(){return e},e}var h={},v=(0,d.Ps)(p());function m(e){var t,n=e.prefix,o=void 0===n?"":n,u=e.suffix,d=void 0===u?"":u,p=(0,c.Z)(),m=function(e){var t=(0,s.Z)({},h,e);return f.a(v,t)}({variables:{replId:(0,l.Z)()}}),g=m.data||m.previousData,y="Repl"===(null===g||void 0===g||null===(t=g.repl)||void 0===t?void 0:t.__typename)?g.repl:null,Z=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,r.Z)(t.filter(Boolean)).concat(["Replit"]).join(" - ")}(o,p,null===y||void 0===y?void 0:y.title,d);return(0,i.tZ)(a(),{children:(0,i.tZ)("title",{children:Z},"title")})}},61745:function(e,t,n){n.d(t,{M:function(){return E}});var r=n(35944),i=n(83470),o=n(33081),a=n(9941),l=n(59641),c=n(67629),s=n(85873),u=n(67294),d=n(3660);function f(e){var t=e.onDismiss,n=e.context,i=e.showTrial,o=void 0!==i&&i,f=(0,a.Z)(u.useState(!1),2),p=f[0],h=f[1];return(0,r.BX)(r.HY,{children:[(0,r.BX)(l.G7,{css:[l.l0.rowWithGap(4),l.l0.align.center,l.l0.justify.start],dataCy:"ghostwriter-opt-in-banner",children:[(0,r.tZ)(l.zx,{iconLeft:(0,r.tZ)(s.Z,{}),text:o?"Try Ghostwriter Free":"Try Ghostwriter",colorway:"blurple",css:[l.l0.flex.grow(1),l.l0.flex.shrink(0),l.l0.align.center],onClick:function(){return h(!0)},alignment:"start"}),(0,r.tZ)(l.hU,{onClick:t,tooltipHidden:!0,alt:"Close banner",children:(0,r.tZ)(c.Z,{})})]}),(0,r.tZ)(d.Z,{context:n,isOpen:p,onRequestClose:function(){return h(!1)},uponPurchaseGoTo:"cyclesPage",powerUp:"ghostwriter"})]})}var p=n(19566),h=n(88159);function v(e){var t=e.context,n=(0,p.s)(),i=n.cta,o=n.trialExpiryDate,c=(0,a.Z)(u.useState(!1),2),f=c[0],v=c[1];if(i!==p.m.TrialOngoing&&i!==p.m.TrialExpired)return null;var m=(0,h.X)(o);return(0,r.BX)(r.HY,{children:[(0,r.BX)(l.G7,{css:[l.l0.colWithGap(8)],dataCy:"ghostwriter-trial-expiry-banner",children:[(0,r.BX)(l.G7,{css:[l.l0.flex.row,l.l0.justify.spaceBetween,{flexWrap:"wrap",gap:"8px"}],children:[(0,r.BX)(l.G7,{css:[l.l0.align.center,l.l0.rowWithGap(8)],children:[(0,r.tZ)(s.Z,{}),(0,r.tZ)(l.xv,{children:"Ghostwriter Trial"})]}),(0,r.tZ)(l.xv,{color:"dimmer",children:i===p.m.TrialOngoing?m:"Ended"})]}),(0,r.tZ)(l.zx,{onClick:function(){return v(!0)},text:i===p.m.TrialOngoing?"Subscribe Now":"Reactivate",colorway:"blurple"}),(0,r.tZ)(l.RX,{})]}),(0,r.tZ)(d.Z,{context:t,isOpen:f,onRequestClose:function(){return v(!1)},uponPurchaseGoTo:"cyclesPage",powerUp:"ghostwriter"})]})}var m=n(12215),g=n(67803);function y(e){var t=e.context,n=(0,p.s)(),i=n.cta,o=n.trialExpiryDate,a=i===p.m.TrialOngoing&&(0,g.Z)(o,new Date)<=3,l=i===p.m.TrialExpired;return a?(0,r.tZ)(Z,{context:t}):l?(0,r.tZ)(b,{context:t}):null}function Z(e){var t=e.context,n=(0,m.Z)("workspace","ghostwriter-trial-3-day-left-modal"),i=n.shouldDisplay,o=n.dismiss,a=n.register;return u.useEffect((function(){a()}),[a]),(0,r.tZ)(d.Z,{context:t,isOpen:i,onRequestClose:o,powerUp:"ghostwriter",isAutoTriggered:!0,uponPurchaseGoTo:"cyclesPage"})}function b(e){var t=e.context,n=(0,m.Z)("workspace","ghostwriter-trial-expired-modal"),i=n.shouldDisplay,o=n.dismiss,a=n.register;return u.useEffect((function(){a()}),[a]),(0,r.tZ)(d.Z,{context:t,isOpen:i,onRequestClose:o,powerUp:"ghostwriter",isAutoTriggered:!0,uponPurchaseGoTo:"cyclesPage"})}var w=n(2146),x=n(10449);function E(){var e=(0,p.s)(),t=e.cta,n=e.loading,a=t!==p.m.ActivateAlreadyTrialed,l=a?"ghostwriter-trial-repl-resources-cta":"ghostwriter-repl-resources-cta",c=(0,w.o)(l),s=c.isLoading,u=c.isDone,d=c.setAsDone;if(s||n)return null;switch(t){case p.m.None:return null;case p.m.TrialOngoing:return(0,r.BX)(r.HY,{children:[(0,r.tZ)(o.Z,{}),(0,r.tZ)(i.Z,{}),(0,r.tZ)(y,{context:"repl_resources"}),(0,r.tZ)(v,{context:"repl_resources"})]});case p.m.TrialExpired:return(0,r.BX)(r.HY,{children:[(0,r.tZ)(y,{context:"repl_resources"}),(0,r.tZ)(v,{context:"repl_resources"})]});case p.m.Activate:case p.m.ActivateAlreadyTrialed:return u||s?null:(0,r.tZ)(r.HY,{children:(0,r.tZ)(f,{showTrial:a,onDismiss:d,context:"repl_resources"})});case p.m.Activated:return(0,r.BX)(r.HY,{children:[(0,r.tZ)(o.Z,{}),(0,r.tZ)(i.Z,{})]});default:(0,x.Z)(t)}}},69880:function(e,t,n){n.d(t,{ky:function(){return f},qo:function(){return u}});var r=n(14251),i=n(32692),o=n(31230),a=n(37887);function l(){var e=(0,i.Z)(["\n  fragment PowerUpActionsMultiBoostToggle on Repl {\n    id\n    powerUps {\n      __typename\n      ... on ReplPowerUpTypes {\n        boost {\n          __typename\n          sku\n          methodOfPayment\n        }\n      }\n    }\n  }\n"]);return l=function(){return e},e}function c(){var e=(0,i.Z)(["\n  query MultiBoostToggle($replId: String!) {\n    repl(id: $replId) {\n      __typename\n      ... on Repl {\n        ...PowerUpActionsMultiBoostToggle\n      }\n    }\n  }\n  ","\n"]);return c=function(){return e},e}var s={},u=(0,o.Ps)(l()),d=(0,o.Ps)(c(),u);function f(e){var t=(0,r.Z)({},s,e);return a.a(d,t)}},26799:function(e,t,n){n.d(t,{Z:function(){return Ge}});var r=n(69779),i=n(35944),o=n(67294),a=n(4158),l=n(43186),c=n(70804),s=n(60977),u=n(69346),d=n(1144),f=n(81255),p=n(37424);function h(e){var t=e.id,n=e.title,r=e.children,a=(0,p.H)()(t);return(0,i.BX)(u.G,{css:[f.l0.colWithGap(8)],children:[(0,i.tZ)(u.G,{tag:"label",htmlFor:a,children:"string"===typeof n?(0,i.tZ)(d.x,{children:n}):n}),o.cloneElement(r,{id:a})]})}var v=n(26801),m=n(19566),g=n(31222),y=n(59641),Z=n(85873),b=n(77365),w=n(10449),x=n(67573),E=n(67329),C=n(44796),S=n(89149),T=n(23384),k=n(15589),_=n(53429),R=n(33279),D=n(25675),I=n.n(D),P=n(71443),G=n(14251),B=n(32692),A=n(31230),U=n(37887);function O(){var e=(0,B.Z)(["\n  query CodeSuggestionPreferences {\n    currentUser {\n      id\n      userPowerUpsByType {\n        __typename\n        ... on UnauthorizedError {\n          message\n        }\n        ... on UserPowerUpsTypes {\n          ghostwriter {\n            active\n          }\n        }\n      }\n    }\n  }\n"]);return O=function(){return e},e}var N={},L=(0,A.Ps)(O());var F=[{title:"enabled",value:!0},{title:"disabled",value:!1}],X=Array.from(P.v,(function(e){return{title:e,value:e}}));function M(){var e,t,n=!(0,C.S)(),o=(0,T.D)({controlName:"flag-code-suggestion-engine"}),c=function(e){var t=(0,G.Z)({},N,e);return U.a(L,t)}().data,u="UserPowerUpsTypes"===(null===c||void 0===c||null===(e=c.currentUser)||void 0===e?void 0:e.userPowerUpsByType.__typename)&&c.currentUser.userPowerUpsByType.ghostwriter.active,f=(0,l.Z)(),p=f.preferences,v=f.update,m=(0,E.L)().engine,g={value:null,title:"default"},Z=function(e,t){v((0,x.Z)({},e,t)),(0,s.j)(s.U3.SETTINGS_TOGGLED,{settingChanged:e,updatedValue:t})};return u?(0,i.BX)(i.HY,{children:[(0,i.tZ)(h,{id:"codeSuggestionToggle",title:(0,i.BX)("div",{css:[y.l0.flex.row,y.l0.rowWithGap(8),y.l0.center,y.l0.justify.start],children:[(0,i.tZ)(y.Tg,{css:[y.l0.width(16),y.l0.height(16)],children:(0,i.tZ)(I(),{alt:"Blue and purple fortune telling crystal ball icon used to symbolize Ghostwriter",src:"/public/images/ghostwriter/blurple-circle.svg",width:16,height:16})}),(0,i.tZ)(d.x,{children:"Ghostwriter Complete Code"}),(0,i.tZ)("a",{href:S.qw,target:"_blank",css:y.l0.color.foregroundDefault,onClick:function(){return(0,s.j)(s.U3.EXTERNAL_LINK_VIEWED,{url:S.qw,source:"repl_settings"})},children:(0,i.tZ)(y.hU,{alt:"Learn more",tooltipDelay:"none",tooltipContents:"This feature is powered by Ghostwriter. Click to read more.",type:"button",css:[y.l0.width(16),y.l0.height(16)],children:(0,i.tZ)(a.Z,{color:y.TV.foregroundDefault})})})]}),children:(0,i.BX)(i.HY,{children:[(0,i.tZ)(k.P,{initialSelectedItem:F.find((function(e){return e.value===p.codeSuggestion})),onChange:function(e){return Z("codeSuggestion",null===e||void 0===e?void 0:e.value)},items:F}),n?(0,i.tZ)(d.x,{multiline:!0,children:"Complete Code is currently disabled while there are multiple players in your Repl."}):(0,i.BX)(d.x,{multiline:!0,children:["Complete Code provides inline \u201cghost text\u201d suggestions while you code. Press ",(0,i.tZ)(R.Z,{shortcut:{key:"TAB"}})," or swipe right on your mobile device to accept."]})]})}),o?(0,i.tZ)(h,{id:"completeCodeEngine",title:(0,i.BX)(y.G7,{css:[y.l0.flex.row,y.l0.rowWithGap(8),y.l0.center,y.l0.justify.start],children:[(0,i.tZ)(d.x,{children:"Ghostwriter Complete Code Engine (override) "}),(0,i.tZ)(y.u,{tooltip:"You are seeing this functionality because you have special permissions.",children:(0,i.tZ)(_.Z,{})})]}),children:(0,i.BX)(i.HY,{children:[(0,i.tZ)(k.P,{initialSelectedItem:null!==(t=X.find((function(e){return e.value===p.completeCodeEngine})))&&void 0!==t?t:g,onChange:function(e){return Z("completeCodeEngine",null===e||void 0===e?void 0:e.value)},items:[g].concat((0,r.Z)(X))}),(0,i.BX)(d.x,{multiline:!0,children:["Current applied engine: ",m]})]})}):null]}):null}var W={titleContainer:[y.l0.rowWithGap(8),y.l0.align.center],surface:[y.l0.p(8),y.l0.colWithGap(8),y.l0.borderRadius(8),y.l0.align.start]};function j(){var e=(0,m.s)(),t=e.cta;if(e.loading)return(0,i.tZ)(h,{id:"ghostwriter",title:"Ghostwriter",children:(0,i.tZ)(b.Z,{})});switch(t){case m.m.None:return null;case m.m.Activated:case m.m.TrialOngoing:return(0,i.tZ)(M,{});case m.m.TrialExpired:case m.m.Activate:case m.m.ActivateAlreadyTrialed:return(0,i.tZ)(h,{id:"ghostwriter",title:(0,i.BX)(y.G7,{css:W.titleContainer,children:[(0,i.tZ)(Z.Z,{size:16}),(0,i.tZ)(y.xv,{children:"Ghostwriter"}),(0,i.tZ)(g.Z,{context:"workspace_settings_pane",powerUp:"ghostwriter"})]}),children:(0,i.BX)(y.Tg,{background:"higher",css:W.surface,children:[(0,i.tZ)(y.xv,{multiline:!0,color:"dimmer",children:"Replit's AI pair programmer can complete, generate, explain, and transform code."}),(0,i.tZ)(v.Z,{context:"workspace_settings_pane"})]})});default:(0,w.Z)(t)}}var H=n(83117),z=n(34727),V=n(70655),q=n(63377),K=n(12322),$=n(99408),Y=n(37452),Q=n(6625);var J=n(15902),ee=n(11163),te=n(10129),ne=n(77685),re=n(29542),ie=n(90694),oe=n(41302),ae=Array.from(ie.ce,(function(e){return{title:e,value:e}}));function le(){var e,t=(0,oe.d)(),n=(0,T.D)({controlName:"flag-ghostwriter-chat-engine-override"}),o=(0,l.Z)(),a=o.preferences,c=o.update,u=(0,re.v)(),f={value:null,title:"default"};return(0,i.tZ)(i.HY,{children:t&&n?(0,i.tZ)(h,{id:"completeCodeEngine",title:(0,i.BX)(y.G7,{css:[y.l0.flex.row,y.l0.rowWithGap(8),y.l0.center,y.l0.justify.start],children:[(0,i.tZ)(d.x,{children:"Ghostwriter Chat Engine (override) "}),(0,i.tZ)(y.u,{tooltip:"You are seeing this functionality because you have special permissions.",children:(0,i.tZ)(_.Z,{})})]}),children:(0,i.BX)(i.HY,{children:[(0,i.tZ)(k.P,{initialSelectedItem:null!==(e=ae.find((function(e){return e.value===a.chatEngine})))&&void 0!==e?e:f,onChange:function(e){return t="chatEngine",n=null===e||void 0===e?void 0:e.value,c((0,x.Z)({},t,n)),void(0,s.j)(s.U3.SETTINGS_TOGGLED,{settingChanged:t,updatedValue:n});var t,n},items:[f].concat((0,r.Z)(ae))}),(0,i.BX)(d.x,{multiline:!0,children:["Current applied engine: ",u]})]})}):null})}var ce=n(16491),se=n(67629),ue=n(64080),de=n(92002),fe=n(53771),pe=n(17556),he=n(30551),ve=n(88961);function me(e){return(0,te.AT)(e)||"Shift"===e||"Alt"===e}var ge=(0,y.Xb)({root:[y.l0.colWithGap(8)],row:[y.l0.rowWithGap(8),y.l0.align.center,y.l0.minHeight(28)],left:[y.l0.colWithGap(2)],right:[y.l0.rowWithGap(4),y.l0.align.center,y.l0.justify.end,y.l0.position.relative,y.l0.flex.growAndShrink(1)],recordingRow:[y.l0.rowWithGap(8),y.l0.align.center],recordingRowInner:[y.l0.rowWithGap(4),y.l0.align.center]});function ye(e){var t,n,r,a=e.command,l=(0,ce.r3)(),c=(0,o.useState)(null),s=c[0],u=c[1],d=(0,o.useState)(null),f=d[0],p=d[1],h=(0,o.useState)(null!==(t=a.shortcut)&&void 0!==t?t:null),v=h[0],m=h[1],g=function(e){var t=(0,o.useRef)({});return{onKeyDown:function(n){n.preventDefault(),n.stopPropagation();var r=t.current,i=r.cmdOrCtrlKey||r.shiftKey||r.altKey;if(me(n.key)||i)return me(n.key)?((0,te.AT)(n.key)?r.cmdOrCtrlKey=!0:"Shift"===n.key?r.shiftKey=!0:"Alt"===n.key&&(r.altKey=!0),void e({type:"update",recorded:(0,G.Z)({},r)})):void e({type:"success",shortcut:{key:n.key,altKey:r.altKey,shiftKey:r.shiftKey,cmdOrCtrlKey:r.cmdOrCtrlKey}});e({type:"error",key:n.key,message:"Shortcut should start with a modifier"})},startRecording:function(){t.current={},e({type:"start"})},stopRecording:function(){e({type:"stop"})}}}((function(e){switch(e.type){case"start":return void p({recorded:null});case"stop":return void p(null);case"update":return void p({recorded:e.recorded});case"success":p(null);var t=l(a.id,e.shortcut);return void(t?u('This shortcut conflicts with "'.concat(t.conflict.name,'"')):m(e.shortcut));case"error":var n;return void p((function(t){return{error:e.message,recorded:null!==(n=null===t||void 0===t?void 0:t.recorded)&&void 0!==n?n:null}}))}})),Z=g.stopRecording,b=g.startRecording,w=g.onKeyDown,x=(0,pe.Z)((function(){return Z()}),[]),E=Boolean(f),C=null===f||void 0===f?void 0:f.recorded,S=null===f||void 0===f?void 0:f.error;return(0,i.BX)(y.G7,{css:ge.root,children:[(0,i.BX)(y.G7,{css:ge.row,children:[(0,i.BX)(y.G7,{css:ge.left,children:[(0,i.tZ)(y.xv,{children:a.name}),a.description?(0,i.tZ)(y.xv,{variant:"small",color:"dimmer",children:a.description}):null]}),(0,i.BX)(y.G7,{innerRef:E?x:void 0,css:ge.right,children:[E?(0,i.tZ)(he.MT,{autoFocus:!0,restoreFocus:!0,children:(0,i.tZ)("input",{onKeyDown:w,css:{opacity:0,width:1}})}):null,v&&!E?(0,i.tZ)(R.Z,{shortcut:v}):null,v||E?null:(0,i.tZ)(y.zx,{small:!0,outlined:!0,iconLeft:(0,i.tZ)(de.Z,{}),text:"Add shortcut",onClick:function(){return b()}}),E?(0,i.BX)(y.G7,{css:ge.recordingRow,children:[v&&!C?(0,i.tZ)(y.zx,{outlined:!0,small:!0,iconLeft:(0,i.tZ)(se.Z,{}),text:"Remove",onClick:function(){l(a.id,void 0),m(null),p(null)}}):null,(0,i.BX)(y.G7,{css:ge.recordingRowInner,children:[C?(0,i.tZ)(R.Z,{shortcut:{cmdOrCtrlKey:C.cmdOrCtrlKey,altKey:C.altKey,shiftKey:C.shiftKey,key:null!==(n=C.key)&&void 0!==n?n:null}}):(0,i.tZ)(y.xv,{color:"dimmest",css:[{fontStyle:"italic"}],children:"Recording..."}),(0,i.tZ)(y.hU,{alt:"Stop",onClick:function(){return Z()},children:(0,i.tZ)(fe.Z,{color:y.TV.redStronger})})]})]}):null,!E&&v?(0,i.tZ)(y.hU,{alt:"Change",onClick:function(){return b()},children:(0,i.tZ)(ue.Z,{})}):null]})]}),S?(0,i.tZ)(y.E_,{icon:(0,i.tZ)(ve.Z,{}),colorway:"warning",text:S,closable:!0,closeAction:function(){return p((function(e){return{recorded:null!==(r=null===e||void 0===e?void 0:e.recorded)&&void 0!==r?r:null}}))}}):null,s?(0,i.tZ)(y.E_,{icon:(0,i.tZ)(ve.Z,{}),colorway:"warning",text:s,closable:!0,closeAction:function(){return u(null)}}):null]})}var Ze=(0,y.Xb)({root:[y.l0.colWithGap(8)],surface:[y.l0.p(8),y.l0.borderRadius(8),y.l0.colWithGap(12)]});function be(){var e=(0,ce.xF)();return(0,i.BX)(y.G7,{css:Ze.root,children:[(0,i.tZ)(y.xv,{children:"Keyboard shortcuts"}),(0,i.tZ)(y.E_,{icon:(0,i.tZ)(ve.Z,{}),colorway:"warning",text:"This is an early preview! Changes are not saved and shortcut conflicts are not detected"}),(0,i.tZ)(y.Tg,{css:Ze.surface,elevated:!0,children:e.map((function(e,t){return(0,i.BX)(o.Fragment,{children:[t>0?(0,i.tZ)(y.Tg,{elevated:!0,style:{height:1}}):null,(0,i.tZ)(ye,{command:e})]},e.id)}))})]})}var we=[{value:"side-by-side",title:"side-by-side"},{value:"stacked",title:"stacked"}],xe=[{value:10,title:"tiny"},{value:12,title:"small"},{value:14,title:"normal"},{value:18,title:"large"},{value:24,title:"huge"}],Ee=[{value:"spaces",title:"spaces"},{value:"tabs",title:"tabs"}],Ce=[{value:2,title:"2"},{value:4,title:"4"},{value:8,title:"8"}],Se=[{value:"default",title:"default"},{value:"emacs",title:"emacs"},{value:"vim",title:"vim"}],Te=[{value:"none",title:"none"},{value:"soft",title:"soft wrap"}],ke=[{value:"disabled",title:"disabled"},{value:"enabled",title:"enabled"}],_e=[{value:"disabled",title:"disabled"},{value:"enabled",title:"enabled"}],Re=["cmdOrCtrlKey","altKey"].map((function(e){return{value:e,title:te.UE[e]}})),De=[{value:"disabled",title:"disabled"},{value:"enabled",title:"enabled"}],Ie=y.KD.div;function Pe(){var e=(0,o.useState)(!1),t=e[0],n=e[1],r=(0,o.useState)(!1),l=r[0],s=r[1],u=(0,o.useRef)(!1);return(0,o.useEffect)((function(){u.current=!0;var e=setTimeout((function(){s(t)}),200);return function(){clearTimeout(e)}}),[t]),(0,i.BX)(y.G7,{css:[y.l0.rowWithGap(8),y.l0.justify.start],onMouseEnter:function(){return n(!0)},onMouseLeave:function(){return n(!1)},children:[(0,i.tZ)(y.xv,{children:"Code intelligence"}),(0,i.BX)(c.Z,{isOpen:l,onClickOutside:function(){return s(!1)},padding:8,children:[(0,i.tZ)(Ie,{children:(0,i.tZ)(a.Z,{})}),(0,i.tZ)(y.G7,{css:[y.l0.maxWidth(240)],children:(0,i.BX)(y.xv,{multiline:!0,children:["Code intelligence gives you autocomplete, helpful info, and hints as you type. See more"," ",(0,i.tZ)("a",{href:"https://replit.com/site/blog/intel",target:"_blank",rel:"noreferrer noopener",children:"here."})]})})]})]})}function Ge(e){var t=e.onBeforePreferencesUpdate,n=e.hideLayoutControl,a=e.className,c=(0,l.Z)(),u=c.preferences,d=c.update,f=(0,J.Vg)((0,ee.useRouter)()),p=(0,J.T3)(),v=function(){var e=(0,o.useState)(!1),t=e[0],n=e[1],r=(0,q.Z)(),i=(0,$.Z)(),a=i.dotReplit,l=i.fs,c=(0,Q.Z)(),s=(0,K.n)();return{reset:(0,o.useCallback)((0,z.Z)((function(){var e;return(0,V.__generator)(this,(function(t){switch(t.label){case 0:return n(!0),[4,(0,Y.W)({fs:l,dotReplit:a,replId:r})];case 1:return e=t.sent().entrypoint,c.current?(n(!0),s({entrypoint:e}),[2]):[2]}}))})),[r,l,a,s,c]),reseting:t}}(),m=(0,T.D)({controlName:"flag-ws-keybindings"}),g=function(e){t&&t(e),Object.keys(e).forEach((function(t){var n=e[t];(0,s.j)(s.U3.SETTINGS_TOGGLED,{settingChanged:t,updatedValue:n})})),d(e)};return u?(0,i.BX)(y.Tg,{className:a,background:"default",css:[y.l0.p(16),y.l0.colWithGap(32),{paddingBottom:"5em"}],children:[n?null:(0,i.tZ)(h,{id:"layout",title:"Default layout",children:(0,i.BX)(y.G7,{css:[y.l0.colWithGap(8)],children:[(0,i.tZ)(y.Ph,{initialSelectedItem:we.find((function(e){return u.isLayoutStacked?"stacked"===e.value:"side-by-side"===e.value})),onChange:function(e){var t="stacked"===(null===e||void 0===e?void 0:e.value);g({isLayoutStacked:t})},items:(0,r.Z)(we)}),(0,i.tZ)(y.zx,{iconLeft:v.reseting?(0,i.tZ)(b.Z,{}):(0,i.tZ)(H.Z,{}),text:"Reset layout",onClick:function(){v.reset()}})]})}),(0,i.tZ)(h,{id:"fontSize",title:"Font size",children:(0,i.tZ)(y.Ph,{initialSelectedItem:xe.find((function(e){return e.value===u.fontSize})),onChange:function(e){var t="number"===typeof(null===e||void 0===e?void 0:e.value)?e.value:14;g({fontSize:t})},items:(0,r.Z)(xe)})}),(0,i.tZ)(h,{id:"indentType",title:"Indent type",children:(0,i.tZ)(y.Ph,{initialSelectedItem:Ee.find((function(e){return e.value===(u.indentIsSpaces?"spaces":"tabs")})),onChange:function(e){var t="spaces"===(null===e||void 0===e?void 0:e.value);g({indentIsSpaces:t})},items:(0,r.Z)(Ee)})}),(0,i.tZ)(h,{id:"indentSize",title:"Indent size",children:(0,i.tZ)(y.Ph,{initialSelectedItem:Ce.find((function(e){return e.value===u.indentSize})),onChange:function(e){var t="number"===typeof(null===e||void 0===e?void 0:e.value)?e.value:2;g({indentSize:t})},items:(0,r.Z)(Ce)})}),m&&!p?(0,i.tZ)(be,{}):null,(0,i.tZ)(h,{id:"keybinds",title:"Keybinds",children:(0,i.tZ)(y.Ph,{initialSelectedItem:Se.find((function(e){return["vim","emacs"].includes(e.value)?e.value===u.keyboardHandler:"default"===e.value&&!u.keyboardHandler})),onChange:function(e){var t=["vim","emacs"].includes(e.value)?e.value:null;g({keyboardHandler:t})},items:(0,r.Z)(Se)})}),(0,i.tZ)(h,{id:"wrapping",title:"Wrapping",children:(0,i.tZ)(y.Ph,{initialSelectedItem:Te.find((function(e){return e.value===(u.wrapping?"soft":"none")})),onChange:function(e){var t="soft"===(null===e||void 0===e?void 0:e.value);g({wrapping:t})},items:(0,r.Z)(Te)})}),(0,i.tZ)(j,{}),(0,i.tZ)(le,{}),(0,i.tZ)(h,{id:"codeIntelligence",title:(0,i.tZ)(Pe,{}),children:(0,i.tZ)(y.Ph,{initialSelectedItem:De.find((function(e){return e.value===(u.codeIntelligence?"enabled":"disabled")})),onChange:function(e){var t="enabled"===(null===e||void 0===e?void 0:e.value);g({codeIntelligence:t})},items:(0,r.Z)(De)})}),(0,i.tZ)(h,{id:"accessibleTerminal",title:(0,i.BX)(i.HY,{children:[(0,i.tZ)(y.xv,{children:"Accessible Terminal Output"}),(0,i.tZ)(y.xv,{css:[y.l0.color.foregroundDimmest,y.l0.pt(4)],multiline:!0,children:"Enable this setting to use a screen reader. Warning: this can affect performance."})]}),children:(0,i.tZ)(y.Ph,{initialSelectedItem:_e.find((function(e){return e.value===(u.accessibleTerminal?"enabled":"disabled")})),onChange:function(e){var t="enabled"===(null===e||void 0===e?void 0:e.value);g({accessibleTerminal:t})},items:(0,r.Z)(_e)})}),(0,i.tZ)(h,{id:"multiselectModifier",title:(0,i.BX)(i.HY,{children:[(0,i.tZ)(y.xv,{children:"Multiselect modifier key"}),(0,i.tZ)(y.xv,{css:[y.l0.color.foregroundDimmest,y.l0.pt(4)],multiline:!0,children:"Modifier key for selecting multiple items in the filetree."})]}),children:(0,i.tZ)(y.Ph,{initialSelectedItem:Re.find((function(e){return e.value===u.multiselectModifierKey})),onChange:function(e){g({multiselectModifierKey:e.value})},items:(0,r.Z)(Re)})}),(0,i.tZ)(h,{id:"webviewAutoOpenOnPortOpened",title:(0,i.tZ)(i.HY,{children:(0,i.tZ)(y.xv,{children:"Automatically open Webview when a port is open"})}),children:(0,i.tZ)(y.Ph,{initialSelectedItem:ke.find((function(e){return e.value===(u.webviewAutoOpenOnPortOpened?"enabled":"disabled")})),onChange:function(e){var t="enabled"===(null===e||void 0===e?void 0:e.value);g({webviewAutoOpenOnPortOpened:t})},items:(0,r.Z)(ke)})}),!f&&(0,i.tZ)(y.uj,{icon:(0,i.tZ)(ne.Z,{}),text:"Themes now apply across the whole site. Switch themes in the site sidebar. Or, click here to create your own theme.",href:"https://replit.com/themes/create",target:"_blank"})]}):null}},17885:function(e,t,n){n.d(t,{BZ:function(){return _},HX:function(){return S},WM:function(){return I},ap:function(){return N},gF:function(){return B},l9:function(){return P},pr:function(){return F},vN:function(){return M},vi:function(){return U},zu:function(){return D}});var r=n(14251),i=n(32692),o=n(31230),a=n(16092),l=n(6695),c=n(88954),s=n(28985),u=n(69880),d=n(15764),f=n(37887),p=n(50319);function h(){var e=(0,i.Z)(["\n  fragment WorkspaceHeaderReplInfoRepl on Repl {\n    id\n    title\n    rawTemplateLabel: templateLabel(disableFallbackToTitle: true)\n    description\n    isPrivate\n    isRenamed\n    url\n    slug\n    workspaceCta\n    isAlwaysOn\n    isBoosted\n    hasGpu\n    lastPublishedAt\n    publishedAs\n    currentUserPermissions {\n      containerAttach\n      changeIconUrl\n      changeTemplateLabel\n      changeTitle\n      changeDescription\n      changePrivacy\n      delete\n      changeAlwaysOn\n      publish\n      fork\n    }\n    user {\n      id\n      image\n      ...UserLinkUser\n    }\n    ...WorkspaceHeaderReplMetadataRepl\n    ...ReplEnvironmentWebviewRepl\n    ...PublishReleaseFormRepl\n    ...PowerUpActionsMultiBoostToggle\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return h=function(){return e},e}function v(){var e=(0,i.Z)(["\n  fragment ReplPowerUpCosts on Repl {\n    id\n    powerUpCosts {\n      ... on PowerUpCostsType {\n        boost {\n          cycles\n          explanation\n        }\n        alwaysOn {\n          cycles\n          explanation\n        }\n        gpu {\n          cycles\n          explanation\n        }\n      }\n    }\n  }\n"]);return v=function(){return e},e}function m(){var e=(0,i.Z)(["\n  query WorkspaceHeaderReplInfo($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        ...WorkspaceHeaderReplInfoRepl\n      }\n    }\n  }\n  ","\n"]);return m=function(){return e},e}function g(){var e=(0,i.Z)(["\n  query CurrentUserStates {\n    currentUser {\n      __typename\n      ... on CurrentUser {\n        id\n        userSubscriptionType\n        isHacker\n      }\n    }\n  }\n"]);return g=function(){return e},e}function y(){var e=(0,i.Z)(["\n  query ReplPowerUpStatus($replId: String!) {\n    currentUser {\n      __typename\n      ... on CurrentUser {\n        id\n        userPowerUpsByType {\n          ... on UserPowerUpsTypes {\n            privateRepls {\n              active\n              cost {\n                cycles\n                explanation\n              }\n            }\n          }\n        }\n      }\n    }\n    repl(id: $replId) {\n      __typename\n      ... on Repl {\n        id\n        ...ReplPowerUpCosts\n      }\n    }\n  }\n  ","\n"]);return y=function(){return e},e}function Z(){var e=(0,i.Z)(["\n  mutation WorkspaceHeaderReplInfoUnpublishTemplate(\n    $input: DeleteReplDeploymentInput!\n  ) {\n    deleteReplDeployment(input: $input) {\n      ... on Repl {\n        id\n        ...PublishReplData\n      }\n    }\n  }\n  ","\n"]);return Z=function(){return e},e}function b(){var e=(0,i.Z)(["\n  mutation WorkspaceHeaderReplInfoUpdateRepl($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        ...WorkspaceHeaderReplInfoRepl\n      }\n    }\n  }\n  ","\n"]);return b=function(){return e},e}function w(){var e=(0,i.Z)(["\n  mutation WorkspaceHeaderReplInfoDeleteRepl($id: String!) {\n    deleteRepl(id: $id) {\n      id\n    }\n  }\n"]);return w=function(){return e},e}function x(){var e=(0,i.Z)(["\n  mutation WorkspaceHeaderReplInfoSetAlwaysOn(\n    $replId: ID!\n    $enabled: Boolean!\n  ) {\n    setAlwaysOn(replId: $replId, enabled: $enabled) {\n      ... on Repl {\n        id\n        ...WorkspaceHeaderReplInfoRepl\n        ...ReplPowerUpCosts\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n  ","\n"]);return x=function(){return e},e}function E(){var e=(0,i.Z)(["\n  mutation WorkspaceHeaderReplInfoSetGpu($replId: ID!, $enabled: Boolean!) {\n    setGpu(replId: $replId, enabled: $enabled) {\n      ... on Repl {\n        id\n        ...WorkspaceHeaderReplInfoRepl\n        ...ReplPowerUpCosts\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n  ","\n"]);return E=function(){return e},e}var C={},S=(0,o.Ps)(h(),a._,l.s,c.sY,s.wd,u.qo),T=(0,o.Ps)(v()),k=(0,o.Ps)(m(),S);function _(e){var t=(0,r.Z)({},C,e);return f.a(k,t)}var R=(0,o.Ps)(g());function D(e){var t=(0,r.Z)({},C,e);return f.a(R,t)}var I=(0,o.Ps)(y(),T);function P(e){var t=(0,r.Z)({},C,e);return f.a(I,t)}var G=(0,o.Ps)(Z(),d.FW);function B(e){var t=(0,r.Z)({},C,e);return p.D(G,t)}var A=(0,o.Ps)(b(),S);function U(e){var t=(0,r.Z)({},C,e);return p.D(A,t)}var O=(0,o.Ps)(w());function N(e){var t=(0,r.Z)({},C,e);return p.D(O,t)}var L=(0,o.Ps)(x(),S,T);function F(e){var t=(0,r.Z)({},C,e);return p.D(L,t)}var X=(0,o.Ps)(E(),S,T);function M(e){var t=(0,r.Z)({},C,e);return p.D(X,t)}},91553:function(e,t,n){n.d(t,{Z:function(){return Wt}});var r=n(34727),i=n(14251),o=n(52875),a=n(9941),l=n(70655),c=n(35944),s=n(60357),u=n.n(s),d=n(64487),f=n(67294),p=n(91895),h=n(74591),v=n(59369),m=n(71471),g=n(64080),y=n(77365),Z=n(60459),b=n(19526),w=n(49619),x=n(62722),E=n(7657);function C(e){var t=f.useRef(null),n=(0,a.Z)(f.useState(e.value),2),r=n[0],i=n[1],o=(0,a.Z)(f.useState(null),2),l=o[0],s=o[1],d=(0,Z.Z)({onUpload:function(t){var n=t.url;e.onChange(n)},onUploadPreview:function(e){var t=e.dataUrl;i(t)},onError:function(e){s(e.message)}});f.useEffect((function(){i(e.value)}),[e.value]);var p=null===r||void 0===r?void 0:r.startsWith("data:"),h=32;return(0,c.BX)(b.gC,{spacing:"var(--space-4)",children:[(0,c.BX)("div",{onClick:function(){var e;null===(e=t.current)||void 0===e||e.click()},"aria-label":r?"Change icon":"Upload an icon","data-microtip-position":"right",role:"tooltip",className:u().dynamic([["5de27f185cb9bc33",[h,h]]])+" "+((r?"update-icon":"add-icon")||""),children:[r?(0,c.BX)(c.HY,{children:[(0,c.tZ)(m.Z,{iconUrl:r,size:h,alt:"icon"}),p?(0,c.tZ)("div",{className:u().dynamic([["5de27f185cb9bc33",[h,h]]])+" loading-state",children:(0,c.tZ)("div",{className:u().dynamic([["5de27f185cb9bc33",[h,h]]])+" loading-icon",children:(0,c.tZ)(y.Z,{})})}):(0,c.tZ)("div",{className:u().dynamic([["5de27f185cb9bc33",[h,h]]])+" hover-state",children:(0,c.tZ)(g.Z,{})})]}):(0,c.tZ)(w.Z,{}),(0,c.tZ)("input",{ref:t,accept:x.W9.join(","),type:"file",onChange:function(e){var t=e.target,n=t.validity,r=t.files;n.valid&&(null===r||void 0===r?void 0:r.length)&&(s(null),d.uploadImage(r[0],E.N.TemplateIcon))},className:u().dynamic([["5de27f185cb9bc33",[h,h]]])})]}),l?(0,c.tZ)("div",{className:u().dynamic([["5de27f185cb9bc33",[h,h]]])+" error",children:l}):null,(0,c.tZ)(u(),{id:"5de27f185cb9bc33",dynamic:[h,h],children:".add-icon.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;border:1px dashed var(--foreground-dimmest);background-color:var(--background-root);width:".concat(h,"px;height:").concat(h,"px}.add-icon.__jsx-style-dynamic-selector:hover{color:var(--accent-primary-default);border-color:var(--accent-primary-default)}.add-icon.__jsx-style-dynamic-selector,.update-icon.__jsx-style-dynamic-selector{position:relative;cursor:pointer;background-color:var(--background-higher);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);padding:2px}.update-icon.__jsx-style-dynamic-selector:hover .hover-state.__jsx-style-dynamic-selector{opacity:.8}.hover-state.__jsx-style-dynamic-selector{opacity:0}.loading-state.__jsx-style-dynamic-selector{opacity:.8}.loading-icon.__jsx-style-dynamic-selector{-webkit-animation:rotate 1s linear infinite;-moz-animation:rotate 1s linear infinite;-o-animation:rotate 1s linear infinite;animation:rotate 1s linear infinite;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center}@-webkit-keyframes rotate{from{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-moz-keyframes rotate{from{-moz-transform:rotate(0deg);transform:rotate(0deg)}to{-moz-transform:rotate(360deg);transform:rotate(360deg)}}@-o-keyframes rotate{from{-o-transform:rotate(0deg);transform:rotate(0deg)}to{-o-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes rotate{from{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}.hover-state.__jsx-style-dynamic-selector,.loading-state.__jsx-style-dynamic-selector{color:var(--accent-primary-default);position:absolute;top:0;left:0;width:100%;height:100%;-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);background-color:var(--background-root);overflow:hidden;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center}input.__jsx-style-dynamic-selector{opacity:0;position:absolute;top:0;left:0;width:100%;height:100%;z-index:-1}.error.__jsx-style-dynamic-selector{font-size:var(--font-size-default);color:var(--accent-negative-default)}")})]})}var S=n(60368),T=n(88046),k=n(80658),_=n(3660),R=n(13310),D=n(98202),I=n(17556),P=n(20861),G=n(9614),B=n(59292),A=n(23384),U=n(6625),O=n(93058),N=n(63377),L=n(56919),F=n(57208),X=n(47263),M=n(60977),W=n(59641),j=n(10982),H=n(88075),z=n(10449),V=n(4158),q=n(57704),K=n(59247),$=K.iY.map((function(e){return{title:"$".concat((e*K.Fv).toLocaleString()),value:e}})),Y=$.reduce((function(e,t){return e[t.value]=t,e}),{});function Q(){var e=(0,f.useState)(!0),t=e[0],n=e[1],r=(0,f.useState)(K.iY[0]),i=r[0],o=r[1],a=(0,f.useState)(!1),l=a[0],s=a[1],u=(0,f.useState)(0),d=u[0],p=u[1];return(0,c.BX)(W.G7,{css:[W.l0.pl(24),W.l0.colWithGap(8)],children:[(0,c.BX)(W.G7,{css:[W.l0.rowWithGap(8),W.l0.align.center],children:[(0,c.tZ)(W.XZ,{checked:t,id:"auto-refill",onChange:function(){return n(!t)}}),(0,c.tZ)(W.xv,{variant:"small",color:"dimmer",multiline:!0,css:[W.l0.flex.growAndShrink(1)],children:"Auto-refill: Charge this card $[X] when your Cycles balance is below [X] to refill your balance. Learn more"})]}),t?(0,c.BX)(c.HY,{children:[(0,c.BX)(W.G7,{css:[W.l0.rowWithGap(8),W.l0.align.center],children:[(0,c.tZ)(W.xv,{variant:"small",color:"dimmer",children:"Refill Amount"}),(0,c.tZ)(W.Ph,{items:$,selectedItem:Y[i],onChange:function(e){return o(e.value)}}),l?null:(0,c.BX)(c.HY,{children:[(0,c.tZ)(W.zx,{text:"Enable Monthly Budget",onClick:function(){return s(!0)}}),(0,c.tZ)(W.hU,{alt:"Hello",children:(0,c.tZ)(V.Z,{})})]})]}),l?(0,c.BX)(W.G7,{css:[W.l0.rowWithGap(8),W.l0.align.center],children:[(0,c.tZ)(W.xv,{variant:"small",color:"dimmer",children:"Monthly Budget"}),(0,c.tZ)(W.II,{value:"$".concat(d.toLocaleString()),css:[W.l0.maxWidth(80)],maxLength:8,onChange:function(e){var t=e.target.value.replace(/\D/g,"");if(""!==t){var n=parseInt(t,10);p(n)}else p(0)}}),(0,c.tZ)(W.hU,{alt:"Disable Monthly Budget",onClick:function(){return s(!1)},children:(0,c.tZ)(q.Z,{})})]}):null]}):(0,c.tZ)(W.G7,{children:(0,c.tZ)(W.E_,{colorway:"warning",icon:(0,c.tZ)(j.Warning,{}),text:"Without auto-refill, you may lose access to power-ups if you run out of Cycles."})})]})}function J(){return(0,c.tZ)(W.xv,{css:[W.l0.fontWeight.medium],children:"Visa \xb7\xb7\xb7\xb7 1234"})}function ee(){return(0,c.BX)(W.G7,{css:[W.l0.colWithGap(16)],children:[(0,c.BX)(W.G7,{css:[W.l0.colWithGap(4)],children:[(0,c.BX)(W.G7,{css:[W.l0.rowWithGap(8),W.l0.align.center],children:[(0,c.tZ)(W.hU,{alt:"Delete Payment Method",onClick:function(){return null},children:(0,c.tZ)(j.Trash,{})}),(0,c.tZ)(J,{})]}),(0,c.tZ)(Q,{})]}),(0,c.BX)(W.G7,{css:[W.l0.rowWithGap(12),W.l0.align.start],children:[(0,c.tZ)(W.zx,{text:"Add Payment Method",iconLeft:(0,c.tZ)(j.Plus,{}),onClick:function(){return null}}),(0,c.tZ)(W.zx,{text:"Save Changes",onClick:function(){return null}})]})]})}var te=n(89149),ne=n(92002),re=n(37424),ie=n(19536),oe=n(38164);function ae(e){var t=e.amount,n=e.includeUsd,r=e.variant,i=e.color,o=(0,ie.$E)(t),a=(0,ie.H2)(t);return(0,c.BX)(W.G7,{css:[W.l0.rowWithGap(2),W.l0.align.center],children:[(0,c.tZ)(oe.Z,{size:"small"===r?12:16}),(0,c.BX)(W.xv,{variant:r,color:i,children:[a,n?" (".concat(o,")"):""]})]})}var le=n(13331);function ce(e){var t=e.size;return(0,c.tZ)(W.G7,{css:[W.l0.width(40),W.l0.height(40),W.l0.borderRadius(8),W.l0.justify.center,W.l0.align.center,W.l0.backgroundColor.accentPrimaryDimmer],children:(0,c.tZ)(le.Z,{size:t})})}function se(e){var t=e.powerUpCategory,n=e.cyclesCost,r=e.description,i=te.S0[t];return(0,c.tZ)(W.G7,{css:[W.l0.colWithGap(16)],children:(0,c.BX)(W.G7,{css:[W.l0.flex.row,W.l0.justify.spaceBetween],children:[(0,c.BX)(W.G7,{css:[W.l0.rowWithGap(8),W.l0.align.center],children:[(0,c.tZ)(ce,{size:24}),(0,c.BX)(W.G7,{css:[W.l0.px(8),W.l0.py(2),W.l0.colWithGap(8),W.l0.justify.spaceBetween],children:[(0,c.tZ)(W.xv,{variant:"subheadDefault",children:i.name}),(0,c.tZ)(W.xv,{variant:"small",color:"dimmer",children:r})]})]}),(0,c.BX)(W.G7,{css:[W.l0.px(8),W.l0.py(2),W.l0.colWithGap(8),W.l0.justify.spaceBetween,W.l0.align.end],children:[(0,c.tZ)(ae,{amount:n,includeUsd:!0}),(0,c.BX)(W.xv,{variant:"small",color:"dimmer",children:["per / ",i.orderDuration]})]})]})})}function ue(e){var t=e.selectedPaymentMethod,n=e.setSelectedPaymentMethod,r=e.cyclesBalance,i=(0,re.H)();return(0,c.BX)(W.G7,{css:[W.l0.colWithGap(12),W.l0.align.start],children:[(0,c.tZ)(W.zx,{iconLeft:(0,c.tZ)(ne.Z,{}),text:"Add Payment Method",small:!0}),(0,c.tZ)(W.xv,{color:"dimmer",multiline:!0,variant:"small",children:"Adding a payment method can ensure your power-ups never get disabled when you run out of Cycles."}),(0,c.BX)(W.Ee,{name:i("paymentPicker"),value:t,onChange:function(e){var t=e.target.value;"CYCLES"!==t&&"CARD"!==t||n(t)},css:[W.l0.colWithGap(12),{alignSelf:"stretch"}],children:[(0,c.BX)(W.G7,{css:[W.l0.rowWithGap(8),W.l0.align.center],children:[(0,c.tZ)(W.Y8,{id:i("CARD"),value:"CARD",checked:"CARD"===t}),(0,c.tZ)(W.G7,{css:[W.l0.rowWithGap(2),W.l0.align.center,W.l0.flex.grow(1)],children:(0,c.tZ)("label",{htmlFor:i("CARD"),children:(0,c.tZ)(J,{})})})]}),"CARD"===t?(0,c.tZ)(Q,{}):null,(0,c.BX)(W.G7,{css:[W.l0.rowWithGap(8),W.l0.align.center],children:[(0,c.tZ)(W.Y8,{id:i("CYCLES"),value:"CYCLES",checked:"CYCLES"===t}),(0,c.BX)(W.G7,{css:[W.l0.rowWithGap(2),W.l0.align.center,W.l0.flex.grow(1)],children:[(0,c.tZ)("label",{htmlFor:i("CYCLES"),children:(0,c.tZ)(W.xv,{color:"default",children:"Cycles"})}),(0,c.tZ)(W.RX,{}),(0,c.tZ)(ae,{amount:r,includeUsd:!1,color:"default"})]})]})]})]})}function de(e){var t=e.confirmationText,n=e.onSuccess;return(0,c.tZ)(W.zx,{colorway:"primary",text:t,big:!0,onClick:n})}function fe(e){var t=e.onSuccess,n=(0,f.useState)("CYCLES"),r=n[0],i=n[1];return(0,c.BX)(W.G7,{css:[W.l0.colWithGap(16)],children:[(0,c.tZ)(se,{powerUpCategory:"multiboost",cyclesCost:100,description:"Your Repl will be 8x faster"}),(0,c.tZ)(W.RX,{}),(0,c.tZ)(ue,{selectedPaymentMethod:r,setSelectedPaymentMethod:function(e){return i(e)},cyclesBalance:1e3}),(0,c.tZ)(de,{confirmationText:"Purchase Boost Upgrade",onSuccess:t})]})}var pe=n(88961);function he(e){var t=e.onEditAutoRefill;return(0,c.BX)(W.G7,{css:[W.l0.colWithGap(16)],children:[(0,c.BX)(W.G7,{css:[W.l0.rowWithGap(8),W.l0.justify.spaceBetween,W.l0.align.center],children:[(0,c.BX)(W.G7,{css:[W.l0.rowWithGap(8),W.l0.align.center],children:[(0,c.tZ)(ce,{size:24}),(0,c.BX)(W.G7,{css:[W.l0.px(8),W.l0.py(2),W.l0.colWithGap(8),W.l0.justify.spaceBetween],children:[(0,c.tZ)(W.xv,{children:"Boost upgraded"}),(0,c.BX)(W.G7,{css:W.l0.rowWithGap(4),children:[(0,c.BX)(W.xv,{variant:"small",color:"dimmer",children:["32 vCPU, 32 GB RAM"," "]}),(0,c.tZ)(ae,{amount:350,includeUsd:!0,variant:"small",color:"dimmer"})]})]})]}),(0,c.tZ)(W.xv,{children:(0,c.tZ)("a",{role:"button",tabIndex:0,onKeyDown:function(){return null},onClick:function(){return null},children:"Edit"})})]}),(0,c.BX)(W.G7,{css:[W.l0.rowWithGap(8),W.l0.justify.spaceBetween,W.l0.align.center],children:[(0,c.BX)(W.G7,{css:[W.l0.rowWithGap(8),W.l0.align.center],children:[(0,c.tZ)(ce,{size:24}),(0,c.BX)(W.G7,{css:[W.l0.px(8),W.l0.py(2),W.l0.colWithGap(8),W.l0.justify.spaceBetween],children:[(0,c.BX)(W.xv,{children:["Auto-refill is ","off"]}),(0,c.BX)(W.G7,{css:W.l0.rowWithGap(4),children:[(0,c.tZ)(ae,{amount:1234,includeUsd:!1,variant:"small",color:"dimmer"}),(0,c.tZ)(W.xv,{variant:"small",color:"dimmer",children:"left"})]})]})]}),(0,c.tZ)(W.xv,{children:(0,c.tZ)("a",{role:"button",tabIndex:0,onKeyDown:t,onClick:t,children:"Edit"})})]}),(0,c.tZ)(W.E_,{colorway:"warning",icon:(0,c.tZ)(pe.Z,{}),text:"Add a payment method and enable auto-refill to prevent this power-up being disabled when you run out of Cycles."})]})}var ve=n(86664),me=n(54465),ge=n(85861),ye=n(14840),Ze=n(32692),be=n(31230),we=n(50319);function xe(){var e=(0,Ze.Z)(["\n  mutation CreateStripeSetupIntent {\n    createSetupIntent {\n      ... on CreateSetupIntentResult {\n        clientSecret\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return xe=function(){return e},e}function Ee(){var e=(0,Ze.Z)(["\n  query SetupIntentFormCurrentUserEmailVerification {\n    currentUser {\n      id\n      isVerified\n    }\n  }\n"]);return Ee=function(){return e},e}var Ce={},Se=(0,be.Ps)(xe());Ee();var Te,ke=(0,me.J)("pk_live_515YpNsJAmnYVOvfnsBqRdATWS6SzbNAslOz1z2tujdKuvRMDAwWMeFXp6dJL1YKRrQjB0WAp0UDGwlFYL7hxw7Fc00QkfxBFsL"),_e=function(e,t){return t?{text:"Success!",colorway:"green"}:e?{text:"Saving...",colorway:"primary"}:{text:"Save Payment Method",colorway:"primary"}};function Re(e){var t=e.onSuccess,n=(0,O.Z)().showError,r=(0,a.Z)(f.useState(),2),o=r[0],l=r[1],s=(0,a.Z)(function(e){var t=(0,i.Z)({},Ce,e);return we.D(Se,t)}({onError:function(e){n(e.message)},onCompleted:function(e){var t=e.createSetupIntent;t&&void 0!==t.__typename&&("UnauthorizedError"!==t.__typename&&"UserError"!==t.__typename?"CreateSetupIntentResult"===t.__typename&&l(t.clientSecret?t.clientSecret:void 0):n(t.message))}}),1),u=s[0];return(0,c.tZ)(W.Tg,{css:[W.l0.colWithGap(24),W.l0.flex.grow(1),W.l0.p(24),W.l0.borderRadius(12),W.l0.minHeight(426),W.l0.minWidth(292),W.l0.backgroundColor.backgroundDefault],children:(0,c.tZ)(De,{clientSecret:o||null,createPaymentIntent:function(){u()},onSuccess:t})})}function De(e){var t=e.clientSecret,n=e.createPaymentIntent,r=e.onSuccess;f.useEffect((function(){n({paymentMethodId:null})}),[]);var i=(0,ge.Fg)().isDarkColorScheme,o=i?ye.Sj:ye.Dy,a={clientSecret:t||void 0,appearance:{theme:i?"night":"stripe",variables:{colorPrimary:o.values.global.foregroundDefault,colorBackground:o.values.global.backgroundDefault,colorText:o.values.global.foregroundDimmer,colorDanger:o.values.global.accentNegativeDefault,fontFamily:"'IBM Plex Sans', sans-serif",focusBoxShadow:"0",borderRadius:"4px"},rules:{".Tab":{boxShadow:"0px"},".Input":{boxShadow:"0px"}}},loader:"never"};return(0,c.tZ)(W.G7,{css:[W.l0.width("100%"),W.l0.justify.center,W.l0.align.center,W.l0.minHeight(420),W.l0.flex.grow(1)],children:(0,c.tZ)(W.G7,{css:[W.l0.width("100%"),W.l0.flex.grow(1)],children:t?(0,c.tZ)(ve.Elements,{options:a,stripe:ke,children:(0,c.tZ)(Ie,{onSuccess:r})}):(0,c.tZ)(W.G7,{css:[W.l0.flex.grow(1),W.l0.justify.center,W.l0.align.center],children:(0,c.tZ)(y.Z,{size:48})})})})}function Ie(e){var t=e.onSuccess,n=(0,ve.useStripe)(),i=(0,ve.useElements)(),o=(0,a.Z)(f.useState(null),2),s=o[0],u=o[1],d=(0,a.Z)(f.useState(null),2),p=d[0],h=d[1],v=(0,a.Z)(f.useState(!1),2),m=v[0],g=v[1],y=(0,a.Z)(f.useState(!1),2),Z=y[0],b=y[1],w=function(){var e=(0,r.Z)((function(){var e;return(0,l.__generator)(this,(function(r){switch(r.label){case 0:return n&&i?(b(!0),[4,n.confirmSetup({elements:i,confirmParams:{return_url:window.location.href},redirect:"if_required"})]):[2];case 1:return e=r.sent().error,b(!1),e?(u(e.message),g(!1)):g(!0),setTimeout((function(){t()}),1e3),[2]}}))}));return function(){return e.apply(this,arguments)}}();return(0,c.BX)(W.G7,{css:[W.l0.colWithGap(24),W.l0.flex.grow(1)],children:[!1!==p?(0,c.tZ)(ve.PaymentElement,{id:"payment-element",options:{layout:"tabs"},onLoadError:function(){return h(!0)}}):(0,c.BX)(W.xv,{multiline:!0,children:["Something went wrong. Please contact us at"," ",(0,c.tZ)("a",{href:"mailto:support@replit.com",children:"support@replit.com"}),"."]}),(0,c.tZ)(W.G7,{css:[W.l0.flex.grow(1),W.l0.justify.end],children:(0,c.tZ)(W.zx,{disabled:Z||!n||!i,text:_e(Z,m).text,colorway:_e(Z,m).colorway,css:[{pointerEvents:m?"none":"auto"}],onClick:w})}),s?(0,c.tZ)(W.xv,{css:[W.l0.color.accentNegativeDefault],children:s}):null]})}function Pe(){var e=(0,f.useState)(Te.ADD_PAYMENT_METHOD),t=e[0],n=e[1];switch(t){case Te.CHECKOUT:return(0,c.BX)(c.HY,{children:[(0,c.BX)(W.G7,{css:[W.l0.rowWithGap(8),W.l0.p(12),W.l0.align.center],children:[(0,c.tZ)(W.hU,{alt:"Back",onClick:function(){return null},children:(0,c.tZ)(j.ArrowLeft,{})}),(0,c.tZ)(W.xv,{variant:"subheadDefault",children:"Checkout"})]}),(0,c.tZ)(W.RX,{}),(0,c.tZ)(W.G7,{css:[W.l0.colWithGap(8),W.l0.p(12)],children:(0,c.tZ)(fe,{onSuccess:function(){return n(Te.SUCCESS)}})})]});case Te.SUCCESS:return(0,c.BX)(c.HY,{children:[(0,c.BX)(W.G7,{css:[W.l0.rowWithGap(8),W.l0.p(12),W.l0.align.center],children:[(0,c.tZ)(W.hU,{alt:"Success",onClick:function(){return null},children:(0,c.tZ)(H.Z,{color:W.TV.accentPositiveStronger})}),(0,c.tZ)(W.xv,{variant:"subheadDefault",css:[W.l0.color.accentPositiveStronger],children:"Success"})]}),(0,c.tZ)(W.RX,{}),(0,c.tZ)(W.G7,{css:[W.l0.colWithGap(8),W.l0.p(12)],children:(0,c.tZ)(he,{onEditAutoRefill:function(){return n(Te.MANAGE_PAYMENT)}})})]});case Te.MANAGE_PAYMENT:return(0,c.BX)(c.HY,{children:[(0,c.BX)(W.G7,{css:[W.l0.rowWithGap(8),W.l0.p(12),W.l0.align.center],children:[(0,c.tZ)(W.hU,{alt:"Back",onClick:function(){return n(Te.SUCCESS)},children:(0,c.tZ)(j.ArrowLeft,{})}),(0,c.tZ)(W.xv,{variant:"subheadDefault",children:"Manage Payment"})]}),(0,c.tZ)(W.RX,{}),(0,c.tZ)(W.G7,{css:[W.l0.colWithGap(8),W.l0.p(12)],children:(0,c.tZ)(ee,{})})]});case Te.ADD_PAYMENT_METHOD:return(0,c.BX)(c.HY,{children:[(0,c.BX)(W.G7,{css:[W.l0.rowWithGap(8),W.l0.p(12),W.l0.align.center],children:[(0,c.tZ)(W.hU,{alt:"Back",onClick:function(){return n(Te.SUCCESS)},children:(0,c.tZ)(j.ArrowLeft,{})}),(0,c.tZ)(W.xv,{variant:"subheadDefault",children:"Add Payment Method"})]}),(0,c.tZ)(W.RX,{}),(0,c.tZ)(W.G7,{css:[W.l0.colWithGap(8),W.l0.p(12)],children:(0,c.tZ)(Re,{onSuccess:function(){return n(Te.SUCCESS)}})})]});default:(0,z.Z)(t)}}!function(e){e[e.CHECKOUT=0]="CHECKOUT",e[e.SUCCESS=1]="SUCCESS",e[e.MANAGE_PAYMENT=2]="MANAGE_PAYMENT",e[e.ADD_PAYMENT_METHOD=3]="ADD_PAYMENT_METHOD"}(Te||(Te={}));var Ge=n(93426),Be=n(16466),Ae=n(37815),Ue=n(58086),Oe=n(99900),Ne=n(54969),Le=n(7182),Fe=(0,Le.cn)(!1),Xe=(0,Le.cn)(Ne.xl.Standard),Me=(0,Le.cn)(0),We=n(57263),je=n(97838),He=n(67629),ze=n(18757),Ve=n(64184),qe=n(83074),Ke=n(33319),$e=n(82893),Ye=n(64720),Qe=n(50700),Je=n(82447),et=n(81620),tt=n(11163),nt=n(8135),rt=n(26801),it=n(19566),ot=n(31222),at=n(85873);function lt(){var e=(0,it.s)(),t=e.cta;if(e.loading)return null;switch(t){case it.m.None:case it.m.Activated:case it.m.TrialExpired:case it.m.TrialOngoing:return null;case it.m.Activate:case it.m.ActivateAlreadyTrialed:return(0,c.BX)(W.Tg,{background:"higher",css:[W.l0.p(8),W.l0.colWithGap(8),W.l0.borderRadius(8)],children:[(0,c.BX)(W.G7,{css:[W.l0.flex.row,W.l0.justify.spaceBetween,W.l0.align.center],children:[(0,c.BX)(W.G7,{css:[W.l0.rowWithGap(8),W.l0.align.center],children:[(0,c.tZ)(at.Z,{size:16}),(0,c.tZ)(W.xv,{variant:"subheadDefault",children:"Ghostwriter"}),(0,c.tZ)(ot.Z,{context:"workspace_info_modal",powerUp:"ghostwriter"})]}),(0,c.tZ)(rt.Z,{context:"workspace_info_modal"})]}),(0,c.tZ)(W.xv,{multiline:!0,color:"dimmer",children:"Replit's AI pair programmer can complete, generate, explain, and transform code."})]});default:(0,z.Z)(t)}}var ct=n(17885),st=n(76311),ut=n(81255),dt=n(519),ft=n(37887);function pt(){var e=(0,Ze.Z)(["\n  fragment SetStorageCapacityRepl on Repl {\n    id\n    storageCapacity {\n      ... on StorageCapacity {\n        value\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n"]);return pt=function(){return e},e}function ht(){var e=(0,Ze.Z)(["\n  mutation SetStorageCapacitySetStorageCapacity(\n    $input: SetStorageCapacityInput!\n  ) {\n    setStorageCapacity(input: $input) {\n      ... on Repl {\n        id\n        ...SetStorageCapacityRepl\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n  ","\n"]);return ht=function(){return e},e}function vt(){var e=(0,Ze.Z)(["\n  query SetStorageCapacityReplById($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        ...SetStorageCapacityRepl\n      }\n    }\n  }\n  ","\n"]);return vt=function(){return e},e}var mt={},gt=(0,be.Ps)(pt()),yt=(0,be.Ps)(ht(),gt);var Zt=(0,be.Ps)(vt(),gt);var bt=n(75815),wt=function(){function e(){(0,bt.Z)(this,e)}return e.fromTier=function(e){switch(e){case 0:return Ne.xl.Standard;case 1:return Ne.xl.TwoGigs;case 2:return Ne.xl.FourGigs;case 3:return Ne.xl.EightGigs;case 4:return Ne.xl.SixteenGigs;case 5:return Ne.xl.ThirtyTwoGigs;case 6:return Ne.xl.SixtyFourGigs;default:(0,z.Z)(e)}},e.toTier=function(e){switch(e){case Ne.xl.Standard:return 0;case Ne.xl.TwoGigs:return 1;case Ne.xl.FourGigs:return 2;case Ne.xl.EightGigs:return 3;case Ne.xl.SixteenGigs:return 4;case Ne.xl.ThirtyTwoGigs:return 5;case Ne.xl.SixtyFourGigs:return 6;default:(0,z.Z)(e)}},e.toGb=function(t){return"number"===typeof t?e.toGb(e.fromTier(t)):Math.pow(2,e.toTier(t))},e}(),xt=(0,W.Xb)({self:[W.l0.colWithGap(8),W.l0.py(12)],datalist:[W.l0.display.none],labelWrapper:[W.l0.flex.row,W.l0.justify.spaceBetween],labels:[W.l0.fontWeight.medium],input:[W.l0.color.foregroundDimmer,W.l0.height(8),{cursor:"grabbing"}]}),Et=function(){var e=(0,Le.Dv)(Me),t=(0,Le.b9)(Me);return(0,c.BX)(W.G7,{css:xt.self,children:[(0,c.BX)(W.G7,{css:xt.labelWrapper,children:[(0,c.tZ)(W.xv,{css:xt.labels,color:"dimmer",children:"1GB"}),(0,c.BX)(W.xv,{css:xt.labels,children:[wt.toGb(e),"GB"]}),(0,c.tZ)(W.xv,{css:xt.labels,color:"dimmer",children:"64GB"})]}),(0,c.tZ)("input",{value:e,css:xt.input,type:"range",list:"steplist",min:"0",max:"6",step:"1",onChange:function(e){var n=e.target.value,r=parseInt(n,10);!isNaN(r)&&function(e){return e>=0&&e<=6}(r)&&t(r)}}),(0,c.BX)("datalist",{id:"steplist",css:xt.datalist,children:[(0,c.tZ)(W.G7,{tag:"option",value:"0",label:"1 GB"}),(0,c.tZ)(W.G7,{tag:"option",value:"1",label:"2 GB"}),(0,c.tZ)(W.G7,{tag:"option",value:"2",label:"4 GB"}),(0,c.tZ)(W.G7,{tag:"option",value:"3",label:"8 GB"}),(0,c.tZ)(W.G7,{tag:"option",value:"4",label:"16 GB"}),(0,c.tZ)(W.G7,{tag:"option",value:"5",label:"32 GB"}),(0,c.tZ)(W.G7,{tag:"option",value:"6",label:"64 GB"})]})]})},Ct=function(e,t){return e<t?"Downgrade":"Upgrade"};var St=(0,W.Xb)({self:[W.l0.flex.column],content:[W.l0.p(12),W.l0.colWithGap(24)],header:[W.l0.p(12),W.l0.rowWithGap(8),W.l0.justify.start,W.l0.border({color:W.TV.outlineDefault,width:1,style:"solid",direction:"bottom"})],actions:[W.l0.colWithGap(8)]}),Tt=function(e){var t=e.isOpen,n=e.onRequestClose,o=(0,N.Z)(),s=(0,U.Z)(),u=(0,O.Z)().showError,p=(0,Le.Dv)(Xe),h=(0,Le.Dv)(Me),v=(0,Le.b9)(Fe),m=(0,a.Z)(f.useState(!1),2),g=m[0],y=m[1];f.useEffect((function(){v(t)}),[v,t]),f.useEffect((function(){t||y(!1)}),[t,y]);var Z=(0,a.Z)(function(e){var t=(0,i.Z)({},mt,e);return we.D(yt,t)}({onCompleted:function(){var e=(0,r.Z)((function(e){var t;return(0,l.__generator)(this,(function(r){switch(r.label){case 0:if("UserError"===e.setStorageCapacity.__typename||"NotFoundError"===e.setStorageCapacity.__typename||"UnauthorizedError"===e.setStorageCapacity.__typename)return u(e.setStorageCapacity.message),[2];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,(0,et.Z)(o)];case 2:return r.sent(),[3,4];case 3:return t=r.sent(),d.Tb(t),s.current?(u("Something went wrong when updating the storage for your Repl. Please refresh or try again."),[3,4]):[2];case 4:return y(!0),[4,new Promise((function(e){return setTimeout(e,3e3)}))];case 5:return r.sent(),n(),y(!1),[2]}}))}));return function(t){return e.apply(this,arguments)}}(),onError:function(e){d.Tb(e),u((0,F.Z)(e.message))}}),2),b=Z[0],w=Z[1].loading,x=h===wt.toTier(p)&&!g,E=g?function(e,t){var n=wt.toTier(t),r=Ct(e,n);return"Storage ".concat(r,"d to ").concat(wt.toGb(e),"GB")}(h,p):function(e,t){var n=wt.toTier(t),r=Ct(e,n);return"".concat(r," Storage to ").concat(wt.toGb(e),"GB")}(h,p);return(0,c.tZ)(W.u_,{noPadding:!0,isOpen:t,onRequestClose:n,hideCloseButton:!0,children:(0,c.BX)(W.G7,{css:St.self,children:[(0,c.BX)(W.G7,{css:St.header,children:[(0,c.tZ)(j.Disk,{size:16}),(0,c.tZ)(W.xv,{variant:"subheadDefault",children:"Repl Storage"})]}),(0,c.BX)(W.G7,{css:St.content,children:[(0,c.tZ)(Et,{}),(0,c.BX)(W.G7,{css:St.actions,children:[(0,c.tZ)(W.E_,{icon:(0,c.tZ)(j.Warning,{}),colorway:"orange",text:"This is an internal prototype for dogfooding Infinity Drive. The public-facing product will be an account-level powerup and will not be available for individual repls."}),(0,c.tZ)(W.zx,{disabled:w||x,iconLeft:(0,c.tZ)(j.Check,{}),text:x?"This is your current storage limit":E,onClick:function(){w||b({variables:{input:{replId:o,storageCapacity:wt.fromTier(h)}}})},colorway:g?"positive":"primary"}),(0,c.tZ)(W.zx,{text:"Cancel",disabled:w||g,onClick:n})]})]})]})})},kt=n(79326),_t=(0,W.Xb)({self:[W.l0.display.flex,W.l0.flex.row,W.l0.align.center,W.l0.justify.spaceBetween],powerupInfo:[W.l0.colWithGap(8)],powerupLabel:[W.l0.rowWithGap(8),W.l0.align.center],interactiveElement:[W.l0.rowWithGap(8),W.l0.align.center],pill:[W.l0.border({style:"none"}),W.l0.fontWeight.medium,{backgroundColor:"#b0b0b0",color:"#0F1726",maxWidth:"fit-content"}],editButton:[W.l0.p(16),W.l0.backgroundColor.backgroundHigher]}),Rt=function(e){var t=e.onToggle,n=function(e){var t=(0,i.Z)({},mt,e);return ft.a(Zt,t)}({variables:{replId:(0,N.Z)()}}),r=n.data;if(n.loading)return(0,c.tZ)(y.Z,{});if("Repl"!==(null===r||void 0===r?void 0:r.repl.__typename)||"StorageCapacity"!==r.repl.storageCapacity.__typename)return null;var o=r.repl.storageCapacity.value;return o===Ne.xl.Standard?(0,c.tZ)(dt.Z,{isOn:!1,onChange:function(){return t(o)}}):(0,c.BX)(W.G7,{css:_t.interactiveElement,children:[(0,c.tZ)(W.DR,{text:"".concat(wt.toGb(o),"GB"),css:_t.pill}),(0,c.tZ)(W.hU,{size:24,css:_t.editButton,alt:"Change storage",onClick:function(){return t(o)},children:(0,c.tZ)(g.Z,{})})]})},Dt=function(){var e=(0,A.D)({controlName:"flag-infinity-drive-beta"}),t=(0,a.Z)(f.useState(!1),2),n=t[0],r=t[1],i=(0,Le.b9)(Xe),o=(0,Le.b9)(Me);return e?(0,c.BX)(c.HY,{children:[(0,c.BX)(W.G7,{css:_t.self,children:[(0,c.BX)(W.G7,{css:_t.powerupInfo,children:[(0,c.BX)(W.G7,{css:_t.powerupLabel,children:[(0,c.tZ)(kt.Z,{size:16})," ",(0,c.tZ)(W.xv,{variant:"subheadDefault",children:"Storage"}),(0,c.tZ)(st.Z,{content:"Internal",tooltip:"Storage is currently in internal beta for Replit staff."})]}),(0,c.tZ)(W.xv,{color:"dimmer",children:"Add more disk space"})]}),(0,c.tZ)(Rt,{onToggle:function(e){i(e),o(wt.toTier(e)),r(!0)}})]}),(0,c.tZ)(Tt,{isOpen:n,onRequestClose:function(){r(!1)}})]}):null},It=n(4368),Pt=n(13772),Gt=n(9625),Bt=n(313),At=n(69880);function Ut(e){var t=e.onRequestPowerUpModal,n=(0,N.Z)(),r=(0,At.ky)({variables:{replId:n}}),i=r.data;return r.loading?(0,c.tZ)(y.Z,{}):"Repl"!==(null===i||void 0===i?void 0:i.repl.__typename)||"ReplPowerUpTypes"!==i.repl.powerUps.__typename?null:i.repl.powerUps.boost.sku===Ne.ri.Off?(0,c.tZ)(dt.Z,{isOn:!1,onChange:t}):(0,c.BX)(W.G7,{css:[ut.l0.rowWithGap(8),ut.l0.align.center],children:[(0,c.tZ)(Gt.Z,{variant:i.repl.powerUps.boost.sku,extraText:"Boosted"}),(0,c.tZ)(W.hU,{size:24,css:[ut.l0.p(16),{backgroundColor:ut.TV.backgroundHigher}],alt:"Change boost",onClick:t,children:(0,c.tZ)(g.Z,{})})]})}function Ot(e){var t=e.context,n=(0,a.Z)(f.useState(!1),2),r=n[0],i=n[1],o=(0,Bt.Z)(new Date,new Date("2023-01-31"));return(0,c.BX)(c.HY,{children:[(0,c.BX)(W.G7,{css:[ut.l0.display.flex,ut.l0.flex.row,ut.l0.align.center,ut.l0.justify.spaceBetween],children:[(0,c.BX)(W.G7,{css:[ut.l0.colWithGap(8)],children:[(0,c.BX)(W.G7,{css:[ut.l0.rowWithGap(8),ut.l0.align.center],children:[(0,c.tZ)(le.Z,{size:16})," ",(0,c.BX)(W.G7,{css:[ut.l0.rowWithGap(8),ut.l0.align.center],children:[(0,c.tZ)(W.xv,{variant:"subheadDefault",children:te.S0.multiboost.name}),o?(0,c.tZ)(W.DR,{text:"New speeds!",colorway:"primary"}):null]}),(0,c.tZ)(ot.Z,{context:t,powerUp:"boost"})]}),(0,c.tZ)(W.xv,{color:"dimmer",children:te.S0.multiboost.description})]}),(0,c.tZ)(Ut,{onRequestPowerUpModal:function(){i(!0),(0,M.j)(M.U3.POWER_UP_TOGGLE_REQUESTED,{powerUp:"boost",source:t})}})]}),(0,c.tZ)(_.Z,{context:t,isOpen:r,onRequestClose:function(){return i(!1)},powerUp:"boost",isAutoTriggered:!1,uponPurchaseGoTo:"cyclesPage"})]})}function Nt(e){var t=e.isAlwaysOn,n=e.isGpu,r=e.canGpu,i=e.onAlwaysOnChange,o=e.onGpuChange;return(0,c.BX)(W.G7,{css:[ut.l0.colWithGap(16)],children:[(0,c.BX)(W.G7,{css:[ut.l0.display.flex,ut.l0.flex.row,ut.l0.align.center,ut.l0.justify.spaceBetween],children:[(0,c.BX)(W.G7,{css:[ut.l0.colWithGap(8)],children:[(0,c.BX)(W.G7,{css:[ut.l0.rowWithGap(8),ut.l0.align.center],children:[(0,c.tZ)(Pt.Z,{size:16})," ",(0,c.tZ)(W.xv,{variant:"subheadDefault",children:te.S0["always-on"].name}),(0,c.tZ)(ot.Z,{context:"workspace_info_modal",powerUp:"always-on"})]}),(0,c.tZ)(W.xv,{color:"dimmer",children:te.S0["always-on"].description})]}),(0,c.tZ)(dt.Z,{dataCy:"ws-always-on-toggle",isOn:t,onChange:i})]}),(0,c.tZ)(Ot,{context:"workspace_info_modal"}),(0,c.tZ)(Dt,{}),r?(0,c.BX)(W.G7,{css:[ut.l0.display.flex,ut.l0.flex.row,ut.l0.align.center,ut.l0.justify.spaceBetween],children:[(0,c.BX)(W.G7,{css:[ut.l0.colWithGap(8)],children:[(0,c.BX)(W.G7,{css:[ut.l0.rowWithGap(8),ut.l0.align.center],children:[(0,c.tZ)(It.Z,{size:16})," ",(0,c.tZ)(W.xv,{variant:"subheadDefault",children:"GPU"}),(0,c.tZ)(st.Z,{content:"Beta",link:"https://replit.com/@util/GPU-Beta-Resources?v=1#README.md",tooltip:"GPUs are currently in beta. Some things may not work as expected yet."})]}),(0,c.tZ)(W.xv,{color:"dimmer",children:"Add an NVIDIA Tesla K80 GPU to the Repl"})]}),(0,c.tZ)(dt.Z,{dataCy:"ws-gpu-toggle",isOn:n,onChange:o})]}):null]})}var Lt,Ft,Xt={query:G.s8},Mt={query:R.BW};function Wt(e){var t=e.setIsEditing,n=e.showCloseButton,r=(0,N.Z)(),i=(0,ct.BZ)({variables:{replId:r}}),o=i.data,a=i.refetch,l="Repl"===(null===o||void 0===o?void 0:o.repl.__typename)?o.repl:null;return l?(0,c.tZ)(jt,{setIsEditing:t,showCloseButton:n,repl:l,refetch:a}):(0,c.tZ)(W.G7,{css:[W.l0.center,W.l0.p(16)],children:(0,c.tZ)(y.Z,{})})}function jt(e){var t,n,s,m,y=e.repl,Z=e.showCloseButton,b=e.setIsEditing,x=(0,tt.useRouter)(),E=(0,a.Z)(f.useState(!1),2),R=E[0],G=E[1],N=(0,a.Z)(f.useState(null),2),H=N[0],V=N[1],K=(0,Le.Dv)(Ye.q),$=(0,Le.Dv)(Fe),Y=(0,a.Z)(f.useState(null),2),Q=Y[0],J=Y[1],ee=(0,a.Z)(f.useState(y.hasGpu),2),te=ee[0],ne=ee[1],ie=(0,a.Z)(f.useState(y.isRenamed?y.title:""),2),oe=ie[0],ae=ie[1],le=(0,a.Z)(f.useState(y.description||""),2),ce=le[0],se=le[1],ue=(0,a.Z)(f.useState(y.rawTemplateLabel),2),de=ue[0],fe=ue[1],pe=(0,P.Z)({forceFetch:!1}).cycles,he=(0,ct.zu)().data,ve=(0,O.Z)().showError,me=y.publishedAs===Ne.O2.Template,ge=Boolean(y.publishedAs);f.useEffect((function(){se(y.description||"")}),[y.description]);var ye=(0,U.Z)(),Ze=f.useRef(y),be=(0,a.Z)((0,ct.ap)({variables:{id:y.id},onCompleted:function(){return x.push("/home","/~")},update:(0,L.t)({id:y.id}),onError:function(e){return ve((0,F.Z)(e.message))}}),1)[0],we=(0,a.Z)((0,ct.vi)({onError:function(e){return ve((0,F.Z)(e.message))},onCompleted:function(e){var t=e.updateRepl.repl,n=Ze.current,r={};n.description!==t.description&&(r.description=t.description),n.title!==t.title&&(r.title=t.title),n.url!==t.url&&(r.url=t.url),n.isRenamed!==t.isRenamed&&(r.isRenamed=!!t.isRenamed),Ze.current=y,Object.keys(r).length>0&&b(!1)}}),2),xe=we[0],Ee=we[1].loading,Ce=(0,a.Z)((0,B.Z)(),2),Se=Ce[0],Te=Ce[1].loading,ke=(0,a.Z)((0,ct.pr)({onCompleted:function(e){"UserError"===e.setAlwaysOn.__typename&&ve(e.setAlwaysOn.message)},onError:function(e){return ve((0,F.Z)(e.message))},refetchQueries:[Xt,Mt]}),2),_e=ke[0],Re=ke[1].loading,De=(0,a.Z)((0,ct.vN)({onCompleted:function(e){"UserError"!==e.setGpu.__typename&&"UnauthorizedError"!==e.setGpu.__typename?((0,et.Z)(y.id).catch((function(e){d.Tb(e),ye.current&&ve("Something went wrong when adding a GPU to your Repl. Please refresh or try again.")})),ye.current&&"Repl"===e.setGpu.__typename&&ne(e.setGpu.hasGpu)):ve(e.setGpu.message)},onError:function(e){d.Tb(e),ve((0,F.Z)(e.message))},refetchQueries:[Xt,Mt]}),2),Ie=De[0],Xe=De[1].loading,Me=y.currentUserPermissions.publish,rt=!(null===y||void 0===y?void 0:y.publishedAs),it=(null===y||void 0===y?void 0:y.publishedAs)===Ne.O2.RegularRepl,ot=(0,a.Z)((0,ct.gF)({variables:{input:{replId:y.id}},onError:function(e){d.Tb(e),ve((0,F.Z)(e.message))}}),2),at=ot[0],st=ot[1],ut=(0,ct.l9)({variables:{replId:y.id},fetchPolicy:"cache-and-network"}),dt=ut.data,ft=ut.loading,pt=ut.error,ht=f.useMemo((function(){return!(!oe||oe===y.title)||(de!==y.rawTemplateLabel||!(""===ce&&!y.description)&&ce!==y.description)}),[y,oe,ce,de]),vt=f.useCallback((function(){if(ht){var e={id:y.id,title:oe||y.title,description:ce,templateLabel:y.currentUserPermissions.changeTemplateLabel?de:void 0};xe({variables:{input:e}})}}),[ht,xe,y,oe,ce,de]),mt=(0,A.D)({controlName:"flag-nectar-nanny"}),gt=(0,a.Z)(f.useState(!1),2),yt=gt[0],Zt=gt[1],bt=R||null!==H||Te||K||yt||$,wt=(0,I.Z)((function(){bt||(ht?vt():b(!1))}),[bt,ht,vt]),xt=f.useContext(D.G).isGooglePlayStoreTWA,Et=function(e){switch(e){case"always-on":return"Repl"===(null===dt||void 0===dt?void 0:dt.repl.__typename)&&"PowerUpCostsType"===dt.repl.powerUpCosts.__typename?dt.repl.powerUpCosts.alwaysOn.explanation:null;case"private":var t,n,r;return"UserPowerUpsTypes"===(null===dt||void 0===dt||null===(t=dt.currentUser)||void 0===t?void 0:t.userPowerUpsByType.__typename)?null===(r=null===(n=dt.currentUser.userPowerUpsByType)||void 0===n?void 0:n.privateRepls.cost)||void 0===r?void 0:r.explanation:null;case"gpu":var i,o;return"Repl"===(null===dt||void 0===dt?void 0:dt.repl.__typename)&&"PowerUpCostsType"===dt.repl.powerUpCosts.__typename?null===(i=dt.repl.powerUpCosts)||void 0===i||null===(o=i.gpu)||void 0===o?void 0:o.explanation:null;default:(0,z.Z)(e)}},Ct=function(){xe({variables:{input:{id:y.id,isPrivate:!y.isPrivate}},optimisticResponse:{updateRepl:{__typename:"UpdateReplPayload",repl:(0,o.Z)((0,i.Z)({},y),{isPrivate:!y.isPrivate})}},refetchQueries:[{query:ct.WM,variables:{replId:y.id}},Xt,Mt]}),(0,M.j)(M.U3.PRIVATE_TOGGLED,{enabled:!y.isPrivate,source:"workspace_info_modal"})},St=function(){if(!Re){var e=!y.isAlwaysOn;_e({variables:{replId:y.id,enabled:e},optimisticResponse:{setAlwaysOn:(0,o.Z)((0,i.Z)({__typename:"Repl"},y),{powerUpCosts:{alwaysOn:{cycles:0,explanation:Ne.Ch.ActivateExistingOrder},boost:{cycles:0,explanation:Ne.Ch.ActivateExistingOrder},gpu:{cycles:0,explanation:Ne.Ch.ActivateExistingOrder}},isAlwaysOn:e})}})}},Tt=function(){if(!Xe){var e=!te;Ie({variables:{replId:y.id,enabled:e},optimisticResponse:{setGpu:(0,o.Z)((0,i.Z)({__typename:"Repl"},y),{hasGpu:e,powerUpCosts:{gpu:{cycles:0,explanation:Ne.Ch.ActivateExistingOrder},alwaysOn:{cycles:0,explanation:Ne.Ch.ActivateExistingOrder},boost:{cycles:0,explanation:Ne.Ch.ActivateExistingOrder}}})}})}},kt=y.isRenamed?"Name your Repl":"Default name: ".concat(y.title),_t=[Ne.Sy.Submit,Ne.Sy.PublishTemplate,Ne.Sy.EditTemplate].includes(y.workspaceCta),Rt=[];y.currentUserPermissions.fork&&Rt.push({value:Lt.Fork,label:"Fork",icon:(0,c.tZ)(qe.Z,{})}),y.publishedAs===Ne.O2.RegularRepl&&Me&&Rt.push({value:Lt.Unpublish,label:"Unpublish",icon:(0,c.tZ)(Ve.Z,{})}),me&&Me&&Rt.push({value:Lt.UnpublishTemplate,label:"Unpublish template",icon:(0,c.tZ)(Ve.Z,{})}),ge&&Me&&Rt.push({value:Lt.EditPublishSettings,label:"Edit Publish Settings",icon:(0,c.tZ)(g.Z,{})}),y.currentUserPermissions.delete&&Rt.push({isDestructive:!0,value:Lt.Delete,label:"Delete",icon:(0,c.tZ)(q.Z,{})});var Dt,It=(0,re.H)(),Pt=(null===he||void 0===he||null===(t=he.currentUser)||void 0===t?void 0:t.id)===(null===(n=y.user)||void 0===n?void 0:n.id),Gt=(0,X.jX)(null===he||void 0===he||null===(s=he.currentUser)||void 0===s?void 0:s.userSubscriptionType),Bt=0===pe&&Pt&&!Gt,At=(0,A.D)({controlName:"flag-gpus"}),Ut=(0,nt.Z)();return(0,c.BX)("div",{ref:wt,css:{overflow:"auto",maxHeight:"80vh"},className:u().dynamic([["b5678dce653e8317",[y.currentUserPermissions.changeDescription?"auto":"not-allowed",We.j.mobileMax]]]),children:[(0,c.tZ)("form",{onSubmit:function(e){e.preventDefault(),vt()},className:u().dynamic([["b5678dce653e8317",[y.currentUserPermissions.changeDescription?"auto":"not-allowed",We.j.mobileMax]]]),children:(0,c.BX)(W.G7,{css:[W.l0.align.stretch,W.l0.colWithGap(16)],children:[(0,c.BX)(W.G7,{css:[W.l0.colWithGap(8)],children:[(0,c.BX)(W.G7,{css:[W.l0.rowWithGap(8),W.l0.align.center,W.l0.justify.spaceBetween],children:[(0,c.BX)(W.G7,{css:[W.l0.rowWithGap(8),W.l0.center,W.l0.flex.shrink(1)],children:[y.user?(0,c.tZ)(W.ZP,(0,o.Z)((0,i.Z)({},(0,Je.Ru)(y.user)),{prefetch:!1,text:y.user.username,css:[{"&, & span":W.l0.flex.shrink(1)}],iconLeft:(0,c.tZ)(W.qE,{src:y.user.image,username:y.user.username})})):null,y.currentUserPermissions.changeIconUrl&&me?(0,c.tZ)(C,{value:y.iconUrl,onChange:function(e){return xe({variables:{input:{id:y.id,iconUrl:e}},optimisticResponse:{updateRepl:{__typename:"UpdateReplPayload",repl:(0,o.Z)((0,i.Z)({},y),{iconUrl:e})}}})}}):null]}),(0,c.BX)(W.G7,{css:[W.l0.align.center,W.l0.rowWithGap(8)],children:[(0,c.tZ)(W.ZP,(0,o.Z)((0,i.Z)({prefetch:!1},(0,T.j3)(y)),{iconLeft:(0,c.tZ)(ze.Z,{}),colorway:"primary",text:"Cover page",target:"_blank"})),Me&&rt&&!Ut?(0,c.tZ)(W.u,{tooltip:"This Repl is private. You need to make it public in order to publish it!",isDisabled:!(null===y||void 0===y?void 0:y.isPrivate),children:(0,c.tZ)(W.zx,{type:"button",iconLeft:(0,c.tZ)(w.Z,{}),onClick:function(){V(Ft.Publish)},dataCy:"ws-publish-button",text:"Publish",disabled:null===y||void 0===y?void 0:y.isPrivate})}):null,me?(0,c.tZ)(W.zx,{type:"button",iconLeft:(0,c.tZ)(w.Z,{}),onClick:function(){return V(Ft.UpdatePublishedTemplate)},text:"Update"}):null,it?(0,c.tZ)(W.zx,{type:"button",iconLeft:(0,c.tZ)(j.Chat,{}),onClick:function(){return V(Ft.UpdatePublishedRepl)},text:"Update"}):null,Rt.length>0&&(0,c.tZ)(W.G7,{children:(0,c.tZ)(v.Z,{label:me?"Template Actions":"Repl Actions",items:Rt,onItemClick:function(e){switch(e.value){case Lt.Fork:return void V(Ft.ForkRepl);case Lt.Unpublish:return void V(Ft.Unpublish);case Lt.UnpublishTemplate:return void V(Ft.UnpublishTemplate);case Lt.Delete:return void V(Ft.DeleteRepl);case Lt.EditPublishSettings:V(Ft.EditPublishSettings)}},onOpenChange:G,large:!0})}),Z?(0,c.tZ)(W.hU,{alt:"Close",tooltipHidden:!0,onClick:function(){vt(),b(!1)},children:(0,c.tZ)(He.Z,{})}):null]})]}),y.lastPublishedAt&&Me?(0,c.BX)(W.xv,{variant:"small",color:"dimmest",children:["Last published on"," ",new Date(y.lastPublishedAt).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})]}):null]}),(0,c.BX)(W.Tg,{background:"default",css:[W.l0.colWithGap(16)],children:[(0,c.tZ)(W.G7,{css:[W.l0.flex.column],children:(0,c.BX)(W.G7,{css:[W.l0.colWithGap(4)],children:[(0,c.BX)(W.G7,{css:[W.l0.flex.row,W.l0.justify.spaceBetween,W.l0.align.end],children:[(0,c.tZ)("label",{htmlFor:It("name"),className:u().dynamic([["b5678dce653e8317",[y.currentUserPermissions.changeDescription?"auto":"not-allowed",We.j.mobileMax]]]),children:(0,c.tZ)(W.xv,{variant:"small",color:"dimmer",children:"Name"})}),(0,c.tZ)(S.Z,{maxLength:60,value:oe,hideLabel:!0})]}),(0,c.tZ)(W.II,{style:{cursor:y.currentUserPermissions.changeTitle?"auto":"not-allowed"},disabled:!y.currentUserPermissions.changeTitle,maxLength:60,placeholder:kt,value:oe,onChange:function(e){return ae(e.target.value)},spellCheck:!1,id:It("name"),dataCy:"ws-repl-info-title-input"})]})}),(0,c.tZ)(W.G7,{css:[W.l0.flex.column],children:(0,c.BX)(W.G7,{css:[W.l0.colWithGap(4)],children:[(0,c.BX)(W.G7,{css:[W.l0.flex.row,W.l0.justify.spaceBetween,W.l0.align.end],children:[(0,c.tZ)("label",{htmlFor:It("description"),className:u().dynamic([["b5678dce653e8317",[y.currentUserPermissions.changeDescription?"auto":"not-allowed",We.j.mobileMax]]]),children:(0,c.tZ)(W.xv,{variant:"small",color:"dimmer",children:"Description"})}),(0,c.tZ)(S.Z,{maxLength:Ue.p,value:ce,hideLabel:!0})]}),(0,c.tZ)(W.B,{onKeyDown:function(e){13===e.keyCode&&(e.ctrlKey||e.metaKey)},disabled:!y.currentUserPermissions.changeDescription,maxLength:Ue.p,value:ce,onChange:function(e){return se(e.target.value)},placeholder:"What does this Repl do?",css:[W.l0.minHeight(96),W.l0.maxHeight(256),{resize:"vertical"}],id:It("description")})]})})]}),me&&y.currentUserPermissions.changeTemplateLabel?(0,c.tZ)(W.Tg,{background:"default",css:[W.l0.colWithGap(4)],children:(0,c.BX)(W.G7,{css:[W.l0.colWithGap(4)],children:[(0,c.tZ)("label",{htmlFor:It("template"),className:u().dynamic([["b5678dce653e8317",[y.currentUserPermissions.changeDescription?"auto":"not-allowed",We.j.mobileMax]]]),children:(0,c.tZ)(W.xv,{color:"dimmer",variant:"small",children:"Template label"})}),(0,c.tZ)(W.II,{value:de,maxLength:60,placeholder:"Template label",spellCheck:!1,onChange:function(e){return fe(e.target.value)},id:It("template")})]})}):null]})}),_t?null:(0,c.BX)(W.G7,{css:[W.l0.colWithGap(24),W.l0.p(8),W.l0.pt(0)],children:[!xt&&Bt?(0,c.tZ)(W.zx,{iconLeft:(0,c.tZ)(je.Z,{}),type:"button",colorway:"primary",stretch:!0,onClick:function(){(0,M.j)(M.U3.UPGRADE_SELECTED,{source:"workspace_info_modal"}),V(Ft.BuyCycles)},text:"Power Up this Repl"}):null,y.currentUserPermissions.changePrivacy===Ne.HA.Allowed&&(0,c.BX)(W.G7,{css:[W.l0.colWithGap(8)],children:[(0,c.BX)(W.hE,{tag:"fieldset",name:It("privacy"),value:y.isPrivate.toString(),onChange:function(){var e,t,n,r;if(!Ee)if(y.isPrivate)Ct();else if(y.currentUserPermissions.changePrivacy===Ne.HA.Allowed&&null!=(null===(e=y.user)||void 0===e?void 0:e.id)&&null!=(null===he||void 0===he||null===(t=he.currentUser)||void 0===t?void 0:t.id)&&y.user.id!==he.currentUser.id)Ct();else{var i="UserPowerUpsTypes"===(null===dt||void 0===dt||null===(n=dt.currentUser)||void 0===n?void 0:n.userPowerUpsByType.__typename)&&(null===(r=dt.currentUser.userPowerUpsByType)||void 0===r?void 0:r.privateRepls.active),o=Et("private");if(null==o||ft)ve("You're too fast for us! Please try again in a moment.");else{if(!pt)return(0,M.j)(M.U3.POWER_UP_TOGGLE_REQUESTED,{powerUp:"private",setting:!y.isPrivate,source:"workspace_info_modal",costExplanation:o}),i?void Ct():(J("private"),void V(Ft.SpendCycles));ve("This action is currently unavailable. Please refresh and try again.")}}},row:!0,primary:!0,stretch:!0,children:[(0,c.tZ)(W.rK,{id:It("false"),value:"false",text:"Public",icon:(0,c.tZ)(Ke.Z,{})}),(0,c.tZ)(W.rK,{id:It("true"),value:"true",text:"Private",icon:(0,c.tZ)($e.Z,{})})]}),(0,c.tZ)(W.xv,{variant:"small",color:"dimmest",children:y.isPrivate?"Only you can see and edit this Repl.":"Anyone can view and fork this Repl."})]}),y.currentUserPermissions.changeAlwaysOn!==Ne.fn.Disallowed&&(0,c.tZ)(Nt,{isAlwaysOn:y.isAlwaysOn,isGpu:te,canGpu:At,onAlwaysOnChange:function(){var e=Et("always-on");if(null==e||Re||ft)ve("You're too fast for us! Please try again in a moment.");else if(pt)ve("This action is currently unavailable. Please refresh and try again.");else{if((0,M.j)(M.U3.POWER_UP_TOGGLE_REQUESTED,{powerUp:"always-on",setting:!y.isAlwaysOn,source:"workspace_info_modal",costExplanation:e}),!y.isAlwaysOn&&("NEEDS_CYCLES"===e||"SPEND_CYCLES"===e))return J("always-on"),void V(Ft.SpendCycles);St()}},onGpuChange:function(){var e=Et("gpu");if(null==e||ft)ve("You're too fast for us! Please try again in a moment.");else if(pt)ve("This action is currently unavailable. Please refresh and try again.");else{if((0,M.j)(M.U3.POWER_UP_TOGGLE_REQUESTED,{powerUp:"gpu",setting:!te,source:"workspace_info_modal",costExplanation:e}),!te&&("NEEDS_CYCLES"===e||"SPEND_CYCLES"===e))return J("gpu"),void V(Ft.SpendCycles);Tt()}}}),mt?(0,c.tZ)(W.zx,{onClick:function(){return Zt(!yt)},text:"[dev] Check Out"}):null,(0,c.tZ)(lt,{})]}),(0,c.tZ)(W.u_,{isOpen:yt,onRequestClose:function(){return Zt(!1)},noPadding:!0,children:(0,c.tZ)(Pe,{})}),(0,c.tZ)(W.u_,{isOpen:H===Ft.DeleteRepl,onRequestClose:function(){return V(null)},children:(0,c.tZ)(h.Z,{delete:be,entityType:"Repl",hideModal:function(){return V(null)}})}),(0,c.tZ)(_.Z,{context:"workspace_info_modal",isOpen:H===Ft.SpendCycles,uponPurchaseGoTo:"workspace",replTitle:y.title,onRequestClose:function(){return V(null)},onRequestPowerUp:(0,r.Z)((function(){return(0,l.__generator)(this,(function(e){switch(e.label){case 0:switch(Q){case null:break;case"always-on":St();break;case"private":Ct();break;case"gpu":Tt();break;default:(0,z.Z)(Q)}return[4,new Promise((function(e){return setTimeout(e,3e3)}))];case 1:return e.sent(),V(null),[2]}}))})),powerUp:null!==Q&&void 0!==Q?Q:"boost"},H),(0,c.tZ)(Qe.Z,{initialTab:"default",isOpen:H===Ft.BuyCycles,onRequestClose:function(){return V(null)},uponPurchaseGoTo:"workspace",context:"workspace_info_modal",replTitle:y.title}),(0,c.tZ)(W.u_,{isOpen:H===Ft.ForkRepl,onRequestClose:function(){return V(null)},children:(0,c.tZ)(k.Z,{onFork:function(e,t,n,r){Se({originId:y.id,teamId:e,title:t,description:n,isPrivate:r,forkToPersonal:!e,trackingData:{forkSource:"editReplPopoverMenuItem"}})},initialTitle:y.title,initialDescription:null!==(Dt=y.description)&&void 0!==Dt?Dt:"",initialPrivacy:y.isPrivate,hideModal:function(){return V(null)},teamContext:null===(m=y.user)||void 0===m?void 0:m.username})}),(0,c.tZ)(W.u_,{isOpen:H===Ft.Unpublish,onRequestClose:function(){return V(null)},children:(0,c.tZ)(Oe.Z,{repl:y,source:"replEnvironment",onDone:function(){V(null)}})}),(0,c.tZ)(W.u_,{isOpen:H===Ft.UnpublishTemplate,onRequestClose:function(){return V(null)},children:(0,c.tZ)(p.Z,{confirmLabel:"Yes, unpublish this Template",isDestructive:!0,title:"Unpublish Template",onCancel:function(){return V(null)},onConfirm:function(){st.loading||(at(),V(null))},children:"Your Repl will no longer be discoverable on Templates. You can republish again at any time, and all of your comments or reactions will stick around."})}),(0,c.tZ)(W.u_,{isOpen:H===Ft.EditPublishSettings,onRequestClose:function(){return V(null)},noPadding:!0,maxWidth:872,fitContent:!0,children:(0,c.tZ)(Ge.Z,{source:"replEnvironment",replId:y.id})}),(0,c.tZ)(W.u_,{isOpen:H===Ft.Publish,onRequestClose:function(){return V(null)},noPadding:!0,maxWidth:872,fitContent:!0,children:(0,c.tZ)(Ge.Z,{source:"replEnvironment",replId:y.id})}),(0,c.tZ)(W.u_,{isOpen:H===Ft.UpdatePublishedTemplate,onRequestClose:function(){return V(null)},children:(0,c.tZ)(Be.Z,{repl:y})}),(0,c.tZ)(W.u_,{isOpen:H===Ft.UpdatePublishedRepl,onRequestClose:function(){return V(null)},children:(0,c.tZ)(Ae.Z,{repl:y,onDone:function(){return V(null)},source:"replEnvironment"})}),(0,c.tZ)(u(),{id:"b5678dce653e8317",dynamic:[y.currentUserPermissions.changeDescription?"auto":"not-allowed",We.j.mobileMax],children:"form.__jsx-style-dynamic-selector{padding:var(--space-8)}textarea.__jsx-style-dynamic-selector{min-height:42px;height:200px;resize:none;cursor:".concat(y.currentUserPermissions.changeDescription?"auto":"not-allowed",";font-size:var(--font-size-default);font-family:var(--font-family-default);padding:var(--space-8);display:block;width:100%;-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);border:1px solid var(--outline-dimmest);-webkit-transition:.2s border-color;-moz-transition:.2s border-color;-o-transition:.2s border-color;transition:.2s border-color;background-color:transparent;color:var(--foreground-default)}textarea.__jsx-style-dynamic-selector:hover{border-color:var(--accent-primary-dimmer)}textarea.__jsx-style-dynamic-selector:active,textarea.__jsx-style-dynamic-selector:focus{border-color:var(--accent-primary-default)}textarea.__jsx-style-dynamic-selector:disabled{opacity:.5}textarea.__jsx-style-dynamic-selector:focus,textarea.__jsx-style-dynamic-selector:active{outline:none;border-color:var(--accent-primary-default)}.edit-repl-actions.__jsx-style-dynamic-selector{padding:0 var(--space-16)}.menu-item.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;color:var(--foreground-default)}.delete-menu-item.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;color:var(--accent-negative-default)}.icon-container.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;padding:0 var(--space-4)}.menu-text.__jsx-style-dynamic-selector{padding:0 var(--space-4)}.upgrade-button-container.__jsx-style-dynamic-selector{padding:0 var(--space-8)}.upgrade-button-container.__jsx-style-dynamic-selector .sentence-case{text-transform:none}.upgrade-text-container.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;padding:var(--space-8);-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center}.always-on-indicator.__jsx-style-dynamic-selector{margin-left:var(--space-4);margin-right:var(--space-8);width:8px;height:8px;-webkit-border-radius:100%;-moz-border-radius:100%;border-radius:100%;background-color:var(--accent-green-default);-webkit-box-shadow:0 0 12px var(--accent-green-default);-moz-box-shadow:0 0 12px var(--accent-green-default);box-shadow:0 0 12px var(--accent-green-default)}@media screen and (max-width:").concat(We.j.mobileMax,"px){.edit-repl.__jsx-style-dynamic-selector{width:80vw}}")})]})}!function(e){e.Fork="Fork",e.Delete="Delete",e.Unpublish="Unpublish",e.UnpublishTemplate="UnpublishTemplate",e.EditPublishSettings="EditPublishSettings"}(Lt||(Lt={})),function(e){e.DeleteRepl="DeleteRepl",e.SpendCycles="SpendCycles",e.BuyCycles="BuyCycles",e.ForkRepl="ForkRepl",e.Unpublish="Unpublish",e.UnpublishTemplate="UnpublishTemplate",e.EditPublishSettings="EditPublishSettings",e.Publish="Publish",e.UpdatePublishedTemplate="UpdatePublishedTemplate",e.UpdatePublishedRepl="UpdatePublishedRepl"}(Ft||(Ft={}))},36316:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(35944),i=(n(67294),n(59641)),o=n(53427),a=(0,n(70917).iv)([i.l0.maxWidth(160),i.l0.truncate,i.l0.flex.shrink(1),i.l0.color.foregroundDimmest,{fontSize:i.TV.fontSizeSmall}]);function l(e){var t=e.repl,n=t.user?(0,r.tZ)(i.xv,{css:a,children:t.user.username}):null;return(0,r.BX)(i.G7,{css:[i.l0.rowWithGap(8),i.l0.align.center,i.l0.flex.growAndShrink(1)],children:[(0,r.tZ)(i.G7,{children:(0,r.tZ)(o.ZP,{iconUrl:t.iconUrl,size:32,alt:"Repl icon"})}),(0,r.BX)(i.G7,{css:[i.l0.align.start,i.l0.flex.shrink(1)],children:[(0,r.tZ)(i.xv,{css:[i.l0.flex.shrink(1),i.l0.fontSize(14),{lineHeight:i.TV.fontSizeDefault}],"data-cy":"header-repl-title",children:t.title}),n]})]})}},92732:function(e,t,n){n.d(t,{hF:function(){return he},w3:function(){return be},Kq:function(){return Te},lR:function(){return xe}});var r=n(9941),i=n(35944),o=n(59641),a=n(61745),l=n(48869),c=n(56124),s=n(67294),u=n(73147),d=n(63377),f=n(54969),p=n(14251),h=n(32692),v=n(31230),m=n(37887);function g(){var e=(0,h.Z)(["\n  query ReplResourcesCallToAction($replId: String!) {\n    currentUser {\n      id\n    }\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        isBoosted\n        owner {\n          ... on Team {\n            id\n          }\n          ... on User {\n            id\n          }\n        }\n        powerUpCosts {\n          ... on PowerUpCostsType {\n            boost {\n              cycles\n              explanation\n            }\n          }\n        }\n      }\n    }\n  }\n"]);return g=function(){return e},e}var y,Z={},b=(0,v.Ps)(g());function w(){return function(e){var t;if(!e)return y.Nothing;var n="Repl"===(null===e||void 0===e?void 0:e.repl.__typename)?e.repl:void 0,r=(null===e||void 0===e?void 0:e.currentUser)?e.currentUser:void 0;return void 0===n||void 0===r||r.id!==(null===(t=n.owner)||void 0===t?void 0:t.id)||n.isBoosted||"PowerUpCostsType"!==n.powerUpCosts.__typename||n.powerUpCosts.boost.explanation!==f.Ch.NeedsCycles?y.Nothing:y.Upgrade}(function(e){var t=(0,p.Z)({},Z,e);return m.a(b,t)}({variables:{replId:(0,d.Z)()}}).data)}!function(e){e.Upgrade="UPGRADE",e.Boost="BOOST",e.Nothing="NOTHING"}(y||(y={}));var x=n(83009),E=n(13331);function C(){var e=w(),t=null;return e===y.Upgrade?t=(0,i.BX)(i.HY,{children:[(0,i.tZ)(o.xv,{multiline:!0,children:"Low on resources?"}),(0,i.tZ)(x.Z,{context:"repl_resources"})]}):e===y.Boost&&(t=(0,i.BX)(i.HY,{children:[(0,i.tZ)(o.xv,{multiline:!0,children:"Low on resources? Try boosting your Repl."}),(0,i.tZ)(o.ZP,{href:u.TT.ABOUT_BOOSTED_REPLS,text:"Learn about Boosts",iconLeft:(0,i.tZ)(E.Z,{})})]})),(0,i.BX)(i.HY,{children:[t,(0,i.BX)(o.xv,{multiline:!0,color:"dimmer",variant:"small",children:["These resources are for the cloud machine that hosts this Repl."," ",(0,i.tZ)("a",{href:"https://blog.replit.com/repl-resources",target:"_blank",children:"Learn more"})," ","about resource limits."]})]})}var S=n(7182),T=n(34727),k=n(52875),_=n(70655),R=n(21603),D=n(83971),I=n(99408),P=n(39499),G=n.n(P),B=n(16965),A=n(21131),U="date '+%s%N' && cat /sys/fs/cgroup/cpu/cpuacct.usage /sys/fs/cgroup/cpu/cpu.cfs_quota_us /sys/fs/cgroup/cpu/cpu.cfs_period_us /sys/fs/cgroup/memory/memory.usage_in_bytes /sys/fs/cgroup/memory/memory.soft_limit_in_bytes /sys/fs/cgroup/memory/memory.limit_in_bytes &&grep '^\\(total_rss\\|total_cache\\) ' /sys/fs/cgroup/memory/memory.stat",O="cat /repl/stats/subvolume_usage_bytes /repl/stats/subvolume_total_bytes";function N(){var e=(0,A.Z)((function(){return(0,S.cn)({wallTimeNanos:G().BigInt(0),cpuTimeNanos:G().BigInt(0),cpuUtilPercent:0,memoryUsageRssBytes:0,memoryUsageCacheBytes:0,memorySoftLimitBytes:0,memoryHardLimitBytes:0,storageUsedBytes:0,storageTotalBytes:0,numVCpu:0})}),[]),t=(0,A.Z)((function(){return{cpu:{currentAtom:(0,S.cn)((function(t){return L(t(e).cpuUtilPercent)})),totalAtom:(0,S.cn)((function(){return 100})),cpuCountAtom:(0,S.cn)((function(t){return t(e).numVCpu}))},ram:{currentCacheAtom:(0,S.cn)((function(t){return L(F(t(e).memoryUsageCacheBytes))})),currentRssAtom:(0,S.cn)((function(t){return L(F(t(e).memoryUsageRssBytes))})),totalAtom:(0,S.cn)((function(t){return F(t(e).memorySoftLimitBytes)}))},disk:{currentAtom:(0,S.cn)((function(t){return F(t(e).storageUsedBytes)})),totalAtom:(0,S.cn)((function(t){return F(t(e).storageTotalBytes)}))}}}),[e]),n=(0,S.b9)(e);return function(e){var t=(0,I.Z)().container,n=(0,D.Z)(t),r=(0,B.Z)(e);s.useEffect((function(){var e=!1,t=null;function i(){return o.apply(this,arguments)}function o(){return(o=(0,T.Z)((function(){var o,a,l;return(0,_.__generator)(this,(function(c){switch(c.label){case 0:return[4,n({args:["bash","-c",U]})];case 1:return a=c.sent(),e?[2]:null!==a.error?(R.kg.error("Error running resource tracking command",{errorMessage:a.error}),[2]):[4,n({args:["bash","-c",O]})];case 2:return l=c.sent(),e?[2]:null===l.error||(null===(o=l.output)||void 0===o?void 0:o.includes("No such file or directory"))?(r.current({trackingResult:a,storageResult:l}),t=setTimeout(i,2e3),[2]):(R.kg.error("Error running storage command",{errorMessage:l.error}),[2])}}))}))).apply(this,arguments)}return i(),function(){e=!0,t&&clearTimeout(t)}}),[t,n,r])}((function(e){var t=e.trackingResult,i=e.storageResult;n((function(e){var n,o;try{n=function(e,t){if(9!==e.length)throw new Error("Received unexpected output from resource tracking command: ".concat(e));var n={wallTimeNanos:G().BigInt(0),cpuTimeNanos:G().BigInt(0),cpuUtilPercent:0,memoryUsageRssBytes:0,memoryUsageCacheBytes:0,memorySoftLimitBytes:0,memoryHardLimitBytes:0,storageUsedBytes:0,storageTotalBytes:1073741824,numVCpu:0},i=e.slice(0,7).map((function(e){return parseInt(e,10)}));if(i.includes(NaN))throw new Error("Could not parse one or more values from resource monitoring command: ".concat(e));var o,a,l=G().BigInt(e[0]),c=G().BigInt(e[1]),s=i[2],u=i[3],d=i[5],f=i[6],h=new Map(e.slice(7).map((function(e){var t=(0,r.Z)(e.trim().split(" "),2),n=t[0],i=t[1];return[n,parseInt(i,10)]}))),v=null!==(o=h.get("total_rss"))&&void 0!==o?o:0,m=null!==(a=h.get("total_cache"))&&void 0!==a?a:0;if(!(v>=0&&m>=0&&f>0&&d>0))throw new Error("Memory usage or limit reported negative: ".concat(e));if(n.memoryUsageRssBytes=v,n.memoryUsageCacheBytes=m,n.memorySoftLimitBytes=d,n.memoryHardLimitBytes=f,G().GT(t.wallTimeNanos,0)&&G().GT(t.cpuTimeNanos,0)){var g=G().toNumber(G().subtract(l,t.wallTimeNanos)),y=G().toNumber(G().subtract(c,t.cpuTimeNanos));if(g>0&&y>=0&&s>0&&u>0){var Z=s/u;n.cpuUtilPercent=100*y/g/Z,n.numVCpu=Z}else{n.cpuUtilPercent=0;var b=JSON.stringify((0,k.Z)((0,p.Z)({},t),{wallTimeNanos:t.wallTimeNanos.toString(),cpuTimeNanos:t.cpuTimeNanos.toString()}));R.kg.error("CPU usage calculation returned negative value: ".concat(e,". Previous resources: ").concat(b))}}return n.wallTimeNanos=l,n.cpuTimeNanos=c,n}((t.output||"").trim().split("\n"),e)}catch(a){return R.kg.error("Could not calculate resources",{errorMessage:a.message}),e}if(!n)throw new Error("Expected resources");try{o=function(e){if(2!==e.length)throw new Error("Received unexpected output from storage command: ".concat(e));var t=parseInt(e[0],10),n=parseInt(e[1],10);if(isNaN(t)||isNaN(n))throw new Error("Could not parse values from storage output command: ".concat(e));return{storageUsedBytes:t,storageTotalBytes:n}}((i.output||"").trim().split("\n"))}catch(l){return R.kg.error("Could not calculate resources",{errorMessage:l.message}),e}return n.storageUsedBytes=o.storageUsedBytes,n.storageTotalBytes=o.storageTotalBytes,n}))})),t}function L(e){return Math.round(100*(e+Number.EPSILON))/100}function F(e){return e/1024/1024}var X=n(70917),M=n(4158),W=n(88961);function j(e){return(0,S.Dv)((0,A.Z)((function(){return e||(0,S.cn)(null)}),[e]))}var H={self:(0,X.iv)([o.l0.flex.row,o.l0.flex.wrap,o.l0.justify.spaceBetween,o.l0.align.end]),text:(0,X.iv)([o.l0.rowWithGap(2),o.l0.align.center,o.l0.minHeight(o.TV.space24)]),textWarn:(0,X.iv)([o.l0.rowWithGap(4),o.l0.align.center,o.l0.pl(4)]),textPadding:(0,X.iv)([o.l0.pb(2)]),textHighlight:(0,X.iv)([o.l0.color.accentPrimaryStronger]),selfMini:(0,X.iv)([o.l0.rowWithGap(4),o.l0.align.center])};function z(e){var t=e.title,n=e.description,r=e.inactive,a=void 0!==r&&r,l=e.limitStatusAtom,c=e.limitTextAtom,s=e.limitTextSecondaryAtom,u=e.mini,d=(0,S.Dv)((0,A.Z)((function(){return(0,S.cn)((function(e){return"At limit"===e(l)||"Close to limit"===e(l)}))}),[l]));return u?(0,i.BX)(o.G7,{css:H.selfMini,children:[(0,i.tZ)(o.xv,{variant:"small",css:o.l0.color.foregroundDimmer,children:a?t+" last run":t}),d?(0,i.tZ)(W.Z,{color:o.TV.orangeStronger}):null]}):(0,i.BX)(o.G7,{css:H.self,children:[(0,i.BX)(o.G7,{css:H.text,children:[(0,i.tZ)(o.xv,{css:{fontWeight:o.TV.fontWeightMedium},children:a?t+": last run":t}),n?(0,i.tZ)(o.hU,{alt:n,size:24,children:(0,i.tZ)(M.Z,{})}):null,d?(0,i.BX)(o.G7,{css:H.textWarn,children:[(0,i.tZ)(W.Z,{color:o.TV.orangeStronger}),(0,i.tZ)(o.xv,{variant:"small",css:H.textPadding,children:(0,i.tZ)(V,{text:l})})]}):null]}),(0,i.tZ)(o.xv,{variant:"small",css:H.textPadding,children:s?(0,i.BX)(i.HY,{children:[(0,i.BX)("span",{css:H.textHighlight,children:[" ",(0,i.tZ)(V,{text:c})]})," + ",(0,i.tZ)(V,{text:s})]}):(0,i.tZ)(V,{text:c})})]})}function V(e){var t=j(e.text);return(0,i.tZ)(i.HY,{children:t})}var q=n(14840),K={self:(0,X.iv)([[o.l0.flex.row,o.l0.height(o.TV.space12),o.l0.borderRadius(o.TV.borderRadiusRound),o.gU.filledAndOutlined,o.l0.overflow("clip"),o.l0.position.relative]]),progress:(0,X.iv)([o.l0.position.relative,o.l0.width("100%"),o.l0.height("100%"),{top:0,left:0}])};function $(e){var t=e.total,n=e.data,r=void 0===n?[]:n,a=e.disabled,l=void 0!==a&&a,c=e.className,u=e.tooltip,d=e.color,f=e.current;return(0,i.tZ)(o.u,{placement:"top",tooltip:u,maxWidth:280,children:function(e,n){return(0,i.tZ)(o.G7,(0,k.Z)((0,p.Z)({css:K.self,className:c,innerRef:n},e),{onClick:void 0,children:f?(0,i.tZ)(Y,{total:t,disabled:l,current:f,color:d}):null===r||void 0===r?void 0:r.map((function(e,n){return(0,s.createElement)(Y,(0,k.Z)((0,p.Z)({},e),{total:t,disabled:l,key:n}))}))}))}})}function Y(e){var t=e.current,n=e.noRadius,r=e.color,a=void 0===r?o.TV.accentPrimaryDefault:r,l=e.total,c=e.disabled;return(0,i.tZ)(o.G7,{css:[K.progress,(0,p.Z)({backgroundColor:c?o.TV.outlineDefault:a,width:Q(t,l)+"%"},(0,p.Z)({},n?{}:{borderTopRightRadius:o.TV.borderRadiusRound,borderBottomRightRadius:o.TV.borderRadiusRound}))]})}function Q(e,t){return 0===t?0:Math.max(0,Math.min(100,e/t*100))}function J(e,t,n,r,i){return"empty"===e||void 0===t?"":"vCPU"===i?Math.round(100*Math.min(1,t/n))+"% of "+r+" vCPUs":Math.round(t).toLocaleString()+"/"+Math.round(n).toLocaleString()+" "+i}var ee={accordionTitle:(0,X.iv)([o.l0.rowWithGap(4),o.l0.align.center]),accordionText:(0,X.iv)([o.l0.color.foregroundDimmer,o.l0.fontSize(12)]),accordionIcon:(0,X.iv)([o.l0.cursor.pointer]),expandedWrapper:(0,X.iv)([o.l0.colWithGap(4),o.l0.py(8),o.l0.border({direction:"bottom",color:o.TV.outlineDefault,width:1})])};function te(){return(0,i.tZ)(o.Qd,{headerContent:(0,i.tZ)(o.xv,{css:ee.accordionText,children:"About RAM"}),children:(0,i.BX)(o.G7,{css:ee.expandedWrapper,children:[(0,i.tZ)(oe,{type:"Project",text:"is what your programs, code intelligence, and some editor features use. It holds programs that are running right now."}),(0,i.tZ)(oe,{type:"Cache",text:"caches file contents, libraries, and executables. If Program Memory gets too high, it will replace Cache Memory. If there\u2019s not enough Cache Memory, processes will slow down."})]})})}var ne={self:(0,X.iv)([o.l0.width(8),o.l0.height(8),o.l0.borderRadius(8),o.l0.flex.shrink(0)])};function re(e){var t=e.variant;return(0,i.tZ)("div",{css:[ne.self,"primary"===t?o.l0.backgroundColor.accentPrimaryDefault:o.l0.backgroundColor.outlineDefault]})}var ie={self:(0,X.iv)([o.l0.rowWithGap(8),o.l0.align.center]),text:(0,X.iv)([o.l0.flex.shrink(1)]),underline:(0,X.iv)({textDecoration:"underline"})};function oe(e){var t=e.type,n=e.text;return(0,i.BX)(o.G7,{css:ie.self,children:[(0,i.tZ)(re,{variant:"Project"===t?"primary":"secondary"}),(0,i.BX)(o.xv,{multiline:!0,variant:"small",css:ie.text,children:[(0,i.BX)("span",{css:ie.underline,children:[t," Memory"]})," ",n]})]})}var ae=(0,o.Xb)({self:[o.l0.colWithGap(4)],selfMini:[o.l0.colWithGap(4),o.l0.flex.growAndShrink(2),{flexBasis:32}],selfMiniBar:[o.l0.height(8)]});function le(e){var t=e.totalAtom,n=e.currentAtom,r=e.currentSecondaryAtom,a=e.measure,l=e.cpuCountAtom,c=e.title,s=e.description,u=(0,A.Z)((function(){return(0,S.cn)((function(e){return function(e,t){if(void 0===e)return"empty";var n=e/t;return n>=1?"At limit":n>=.9?"Close to limit":"fine"}(e(n),e(t))}))}),[n,t]),d=(0,A.Z)((function(){return(0,S.cn)((function(e){return J(e(u),e(n),e(t),l&&e(l),a)}))}),[u,n,t,l,a]),f=(0,A.Z)((function(){return(0,S.cn)((function(e){return r?J(e(u),e(r),e(t),l&&e(l),a):""}))}),[u,r,t,l,a]),h=(0,A.Z)((function(){return(0,S.cn)((function(e){return r?Math.round(e(n)).toString():e(d)}))}),[r,n,d]);return(0,i.BX)(o.G7,{css:e.mini?ae.selfMini:ae.self,children:[(0,i.tZ)(z,(0,k.Z)((0,p.Z)({title:c,description:s,limitStatusAtom:u,limitTextAtom:h},r?{limitTextSecondaryAtom:f}:{}),{mini:e.mini})),(0,i.tZ)(se,(0,k.Z)((0,p.Z)({},e),{limitStatusAtom:u,limitTextAtom:d,limitTextSecondaryAtom:f}))]})}var ce={tooltip:(0,X.iv)(o.l0.colWithGap(2)),tooltipItem:(0,X.iv)(o.l0.rowWithGap(4),o.l0.align.center,o.l0.width("100%"),o.l0.flex.growAndShrink(1)),tooltipItemText:(0,X.iv)(o.l0.flex.row,o.l0.align.center,o.l0.justify.spaceBetween,o.l0.flex.growAndShrink(1),{"&>span":o.l0.display.inlineFlex,gap:q.TV.space4})};function se(e){var t=e.currentAtom,n=e.currentLabel,r=e.currentSecondaryAtom,a=e.currentSecondaryLabel,l=e.totalAtom,c=e.mini,s=e.inactive,u=e.limitStatusAtom,d=e.limitTextAtom,f=e.limitTextSecondaryAtom,p=(0,S.Dv)(t),h=j(r),v=(0,S.Dv)(l),m=(0,S.Dv)(d),g=(0,S.Dv)(f),y=(0,S.Dv)((0,A.Z)((function(){return(0,S.cn)((function(e){return"At limit"===(t=e(u))?q.TV.accentNegativeDefault:"Close to limit"===t?q.TV.orangeDefault:void 0;var t}))}),[u]));return r?(0,i.tZ)($,{css:c&&ae.selfMiniBar,disabled:s,total:v,tooltip:(0,i.BX)(o.G7,{css:ce.tooltip,children:[(0,i.tZ)(ue,{variant:"primary",label:n,labelValue:m}),(0,i.tZ)(ue,{variant:"secondary",label:a,labelValue:g})]}),data:[{current:p,color:y,noRadius:!0},{current:h||0,color:q.TV.outlineDimmer}]}):(0,i.tZ)($,{css:c&&ae.selfMiniBar,disabled:s,total:v,current:p,color:y,tooltip:m})}function ue(e){var t=e.variant,n=e.label,r=e.labelValue;return(0,i.BX)(o.G7,{css:ce.tooltipItem,children:[(0,i.tZ)(re,{variant:t}),(0,i.BX)(o.xv,{css:ce.tooltipItemText,children:[(0,i.BX)("span",{children:[n,":"]}),(0,i.tZ)("span",{children:r})]})]})}var de=Symbol("ReplResources");function fe(e){var t=N(),n=t.cpu,r=t.ram,a=t.disk,l=(0,i.tZ)(le,(0,p.Z)({title:"RAM",description:"How much memory your Repl is using",currentAtom:r.currentRssAtom,currentLabel:"Project Memory",currentSecondaryAtom:r.currentCacheAtom,currentSecondaryLabel:"Cache Memory",totalAtom:r.totalAtom,measure:"MB"},e));return(0,i.BX)(S.zt,{scope:de,children:[(0,i.tZ)(le,(0,p.Z)({title:"CPU",description:"How much processing power your Repl is using",currentAtom:n.currentAtom,totalAtom:n.totalAtom,cpuCountAtom:n.cpuCountAtom,measure:"vCPU"},e)),e.mini?l:(0,i.BX)(o.G7,{css:o.l0.colWithGap(4),children:[l,(0,i.tZ)(te,{})]}),(0,i.tZ)(le,(0,p.Z)({title:"Storage",description:"How much room your Repl has to store files",currentAtom:a.currentAtom,totalAtom:a.totalAtom,measure:"MB"},e))]})}function pe(e){var t=e.title,n=e.doWarnAtom,r=e.inactive,a=void 0!==r&&r,l=(0,S.Dv)(n);return(0,i.BX)(o.G7,{css:[o.l0.rowWithGap(4),o.l0.align.center],children:[(0,i.tZ)(o.xv,{variant:"small",css:o.l0.color.foregroundDimmer,children:a?t+" last run":t}),l?(0,i.tZ)(W.Z,{color:o.TV.orangeStronger}):null]})}function he(e){var t=e.title,n=e.totalAtom,r=e.currentAtom,a=e.countAtom,l=e.measure,c=e.limitText,s=e.inactive,u=void 0!==s&&s,d=(0,A.Z)((function(){return(0,S.cn)((function(e){return me(e(r),e(n))}))}),[r,n]),f=(0,A.Z)((function(){return(0,S.cn)((function(e){return c||ye(e(d),e(r),e(n),a&&e(a),l)}))}),[c,d,r,n,a,l]),p=(0,A.Z)((function(){return(0,S.cn)((function(e){var t=e(d);return"At limit"===t||"Close to limit"===t}))}),[d]);return(0,i.BX)(o.G7,{css:[o.l0.colWithGap(4),o.l0.flex.growAndShrink(2),{flexBasis:32}],children:[t?(0,i.tZ)(pe,{title:t,doWarnAtom:p,inactive:u}):null,(0,i.tZ)(ve,{currentAtom:r,totalAtom:n,inactive:u,limitTextAtom:f,mini:!0})]})}function ve(e){var t=e.currentAtom,n=e.totalAtom,r=e.limitTextAtom,a=e.inactive,l=e.mini,c=(0,S.Dv)(n),s=(0,S.Dv)(t),u=(0,S.Dv)(r),d=function(e){switch(e){case"empty":case"fine":default:return;case"At limit":return o.TV.accentNegativeDefault;case"Close to limit":return o.TV.orangeDefault}}(me(s,c));return(0,i.tZ)(o.JY,{css:l&&o.l0.height(8),total:c,current:s,color:d,disabled:a,tooltip:u})}function me(e,t){if(void 0===e)return"empty";var n=e/t;return n>=1?"At limit":n>=.9?"Close to limit":"fine"}function ge(e){return Math.round(100*(e+Number.EPSILON))/100}function ye(e,t,n,r,i){if("empty"!==e&&void 0!==t)return"vCPU"===i?ge(100*Math.min(1,t/n))+"% of "+r+" vCPUs":ge(t).toLocaleString()+"/"+ge(n).toLocaleString()+" "+i}var Ze={self:(0,X.iv)([o.l0.p(8),o.l0.colWithGap(8),{borderTop:"1px solid ".concat(o.TV.backgroundHigher)}])};function be(){var e=(0,r.Z)(s.useState(!1),2),t=e[0],n=e[1];return(0,i.tZ)(i.HY,{children:(0,i.tZ)(o.Tg,{css:Ze.self,children:t?(0,i.tZ)(ke,{onClose:function(){return n(!1)}}):(0,i.BX)(i.HY,{children:[(0,i.tZ)(a.M,{}),(0,i.tZ)(Ce,{onExpand:function(){return n(!0)}})]})})})}var we={self:(0,X.iv)([o.l0.overflow("hidden"),o.l0.rowWithGap(12),o.l0.flex.grow(1),o.l0.justify.spaceBetween,o.l0.align.center,o.l0.focusRing,o.l0.cursor.pointer])};function xe(e){var t=e.inactive,n=void 0!==t&&t;return(0,i.tZ)(o.G7,{css:we.self,"aria-expanded":!1,children:(0,i.tZ)(fe,{mini:!0,inactive:n})})}var Ee={self:(0,X.iv)([o.l0.overflow("hidden"),o.l0.reset.button,o.l0.rowWithGap(12),o.l0.flex.grow(1),o.l0.justify.spaceBetween,o.l0.align.center,o.l0.focusRing,o.l0.cursor.pointer])};function Ce(e){var t=e.onExpand,n=e.inactive,r=void 0!==n&&n;return(0,i.BX)(o.G7,{css:Ee.self,role:"button",tag:"button","aria-expanded":!1,onClick:t,children:[(0,i.tZ)(fe,{mini:!0,inactive:r}),(0,i.tZ)(c.Z,{})]})}var Se={self:(0,X.iv)([o.l0.colWithGap(12),o.l0.p(8)]),selfCollapsable:(0,X.iv)([o.l0.colWithGap(12)]),headerCollapsable:(0,X.iv)([o.l0.flex.row,o.l0.justify.spaceBetween])};function Te(e){var t=e.inactive,n=void 0!==t&&t;return(0,i.BX)(o.G7,{css:Se.self,children:[(0,i.tZ)(fe,{inactive:n}),(0,i.tZ)(C,{})]})}function ke(e){var t=e.inactive,n=void 0!==t&&t,r=e.onClose;return(0,i.BX)(o.G7,{css:Se.selfCollapsable,children:[(0,i.BX)(o.G7,{css:[Se.headerCollapsable],children:[(0,i.tZ)(o.xv,{variant:"subheadDefault",children:"Repl Resources"}),(0,i.tZ)(o.hU,{alt:"collapse",tooltipHidden:!0,onClick:r,"aria-expanded":!0,children:(0,i.tZ)(l.Z,{})})]}),(0,i.tZ)(fe,{inactive:n}),(0,i.tZ)(C,{})]})}},83475:function(e,t,n){n.d(t,{ZP:function(){return Y},al:function(){return V},L7:function(){return $}});var r=n(34727),i=n(67573),o=n(14251),a=n(52875),l=n(70655),c=n(35944),s=n(67294),u=n(32692),d=n(31230),f=n(37887);function p(){var e=(0,u.Z)(["\n  query WorkspaceRunButton($id: String!) {\n    repl(id: $id) {\n      ... on Repl {\n        id\n        language\n        title\n        rootOriginReplUrl\n        source {\n          release {\n            id\n            repl {\n              id\n              title\n              owner {\n                ... on User {\n                  id\n                  username\n                }\n                ... on Team {\n                  id\n                  username\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n    currentUser {\n      id\n    }\n  }\n"]);return p=function(){return e},e}var h={},v=(0,d.Ps)(p());var m=n(60977),g=n(63377),y=n(48920),Z=n(81255),b=n(69346),w=n(77365),x=n(33279),E=n(59641),C=n(70917),S=n(57263),T=n(9941),k=n(7182),_=n(80086);function R(){var e=(0,u.Z)(["\n  query CelebrateReplRunCurrentUser {\n    currentUser {\n      id\n      timeCreated\n    }\n  }\n"]);return R=function(){return e},e}var D={},I=(0,d.Ps)(R());var P=n(98146),G=n(64487),B=n(43186),A=new Date("2022-07-08"),U=(0,_.O4)("useCelebrateFirstReplPlay",!1);function O(){var e,t,n=function(e){var t=(0,o.Z)({},D,e);return f.a(I,t)}(),r=(0,B.Z)().preferences.extraDelight,i=(0,P.$0)().fireCircularBurstFrom,a=(0,T.Z)((0,k.KO)(U),2),l=a[0],c=a[1],s=null!==(t=null===(e=n.data)||void 0===e?void 0:e.currentUser)&&void 0!==t?t:null,u=!l&&s&&new Date(s.timeCreated)>=A;return{hasCelebrated:l,celebrate:function(e){e?((r||u)&&i({element:e}),u&&c(!0)):G.Tb(new Error("Cannot find element for celebrate Repl run confetti"))}}}var N,L=n(8633),F=n(76075),X=n(85485),M=n(93058),W=n(21603),j=n(1855);function H(e){switch(e.runState){case y.A.IDLE:return(0,c.tZ)(L.Z,{size:16});case y.A.RUNNING:return(0,c.tZ)(F.Z,{size:16});default:return(0,c.tZ)(w.Z,{size:16})}}var z=(N={},(0,i.Z)(N,y.A.IDLE,"Run"),(0,i.Z)(N,y.A.RUNNING,"Stop"),(0,i.Z)(N,y.A.STOPPING,"Stopping"),(0,i.Z)(N,y.A.OFFLINE,"Working"),N),V={small:60,large:100},q=(0,C.iv)([Z.l0.py(12),Z.l0.width(V.small),Z.l0.flex.row,Z.l0.center,Z.l0.borderRadius(8),Z.l0.backgroundColor.accentPositiveDimmest,Z.l0.color.accentPositiveStronger,Z.l0.cursor.pointer,(0,i.Z)({transition:"color 0.2s ease 0s, background-color 0.2s ease 0s",border:"1px solid",borderColor:Z.TV.accentPositiveDimmest,lineHeight:1,outline:"0 none","&:hover":[{color:"white"},Z.l0.backgroundColor.accentPositiveDefault]},(0,X.et)("tabletMax"),[Z.l0.width(V.large)])]),K=(0,C.iv)([Z.l0.color.foregroundDimmer,Z.l0.backgroundColor.backgroundHigher,{borderColor:Z.TV.backgroundHigher,"&:hover":[{color:"white"},Z.l0.backgroundColor.backgroundHighest]}]);function $(e){var t=(0,s.useState)(e.getRunState()),n=t[0],r=t[1];return(0,s.useEffect)((function(){return r(e.getRunState()),e.onStateChanged((function(e){r(e)}))}),[e]),n}function Y(e){var t=e.runner,n=e.runConfig,u=e.onRunInitiated,d=e.style,p=void 0===d?"default":d,w=e.disableTooltip,C=(0,g.Z)(),T=$(t),k=function(e){var t=(0,o.Z)({},h,e);return f.a(v,t)}({variables:{id:C}}).data,_="Repl"===(null===k||void 0===k?void 0:k.repl.__typename)?k.repl:null,R=O().celebrate,D=T!==y.A.IDLE&&T!==y.A.RUNNING,I=(0,M.Z)().showError,P=(0,s.useRef)(null),G=function(){var e=(0,r.Z)((function(){var e,r,i,o,a,c,s,d;return(0,l.__generator)(this,(function(l){switch(l.label){case 0:return l.trys.push([0,3,,4]),T!==y.A.IDLE?[3,2]:(u&&u(),[4,t.run(n)]);case 1:return l.sent(),_&&(0,m.j)(m.U3.PROJECT_RAN,{language:_.language,replId:_.id,replTitle:_.title,rootOriginReplUrl:_.rootOriginReplUrl,templateTitle:null===(e=_.source)||void 0===e||null===(r=e.release)||void 0===r||null===(i=r.repl)||void 0===i?void 0:i.title,templateOwner:null===(o=_.source)||void 0===o||null===(a=o.release)||void 0===a||null===(c=a.repl)||void 0===c||null===(s=c.owner)||void 0===s?void 0:s.username}),P.current&&R(P.current),[2];case 2:return T===y.A.RUNNING?[2,t.stopRun()]:[3,4];case 3:return d=l.sent(),I(d.toString()),W.kg.error("run button error",{errorMessage:d.message}),T===y.A.RUNNING?[2,t.stopRun()]:[3,4];case 4:return[2]}}))}));return function(){return e.apply(this,arguments)}}();if("floating"===p)return(0,c.tZ)(b.G,{tag:"button",disabled:D,css:[{position:"fixed",right:24,bottom:72,zIndex:1},Z.l0.center,{height:"50px",width:"50px",opacity:"0.5",cursor:"pointer",borderRadius:"100%",border:"solid 2px var(--accent-positive-dimmer)",backgroundColor:Z.TV.accentPositiveDimmest}],onClick:G,innerRef:P,children:(0,c.tZ)(H,{runState:T})});var B=T===y.A.IDLE;return"inline-small"===p?(0,c.BX)("button",{"data-cy":"ws-run-btn",onClick:G,ref:P,disabled:D,css:[Z.l0.p(12),Z.l0.flex.row,Z.l0.center,Z.l0.borderRadius(8),B?Z.l0.backgroundColor.accentPositiveDimmest:Z.l0.backgroundColor.backgroundHigher,B?Z.l0.color.accentPositiveStronger:Z.l0.color.foregroundDimmer,{border:"1px solid",borderColor:B?Z.TV.accentPositiveDimmest:Z.TV.backgroundHigher},Z.l0.width("100%"),Z.l0.height("100%")],children:[(0,c.tZ)(H,{runState:T}),(0,c.tZ)(E.xv,{variant:"subheadDefault",css:[Z.l0.pl(8)],children:z[T]})]}):(0,c.tZ)(E.u,{placement:"bottom",isDisabled:w,tooltip:(0,c.tZ)(x.Z,{shortcut:{cmdOrCtrlKey:!0,key:"Enter"}}),children:function(e,t){return(0,c.BX)("button",(0,a.Z)((0,o.Z)({},e),{onClick:G,ref:(0,j.l)(P,t),css:[q,!B&&K],children:[(0,c.tZ)(H,{runState:T}),(0,c.tZ)(E.xv,{variant:"subheadDefault",css:[Z.l0.pl(8),Z.l0.display.none,(0,i.Z)({lineHeight:1,overflow:"visible"},"@media (min-width: ".concat(S.j.tabletMax,"px)"),[Z.l0.display.block])],children:z[T]})]}))}})}},72092:function(e,t,n){n.d(t,{N:function(){return R},S:function(){return k}});var r=n(9941),i=n(35944),o=n(67294),a=n(29672),l=n(91202),c=n(48386),s=n(10129),u=n(69346),d=n(81255),f=n(34140),p=n(43186),h=n(11089),v=n(68944),m=n(83261),g=n(60977),y=n(84563),Z=n(34727),b=n(70655),w=n(11163),x=n(53153),E=n(79848),C=n(15902);function S(e){var t=e.sendInput,n=(0,w.useRouter)(),r=(0,C.Vg)(n);(0,o.useEffect)((function(){if(r){var e=function(e){var n=e.payload;if((0,x.I9)(n))!function(e,n){t(n)?(0,E.gU)(e.messageId):(0,E.pl)(e.messageId)}(e,n.input);else if((0,x.Fq)(n))if("unknown"===n.command);else(0,E.pl)(e.messageId);else(0,E.pl)(e.messageId)},n=function(){var t=(0,Z.Z)((function(t){var n;return(0,b.__generator)(this,(function(r){try{if(n=t.data,!(0,x.CF)(n))return[2];if(n.protocolVersion!==x.Wj)return[2];switch(n.payload.messageType){case x.cF.ERROR:case x.cF.ACK:case x.cF.RESET:case x.cF.DEBUG:case x.cF.WORKSPACE_STATE:case x.cF.WORKSPACE_STATE_REQUEST:case x.cF.WORKSPACE_REQUEST_ACTION:case x.cF.SET_KEYBOARD_STATE:case x.cF.TEXT_EDITOR_STATE:case x.cF.TEXT_EDITOR_CLOSED:case x.cF.TEXT_EDITOR_STATE_REQUEST:case x.cF.REQUEST_SET_SELECTION:case x.cF.REQUEST_REPLACE_SELECTION:case x.cF.REQUEST_SET_TEXT:case x.cF.REQUEST_INSERT_TEXT:case x.cF.REQUEST_PASTE_TEXT:case x.cF.TEXT_EDITOR_REQUEST_ACTION:break;case x.cF.SHELL_INSERT_INPUT:case x.cF.SHELL_COMMAND:e(n);break;default:throw new Error("Unknown BridgeMessageType.")}}catch(i){throw new Error("Invalid message: ".concat(i))}return[2]}))}));return function(e){return t.apply(this,arguments)}}();return window.addEventListener("message",n),function(){window.removeEventListener("message",n)}}}),[r,t])}var T=n(41671);function k(e){var t,n=e.autoFocus,i=e.onShellKey,a=e.container,l=(0,r.Z)((0,h.Z)(),2),c=l[0],s=l[1],u=(0,m.Z)({service:"shell",container:a}),d=(0,T.K)({channelId:null===u||void 0===u||null===(t=u.channel)||void 0===t?void 0:t.id}),f="",p="",Z="",b=o.useCallback((function(e){if(!u.channel||!c)return!1;var t=a.client();if(!u.channel||"open"!==u.channel.status||t.connectionState!==v.em.CONNECTED)return!1;var n=(0,y.I)(e);return u.channel.send({input:n}),!0}),[c,u,a]);return S({sendInput:b}),o.useEffect((function(){if(u.channel&&c&&"open"===u.channel.status){var e=c.onKey((function(e){var t=e.key,n=e.domEvent;if("\r"===t){(0,g.j)(g.U3.SHELL_COMMAND_EVALED);var r=p;p.endsWith(f)&&f.length>0&&(r=p.slice(0,-f.length)),d("user:shell:output:clean",{output:r,command:Z}),d("user:shell:exec",{command:f}),d("user:shell:output",{output:p}),Z=f,f="",p=""}else f+=t;i&&i(n)})),t=a.client(),n=c.onData((function(e){b(e)}));u.channel.onCommand((function(e){e.hint?c.write("\x1b[0m\x1b[33m".concat(e.hint.text,"\x1b[0m\r\n")):e.output&&(c.write(e.output),p+=e.output)}));var r=function(){u.channel&&"open"===u.channel.status&&t.connectionState===v.em.CONNECTED&&u.channel.send({resizeTerm:c.getSize()})},o=c.onResize(r);return r(),function(){e.dispose(),n.dispose(),o.dispose()}}}),[u.channel,c,i,a,b]),o.useEffect((function(){n&&c&&c.focus()}),[n,c]),[c,s]}var _=u.K.div;function R(e){var t=e.shell,n=e.shellRef,v=e.className,m=(0,p.Z)().preferences.accessibleTerminal,g=(0,r.Z)(o.useState(!1),2),y=g[0],Z=g[1],b=y&&t?(0,i.tZ)(a.R,{findPrevious:t.findPrevious,findNext:t.findNext,exit:function(){return Z(!1)}}):(0,i.tZ)(l.l,{onClick:function(){return Z(!0)}}),w=(0,h.a)();return(0,i.BX)(u.G,{className:v,css:[d.l0.p(8),d.l0.position.relative,d.l0.height("100%"),d.l0.borderRadius(0,0,8,8),d.l0.backgroundColor.backgroundDefault,{"& .xterm":[d.l0.height("100%")],"& .xterm .xterm-viewport":[d.l0.height("100%"),d.l0.borderRadius(0,0,8,8),{overflowY:"auto"}],"&:focus-within .controls":{opacity:1}},w],onKeyDown:function(e){"f"===e.key&&(0,s.jh)(e)&&(Z(!0),e.preventDefault())},children:[!m&&(0,i.tZ)(f.T,{children:'Enable "Accessible Terminal" in Workspace Settings to use a screen reader with the shell.'}),(0,i.tZ)(_,{css:[d.l0.flex.growAndShrink(1)],ref:n}),t?(0,i.BX)(u.G,{className:"controls",css:[d.l0.position.absolute,d.l0.flex.row,d.l0.top(8),d.l0.right(8),d.l0.height(30),d.l0.align.center,{opacity:0,zIndex:4}],children:[b,(0,i.tZ)(c.Z,{onClick:t.clear})]}):(0,i.tZ)("code",{css:[d.l0.color.foregroundDimmest,d.l0.coverContainer,d.l0.p(8)],children:"Loading..."})]})}},17495:function(e,t,n){n.d(t,{xA:function(){return f},xh:function(){return h}});var r=n(14251),i=n(32692),o=n(31230),a=n(50319),l=n(37887);function c(){var e=(0,i.Z)(["\n  mutation ReplEnvironmentHeaderSubmitRepl($replId: String!) {\n    submitRepl(replId: $replId) {\n      ... on Repl {\n        id\n        workspaceCta\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return c=function(){return e},e}function s(){var e=(0,i.Z)(["\n  query ReplEnvironmentHeaderSubmitReplDueDate($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        template {\n          id\n          dueDate\n        }\n      }\n    }\n  }\n"]);return s=function(){return e},e}var u={},d=(0,o.Ps)(c());function f(e){var t=(0,r.Z)({},u,e);return a.D(d,t)}var p=(0,o.Ps)(s());function h(e){var t=(0,r.Z)({},u,e);return l.a(p,t)}},15686:function(e,t,n){n.d(t,{Z:function(){return X}});var r=n(9941),i=n(35944),o=n(67294),a=n(59641),l=n(88075),c=n(64614),s=n(41664),u=n.n(s),d=n(14251),f=n(52875),p=n(79832),h=n(92350),v=n(69305),m=n(15852),g=n(9903),y=n(43186),Z=n(70917),b=function(e){return(0,Z.iv)({wordBreak:"break-word",boxSizing:"border-box",whiteSpace:"normal",lineHeight:1.5,color:a.TV.foregroundDefault,fontFamily:"".concat(a.TV.fontFamilyDefault," !important"),fontSize:e,textSizeAdjust:"100%","h1, h2, h3, h4, h5, h6":{color:a.TV.foregroundDefault,fontWeight:a.TV.fontWeightMedium,marginBottom:a.TV.space16,lineHeight:1.25,wordWrap:"break-word"},"h1, h2":{paddingBottom:a.TV.space8,borderBottom:"1px solid ".concat(a.TV.backgroundHigher),marginTop:a.TV.space32},h1:{fontSize:"2em"},h2:{fontSize:"1.5em"},h3:{fontSize:"1.25em",marginTop:a.TV.space24},h4:{fontSize:"1em",marginTop:a.TV.space16},h5:{fontSize:"0.875em"},h6:{color:a.TV.foregroundDimmer,fontSize:"0.85em"},".anchor":{float:"left",lineHeight:1,marginLeft:"calc(-1 * ".concat(a.TV.space16,")"),paddingRight:a.TV.space4},".anchor:focus":{outline:"none"},p:{marginBottom:a.TV.space16,fontSize:e,fontFamily:"".concat(a.TV.fontFamilyDefault," !important")},"p:last-child":{marginBottom:0},table:{borderSpacing:0,borderCollapse:"collapse",display:"block",width:"100%",overflow:"auto",marginBottom:a.TV.space16,wordBreak:"normal",th:{fontWeight:a.TV.fontWeightMedium},"td, th":{padding:"".concat(a.TV.space8," ").concat(a.TV.space12),border:"1px solid ".concat(a.TV.backgroundHighest),minWidth:"16ch"},tr:{backgroundColor:a.TV.backgroundDefault,borderTop:"1px solid ".concat(a.TV.backgroundHighest)},"tr:nth-child(2n)":{backgroundColor:a.TV.backgroundRoot}},"hr:after":{clear:"both"},"li > p":{marginBottom:0},li:{marginTop:a.TV.space4},dd:{marginLeft:0},"ol, ul":{paddingLeft:a.TV.space16,marginTop:0,marginBottom:0},ul:{listStyle:"initial",listStyleType:"disc",marginBottom:a.TV.space16},ol:{listStyle:"decimal",marginBottom:a.TV.space16},"ol ol, ol ul, ul ol, ul ul":{paddingLeft:a.TV.space16,marginTop:0,marginBottom:0,paddingBottom:0},"ul ul":{listStyleType:"circle"},"ul ul ul":{listStyleType:"square"},"ol ol, ul ol":{listStyleType:"lower-roman"},"ol ol ol, ol ul ol, ul ol ol, ul ul ol":{listStyleType:"lower-alpha"},pre:{fontFamily:"".concat(a.TV.fontFamilyCode," !important"),margin:"".concat(a.TV.space16," 0"),borderRadius:4,wordBreak:"break-all",wordWrap:"break-word",whiteSpace:"pre-wrap",color:a.TV.foregroundDefault},"pre:last-child":{marginBottom:"0 !important"},blockquote:{padding:"0 1em",marginBottom:a.TV.space16,borderLeft:"".concat(a.TV.space2," solid ").concat(a.TV.backgroundHighest),paddingLeft:a.TV.space16},"blockquote > *":{color:"".concat(a.TV.foregroundDimmer," !important")},"blockquote > :last-child":{marginBottom:"0 !important",borderBottom:"none !important"},"blockquote > :first-child":{marginTop:"0 !important"},kbd:{display:"inline-block",padding:"3px 5px",font:"11px ".concat(a.TV.fontFamilyCode),color:a.TV.foregroundDimmer,verticalAlign:"middle",backgroundColor:a.TV.backgroundHigher,border:"none",borderRadius:3,boxShadow:"inset 0 -1px 0 ".concat(a.TV.backgroundHighest)},a:{color:a.TV.accentPrimaryStronger,backgroundColor:"initial"},"> :first-child":{marginTop:"0 !important",paddingTop:"0 !important"},"> :last-child":{borderBottom:"none !important",marginBottom:"0 !important",paddingBottom:"0 !important"},'[type="checkbox"]':{boxSizing:"border-box",marginRight:a.TV.space8,padding:0},details:{marginBottom:a.TV.space16,display:"block",background:a.TV.backgroundHigher,borderRadius:a.TV.borderRadius4,padding:a.TV.space16},summary:{display:"list-item",userSelect:"none",cursor:"pointer",fontWeight:a.TV.fontWeightBold},"details[open] > summary":{borderBottom:"1px solid ".concat(a.TV.backgroundHighest),marginBottom:a.TV.space16,paddingBottom:a.TV.space16},hr:{height:1,backgroundColor:a.TV.backgroundHigher,margin:"".concat(a.TV.space24," 0"),border:0}})},w=n(34325),x=n(64798),E=n(96711),C=["a","pre","code","em","strong","p","ul","ol","li","img","del","h1","h2","h3","h4","h5","h6","sup","sub","br","hr","blockquote","span","div"];function S(e){var t=e.content,n=(0,y.Z)().preferences.fontSize,r=o.useCallback((function(e){return(0,i.tZ)(g.Z,(0,f.Z)((0,d.Z)({},e),{asyncHighlighting:!0}))}),[]);return(0,i.tZ)("div",{css:[{"& ol":{paddingInlineStart:"20px"},"& ul":{paddingInlineStart:"20px",listStyle:"initial"}}],children:(0,i.tZ)(p.D,{css:b(n),allowedElements:C,remarkPlugins:[h.Ic,v.Z,m.Z,w.Z],linkTarget:"_blank",rehypePlugins:[x.Z],components:{code:r,img:E.Z},children:t})})}var T=(0,o.memo)(S),k=n(87514),_=n(59369),R=n(10982),D=n(32692),I=n(31230),P=n(6801),G=n(50319);function B(){var e=(0,D.Z)(["\n  mutation DeleteThreadMessage($id: String!) {\n    deleteThreadMessage(messageId: $id) {\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return B=function(){return e},e}var A={},U=(0,I.Ps)(B(),P.j7);var O=n(56724),N=n(93058),L=n(23384),F=function(e){var t=e.thread,n=e.message,s=(0,O.d)(),f=(0,N.Z)().showError,p=(0,r.Z)(function(e){var t=(0,d.Z)({},A,e);return G.D(U,t)}({onError:function(e){f(e.message)},onCompleted:function(e){var t;"UserError"===(null===(t=e.deleteThreadMessage)||void 0===t?void 0:t.__typename)&&f(e.deleteThreadMessage.message)}}),2),h=p[0],v=p[1].loading,m=(0,L.D)({controlName:"flag-threads-dropdown-menu",default:!1,type:"boolean"}),g=!(!t||t.indexStart!==t.indexEnd),y={resolved:"Thread resolved. Re-open it any time in the inbox.",unresolved:"Thread re-opened"},Z="Outdated",b="The code has changed since the comment was left",w=o.useMemo((function(){return{diff:(0,c.Y)(n.timeCreated),full:(0,c.u)(n.timeCreated)}}),[n]);if(!n.user)return null;var x=s===n.user.id?[{label:"Delete",icon:(0,i.tZ)(R.Trash,{}),isDestructive:!0}]:[];return(0,i.BX)(a.G7,{children:[(0,i.BX)(a.G7,{css:[a.l0.flex.row,a.l0.justify.spaceBetween,a.l0.pb(4)],children:[(0,i.BX)(a.G7,{css:[a.l0.flex.row,a.l0.align.center,a.l0.rowWithGap(8)],children:[(0,i.tZ)(u(),{passHref:!0,href:"/@".concat(n.user.username),children:(0,i.tZ)("a",{children:(0,i.tZ)(a.n5,{small:!0,src:n.user.image,username:n.user.username})})}),(0,i.tZ)("p",{children:(0,i.tZ)(a.u,{tooltip:w.full,placement:"top",children:(0,i.tZ)(a.xv,{variant:"small",color:"dimmer",children:w.diff})})}),x.length>0&&m?(0,i.tZ)(_.Z,{items:x,onItemClick:function(e){"Delete"!==e.label||v||h({variables:{id:n.id}})},label:"More"}):null]}),g?(0,i.tZ)(a.u,{tooltip:b,children:(0,i.tZ)(a.DR,{colorway:"negative",text:Z})}):null]}),"StatusMessageContentType"===n.content.__typename&&"resolved"===n.content.status?(0,i.tZ)(a.E_,{colorway:"positive",icon:(0,i.tZ)(l.Z,{}),text:y.resolved}):null,"StatusMessageContentType"===n.content.__typename&&"unresolved"===n.content.status?(0,i.tZ)(a.E_,{colorway:"primary",icon:(0,i.tZ)(k.Z,{}),text:y.unresolved}):null,"TextMessageContentType"===n.content.__typename&&(0,i.tZ)(T,{content:n.content.text})]})},X=(0,o.memo)(F)},64614:function(e,t,n){n.d(t,{Y:function(){return o},u:function(){return a}});var r=n(93604),i=n(35977),o=function(e){var t=new Date(e),n=new Date;return(0,i.Z)(n,t)<60?"just now":(0,r.F)(t,!0)+" ago"},a=function(e){return new Date(e).toLocaleString()}},88954:function(e,t,n){n.d(t,{I5:function(){return f},sY:function(){return u}});var r=n(14251),i=n(32692),o=n(31230),a=n(37887);function l(){var e=(0,i.Z)(["\n  fragment ReplEnvironmentWebviewRepl on Repl {\n    id\n    prodUrl: hostedUrl(dotty: true)\n    devUrl: hostedUrl(dev: true)\n    currentUserPermissions {\n      linkDomain\n    }\n    lang {\n      id\n    }\n  }\n"]);return l=function(){return e},e}function c(){var e=(0,i.Z)(["\n  query ReplEnvironmentWebview($id: String!) {\n    repl(id: $id) {\n      ... on Repl {\n        id\n        ...ReplEnvironmentWebviewRepl\n      }\n    }\n  }\n  ","\n"]);return c=function(){return e},e}var s={},u=(0,o.Ps)(l()),d=(0,o.Ps)(c(),u);function f(e){var t=(0,r.Z)({},s,e);return a.a(d,t)}},63177:function(e,t,n){n.d(t,{Z:function(){return J}});var r=n(14251),i=n(52875),o=n(35944),a=n(67294),l=n(64487),c=n(88954),s=n(63377),u=n(60357),d=n.n(u),f=n(44781),p=n(30019),h=n(19526),v=n(60977);function m(){return a.useEffect((function(){(0,v.j)(v.U3.WS_REPLCO_UNREACHABLE)}),[]),(0,o.BX)("div",{className:"jsx-88c49dc4f1cb807b unreachable",children:[(0,o.BX)(h.gC,{align:"center",spacing:4,children:[(0,o.BX)(h.gC,{align:"center",children:[(0,o.tZ)(p.Z,{level:1,children:"\ud83d\ude48"}),(0,o.tZ)(p.Z,{level:4,children:"This Repl link isn\u2019t broken!"}),(0,o.tZ)(p.Z,{level:4,foreground:2,children:"It\u2019s just blocked."})]}),(0,o.BX)(h.gC,{spacing:2,className:"why",children:[(0,o.tZ)(f.Z,{foreground:2,children:"Why this might be happening:"}),(0,o.tZ)(f.Z,{foreground:2,children:(0,o.BX)("ul",{className:"jsx-88c49dc4f1cb807b",children:[(0,o.BX)("li",{className:"jsx-88c49dc4f1cb807b",children:["repl.co URLs could be"," ",(0,o.tZ)(f.Z,{fontWeight:"medium",foreground:1,children:"blocked by a firewall,"})," ","so contact your IT administrator"]}),(0,o.BX)("li",{className:"jsx-88c49dc4f1cb807b",children:["repl.co URLs could be"," ",(0,o.tZ)(f.Z,{fontWeight:"medium",foreground:1,children:"blocked by your ISP,"})," ","so try getting in touch with them"]})]})})]}),(0,o.BX)(f.Z,{foreground:2,align:"center",children:["If you have any other questions, please check out"," ",(0,o.tZ)("a",{href:"https://docs.replit.com/teams-edu/it-administrators-toolkit",target:"_blank",rel:"noopener noreferrer",className:"jsx-88c49dc4f1cb807b",children:"our IT docs"})," ","or"," ",(0,o.tZ)("a",{href:"https://replit.com/support",target:"_blank",rel:"noopener noreferrer",className:"jsx-88c49dc4f1cb807b",children:"contact support"}),"."]})]}),(0,o.tZ)(d(),{id:"88c49dc4f1cb807b",children:".unreachable.jsx-88c49dc4f1cb807b{padding:var(--space-32)}.unreachable.jsx-88c49dc4f1cb807b ul.jsx-88c49dc4f1cb807b{list-style-position:inside}.unreachable.jsx-88c49dc4f1cb807b li.jsx-88c49dc4f1cb807b{padding-bottom:var(--space-16)}"})]})}var g=a.createContext(!1),y=n(69346),Z=n(81255),b=n(47979),w=n(9941),x=n(64080),E=n(20787),C=n(46702),S=n(16329),T=n(40381),k=n(76945),_=n(29163),R=(0,a.forwardRef)((function(e,t){return(0,o.tZ)(_.h,(0,r.Z)({ref:t,className:e.className,css:[{color:"var(--foreground-dimmest)",":hover":{color:"var(--foreground-default)"}},e.css]},e))})),D=n(31980),I=new Set(["draw.js"]);var P=function(e){var t=e.iframe,n=(0,s.Z)();return a.useEffect((function(){var e="https://".concat(n,".id.repl.co"),t=function(t){if(t.origin===e&&"DOWNLOAD"===t.data.action){var n=document.createElement("a");document.body.appendChild(n),n.setAttribute("style","display: none"),n.href=t.data.url,n.download=t.data.filename,n.click(),document.body.removeChild(n)}};return window.addEventListener("message",t),function(){window.removeEventListener("message",t)}}),[n]),(0,o.BX)(o.HY,{children:[(0,o.tZ)(R,{alt:"Save image",onClick:function(){var e,n;null===(e=t.current)||void 0===e||null===(n=e.contentWindow)||void 0===n||n.postMessage({action:"REQUEST_SCREENSHOT"},"*")},children:(0,o.tZ)(k.Z,{})}),(0,o.tZ)(R,{alt:"Toggle Record",onClick:function(){var e,n;null===(e=t.current)||void 0===e||null===(n=e.contentWindow)||void 0===n||n.postMessage({action:"REQUEST_TOGGLE_RECORD"},"*")},children:(0,o.tZ)(D.Z,{})})]})},G=n(18374),B=n(70804),A=n(40963),U=n(70917),O=n(12215),N=n(24897),L=n(37497),F=n(78597);var X={id:"DevToolsIntro",title:"Try our new devtools",content:function(){return(0,o.BX)(y.G,{css:Z.l0.m(2),children:["No need to reach for your browser\u2019s console. You can now:",(0,o.BX)(y.G,{tag:"ul",css:[Z.l0.px(16),Z.l0.py(8),{listStyle:"disc",lineHeight:1.7}],children:[(0,o.tZ)("li",{children:"Explore the DOM tree"}),(0,o.tZ)("li",{children:"View console logs"}),(0,o.tZ)("li",{children:"Run JavaScript"}),(0,o.tZ)("li",{children:"Inspect localStorage"}),(0,o.tZ)("li",{children:"and more!"})]}),"\u2026directly from our brand new devtools. Press this button to toggle it."]})}};function M(e){var t=e.targetElement,n=function(e){var t=(0,F.Pp)({variables:{tours:e}}).data;return a.useMemo((function(){var n,r,i;return null===(i=null===t||void 0===t||null===(n=t.currentUser)||void 0===n||null===(r=n.toursSeen)||void 0===r?void 0:r.find((function(t){return t.id===e})))||void 0===i?void 0:i.seen}),[t,e])}("workspace-desktop-new-user-tour"),r=(0,O.Z)("workspace","devtools-intro"),i=r.shouldDisplay,l=r.register,c=r.dismiss;return a.useEffect((function(){l()}),[l]),!0===n&&t&&i?(0,o.BX)(o.HY,{children:[(0,o.tZ)(N.w,{targetElement:t}),(0,o.tZ)(L.k,{placement:"bottom-start",targetElement:t,activeStep:X,currentStepIndex:0,done:c,goto:function(){},totalSteps:1,disableAnimation:!0})]}):null}var W=n(63805),j=(0,U.F4)("from{transform:rotate(0deg);}to{transform:rotate(359deg);}");function H(e){var t=e.refreshing,n=e.devToolsBadge,r=e.url,i=e.onToggleDevtools,l=a.useRef(null),c=i&&e.isVisible&&!(0,W.isMobile)({tablet:!1}),s=(0,w.Z)(a.useState(!1),2),u=s[0],d=s[1];return(0,o.BX)(y.G,{css:[Z.l0.rowWithGap(8),Z.l0.p(8),Z.l0.align.center],children:[(0,o.tZ)(R,{alt:t?"Refreshing...":"Refresh",onClick:e.onRefresh,css:t&&{animation:"".concat(j," infinite 0.5s")},children:(0,o.tZ)(E.Z,{})}),(0,o.tZ)(A.II,{dataCy:"ws-webview-url-bar-input",css:[Z.l0.px(4),Z.l0.py(2),Z.l0.flex.growAndShrink(1),Z.l0.fontSize(12)],value:r,type:"text",onFocus:function(t){e.trackUrlSelect(),t.currentTarget.select()},readOnly:!0}),(0,o.BX)(y.G,{css:[Z.l0.rowWithGap(4)],children:[e.canEditDomain?(0,o.BX)(B.Z,{showArrow:!0,maxWidth:320,isOpen:u,onClickOutside:function(){return d(!1)},growToMaxWidth:!0,children:[(0,o.tZ)(R,{alt:"Custom domain",onClick:function(){return d(!u)},children:(0,o.tZ)(x.Z,{})}),(0,o.tZ)(S.Z,{onLink:function(){return d(!1)},onUnlink:function(){return d(!1)},replId:e.replId})]}):null,i?(0,o.tZ)(R,{alt:"Toggle developer tools",ref:l,onClick:i,css:{position:"relative"},suffix:!!n&&(0,o.tZ)("span",{css:{position:"absolute",color:Z.TV.accentNegativeStrongest,borderRadius:Z.TV.borderRadiusRound,padding:"".concat(Z.TV.space2," ").concat(Z.TV.space4),backgroundColor:Z.TV.accentNegativeDimmer,top:-5,right:-3,fontSize:9},children:n}),children:(0,o.tZ)(G.Z,{})}):null,(0,o.tZ)("a",{href:r,css:{color:"inherit"},target:"_blank",children:(0,o.tZ)(R,{alt:"Open in a new tab",children:(0,o.tZ)(C.Z,{})})}),e.isKaboomDraw&&e.iframe?(0,o.tZ)(P,{iframe:e.iframe}):null]}),c?(0,o.tZ)(M,{targetElement:l.current}):null]})}var z=n(12946),V=n(36126),q=n(34385),K=n(83241),$=n(59641);function Y(){return(0,o.BX)($.G7,{css:[$.l0.align.center,$.l0.p(64)],children:[(0,o.BX)($.G7,{css:[$.l0.align.center],children:[(0,o.tZ)(p.Z,{level:1,children:"\ud83d\ude48"}),(0,o.tZ)($.xv,{css:[$.l0.textAlign.center,$.l0.pb(8)],multiline:!0,variant:"headerDefault",children:"We've detected a crash loop"}),(0,o.tZ)($.xv,{css:[$.l0.textAlign.center],multiline:!0,variant:"subheadDefault",color:"dimmer",children:"Preview is disabled until you click the run button again."})]}),(0,o.tZ)($.G7,{css:[$.l0.p(16)],children:(0,o.tZ)($.xv,{multiline:!0,css:[$.l0.color.foregroundDimmer,$.l0.textAlign.center,$.l0.pb(16)],children:"There may be errors in the code that are causing your application to repeatedly crash."})})]})}var Q=function(e,t){var n=e.fs,u=e.session,d=e.trackUrlSelect,f=e.isVisible,p=e.className,h=(0,s.Z)(),w=(0,c.I5)({variables:{id:h}}).data,x="Repl"===(null===w||void 0===w?void 0:w.repl.__typename)?w.repl:null,E=(0,a.useContext)(g),C=(0,z.S)().isCircuitBroken,S=(0,a.useRef)(null),k=(0,a.useState)(!1),_=k[0],R=k[1],D=(0,a.useState)(0),P=D[0],G=D[1],B=(0,b.f6)();!function(e,t){var n=(0,b.f6)(),r=(0,T.Z)(),i=a.useCallback((function(e,n){var r,i;null===(r=t.current)||void 0===r||null===(i=r.contentWindow)||void 0===i||i.postMessage({action:"FILE_UPDATE",file:e,content:n},"*")}),[t]);a.useEffect((function(){if(t.current&&n){var r=!0,o=!1,a=void 0;try{for(var l,c=function(){var n=l.value;t.current.onload=function(){e.readFile(n).then((function(e){e.error||i(n,e.content.toString())}))}},s=I[Symbol.iterator]();!(r=(l=s.next()).done);r=!0)c()}catch(u){o=!0,a=u}finally{try{r||null==s.return||s.return()}finally{if(o)throw a}}}}),[e,i,t,n]),a.useEffect((function(){if(n&&r&&I.has(r))return e.watchTextFile(r,{onReady:function(e){var t=e.initialContent;return i(r,t)},onChange:function(e){var t=e.latestContent;return i(r,t)}})}),[e,r,i,n])}(n,S);var A="html"===(null===x||void 0===x?void 0:x.lang.id)||"html_beta"===(null===x||void 0===x?void 0:x.lang.id),U=null;U=x?E?(0,o.tZ)(m,{}):C?(0,o.tZ)(Y,{}):(0,o.tZ)("iframe",(0,r.Z)({title:"webview","data-cy":"ws-webview",ref:S,src:x.devUrl,css:[Z.l0.flex.growAndShrink(1),{border:"none",display:"block",backgroundColor:Z.TV.white}]},K.Z)):null,(0,a.useEffect)((function(){var e=function(e){var t;if((new URL(e.origin).hostname.endsWith(".id.repl.co")||new URL(e.origin).hostname.endsWith(".id.firewalledreplit.co"))&&"object"===typeof e.data&&(null===(t=e.data)||void 0===t?void 0:t.type))switch(e.data.type){case"event":var n=e.data,o=n.event,a=n.payload;return void("error"===o?l.Tb(a):(0,v.j)(o,(0,i.Z)((0,r.Z)({},a),{replId:h,isHTML:A})));case"show-badge":return void G(e.data.count);case"ready":var c,s;if(e.data.wasShown)null===(c=S.current)||void 0===c||null===(s=c.contentWindow)||void 0===s||s.postMessage({type:"toggleDevtools",source:"automatic"},"*");return}};if(S.current)return window.addEventListener("message",e),function(){window.removeEventListener("message",e)}}),[h,A,S.current,u]);var O=function(){G(0),R(!0),n.flush().then((function(){S.current&&(S.current.src+="")})).finally((function(){R(!1)}))};(0,a.useImperativeHandle)(t,(function(){return{refresh:O}}));var N=(0,q.Z)(V.y.Output);return x?(0,o.BX)(y.G,{className:p,css:[Z.l0.backgroundColor.backgroundDefault,Z.l0.height("100%"),Z.l0.borderRadius(4),{overflow:"hidden"}],innerRef:A?N:function(){},children:[(0,o.tZ)(H,{canEditDomain:x.currentUserPermissions.linkDomain,url:x.prodUrl,trackUrlSelect:function(){d&&d(x.devUrl)},replId:h,refreshing:_,onRefresh:O,isKaboomDraw:B,iframe:S,isVisible:f,devToolsBadge:P,onToggleDevtools:function(){var e,t;G(0),null===(e=S.current)||void 0===e||null===(t=e.contentWindow)||void 0===t||t.postMessage({type:"toggleDevtools",source:"manual"},"*")}}),U]}):null},J=(0,a.forwardRef)(Q)},12946:function(e,t,n){n.d(t,{S:function(){return d},e:function(){return u}});var r=n(9941),i=n(48920),o=n(99408),a=n(21603),l=n(67294),c=n(7182),s=(0,c.cn)(!1),u=function(){return(0,c.KO)(s)};function d(){var e=(0,o.Z)().runner,t=(0,r.Z)(u(),2),n=t[0],c=t[1];return l.useEffect((function(){if("shellrunner"===e.mode){var t,n=[],r=Date.now(),o=Array(6),l=0;return n.push(e.onLocalRun((function(){r=Date.now(),c(!1)}))),n.push(e.onStateChanged((function(e){if(t===i.A.RUNNING&&e===i.A.IDLE){var n=Date.now();o[l%6]=n;var s=o.at((l-5)%6);void 0!==s&&n-s<6e4&&null!=r&&r<s&&(c(!0),a.kg.info("webview circuit broken",{lastRunnerStops:JSON.stringify(o),runnerStopCount:l,lastLocalRunTimestamp:r})),l++,t=e}else t=e}))),function(){c(!1),n.forEach((function(e){return e()}))}}}),[e,c]),{isCircuitBroken:n}}},2581:function(e,t,n){n.d(t,{VD:function(){return s},d8:function(){return a},uN:function(){return c}});var r=n(9941),i=n(7182),o=n(67294),a=Symbol("CodeEditorView"),l=(0,i.cn)(null);function c(){return(0,i.KO)(l,a)[0]}function s(e){var t=(0,r.Z)((0,i.KO)(l,a),2),n=t[0],c=t[1];(0,o.useEffect)((function(){n!==e&&c(e)}),[e,n,c])}},89390:function(e,t,n){n.d(t,{P:function(){return d},Z:function(){return p}});var r=n(34727),i=n(70655),o=n(11163),a=n.n(o),l=n(67294),c=n(37452),s=n(25602),u=n(63377);var d=function(){var e=(0,r.Z)((function(e,t,n,r){var o,a;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return[4,(0,c.W)({fs:e,dotReplit:n,replId:r})];case 1:return o=i.sent(),(a=o.entrypoint)&&t.openFile(a),[2]}}))}));return function(t,n,r,i){return e.apply(this,arguments)}}(),f=function(){var e=(0,r.Z)((function(e,t){var n,r,o,a;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return(0,s.u9)()?[4,(0,s.mv)(e)]:[2];case 1:return n=i.sent(),r=n.path,o=n.line,a=n.col,r?(r!==t.getActiveFile()&&t.openFile(r),t.updateDeeplink({path:r,line:o,col:a}),[2]):[2]}}))}));return function(t,n){return e.apply(this,arguments)}}();function p(e,t,n){var o=(0,u.Z)(),c=(0,l.useRef)(!1);(0,l.useEffect)((function(){return t.onDeeplinkUpdated((function(e){var t=function(e){var t=e.path,n=e.line,r=e.col,i="#".concat(t);return n?r?"".concat(i,":").concat(n,":").concat(r):"".concat(i,":").concat(n):i}(e);window.location.hash=t}))}),[t]),(0,l.useEffect)((function(){(0,r.Z)((function(){return(0,i.__generator)(this,(function(r){switch(r.label){case 0:return t.getActiveFile()?[2]:[4,f(e,t)];case 1:return r.sent(),t.getActiveFile()||d(e,t,n,o),[2]}}))}))()}),[e,t,n,o]),(0,l.useEffect)((function(){var n=function(){var n=(0,r.Z)((function(){return(0,i.__generator)(this,(function(n){switch(n.label){case 0:return c.current?(c.current=!1,[2]):[4,f(e,t)];case 1:return n.sent(),[2]}}))}));return function(){return n.apply(this,arguments)}}();return window.addEventListener("hashchange",n),function(){window.removeEventListener("hashchange",n)}}),[e,t]),(0,l.useEffect)((function(){return t.onSessionStateChanged((0,r.Z)((function(){var n,r,o;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return(n=t.getActiveFile())?(0,s.u9)()?[4,(0,s.mv)(e)]:[3,2]:[2];case 1:if(r=i.sent(),r.path===n)return[2];i.label=2;case 2:return c.current=!0,window.location.hash.length>0?t.updateDeeplink({path:n}):(o=a().asPath.includes("#")?a().asPath.slice(0,a().asPath.indexOf("#")):a().asPath,a().replace({pathname:a().pathname,query:a().query},"".concat(o,"#").concat(n),{shallow:!0})),[2]}}))})))}),[e,t])}},73092:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(67294),i=n(15335),o=n(99408),a=n(89224),l=n(11887);function c(){var e=(0,o.Z)().fs,t=(0,r.useState)(!1),n=t[0],c=t[1],s=(0,i.Z)(),u=(0,r.useState)(!1),d=u[0],f=u[1];return(0,r.useEffect)((function(){s===l.em.CONNECTED&&f(!0)}),[s]),(0,r.useEffect)((function(){return c(e.getStatus()===a.kO.Syncing),e.onStatusChange((function(e){c(e===a.kO.Syncing)}))}),[e]),d?{isSaving:n,isOffline:s!==l.em.CONNECTED}:{isSaving:!1,isOffline:!1}}},67536:function(e,t,n){n.d(t,{F:function(){return u}});var r=n(14251),i=n(63377),o=n(99408),a=n(94227),l=n(69453),c=n(58967),s=n(67294),u=function(){var e=(0,i.Z)(),t=(0,o.Z)().session,n=(0,c.Z)("fileTree").trackTimeToLoadFileStart,u=(0,a.C)();return s.useCallback((function(i,o){var a=o.newTab,c=o.newPane,s=o.opener;n(i);var d={action:"select",source:"filetree"};a?d={action:"newTab",source:"filetree"}:c&&(d={action:"newPane",source:"filetree"}),(0,l.Z)((0,r.Z)({replId:e},d)),c?u({path:i,newPane:!0,opener:s}):t.openFile(i,{newTab:a,opener:s})}),[u,e,t,n])}},40005:function(e,t,n){n.d(t,{u:function(){return p}});var r=n(34727),i=n(9941),o=n(70655),a=n(67294),l=n(6625),c=n(99408),s=n(65977),u=n(92551),d=n(38863),f=n(89224),p=function(){var e=(0,c.Z)().fs,t=(0,s.O)(),n=(0,l.Z)(),p=(0,i.Z)(a.useState(null),2),h=p[0],v=p[1];return a.useEffect((function(){var i=function(){var i=(0,r.Z)((function(){var r,i,a,l;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return t?[4,e.listFiles()]:[2];case 1:return r=o.sent(),n.current?r.error||!r.files?(v([]),[2]):[4,e.readFile(d.l)]:[2];case 2:return i=o.sent(),a=r.files,l=u.uP.concat(u.nh),v(a.filter((function(e){return(i.error===f.Df.NotFound||!t.some((function(t){return function(e){var t=e.split("/");if(1===t.length)return t;for(var n=[],r=0;r<t.length;r++)n.push(t.slice(0,r+1).join("/"));return n}(e).some((function(e){return t.test(e)}))})))&&!l.includes(e)}))),[2]}}))}));return function(){return i.apply(this,arguments)}}();i()}),[t,e,n]),h}},57353:function(e,t,n){n.d(t,{T:function(){return y}});var r=n(67294),i=n(65977),o=n(63377),a=n(14251),l=n(32692),c=n(31230),s=n(37887);function u(){var e=(0,l.Z)(["\n  query ShouldHideFileInWorkspace($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        isProjectFork\n        isModelSolution\n        isModelSolutionFork\n      }\n    }\n  }\n"]);return u=function(){return e},e}var d={},f=(0,c.Ps)(u());function p(e){var t=(0,a.Z)({},d,e);return s.a(f,t)}var h=n(25741),v=n(8288),m=n(76216),g=n(84810),y=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=(0,o.Z)(),n=(0,m.Z)(),a=p({variables:{replId:t}}),l=a.data,c=a.loading,s="Repl"===(null===l||void 0===l?void 0:l.repl.__typename)&&(l.repl.isProjectFork||l.repl.isModelSolution||l.repl.isModelSolutionFork),u=(0,i.O)(),d=(0,h.Z)();return r.useCallback((function(t){return!!((s||c)&&(0,v.TI)(t)||(0,v.MF)(t))||!d&&(e&&(0,v.uC)(t)||(0,g.C)(t)||(0,v.yb)(t,n)||(0,v.lv)(t,u))}),[s,c,n,d,u,e])}},78332:function(e,t,n){n.d(t,{y:function(){return c}});var r=n(67294),i=n(15519),o=n(76216),a=n(20841),l=n(73604),c=function(){var e=(0,o.Z)(),t=(0,a.T)()||i.Z.getMainFileName(e);return r.useCallback((function(e,n){return(0,l.x$)(e,n,t)}),[t])}},5275:function(e,t,n){n.d(t,{Z:function(){return p}});var r=n(21603),i=n(40381),o=n(63377),a=n(67294),l=n(73604),c=n(99408),s=n(10275),u=n(793);function d(e){var t=Boolean(window.performance.getEntriesByName(u.Iy.pageNavStart,"mark").length),n="time to code";window.performance.measure(n,t?u.Iy.pageNavStart:void 0);var i=window.performance.getEntriesByName(n,"measure")[0];if(i){var o="page invisible fetch connection metadata",a=i.duration;if(Boolean(window.performance.getEntriesByName(u.Iy.fetchConnectionMetadataPageInvisibleStart,"mark").length))window.performance.measure(o,u.Iy.fetchConnectionMetadataPageInvisibleStart,u.Iy.fetchConnectionMetadataPageInvisibleEnd),a-=window.performance.getEntriesByName(o,"measure")[0].duration,window.performance.clearMeasures(o),window.performance.clearMarks(u.Iy.fetchConnectionMetadataPageInvisibleStart),window.performance.clearMarks(u.Iy.fetchConnectionMetadataPageInvisibleEnd);r.kg.time("time to code minus page invisible",a,{ssr:!t,workspaceType:e}),r.kg.time("time to code with page invisible",i.duration,{ssr:!t,workspaceType:e}),window.performance.clearMeasures(n),s.v.addTiming("time_to_code_minus_page_invisible",a),s.v.addTiming("time_to_code_with_page_invisible",i.duration)}else r.kg.info("Could not obtain measure for time to code",{workspaceType:e})}var f=new Set;function p(e){var t=e.workspaceType,n=(0,o.Z)(),r=(0,i.Z)(),s=(0,c.Z)().fs;(0,a.useEffect)((function(){var e;if(r&&!f.has(n))return f.add(n),e=(0,l.Mb)(r)?s.watchTextFile(r,{onReady:function(){d(t),e()}}):s.watchFile(r,{onChange:function(){d(t),e()}})}),[r,n,t,s])}},58967:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(73604),i=n(21603),o=n(77402),a=new Map,l=function(e){var t=a.get(e);if(void 0!==t){var n=t.start,r=t.source,l=window.performance.now(),c=(0,o.V)(e);i.kg.time("time to load file",l-n,{from:r,fileViewerType:c}),a.delete(e)}};function c(e){return{trackTimeToLoadFileStart:function(t){return function(e,t){if((0,r.Mb)(e)){var n=window.performance.now();a.set(e,{start:n,source:t})}}(t,e)},trackTimeToLoadFileEnd:l}}},53426:function(e,t,n){n.d(t,{p:function(){return m}});var r=n(14251),i=n(52875),o=n(67536),a=n(57353),l=n(21131),c=n(78332),s=n(40381),u=n(99408),d=n(93058),f=n(67294),p=n(69453),h=n(63377),v=n(43186),m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onFileDoubleClick,n=e.onFileDragEnd,m=(0,s.Z)(),g=(0,o.F)(),y=(0,a.T)(!0),Z=(0,c.y)(),b=(0,u.Z)().fs,w=(0,d.Z)().showError,x=(0,h.Z)(),E=(0,f.useCallback)((function(e){(0,p.Z)((0,i.Z)((0,r.Z)({},e),{replId:x}))}),[x]),C=(0,v.Z)().preferences,S="cmdOrCtrlKey"===(null===C||void 0===C?void 0:C.multiselectModifierKey)?"cmdOrCtrlKey":"altKey",T=(0,l.Z)((function(){return{flags:{flagFiletreeMultiselect:!0},preferences:{multiselectModifierKey:S},activeFile:m,watchDir:b.watchDir,openFile:g,shouldHideFile:y,sortNode:Z,readFile:b.readFile,deleteFile:b.deleteFile,deleteDir:b.deleteDir,moveFile:b.moveFile,moveDir:b.moveDir,onError:w,onAction:E,onFileDragEnd:n,onFileDoubleClick:t}}),[S,m,b.watchDir,b.readFile,b.deleteFile,b.deleteDir,b.moveFile,b.moveDir,g,y,Z,w,E,n,t]);return T}},16491:function(e,t,n){n.d(t,{Ge:function(){return h},Il:function(){return C},N2:function(){return p},XU:function(){return k},r3:function(){return b},wK:function(){return S},xF:function(){return y}});var r=n(9941),i=n(69779),o=n(67294),a=n(81032),l=n(88750),c=n(18172),s=(0,a.cn)(new Map),u=(0,a.cn)(new Map),d=(0,a.cn)(new Map),f=(0,a.cn)(null);function p(e){var t=(0,a.MT)(),n=new Map,r=!0,i=!1,o=void 0;try{for(var l,c=e.commands[Symbol.iterator]();!(r=(l=c.next()).done);r=!0){var u=l.value;n.set(u.id,u)}}catch(d){i=!0,o=d}finally{try{r||null==c.return||c.return()}finally{if(i)throw o}}return t.set(s,n),t}var h=(0,o.createContext)(null);function v(){var e=(0,o.useContext)(h);if(!e)throw new Error("Expected store in context");return e}function m(e){return(0,l.Dv)(e,{store:v()})}var g=function(e){return(0,l.b9)(e,{store:v()})};function y(){var e=m(s);return(0,i.Z)(e.values())}var Z=(0,a.cn)(null,(function(e,t,n,r){if(r){var i=!0,o=!1,a=void 0;try{for(var l,u=e(s).values()[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var d=l.value;if(d.shortcut&&(f=r,p=d.shortcut,S(f)===S(p)))return{conflict:d}}}catch(h){o=!0,a=h}finally{try{i||null==u.return||u.return()}finally{if(o)throw a}}}var f,p;t(s,(function(e){return(0,c.ZP)(e,(function(e){var t=e.get(n);t&&(t.shortcut=r)}))}))}));function b(){return g(Z)}var w=(0,a.cn)(null,(function(e,t,n){t(u,(function(e){return(0,c.ZP)(e,(function(e){e.delete(n)}))}))}));var x=(0,a.cn)(null,(function(e,t,n){t(d,(function(e){return(0,c.ZP)(e,(function(e){var t=e.get(n.scope);t&&(t.delete(n.commandId),t.size||e.delete(n.scope))}))}))}));var E=(0,a.cn)(null,(function(e,t,n,r){var i=r.run,o=r.bubble,a=r.scope;a?t(d,(function(e){return(0,c.ZP)(e,(function(e){var t=e.get(a);t?t.set(n,{run:i,bubble:o}):e.set(a,new Map([[n,{run:i,bubble:o}]]))}))})):t(u,(function(e){return(0,c.ZP)(e,(function(e){e.set(n,{run:i,bubble:o})}))}))}));function C(e,t){var n=g(E),a=g(w),l=g(x);(0,o.useEffect)((function(){var t=e();if(t){var i=(0,r.Z)(t,2),o=i[0],c=i[1],s="function"===typeof c?{run:c}:c,u=s.scope;return n(o,s),function(){u?l({scope:u,commandId:o}):a(o)}}}),[n,a].concat((0,i.Z)(t)))}function S(e){return"".concat(e.cmdOrCtrlKey?"mod:":"").concat(e.shiftKey?"shift:":"").concat(e.altKey?"alt:":"").concat(e.key.toLowerCase())}var T=(0,a.cn)((function(e){var t=e(f),n=e(u),i=t?e(d).get(t):null,o=new Map,a=new Map,l=e(s);if(i&&t){var c=!0,p=!1,h=void 0;try{for(var v,m=i[Symbol.iterator]();!(c=(v=m.next()).done);c=!0){var g=(0,r.Z)(v.value,2),y=g[0],Z=g[1],b=l.get(y);if(null===b||void 0===b?void 0:b.shortcut){var w=S(b.shortcut);a.set(w,Z)}}}catch(G){p=!0,h=G}finally{try{c||null==m.return||m.return()}finally{if(p)throw h}}}var x=!0,E=!1,C=void 0;try{for(var T,k=n[Symbol.iterator]();!(x=(T=k.next()).done);x=!0){var _=(0,r.Z)(T.value,2),R=_[0],D=_[1],I=l.get(R);if(null===I||void 0===I?void 0:I.shortcut){var P=S(I.shortcut);o.set(P,D)}}}catch(G){E=!0,C=G}finally{try{x||null==k.return||k.return()}finally{if(E)throw C}}return{globalShortcuts:o,scopedShortcuts:a}}));function k(){return m(T)}},9117:function(e,t,n){n.d(t,{h:function(){return s},x:function(){return c}});var r=n(69779),i=n(67294),o=n(10129),a=n(7182),l=(0,a.cn)([]);function c(e,t){var n=t.run,o=t.enabled,c=void 0===o||o,s=(0,a.b9)(l);(0,i.useEffect)((function(){if(c){var t=(Array.isArray(e)?e:[e]).map((function(e){return{shortcut:e,run:n}}));return s((function(e){return(0,r.Z)(e).concat((0,r.Z)(t))})),function(){s((function(e){return e.filter((function(e){return!t.includes(e)}))}))}}}),[e,n,s,c])}function s(){var e=(0,a.Dv)(l);return(0,i.useEffect)((function(){var t=function(t){var n=!0,r=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var c,s=a.value,u=s.shortcut,d=s.run;Boolean(u.cmdOrCtrlKey)===Boolean((0,o.jh)(t))&&Boolean(u.altKey)===Boolean(t.altKey)&&Boolean(u.shiftKey)===Boolean(t.shiftKey)&&(null===(c=u.key)||void 0===c?void 0:c.toLowerCase())===t.key.toLowerCase()&&(t.preventDefault(),d(u))}}catch(f){r=!0,i=f}finally{try{n||null==l.return||l.return()}finally{if(r)throw i}}};return document.addEventListener("keydown",t),function(){document.removeEventListener("keydown",t)}}),[e]),null}},84519:function(e,t,n){function r(e){return new Promise((function(t,n){var r=e.openChannel({service:"gcsfiles"},(function(e){if(!e.error)return e.channel.request({persistMirror:{path:"."}}).then((function(e){e.ok,r(),t()})),function(e){e.willReconnect&&r()};n(e.error)}))}))}n.d(t,{r:function(){return r}})},46806:function(e,t,n){n.d(t,{C:function(){return f}});var r=n(34727),i=n(9941),o=n(69779),a=n(70655),l=n(64487),c=n(84810),s=100,u="signal: broken pipe",d=["exit status 1",u];function f(e){return p.apply(this,arguments)}function p(){return(p=(0,r.Z)((function(e){var t,n,r,f,p,h,v,m,g,y,Z,b,w,x,E,C,S,T,k,_,R,D,I,P,G;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return t=e.query,n=e.container,[4,(r=n).exec.apply(r,["ag"].concat((0,o.Z)(c.h.map((function(e){return"--ignore-dir=".concat(e)}))),["--noaffinity","--context=0","--workers=1","--literal","--ackmate","--pager","head -".concat(300),"--",t]))];case 1:if(f=a.sent(),p=f.output,h=f.error,h&&!d.includes(h))return l.Tb(new Error("Search command failed with error: ".concat(h))),[2,{error:h,results:null,isPartialResult:!1}];if(!p)return[2,{error:null,results:{},isPartialResult:!1}];v=p.split("\n"),m={},g="",y=0,Z=h===u,b=!0,w=!1,x=void 0;try{for(E=v[Symbol.iterator]();!(b=(C=E.next()).done);b=!0)if(S=C.value)if(S.startsWith(":"))g=S.slice(1),m[g]=[];else{if(y>=s){Z=!0;break}T=S.indexOf(";"),k=parseInt(S.slice(0,T),10),_=S.slice(T+1),R=_.indexOf(":"),D=_.slice(0,R).split(","),I=D.map((function(e){var t=(0,i.Z)(e.split(" "),2),n=t[0],r=t[1];return{column:parseInt(n,10),length:parseInt(r,10)}})),P=_.slice(R+1),G=P.length>151?P.substring(0,149)+"\u2026":P,y++,m[g].push({content:G,lineNumber:k,matches:I})}}catch(B){w=!0,x=B}finally{try{b||null==E.return||E.return()}finally{if(w)throw x}}return[2,{error:null,results:m,isPartialResult:Z}]}}))}))).apply(this,arguments)}},9583:function(e,t,n){n.d(t,{YI:function(){return A},kW:function(){return B}});var r,i=n(14251),o=n(52875),a=n(35944),l=n(60357),c=n.n(l),s=(n(67294),n(44781));!function(e){e.TEXT="TEXT",e.MENTION="MENTION",e.LINK="LINK",e.REPL_LINK="REPL_LINK",e.DEEP_LINK="DEEP_LINK",e.CODE="CODE",e.BOLD="BOLD",e.ITALICS="ITALICS",e.STRIKETHROUGH="STRIKETHROUGH",e.QUOTE="QUOTE"}(r||(r={}));var u=function(e){var t=e.fragment,n=e.onClick;return(0,a.tZ)(s.Z,{size:"small",onClick:n,children:t.content})},d=function(e){var t=e.fragment,n=e.onClick;return(0,a.tZ)(s.Z,{size:"small",fontWeight:"medium",onClick:n,children:t.content})},f=function(e){var t=e.fragment,n=e.onClick;return(0,a.tZ)("a",{href:t.url,onClick:n,rel:"noreferrer noopener nofollow",target:"_blank",children:t.content})},p=function(e){var t=e.fragment,n=e.onClick;return(0,a.tZ)("a",{href:t.url,onClick:n,target:"_blank",children:t.content})},h=function(e){var t=e.fragment,n=e.onClick;return(0,a.tZ)("a",{href:t.url,onClick:n,children:t.content})},v=function(e){var t=e.fragment,n=e.onClick,r=e.style;return(0,a.tZ)("code",{onClick:n,style:r,children:t.content})},m=function(e){var t=e.fragment,n=e.onClick;return(0,a.tZ)("b",{onClick:n,children:t.content})},g=function(e){var t=e.fragment,n=e.onClick;return(0,a.tZ)("i",{onClick:n,children:t.content})},y=function(e){var t=e.fragment,n=e.onClick;return(0,a.BX)("span",{onClick:n,className:"jsx-e2f6e2707e7599fa",children:[t.content,(0,a.tZ)(c(),{id:"e2f6e2707e7599fa",children:"span.jsx-e2f6e2707e7599fa{text-decoration:line-through}"})]})},Z=function(e){var t=e.fragment,n=e.onClick;return(0,a.BX)("blockquote",{onClick:n,className:"jsx-8741a91fadaf26be",children:[t.content,(0,a.tZ)(c(),{id:"8741a91fadaf26be",children:"blockquote.jsx-8741a91fadaf26be{border-left:2px solid var(--foreground-dimmest);padding-left:6px;color:var(--foreground-dimmest)}"})]})},b=/(@[0-9a-zA-Z_]+)/,w=/(#[-a-zA-Z0-9@:%._+~#=/]+)/,x=/(https?:\/\/[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{2,6}\b(?:[-a-zA-Z0-9()@:%_+.~#?&//=]*))/,E=/(`.+?`)/,C=/(\*\*.+?\*\*)/,S=/(_.+?_)/,T=/(\*.+?\*)/,k=/(~~.+?~~)/,_=/(^>.+?$\n?)/m,R=/\/@([0-9a-zA-Z_]+)\/(.+)/;function D(e){var t=e.url;return{type:r.LINK,url:t,content:t}}function I(e){var t=e.hash;return{type:r.DEEP_LINK,url:t,content:t}}function P(e,t){if(x.test(e)){var n={};try{n=new window.URL(e)}catch(o){return{content:e,type:r.TEXT}}return["repl.it","replit.com","firewalledreplit.com",document.location.host].includes(n.host)?n.pathname===t.replUrl?I({hash:n.hash}):R.test(n.pathname)?function(e){var t=e.url,n=R.exec(t.pathname);if(!n)throw new Error("Not a Repl URL");return{type:r.REPL_LINK,url:t.href,content:"@".concat(n[1],"/").concat(n[2]).concat(t.hash)}}({url:n}):D({url:e}):D({url:e})}if(w.test(e))return I({hash:e});if(_.test(e))return function(e){var t=e.text;return{type:r.QUOTE,content:t}}({text:e.slice(1).trim()});if(E.test(e))return function(e){var t=e.code;return{type:r.CODE,content:t}}({code:e.slice(1,-1)});if(C.test(e))return function(e){var t=e.text;return{type:r.BOLD,content:t}}({text:e.slice(2,-2)});if(S.test(e)||T.test(e))return function(e){var t=e.text;return{type:r.ITALICS,content:t}}({text:e.slice(1,-1)});if(k.test(e))return function(e){var t=e.text;return{type:r.STRIKETHROUGH,content:t}}({text:e.slice(2,-2)});if(b.test(e)){var i=e.slice(1);if(!t.users||t.users.includes(i))return function(e){var t=e.username;return{type:r.MENTION,username:t,content:"@".concat(t)}}({username:i})}return{content:e,type:r.TEXT}}var G=new RegExp([E.source,C.source,S.source,T.source,k.source,x.source,b.source,w.source,_.source].join("|"),"m");function B(e,t){var n=e.split(G),i=[],o=[],a=!0,l=!1,c=void 0;try{for(var s,u=n[Symbol.iterator]();!(a=(s=u.next()).done);a=!0){var d=s.value;if(d){var f=P(d,t);if(f){if(f.type===r.MENTION){if(!f.username)continue;i.push(f.username)}o.push(f)}}}}catch(p){l=!0,c=p}finally{try{a||null==u.return||u.return()}finally{if(l)throw c}}return{tokens:o,mentions:i}}function A(e){var t=e.message,n=e.onMentionClick,l=void 0===n?function(){}:n,c=e.codeStyles,s=void 0===c?{}:c;return(0,a.tZ)(a.HY,{children:t.tokens.map((function(e,t){var n={fragment:e,key:t};return e.type===r.MENTION?(0,a.tZ)(d,(0,o.Z)((0,i.Z)({},n),{onClick:function(){return l(e)}})):e.type===r.LINK?(0,a.tZ)(f,(0,i.Z)({},n)):e.type===r.REPL_LINK?(0,a.tZ)(p,(0,i.Z)({},n)):e.type===r.DEEP_LINK?(0,a.tZ)(h,(0,i.Z)({},n)):e.type===r.CODE?(0,a.tZ)(v,(0,o.Z)((0,i.Z)({},n),{style:s})):e.type===r.BOLD?(0,a.tZ)(m,(0,i.Z)({},n)):e.type===r.ITALICS?(0,a.tZ)(g,(0,i.Z)({},n)):e.type===r.STRIKETHROUGH?(0,a.tZ)(y,(0,i.Z)({},n)):e.type===r.QUOTE?(0,a.tZ)(Z,(0,i.Z)({},n)):(0,a.tZ)(u,(0,i.Z)({},n))}))})}},71443:function(e,t,n){n.d(t,{U:function(){return r},v:function(){return i}});var r={"self-hosted-large":{},"self-hosted-large-tuned-v3":{},"self-hosted-santa-1b":{infill:!0}},i=new Set(Object.keys(r))}}]);
//# sourceMappingURL=9499-b10de2acab2baafe.js.map