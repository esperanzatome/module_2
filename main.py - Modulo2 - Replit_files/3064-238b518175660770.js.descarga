(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3064,3699],{33473:function(e,n,t){"use strict";var r=t(35944),i=t(69346),o=t(81255),l=t(61756),a=t(81456);n.Z=function(e){return(0,r.BX)(i.G,{css:[o.l0.rowWithGap(2),o.l0.flex.growAndShrink(1)],children:[(0,r.tZ)(l.zx,{colorway:e.colorway,iconLeft:e.icon,stretch:!0,onClick:e.onClick,text:e.text,css:[o.l0.flex.growAndShrink(1),o.l0.borderRadius(8,0,0,8)]}),(0,r.tZ)(l.zx,{colorway:e.colorway,onClick:e.onCountClick,text:(0,a.d)(e.count),css:[o.l0.borderRadius(1,8,8,1)]})]})}},74591:function(e,n,t){"use strict";var r=t(35944),i=(t(67294),t(69346)),o=t(1144),l=t(81255),a=t(59641),c=t(57704);n.Z=function(e){return(0,r.BX)(i.G,{css:[l.l0.colWithGap(24)],children:[(0,r.BX)(o.h,{variant:"headerDefault",level:2,children:["Delete ",e.name||e.entityType,"?"]}),(0,r.BX)(o.x,{multiline:!0,children:["Are you sure you want to delete"," ",e.description?e.description:"this ".concat(e.entityType),"? This cannot be undone."]}),(0,r.BX)(i.G,{css:[l.l0.rowWithGap(12),l.l0.justify.end],children:[(0,r.tZ)(a.zx,{text:"Cancel",onClick:e.hideModal}),(0,r.tZ)(a.zx,{dataCy:"delete-modal-confirm-button",iconLeft:(0,r.tZ)(c.Z,{}),onClick:function(){e.delete(),e.hideModal()},text:"Yes, delete ".concat(e.confirmDescription?e.confirmDescription:"this ".concat(e.entityType)),colorway:"negative"})]})]})}},60368:function(e,n,t){"use strict";var r=t(35944),i=t(60357),o=t.n(i);t(67294);n.Z=function(e){var n=e.maxLength,t=void 0===n?140:n,i=e.value,l=void 0===i?"":i,a=e.hideLabel,c=void 0!==a&&a;return(0,r.BX)("div",{className:"jsx-59d2089b8a0ab881",children:[l.length," / ",t," ",c?"":"characters",(0,r.tZ)(o(),{id:"59d2089b8a0ab881",children:"div.jsx-59d2089b8a0ab881{color:var(--foreground-dimmer);font-size:.75em;text-align:right;margin-top:var(--space-8)}"})]})}},80658:function(e,n,t){"use strict";t.d(n,{Z:function(){return P}});var r=t(14251),i=t(52875),o=t(9941),l=t(35944),a=t(67294),c=t(64487),u=t(30992),s=t(59641),d=t(98967),m=t(83074),p=t(58086),h=t(37424),f=t(60368),v=t(14455),Z=t(9836),g=t(30168),b=t(94412),C=t(32692),y=t(31230),w=t(97212),R=t(37887);function x(){var e=(0,C.Z)(["\n  query ForkModal {\n    currentUser {\n      id\n      url\n      image\n      username\n      ...ReplOwnerCurrentUser\n      teams {\n        id\n        ...ReplOwnerTeam\n      }\n    }\n  }\n  ","\n  ","\n"]);return x=function(){return e},e}var G={},k=(0,y.Ps)(x(),w.s,w.a);var S=t(99383),B=function(e){var n=e.onFork,t=e.hideModal,r=e.initialTitle,i=e.initialDescription,c=void 0===i?"":i,d=e.initialPrivacy,C=e.teamContext,y=e.currentUser,w=e.template,R=a.useRef(null),x=(0,h.H)(),G=(0,o.Z)((0,Z.Y)(y,C),2),k=G[0],B=G[1],P=(0,o.Z)((0,S.c)(k,y,d||!1),3),T=P[0],U=P[1],E=P[2],I=(0,u.Y)(r,(function(e){if(e)return e.length>60?{message:"Must be no longer than 60 characters"}:/[0-9a-zA-Z]/.test(e)?void 0:{message:"Title must contain at least one alphanumeric character"}})),D=(0,u.Y)(c,(function(e){if(e&&e.length>p.p)return{message:"Must be no longer than ".concat(p.p," characters")}}));a.useEffect((function(){R.current&&R.current.focus()}),[R]);var W="Team"===k.__typename?k.id:null;return(0,l.tZ)("form",{onSubmit:function(e){e.preventDefault(),I.validate()||D.validate()||(n(W,I.value,D.value,T),t())},children:(0,l.BX)(s.G7,{css:[s.l0.colWithGap(16)],children:[(0,l.tZ)(s.h4,{variant:"headerDefault",level:2,children:w?"Use Template":"Fork Repl"}),(0,l.BX)(s.G7,{css:[s.l0.colWithGap(16)],children:[(0,l.BX)(s.G7,{css:[s.l0.colWithGap(4)],children:[(0,l.BX)(s.G7,{css:[s.l0.flex.row,s.l0.justify.spaceBetween,s.l0.align.end],children:[(0,l.tZ)(v._,{for:x("name"),children:"Name"}),(0,l.tZ)(f.Z,{maxLength:60,value:I.value,hideLabel:!0})]}),(0,l.tZ)(s.II,{ref:R,className:"repl-title-input",placeholder:"Name your Repl",onChange:function(e){return I.setValue(e.target.value)},onFocus:function(e){return e.target.select()},value:I.value,onBlur:I.handleBlur,id:x("name")}),I.error?(0,l.tZ)(s.xv,{css:[s.l0.color.accentNegativeStronger],children:I.error.message}):null]}),(0,l.BX)(s.G7,{css:[s.l0.colWithGap(4)],children:[(0,l.BX)(s.G7,{css:[s.l0.flex.row,s.l0.justify.spaceBetween,s.l0.align.end],children:[(0,l.tZ)(v._,{for:x("description"),children:"Description"}),(0,l.tZ)(f.Z,{maxLength:p.p,value:D.value,hideLabel:!0})]}),(0,l.tZ)(s.B,{maxLength:p.p,value:D.value,onChange:function(e){return D.setValue(e.target.value)},placeholder:"What does this Repl do?",css:[s.l0.minHeight(96),s.l0.maxHeight(128),{resize:"vertical"}],id:x("description")})]}),(0,l.tZ)(b.P,{context:"fork_modal",isPrivate:T,setIsPrivate:U,privacyState:E})]}),y.teams.length>0?(0,l.BX)(s.G7,{css:[s.l0.colWithGap(8)],children:[(0,l.tZ)(v._,{for:x("owner"),children:"Owner"}),(0,l.tZ)(g.Z,{id:x("owner"),currentUser:y,initialSelectedUsername:k.username,onChange:function(e){return B(e.username)}})]}):null,(0,l.BX)(s.G7,{css:[s.l0.rowWithGap(12),s.l0.justify.end],children:[(0,l.tZ)(s.zx,{onClick:t,text:"Cancel",type:"button"}),(0,l.tZ)(s.zx,{colorway:"primary",type:"submit",disabled:Boolean(I.error||D.error),text:w?(0,l.tZ)(l.HY,{children:"Use Template"}):(0,l.tZ)(l.HY,{children:"Fork Repl"}),iconLeft:(0,l.tZ)(m.Z,{})})]})]})})};function P(e){var n=function(e){var n=(0,r.Z)({},G,e);return R.a(k,n)}({fetchPolicy:"cache-and-network",onError:function(e){c.$e((function(n){n.setTag("fork-modal",!0),c.Tb(e)}))}}),t=n.data,o=n.loading,a=n.error;if(o)return(0,l.tZ)(s.xv,{color:"dimmer",children:"Loading..."});if(a)return(0,l.tZ)(s.xv,{children:"Something went wrong."});if(!t)return null;var u=t.currentUser;return u?(0,l.tZ)(B,(0,i.Z)((0,r.Z)({},e),{currentUser:u})):(0,l.tZ)(d.Z,{title:"Sign up or log in to fork this Repl",onSuccess:function(){},source:"fork"})}},59292:function(e,n,t){"use strict";t.d(n,{Z:function(){return b}});var r=t(14251),i=t(52875),o=t(9941),l=t(67294),a=t(11163),c=t(93058),u=t(32692),s=t(31230),d=t(50319);function m(){var e=(0,u.Z)(["\n  mutation ForkReplCreateRepl($input: CreateReplInput!) {\n    createRepl(input: $input) {\n      ... on Repl {\n        id\n        url\n        isPrivate\n        language\n        origin {\n          id\n          isOwner\n        }\n        source {\n          release {\n            id\n            repl {\n              id\n              title\n              owner {\n                ... on User {\n                  id\n                  username\n                }\n                ... on Team {\n                  id\n                  username\n                }\n              }\n            }\n          }\n        }\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return m=function(){return e},e}var p={},h=(0,s.Ps)(m());function f(e){var n=(0,r.Z)({},p,e);return d.D(h,n)}var v=t(33400),Z=t(60977),g=t(15935);function b(){var e,n,t,u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=u.onFork,d=u.onError,m=(0,a.useRouter)(),p=(0,c.Z)().showError,h=(0,v.Z)(),b=(0,o.Z)(f({onCompleted:function(e){var n="Repl"===(null===e||void 0===e?void 0:e.createRepl.__typename)?e.createRepl:null;if(n)if(s&&s(e),"/replEnvironmentDesktop"!==m.pathname&&"/replEnvironmentMobile"!==m.pathname)m.push({pathname:h,query:{replUrl:n.url}},{pathname:n.url});else{var t=n.url+(m.query.lite?"?lite=".concat(m.query.lite.toString()):"");window.location.href=t}}}),2),C=b[0],y=b[1],w="UserError"===(null===(e=y.data)||void 0===e?void 0:e.createRepl.__typename)?null===(n=y.data)||void 0===n?void 0:n.createRepl.message:null===(t=y.error)||void 0===t?void 0:t.message;l.useEffect((function(){w&&(p(w),d&&d())}),[w,p,d]);var R=l.useCallback((function(e){var n=e.originId,t=e.replReleaseId,o=e.teamId,l=e.title,a=e.description,c=e.isPrivate,u=e.trackingData,s=e.forkToPersonal;C({variables:{input:{originId:n,replReleaseId:t,teamId:o,title:l,isPrivate:c,description:a,forkToPersonal:s,gitRemoteUrl:""}}}).then((function(e){var o,l,a,c,s,d,m,p,h,f,v,b,C,y,w="Repl"===(null===(o=e.data)||void 0===o?void 0:o.createRepl.__typename)?e.data.createRepl:null;w&&(0,Z.j)(Z.U3.REPL_CREATED,(0,i.Z)((0,r.Z)({isSignup:!1,isOnboarding:!1},u),{isForked:!0,isPrivate:w.isPrivate,replId:w.id,isRenamed:!1,language:w.language,isSelfForked:!!(null===(l=w.origin)||void 0===l?void 0:l.isOwner),isTemplateFork:Boolean(t),originId:n,templateReplId:(null===(a=w.source)||void 0===a||null===(c=a.release)||void 0===c||null===(s=c.repl)||void 0===s?void 0:s.id)||void 0,templateTitle:null===(d=w.source)||void 0===d||null===(m=d.release)||void 0===m||null===(p=m.repl)||void 0===p?void 0:p.title,templateOwner:null===(h=w.source)||void 0===h||null===(f=h.release)||void 0===f||null===(v=f.repl)||void 0===v||null===(b=v.owner)||void 0===b?void 0:b.username,templateType:(null===(C=w.source)||void 0===C||null===(y=C.release)||void 0===y?void 0:y.repl)?(0,g.lw)(w.source.release.repl):void 0}))}))}),[C]),x=!!(y.loading||y.data&&"Repl"===y.data.createRepl.__typename);return[R,{loading:x}]}},18332:function(e,n,t){"use strict";t.d(n,{Z:function(){return d}});var r=t(9941),i=t(69779),o=t(67294),l=t(24351),a=t(14251),c=t(52875),u=function(e){return/\s/.test(e)};function s(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];var i=(0,r.Z)(o.useState(null),2),l=i[0],s=i[1],d=o.useCallback(s,[s]),m=o.useRef(n);o.useEffect((function(){m.current=n}),[n]);var p=(0,r.Z)(o.useState(null),2),h=p[0],f=p[1];return o.useEffect((function(){if(l){var e=function(){var e=l.value,n=l.selectionStart;if(n){var t=1===n||u(e[n-2]||""),r=e.length?e[n-1]:null;f((function(i){if(i&&(n<i.index||0===n))return null;if(!r)return i;if(!i&&!t)return i;var o=m.current.includes(r);return i||o?i?u(r)?null:(0,c.Z)((0,a.Z)({},i),{text:e.slice(i.index,n)}):{index:n,text:"",match:r}:i}))}else f(null)},n=function(){f(null)};return l.addEventListener("focus",e),l.addEventListener("keyup",e),l.addEventListener("blur",n),function(){f(null),l.removeEventListener("focus",e),l.removeEventListener("keyup",e),l.removeEventListener("blur",n)}}}),[l,f]),[h,d]}function d(e){var n=o.useRef(e);o.useEffect((function(){n.current=e}),[e]);var t=(0,r.Z)(o.useState(!1),2),a=t[0],c=t[1],u=(0,r.Z)(o.useState(null),2),d=u[0],m=u[1],p=(0,r.Z)(s.apply(void 0,(0,i.Z)(Object.keys(e))),2),h=p[0],f=p[1],v=o.useRef(h);o.useEffect((function(){v.current=h}),[h]);var Z=(0,l.Z)(h,100);return o.useEffect((function(){if(Z){var e=Z.match,t=Z.text,r=n.current[e]?n.current[e]:null;if(r){var i=!1;return c(!0),r(t).then((function(e){i||v.current===Z&&(c(!1),m({textTrigger:Z,results:e,applySuggestion:function(e){var n=e.targetValue,t=e.suggestionValue,r=n.slice(0,Z.index),i=t,o=n.slice(Z.index+Z.text.length);o&&o.startsWith(" ")||(i+=" ");var l=r+i+o;return{cursorIndex:(r+i).length+(o&&o.startsWith(" ")?1:0),fullValue:l}}}))})),function(){i=!0}}m(null)}else m(null)}),[Z,m]),[{isLoading:a,suggestions:d},f]}},57249:function(e,n,t){"use strict";t.d(n,{Z:function(){return V},S:function(){return X}});var r=t(34727),i=t(14251),o=t(52875),l=t(70655),a=t(35944),c=t(67294),u=t(32692),s=t(31230);function d(){var e=(0,u.Z)(["\n  fragment PostBodyTextAreaUser on User {\n    id\n    username\n    image\n  }\n"]);return d=function(){return e},e}function m(){var e=(0,u.Z)(["\n  query PostBodyTextAreaUsernameSearch($query: String!, $limit: Int) {\n    usernameSearch(query: $query, limit: $limit) {\n      id\n      ...PostBodyTextAreaUser\n    }\n  }\n  ","\n"]);return m=function(){return e},e}var p=(0,s.Ps)(d()),h=(0,s.Ps)(m(),p);var f=t(16965),v=t(9941),Z=t(16496),g=t.n(Z),b=t(18332),C=t(96594);var y=t(30758),w=t(48732),R=t(69779),x=t(32703),G=t(62722),k=t(7657);function S(e){var n=e.initialValue,t=e.textTriggers,i=(0,c.useState)(n||""),o=i[0],a=i[1],u=(0,c.useRef)(null),s=function(e){var n=e.textTriggers,t=e.applySuggestion,r=(0,c.useRef)(null),i=(0,v.Z)((0,b.Z)(n),2),o=i[0].suggestions,l=i[1],a=(0,C.Kb)({items:(null===o||void 0===o?void 0:o.results)||[],defaultHighlightedIndex:0,isOpen:Boolean(o),onSelectedItemChange:function(e){var n=e.selectedItem;if(o&&n){var i=r.current;if(i){var l=o.applySuggestion({targetValue:i.value,suggestionValue:n.value}),a=l.fullValue,c=l.cursorIndex;t({fullValue:a,cursorIndex:c})}}}}),u=(0,c.useMemo)((function(){if(o&&r.current)return g()(r.current,o.textTrigger.index)}),[o]);return{ref:(0,c.useCallback)((function(e){r.current=e,l(e)}),[l]),suggestions:null===o||void 0===o?void 0:o.results,caretCoordinates:u,combobox:a}}({textTriggers:t,applySuggestion:function(e){var n=e.cursorIndex,t=e.fullValue;a(t),setTimeout((function(){u.current&&u.current.setSelectionRange(n,n)}))}}),d=s.combobox,m=s.caretCoordinates,p=s.suggestions,h=s.ref,Z=function(e){var n=(0,c.useRef)(null),t=(0,f.Z)(e.onChange),i=(0,f.Z)(e.onError),o=(0,c.useCallback)((function(e){n.current=e}),[]),a=(0,c.useCallback)(function(){var e=(0,r.Z)((function(e){var r,o,a,c,u,s,d,m,p,h,f,v;return(0,l.__generator)(this,(function(l){switch(l.label){case 0:if(!(r=n.current))return[2];o=r.value,a=r.selectionStart?r.selectionStart:o.length,c=e.map((function(e){return"![Uploading ".concat(e.name,"...]()")})),u=o.substr(0,a),s=o.substr(a),d=(0,R.Z)(c),u&&d.unshift(u),s&&d.push(s),t.current(d.join("\n")),m=[],l.label=1;case 1:return l.trys.push([1,3,,4]),[4,(0,x.L0)(e)];case 2:return m=l.sent(),[3,4];case 3:return p=l.sent(),i.current(p),[2];case 4:h=[],l.label=5;case 5:return l.trys.push([5,7,,8]),[4,Promise.all(m.map((function(e){return(0,G.mh)(e,k.N.CommunityPost)})))];case 6:return h=l.sent(),[3,8];case 7:return f=l.sent(),i.current(f),[2];case 8:return n.current?(v=c.reduce((function(n,t,r){var i=e[r].name.replace(/\.[^/.]+$/,""),o=h[r],l=(0,w.Z)(o,Error)?"Error uploading":o.url;return n.replace(t,"![".concat(i,"](").concat(l,")"))}),n.current.value),t.current(v),[2]):[2]}}))}));return function(n){return e.apply(this,arguments)}}(),[t,i]),u=(0,c.useCallback)((function(e){var n=Array.from(e.clipboardData.items).filter((function(e){return"file"===e.kind})).map((function(e){return e.getAsFile()})).filter((function(e){return null!==e}));n.length&&a(n)}),[a]);return{ref:o,handleFiles:a,handlePaste:u}}({onChange:a,onError:function(){}}),S=Z.handleFiles,B=Z.handlePaste,P=Z.ref,T=(0,v.Z)((0,y.Z)((function(e){null!==e&&S(e)})),2)[1],U=(0,c.useCallback)((function(e){u.current=e,h(e),P(e)}),[h,P]),E=(0,c.useCallback)((function(e,n){var t;null===(t=u.current)||void 0===t||t.setSelectionRange(e,n)}),[]);return{ref:U,value:o,setValue:a,dropZoneHandlers:T,handlePaste:B,combobox:d,caretCoordinates:m,suggestions:p,setSelectionRange:E}}var B=t(57731),P=t(32951),T=t(25019),U=t(4306),E=t(81516),I=t(59641),D=t(37424),W=I.KD.div,H=I.KD.li;function X(e){return _.apply(this,arguments)}function _(){return(_=(0,r.Z)((function(e){return(0,l.__generator)(this,(function(n){switch(n.label){case 0:if(!E.l)throw new Error("Expected apolloClient");return[4,E.l.query({query:h,variables:{query:e,limit:5}})];case 1:return[2,n.sent().data.usernameSearch]}}))}))).apply(this,arguments)}function V(e){var n,t=e.onChange,u=e.initialValue,s=e.autoFocus,d=e.placeholder,m=e.onKeyDown,p=e.onBlur,h=e.onFocus,v=e.userSearch,Z=e.showLabel,g=(0,c.useRef)(u),b=(0,f.Z)(t),C=function(e){var n=e.initialValue,t=e.userSearch,i=void 0===t?X:t,o=S({initialValue:n,textTriggers:{"@":function(){var e=(0,r.Z)((function(e){return(0,l.__generator)(this,(function(n){switch(n.label){case 0:return[4,i(e)];case 1:return[2,n.sent().map((function(e){return{icon:(0,a.tZ)(B.Z,{alt:e.username,src:e.image,size:16}),value:e.username}}))]}}))}));return function(n){return e.apply(this,arguments)}}()}});return o}({initialValue:u,userSearch:v}),y=C.setSelectionRange;(0,P.Z)((function(){b.current(C.value)}),[C.value]),(0,c.useEffect)((function(){if(s&&g.current){var e=g.current.length;y(e,e)}}),[s,y]);var w=(0,D.H)();return(0,a.BX)(W,(0,o.Z)((0,i.Z)({css:{position:"relative"}},C.combobox.getComboboxProps()),{children:[(0,a.BX)(I.G7,{css:[I.l0.colWithGap(4)],children:[Z?(0,a.tZ)("label",{htmlFor:w("description"),children:(0,a.tZ)(I.xv,{color:"dimmer",variant:"small",children:"Description"})}):null,(0,a.tZ)(I.B,(0,o.Z)((0,i.Z)({},C.combobox.getInputProps({placeholder:d||"Write something about this post",ref:C.ref,onKeyDown:function(e){C.combobox.isOpen||"ArrowUp"!==e.key&&"ArrowDown"!==e.key||(e.nativeEvent.preventDownshiftDefault=!0),m&&m(e)},onBlur:p,onFocus:h,value:C.value,onChange:function(e){return C.setValue(e.currentTarget.value)},onPaste:C.handlePaste,autoFocus:s})),{css:[I.l0.width("100%"),{minHeight:I.TV.space128,resize:"vertical"}],id:w("description")}))]}),(0,a.tZ)(W,(0,o.Z)((0,i.Z)({},C.combobox.getMenuProps()),{css:[{position:"absolute"},C.caretCoordinates&&{top:C.caretCoordinates.top+C.caretCoordinates.height,left:C.caretCoordinates.left-4}],children:(null===(n=C.suggestions)||void 0===n?void 0:n.length)?(0,a.tZ)(T.Z,{css:{position:"relative",maxWidth:180},children:C.suggestions.map((function(e,n){return(0,a.tZ)(H,(0,o.Z)((0,i.Z)({},C.combobox.getItemProps({item:e,index:n})),{children:(0,a.tZ)(U.Z,{title:e.value,selected:C.combobox.selectedItem===e,highlighted:C.combobox.highlightedIndex===n,icon:e.icon?(0,a.tZ)(I.G7,{children:e.icon}):void 0})}),e.value)}))}):null}))]}))}},54917:function(e,n,t){"use strict";t.d(n,{EQ:function(){return E},Ex:function(){return T},Sh:function(){return U},Yt:function(){return G},g4:function(){return y},l0:function(){return B},nQ:function(){return R},pl:function(){return S},tE:function(){return w},wb:function(){return k}});var r=t(35944),i=t(67294),o=t(59369),l=t(34847),a=t(69346),c=t(33773),u=t(82447),s=t(94718),d=t(57249),m=t(75026),p=t(64080),h=t(53429),f=t(42844),v=t(64184),Z=t(18757),g=t(57704),b=t(88808),C=t(59641);function y(e){var n=e.onClick;return(0,r.tZ)(C.zx,{small:!0,onClick:n,outlined:!0,text:"Reply",colorway:"primary",css:[C.l0.p(4),{background:"transparent",borderColor:"transparent"}]})}function w(e){var n=e.onClick,t=e.repliesCount,i=e.isExpanded,o="".concat(i?"Hide":"View"," ").concat(t," ").concat((0,l.Z)("reply",t));return(0,r.tZ)(C.zx,{small:!0,onClick:n,outlined:!0,text:o,css:[C.l0.color.foregroundDimmer,C.l0.p(4),{background:"transparent",borderColor:"transparent","&> span":{marginRight:2}}],iconRight:(0,r.tZ)(c.Z,{size:12,rotate:i?0:270})})}var R,x=a.K.a;function G(e){var n=e.user;return(0,r.tZ)(s.Z,{username:n.username,children:(0,r.tZ)(u.ZP,{user:n,children:(0,r.tZ)(C.qE,{size:32,username:n.username,src:n.image})})})}function k(e){var n=e.user,t=e.action,i=e.timeCreated;return(0,r.BX)(a.G,{css:[C.l0.flex.row,C.l0.align.center,C.l0.flex.wrap,{maxWidth:"100%",gap:C.TV.space4}],children:[(0,r.tZ)(s.Z,{username:n.username,children:(0,r.tZ)(u.ZP,{user:n,children:(0,r.tZ)(x,{css:[{color:"inherit"}],children:n.username})})}),t?(0,r.tZ)(C.xv,{color:"dimmer",children:t}):null,(0,r.tZ)(C.EK,{date:i,textColor:"dimmest",textVariant:"small"})]})}function S(e){var n=e.canEdit,t=e.canDelete,l=e.canReport,c=e.canEditSettings,u=e.canHideComment,s=e.canShowComment,d=e.onAction,m=e.className,C=(0,i.useState)(!1),y=C[0],w=C[1],x=[{label:R.CopyLink,icon:(0,r.tZ)(b.Z,{})}];return n&&x.push({label:R.Edit,icon:(0,r.tZ)(p.Z,{})}),l&&x.push({label:R.Report,icon:(0,r.tZ)(h.Z,{})}),c&&x.push({label:R.Settings,icon:(0,r.tZ)(f.Z,{})}),u&&x.push({label:R.Hide,icon:(0,r.tZ)(v.Z,{})}),s&&x.push({label:R.Show,icon:(0,r.tZ)(Z.Z,{})}),t&&x.push({label:R.Delete,isDestructive:!0,icon:(0,r.tZ)(g.Z,{})}),x.length?(0,r.tZ)(a.G,{className:m,css:[{opacity:y?1:0,".is-touch-device &":{opacity:1}}],children:(0,r.tZ)(o.Z,{label:"Comment Actions",onOpenChange:w,items:x,onItemClick:function(e){d(e.label)}})}):null}!function(e){e.Edit="Edit",e.Delete="Delete",e.Report="Report",e.Settings="Settings",e.Hide="Hide comment",e.Show="Show comment",e.CopyLink="Copy Link"}(R||(R={}));var B=a.K.form,P=i.createContext(void 0);function T(){return i.useContext(P)}var U=P.Provider;function E(e){var n=e.initialValue,t=e.placeholder,o=e.onCancel,l=e.onSubmit,c=e.hideControls,u=e.buttonText,s=void 0===u?"Comment":u,p=e.buttonIcon,h=void 0===p?(0,r.tZ)(m.Z,{}):p,f=e.error,v=(0,i.useState)(!1),Z=v[0],g=v[1],b=(0,i.useState)(n),y=b[0],w=b[1],R=T();return(0,r.BX)(B,{css:[C.l0.colWithGap(8)],onSubmit:function(e){e.preventDefault(),l(y)},children:[(0,r.tZ)(d.Z,{onKeyDown:function(e){"Enter"===e.key&&e.metaKey&&l(y)},initialValue:y,placeholder:t,onChange:w,onFocus:function(){return g(!0)},userSearch:R}),f?(0,r.BX)(a.G,{css:[C.l0.flex.column,C.l0.colWithGap(8)],children:[(0,r.tZ)(C.xv,{css:[C.l0.color.redDefault],multiline:!0,children:f})," ",(0,r.BX)(C.xv,{children:["For more information,"," ",(0,r.tZ)("a",{href:"https://docs.replit.com/hosting/browsing-publishing-repls",target:"_blank",children:"check out the guidelines."})]})]}):null,Z||!c?(0,r.BX)(a.G,{css:[C.l0.rowWithGap(8),C.l0.justify.end],children:[(0,r.tZ)(C.zx,{text:"Cancel",onClick:function(e){g(!1),o&&o(e)}}),(0,r.tZ)(C.zx,{type:"submit",text:s,onClick:function(){},iconLeft:h,colorway:"primary",disabled:!y})]}):null]})}},31106:function(e,n,t){"use strict";t.d(n,{G:function(){return ee},Z:function(){return ne}});var r,i,o,l,a=t(67573),c=t(14251),u=t(52875),s=t(9941),d=t(69779),m=t(35944),p=t(67294),h=t(54969),f=t(60977),v=t(38455),Z=t(94361),g=t(70917),b=t(98967),C=t(33473),y=t(88046),w=t(80658),R=t(59292),x=t(37815),G=t(4924),k=t(76804),S=t(65400),B=t(25958),P=t(61756),T=t(5886),U=t(1879),E=t(93160),I=t(1144),D=t(81255),W=t(69346),H=t(59641),X=t(71158),_=t(57263),V=t(99843),A=t(75026),F=t(64080),L=t(83074),M=t(92002),z=function(){return null},$=t(23384),N=t(48474),q=function(e){return"@media (max-width: ".concat(e,"px)")},O={mobile:q(_.j.tabletMin),small:(i=_.j.tabletMin+1,o=_.j.tabletMax,"@media (min-width: ".concat(i,"px) and (max-width: ").concat(o,"px)")),smallAndMobile:q(_.j.tabletMax),desktop:(r=_.j.tabletMax+1,"@media (min-width: ".concat(r,"px)"))},j=function(e){return{name:e,gridArea:(0,g.iv)({gridArea:e})}},Q={header:j("header"),cta:j("cta"),main:j("main"),secondary:j("secondary"),auxiliary:j("auxiliary")},Y={mobile:(0,g.iv)({gridTemplateAreas:'\n      "'.concat(Q.header.name,'"\n      "').concat(Q.cta.name,'"\n      "').concat(Q.main.name,'"\n      "').concat(Q.auxiliary.name,'"\n      "').concat(Q.secondary.name,'"\n      ')}),small:(0,g.iv)({gridTemplateColumns:"1fr auto auto 25%",gridTemplateRows:"auto",gridTemplateAreas:'\n      "'.concat(Q.header.name," ").concat(Q.header.name," ").concat(Q.cta.name," ").concat(Q.cta.name,'"\n      "').concat(Q.main.name," ").concat(Q.main.name," ").concat(Q.main.name," ").concat(Q.main.name,'"\n      "').concat(Q.secondary.name," ").concat(Q.secondary.name," ").concat(Q.secondary.name," ").concat(Q.auxiliary.name,'"\n      ')}),desktop:(0,g.iv)({columnGap:D.TV.space32,alignItems:"baseline",gridTemplateColumns:"1fr 25%",gridTemplateRows:"auto auto auto auto 1fr",gridTemplateAreas:'\n      "'.concat(Q.header.name," ").concat(Q.cta.name,'"\n      "').concat(Q.main.name," ").concat(Q.cta.name,'"\n      "').concat(Q.main.name," ").concat(Q.auxiliary.name,'"\n      "').concat(Q.main.name," ").concat(Q.auxiliary.name,'"\n      "').concat(Q.secondary.name," ").concat(Q.auxiliary.name,'"\n      ')})},K=function(e){var n,t=e.withSidebar;return(0,g.iv)([D.l0.px(16),D.l0.py(32),(n={maxWidth:1200,margin:"0 auto",display:"grid",gap:D.TV.space16},(0,a.Z)(n,O.mobile,Y.mobile),(0,a.Z)(n,O.small,[D.l0.px(16),Y.small]),(0,a.Z)(n,O.desktop,[D.l0.p(32),t?Y.desktop:Y.small]),n)])};function J(e){var n,t=e.repl,r=e.currentUser,i=function(){if(!r)return d(l.AuthPrompt),void(0,f.j)(f.U3.SIGNUP_REQUESTED,{from:"cover-page",location:"fork"});g||d(l.ForkModal)},o=(0,s.Z)(p.useState(null),2),a=o[0],d=o[1],v=(0,s.Z)((0,R.Z)(),2),Z=v[0],g=v[1].loading,G=(0,$.D)({controlName:"flag-repl-analytics"}),k=(0,y.aq)(t),B=t.currentUserPermissions.containerWrite?(0,m.tZ)(T.Z,{colorway:"primary",iconLeft:(0,m.tZ)(F.Z,{}),stretch:!0,text:"Edit in workspace",as:k.as,href:k.href}):null,E=t.currentUserPermissions.containerWrite&&G&&t.analyticsUrl?(0,m.tZ)(T.Z,{iconLeft:(0,m.tZ)(V.Z,{}),stretch:!0,text:"Analytics",href:t.analyticsUrl}):null,I=t.currentUserPermissions.publish&&t.publishedAs&&t.publishedAs!==h.O2.Template?(0,m.tZ)(P.zx,{text:"Add an update",type:"button",iconLeft:(0,m.tZ)(A.Z,{}),onClick:function(){return d(l.UpdateModal)}}):null,H=t.publishedAs===h.O2.Template?{text:g?"Forking...":"Use Template",icon:(0,m.tZ)(M.Z,{}),count:t.releasesForkCount}:{text:g?"Forking...":"Fork Repl",icon:(0,m.tZ)(L.Z,{}),count:t.publicForkCount},X=(0,m.tZ)(C.Z,(0,u.Z)((0,c.Z)({},H),{onClick:i,icon:(0,m.tZ)(L.Z,{}),colorway:null===B?"primary":void 0,onCountClick:function(){return d(l.ForksModal)}})),_=(0,m.tZ)(U.u,{maxWidth:768,isOpen:"ForksModal"===a,onRequestClose:function(){return d(null)},children:(0,m.tZ)(S.Z,{replId:t.id})}),z=(0,m.tZ)(U.u,{isOpen:"UpdateModal"===a,onRequestClose:function(){return d(null)},children:(0,m.tZ)(x.Z,{repl:t,onDone:function(){return d(null)},source:"coverPage"})}),N=(0,m.tZ)(U.u,{isOpen:a===l.ForkModal,onRequestClose:function(){return d(null)},children:(0,m.tZ)(w.Z,{onFork:function(e,n,r,i){var o,l;Z({originId:t.id,teamId:e,title:n,description:r,isPrivate:i,replReleaseId:(null===(o=t.deployment)||void 0===o||null===(l=o.activeRelease)||void 0===l?void 0:l.id)||void 0,forkToPersonal:!e,trackingData:{forkSource:"replViewHeader",isApp:t.publishedAs===h.O2.App,isTemplate:t.publishedAs===h.O2.Template}})},initialTitle:t.title,initialDescription:null!==(n=t.description)&&void 0!==n?n:"",initialPrivacy:!1,hideModal:function(){return d(null)},teamContext:null===r||void 0===r?void 0:r.username,template:t.publishedAs===h.O2.Template})});return B?(0,m.BX)(m.HY,{children:[(0,m.BX)(W.G,{css:[D.l0.colWithGap(8)],children:[B,E,I,X]}),_,N,z]}):(0,m.BX)(m.HY,{children:[X,(0,m.tZ)(U.u,{isOpen:a===l.AuthPrompt,onRequestClose:function(){d(null)},children:(0,m.tZ)(b.Z,{title:"Sign up or log in to fork this Repl",onSuccess:function(){return i()},source:"fork"})}),_,N]})}function ee(e){var n=e.title,t=e.withSidebar,r=void 0===t||t;return(0,m.tZ)(W.G,{css:[D.l0.flex.row,D.l0.flex.growAndShrink(1)],children:(0,m.BX)(W.G,{css:[D.l0.p(16),D.l0.flex.growAndShrink(1),K({withSidebar:r})],children:[(0,m.BX)(W.G,{css:[Q.header.gridArea,D.l0.rowWithGap(8),D.l0.align.center],children:[(0,m.tZ)(E.T,{elevated:!0,css:[D.l0.width(32),D.l0.height(32),D.l0.borderRadius("full")]}),(0,m.tZ)(I.h,{color:"dimmest",variant:"headerBig",level:1,css:[D.l0.flex.growAndShrink(1),{wordBreak:"break-word"}],children:n||"Loading..."})]}),(0,m.tZ)(W.G,{css:[Q.cta.gridArea],children:(0,m.tZ)(P.zx,{disabled:!0,text:" "})}),(0,m.tZ)(W.G,{css:[Q.main.gridArea,D.l0.colWithGap(16)],children:(0,m.tZ)(E.T,{elevated:!0,css:[D.l0.height(500),D.l0.borderRadius(8)]})}),(0,m.tZ)(W.G,{css:[Q.auxiliary.gridArea,D.l0.colWithGap(16)],children:(0,m.BX)(W.G,{css:D.l0.colWithGap(16),children:[(0,m.tZ)(I.x,{color:"dimmest",variant:"subheadDefault",children:"Loading..."}),(0,m.tZ)(W.G,{css:D.l0.colWithGap(16),children:(0,d.Z)(Array(3)).map((function(e,n){return(0,m.tZ)(E.T,{elevated:!0,css:[D.l0.height(100),D.l0.borderRadius(8)]},n.toString())}))})]})}),(0,m.tZ)(W.G,{css:[Q.secondary.gridArea]})]})})}function ne(e){var n=e.repl,t=e.currentUser,r=e.withSidebar,i=void 0===r||r,o=(0,$.D)({controlName:"flag-tip-repl"});return(0,m.tZ)(W.G,{css:[D.l0.flex.row,D.l0.flex.growAndShrink(1)],children:(0,m.BX)(W.G,{css:[D.l0.p(16),D.l0.flex.growAndShrink(1),K({withSidebar:i})],children:[(0,m.tZ)(W.G,{css:[Q.header.gridArea],children:(0,m.tZ)(B.Z,{repl:n,iconEditable:n.currentUserPermissions.changeIconUrl,canModerate:(null===t||void 0===t?void 0:t.isModerator)||(null===t||void 0===t?void 0:t.isAdmin)})}),(0,m.tZ)(W.G,{css:[Q.cta.gridArea],children:(0,m.tZ)(J,{repl:n,currentUser:t})}),(0,m.BX)(W.G,{css:[Q.main.gridArea,D.l0.colWithGap(16)],children:[(0,m.tZ)(W.G,{css:[{height:500,"> *":{height:"100%"}}],children:(0,m.tZ)(Z.ZP,{repl:n,currentUser:t,enableDeeplinks:!0})}),(0,m.tZ)(k.Z,{repl:n,currentUser:t}),(0,m.tZ)(H.RX,{}),o?(0,m.tZ)(N.Z,{replId:n.id}):null]}),(0,m.BX)(W.G,{tag:"aside",css:[Q.auxiliary.gridArea,D.l0.colWithGap(16)],children:[(0,m.tZ)(W.G,{children:(0,m.tZ)(z,{})}),(0,m.tZ)(W.G,{"data-nosnippet":!0,children:n.relatedRepls.map((function(e){var n=e.name,t=e.repls;return(0,m.BX)(W.G,{css:[D.l0.colWithGap(16),D.l0.mt(16)],children:[(0,m.tZ)(I.h,{level:3,variant:"subheadDefault",children:n}),(0,m.tZ)(W.G,{css:D.l0.colWithGap(16),children:t.map((function(e){return e.publishedAs===h.O2.Template?(0,m.tZ)(X.Z,{repl:e},e.id):(0,m.tZ)(G.ZP,{showOwner:!0,repl:e,maxVisibleTags:1},e.id)}))})]},n)}))})]}),(0,m.tZ)(W.G,{css:[Q.secondary.gridArea],children:(0,m.tZ)(v.Z,{replId:n.id})})]})})}!function(e){e.ForksModal="ForksModal",e.AuthPrompt="AuthPrompt",e.UpdateModal="UpdateModal",e.ForkModal="ForkModal"}(l||(l={}))},76804:function(e,n,t){"use strict";t.d(n,{Z:function(){return P}});var r=t(67573),i=t(14251),o=t(52875),l=t(35944),a=(t(67294),t(54969)),c=t(41664),u=t.n(c),s=t(23223),d=t(69346),m=t(81255),p=t(1144),h=t(88046),f=t(70570),v=t(82447),Z=t(94718),g=t(5804),b=t(2896),C=t(53427),y=t(57263),w=t(81456),R=t(47024),x=t(34847),G=t(23384),k=d.K.a,S={template:{background:m.TV.yellowDimmest,foreground:m.TV.yellowStrongest},app:{background:m.TV.accentPrimaryDimmest,foreground:m.TV.accentPrimaryStrongest}};function B(e){var n=e.colorway,t=e.text;return(0,l.tZ)(d.G,{css:[{backgroundColor:n.background},m.l0.borderRadius(8),m.l0.px(4),m.l0.py(2)],children:(0,l.tZ)(d.G,{css:[{color:n.foreground,fontSize:m.TV.fontSizeSmall}],children:t})})}function P(e){var n,t,c,P,T,U,E,I=e.repl,D=e.currentUser,W=I.owner,H=I.lastPublishedAt||(null===(n=I.deployment)||void 0===n||null===(t=n.activeRelease)||void 0===t?void 0:t.timeCreated),X=W&&W.id===(null===D||void 0===D?void 0:D.id),_=(0,G.D)({controlName:"flag-new-cover-page"});return(0,l.BX)(d.G,{css:[m.l0.colWithGap(8)],children:[(0,l.tZ)(d.G,{css:[m.l0.rowWithGap(8),m.l0.align.start],children:(0,l.BX)(d.G,{css:[m.l0.colWithGap(8),m.l0.flex.growAndShrink(1)],children:[(0,l.BX)(d.G,{css:_?[m.l0.colWithGap(8)]:(E={},(0,r.Z)(E,"@media (max-width: ".concat(y.j.tabletMin-1,"px)"),[m.l0.colWithGap(8)]),(0,r.Z)(E,"@media (min-width: ".concat(y.j.tabletMin,"px)"),[m.l0.rowWithGap(8),m.l0.justify.spaceBetween,m.l0.align.center]),E),children:[W?(0,l.tZ)(l.HY,{children:(0,l.BX)(d.G,{css:[m.l0.flex.row,m.l0.align.center,m.l0.flex.wrap,{gap:m.TV.space8}],dataCy:"cover-page-user",children:[(0,l.tZ)(Z.Z,{inline:!0,username:W.username,children:(0,l.tZ)(v.ZP,{user:W,children:(0,l.tZ)(k,{css:[m.l0.color.foregroundDefault],children:(0,l.tZ)(f.n,{username:W.username,src:(null===W||void 0===W?void 0:W.image)||null})})})}),!X&&(0,l.tZ)(R.Z,{subtle:!0,small:!0,user:W}),(0,l.tZ)(p.x,{color:"dimmer",children:"User"===W.__typename&&W.followerCount>0?"".concat((0,w.d)(W.followerCount)," ").concat((0,x.Z)("follower",W.followerCount)):null})," "]})}):(0,l.tZ)(f.n,{small:!0,src:null,username:"[deleted]"}),(null===(c=I.source)||void 0===c||null===(P=c.deployment)||void 0===P||null===(T=P.repl)||void 0===T?void 0:T.owner)?(0,l.BX)(d.G,{css:[m.l0.rowWithGap(4),m.l0.align.center],children:[(0,l.tZ)(p.x,{color:"dimmest",children:"Made with "}),(0,l.tZ)(u(),(0,o.Z)((0,i.Z)({},(0,h.aq)(I.source.deployment.repl)),{passHref:!0,children:(0,l.BX)(k,{css:[m.l0.rowWithGap(4),m.l0.align.center,m.l0.color.foregroundDefault],children:[(0,l.tZ)(C.ZP,{size:24,alt:I.source.deployment.repl.templateLabel,iconUrl:I.source.deployment.repl.iconUrl}),(0,l.tZ)(p.x,{children:I.source.deployment.repl.templateLabel})]})}))]}):null]}),(0,l.BX)(d.G,{css:[m.l0.rowWithGap(8),m.l0.align.center,(0,r.Z)({},"@media (max-width: ".concat(y.j.tabletMin,"px)"),[m.l0.colWithGap(8),m.l0.align.start])],children:[(0,l.BX)(d.G,{css:[m.l0.rowWithGap(8),m.l0.align.center],children:[I.publishedAs===a.O2.Template?(0,l.tZ)(B,{colorway:S.template,text:"Template"}):null,I.publishedAs===a.O2.App?(0,l.tZ)(B,{colorway:S.app,text:"App"}):null,H?(0,l.BX)(p.x,{color:"dimmer",variant:"small",children:["Published on"," ",new Date(H).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})]}):null]}),(null===(U=I.origin)||void 0===U?void 0:U.owner)?(0,l.BX)(p.x,{color:"dimmer",variant:"small",children:["Forked from"," ",(0,l.tZ)(v.ZP,{user:I.origin.owner,children:(0,l.tZ)("a",{children:I.origin.owner.username})}),"/",(0,l.tZ)(u(),(0,o.Z)((0,i.Z)({},(0,h.aq)(I.origin)),{children:(0,l.tZ)("a",{children:I.origin.title})}))]}):null]})]})}),I.tags.length?(0,l.tZ)(d.G,{children:(0,l.tZ)(d.G,{tag:"ul","aria-label":"Tags",css:[{flexWrap:"wrap",margin:"calc(".concat(m.TV.space4," * -1)")},m.l0.flex.row],children:I.tags.map((function(e){var n=(0,g.M6)(e.id);return(0,l.tZ)("li",{css:{listStyle:"none"},children:(0,l.tZ)(b.P,{text:"#"+e.id,css:[{margin:m.TV.space4}],href:n.href,as:n.as})},e.id)}))})}):null,I.description?(0,l.tZ)(d.G,{children:(0,l.tZ)(s.Z,{css:{backgroundColor:"transparent"},children:I.description})}):(0,l.tZ)(p.x,{color:"dimmest",children:"This Repl has no description"})]})}},23223:function(e,n,t){"use strict";t.d(n,{Z:function(){return o}});var r=t(35944),i=(t(67294),t(92350));function o(e){var n=e.children,t=e.className;return(0,r.tZ)(i.ZP,{background:!1,skipHtml:!0,mentionsLink:!0,unwrapDisallowed:!0,lineBreaks:!0,className:t,children:n})}},65400:function(e,n,t){"use strict";t.d(n,{Z:function(){return y}});var r=t(14251),i=t(52875),o=t(69779),l=t(35944),a=(t(67294),t(1144)),c=t(69346),u=t(81255),s=t(32692),d=t(31230),m=t(47174),p=t(37887);function h(){var e=(0,s.Z)(["\n  query ReplViewForks($replId: String!, $count: Int!, $after: String) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        publicForkCount\n        releasesForkCount\n        publicForks(count: $count, after: $after) {\n          items {\n            id\n            ...ReplPostReplCardRepl\n          }\n          pageInfo {\n            nextCursor\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return h=function(){return e},e}var f={},v=(0,d.Ps)(h(),m.n);var Z=t(6951),g=t(34847),b=t(4924),C=t(59641);function y(e){var n=function(e){var n=(0,r.Z)({},f,e);return p.a(v,n)}({variables:{replId:e.replId,count:100}}),t=n.data,s=n.fetchMore,d=n.loading,m="Repl"===(null===t||void 0===t?void 0:t.repl.__typename)?t.repl:null,h=m?m.publicForks:null,y=m?m.publicForkCount+m.releasesForkCount:null,w=(null===h||void 0===h?void 0:h.items.length)||0;return(0,l.BX)(c.G,{css:[u.l0.colWithGap(8)],children:[(0,l.BX)(c.G,{children:[null!==y?(0,l.BX)(c.G,{css:[u.l0.colWithGap(12)],children:[(0,l.BX)(c.G,{css:[u.l0.display.block],children:[(0,l.tZ)(a.x,{variant:"subheadDefault",children:y})," ",(0,l.BX)(a.x,{color:"dimmest",variant:"subheadDefault",children:[(0,g.Z)("forks",y),y!==w?" total":null]})]}),y>0&&w>0?(0,l.tZ)(a.x,{variant:"subheadBig",children:"Public forks"}):null,y>0&&0===w?(0,l.tZ)(a.x,{variant:"subheadBig",children:"No public forks"}):null]}):null,d?(0,l.tZ)(a.x,{color:"dimmest",variant:"subheadDefault",children:"Loading forks..."}):null]}),(0,l.BX)(c.G,{css:[u.l0.flex.growAndShrink(1)],children:[(0,l.tZ)(c.G,{css:[u.l0.p(8),{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:u.TV.space16,gridAutoFlow:"dense"}],children:h?h.items.map((function(e){return(0,l.tZ)(C.Tg,{elevated:!0,css:[u.l0.borderRadius(8)],children:(0,l.tZ)(b.ZP,{showOwner:!0,repl:e})},e.id)})):null}),(null===h||void 0===h?void 0:h.pageInfo.nextCursor)?(0,l.tZ)(Z.Z,{disabled:d,border:!1,color:"primary",filled:!1,fullWidth:!0,onClick:function(){d||s({variables:{after:h.pageInfo.nextCursor},updateQuery:function(e,n){if(!n||!n.fetchMoreResult)return e;var t="Repl"===e.repl.__typename?e.repl:null;if(!t)return e;var l=n.fetchMoreResult,a="Repl"===l.repl.__typename?l.repl:null;return a?(0,i.Z)((0,r.Z)({},l),{repl:(0,i.Z)((0,r.Z)({},a),{publicForks:(0,i.Z)((0,r.Z)({},a.publicForks),{items:(0,o.Z)(t.publicForks.items).concat((0,o.Z)(a.publicForks.items))})})}):e}})},children:d?"Loading...":"Load more"}):null]})]})}},33607:function(e,n,t){"use strict";t.d(n,{P9:function(){return b},Qp:function(){return R},cT:function(){return G},cq:function(){return P},g:function(){return S},kz:function(){return U},oY:function(){return I},pn:function(){return W},xB:function(){return y}});var r=t(14251),i=t(32692),o=t(31230),l=t(16092),a=t(50319);function c(){var e=(0,i.Z)(["\n  fragment ReplViewCommentsUser on User {\n    id\n    username\n    image\n    fullName\n    isBlockingCurrentUser\n    ...UserLinkUser\n  }\n  ","\n"]);return c=function(){return e},e}function u(){var e=(0,i.Z)(["\n  fragment ReplViewCommentsReplComment on ReplComment {\n    id\n    body\n    repl {\n      id\n      url\n    }\n    timeCreated\n    currentUserPermissions {\n      id\n      edit\n      delete\n      canHideComment\n      report\n    }\n    user {\n      id\n      ...ReplViewCommentsUser\n    }\n    post {\n      id\n      title\n      canPin\n      canHide\n      canChangeBoard\n      canReport\n      hasReported\n    }\n    isHidden\n  }\n  ","\n"]);return u=function(){return e},e}function s(){var e=(0,i.Z)(["\n  fragment ReplViewCommentsReplCommentThread on ReplComment {\n    id\n    ...ReplViewCommentsReplComment\n    replies {\n      id\n      ...ReplViewCommentsReplComment\n    }\n  }\n  ","\n"]);return s=function(){return e},e}function d(){var e=(0,i.Z)(["\n  mutation ReplViewCreateReplComment($input: CreateReplCommentInput!) {\n    createReplComment(input: $input) {\n      ... on ReplComment {\n        id\n        ...ReplViewCommentsReplComment\n      }\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return d=function(){return e},e}function m(){var e=(0,i.Z)(["\n  mutation ReplViewCreateReplCommentReply(\n    $input: CreateReplCommentReplyInput!\n  ) {\n    createReplCommentReply(input: $input) {\n      ... on ReplComment {\n        id\n        ...ReplViewCommentsReplComment\n      }\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return m=function(){return e},e}function p(){var e=(0,i.Z)(["\n  mutation ReplViewCommentsUpdateReplComment($input: UpdateReplCommentInput!) {\n    updateReplComment(input: $input) {\n      ... on ReplComment {\n        id\n        body\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return p=function(){return e},e}function h(){var e=(0,i.Z)(["\n  mutation ReplViewCommentsDeleteReplComment($id: Int!) {\n    deleteReplComment(id: $id) {\n      ... on ReplComment {\n        id\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return h=function(){return e},e}function f(){var e=(0,i.Z)(["\n  mutation ReplViewCommentsUpdateReplPost($input: UpdatePostInput!) {\n    updatePost(input: $input) {\n      post {\n        id\n        title\n      }\n    }\n  }\n"]);return f=function(){return e},e}function v(){var e=(0,i.Z)(["\n  mutation ToggleHiddenComment($commentId: Int!, $isHidden: Boolean!) {\n    toggleHiddenComment(commentId: $commentId, isHidden: $isHidden) {\n      ... on ReplComment {\n        id\n        ...ReplViewCommentsReplComment\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return v=function(){return e},e}function Z(){var e=(0,i.Z)(["\n  mutation ReportReplComment($commentId: Int!, $reason: String!) {\n    reportReplComment(replCommentId: $commentId, reason: $reason) {\n      __typename\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on BoardReport {\n        id\n      }\n    }\n  }\n"]);return Z=function(){return e},e}var g={},b=(0,o.Ps)(c(),l._),C=(0,o.Ps)(u(),b),y=(0,o.Ps)(s(),C),w=(0,o.Ps)(d(),C);function R(e){var n=(0,r.Z)({},g,e);return a.D(w,n)}var x=(0,o.Ps)(m(),C);function G(e){var n=(0,r.Z)({},g,e);return a.D(x,n)}var k=(0,o.Ps)(p());function S(e){var n=(0,r.Z)({},g,e);return a.D(k,n)}var B=(0,o.Ps)(h());function P(e){var n=(0,r.Z)({},g,e);return a.D(B,n)}var T=(0,o.Ps)(f());function U(e){var n=(0,r.Z)({},g,e);return a.D(T,n)}var E=(0,o.Ps)(v(),C);function I(e){var n=(0,r.Z)({},g,e);return a.D(E,n)}var D=(0,o.Ps)(Z());function W(e){var n=(0,r.Z)({},g,e);return a.D(D,n)}},58057:function(e,n,t){"use strict";t.d(n,{x:function(){return j},H:function(){return z}});var r=t(14251),i=t(52875),o=t(9941),l=t(35944),a=t(60357),c=t.n(a),u=t(67294),s=t(33607),d=t(88075),m=t(93058),p=t(23223),h=t(74591),f=t(57249),v=t(1144),Z=t(69346),g=t(81255);function b(e){var n=e.title;return(0,l.BX)(Z.G,{css:[g.l0.rowWithGap(8),g.l0.py(8)],children:[(0,l.tZ)(v.x,{variant:"subheadBig",multiline:!0,css:[{wordBreak:"break-all",flexShrink:1}],children:n}),(0,l.tZ)(v.x,{color:"dimmer",css:[g.l0.borderRadius(16),g.l0.p(4),{border:"1px solid "+g.TV.outlineDimmer,height:"fit-content"}],children:"Post"})]})}var C=t(37424),y=t(32692),w=t(31230),R=t(37887),x=t(50319);function G(){var e=(0,y.Z)(["\n  fragment ReplPostSettingsPost on Post {\n    id\n    isAnnouncement\n    isPinned\n    isLocked\n    isHidden\n    board {\n      id\n      name\n    }\n  }\n"]);return G=function(){return e},e}function k(){var e=(0,y.Z)(["\n  query ReplPostSettings($postId: Int!) {\n    boards {\n      id\n      name\n    }\n    post(id: $postId) {\n      id\n      canPin\n      canHide\n      canChangeBoard\n      board {\n        id\n        name\n      }\n      ...ReplPostSettingsPost\n    }\n  }\n  ","\n"]);return k=function(){return e},e}function S(){var e=(0,y.Z)(["\n  mutation ReplPostSettingsUpdatePost($input: UpdatePostInput!) {\n    updatePost(input: $input) {\n      post {\n        id\n        ...ReplPostSettingsPost\n      }\n    }\n  }\n  ","\n"]);return S=function(){return e},e}var B={},P=(0,w.Ps)(G()),T=(0,w.Ps)(k(),P);var U=(0,w.Ps)(S(),P);var E=t(59641),I=E.KD.label;function D(e){var n=e.children;return(0,l.tZ)(E.G7,{css:[E.l0.rowWithGap(8),E.l0.align.center],children:n})}function W(e){var n,t=e.postId,i=function(e){p.loading||h&&m({variables:{input:(0,r.Z)({id:h.id},e)}})},a=(0,C.H)(),c=function(e){var n=(0,r.Z)({},B,e);return R.a(T,n)}({variables:{postId:t}}),u=c.data,s=c.loading,d=(0,o.Z)(function(e){var n=(0,r.Z)({},B,e);return x.D(U,n)}(),2),m=d[0],p=d[1];if(s)return null;var h="Post"===(null===u||void 0===u||null===(n=u.post)||void 0===n?void 0:n.__typename)?u.post:null,f=null===u||void 0===u?void 0:u.boards;if(!h||!f)return(0,l.tZ)(E.xv,{children:"Something went wrong"});var v={isPinned:a("isPinned"),isHidden:a("isHidden"),boardId:a("boardId")};return(0,l.BX)(E.G7,{css:[E.l0.colWithGap(24)],children:[(0,l.tZ)(E.h4,{level:1,variant:"headerDefault",children:"Post settings"}),(0,l.BX)(E.G7,{css:[E.l0.colWithGap(8)],children:[(0,l.BX)(D,{children:[(0,l.tZ)(E.XZ,{id:v.isPinned,checked:Boolean(h.isPinned),onChange:function(){return i({isPinned:!h.isPinned})}}),(0,l.tZ)(I,{htmlFor:v.isPinned,children:"Pin post to Talk feed"})]}),h.canHide?(0,l.BX)(D,{children:[(0,l.tZ)(E.XZ,{id:v.isHidden,checked:Boolean(h.isHidden),onChange:function(e){return i({isHidden:e.target.checked})}}),(0,l.tZ)(I,{htmlFor:v.isHidden,children:"Hide post from listing"})]}):null]}),h.canChangeBoard?(0,l.BX)(D,{children:[(0,l.tZ)(E.Ph,{id:v.boardId,placeholder:"Select a board",items:f.map((function(e){return{value:e,title:e.name}})),initialSelectedItem:h.board?{value:h.board,title:h.board.name}:void 0,onChange:function(e){return i({boardId:e.value.id})}}),(0,l.tZ)(I,{htmlFor:v.isHidden,children:"Change board (requires reload)"})]}):null]})}var H=t(11163),X=t(54917),_=t(60977),V=t(64184),A=t(53429),F=E.KD.form;function L(e){var n=e.commentId,t=e.onDone,r=(0,u.useState)(""),i=r[0],a=r[1],c=(0,m.Z)(),d=c.showConfirm,p=c.showError,h=(0,o.Z)((0,s.pn)({variables:{commentId:n,reason:i},onCompleted:function(e){"BoardReport"===e.reportReplComment.__typename?(d("Comment reported"),t()):p(e.reportReplComment.message)}}),2),f=h[0],v=h[1].loading;return(0,l.BX)(E.G7,{css:[E.l0.colWithGap(24)],children:[(0,l.tZ)(E.h4,{level:2,variant:"subheadBig",children:"Report Comment"}),(0,l.BX)(F,{onSubmit:function(e){e.preventDefault(),i?f():p("Please specify a reason to report this comment.")},css:[E.l0.colWithGap(32)],children:[(0,l.tZ)(E.G7,{css:[E.l0.colWithGap(8)],children:(0,l.tZ)(E.B,{placeholder:"Why do you want to report this comment?",value:i,onChange:function(e){return a(e.currentTarget.value)},css:[E.l0.minHeight(64),E.l0.maxHeight(128),{resize:"vertical"}]})}),(0,l.BX)(E.G7,{css:[E.l0.rowWithGap(16),E.l0.justify.end],children:[(0,l.tZ)(E.G7,{children:(0,l.tZ)(E.zx,{type:"button",text:"Cancel",onClick:function(){return t()}})}),(0,l.tZ)(E.G7,{children:(0,l.tZ)(E.zx,{disabled:v,text:v?"Reporting":"Report Comment",type:"submit",colorway:"negative",iconLeft:(0,l.tZ)(A.Z,{})})})]})]})]})}function M(e){var n=e.initialValue,t=e.commentId,r=e.onReply,i=e.onCancel,a=(0,u.useState)(null),c=a[0],d=a[1],m=(0,o.Z)((0,s.cT)({onCompleted:function(e){var n="ReplComment"===e.createReplCommentReply.__typename?e.createReplCommentReply:null;if(n)return(0,_.j)(_.U3.COMMENT_MADE,{source:"spotlight"}),void r(n);var t="UserError"===e.createReplCommentReply.__typename||"UnauthorizedError"===e.createReplCommentReply.__typename?e.createReplCommentReply.message:null;t&&d(t)}}),2),p=m[0],h=m[1];return(0,l.tZ)(X.EQ,{error:c,initialValue:n,onCancel:i,onSubmit:function(e){h.loading||p({variables:{input:{body:e,replCommentId:t}}})}})}function z(e){var n=e.replId,t=e.placeholder,r=e.onComment,i=e.autoFocus,a=void 0!==i&&i,c=e.onCancel,m=void 0===c?function(){}:c,p=(0,u.useState)(!1),h=p[0],f=p[1],v=(0,u.useState)(null),Z=v[0],g=v[1],b=(0,o.Z)((0,s.Qp)({onCompleted:function(e){var n="ReplComment"===e.createReplComment.__typename?e.createReplComment:null;if(n)return(0,_.j)(_.U3.COMMENT_MADE,{source:"spotlight"}),f(!0),void r(n);var t="UserError"===e.createReplComment.__typename||"UnauthorizedError"===e.createReplComment.__typename?e.createReplComment.message:null;t&&g(t)}}),2),C=b[0],y=b[1];return h?(0,l.tZ)(E.E_,{icon:(0,l.tZ)(d.Z,{}),closable:!0,closeAction:function(){m(),f(!1)},colorway:"positive",text:"Comment added"}):(0,l.tZ)(X.EQ,{autoFocus:a,initialValue:"",placeholder:t,hideControls:!0,error:Z,onCancel:function(){m(),g(null)},onSubmit:function(e){y.loading||C({variables:{input:{body:e,replId:n}}})}})}var $={background:g.TV.backgroundDefault,boxShadow:"0 0 0 ".concat(g.TV.space8," ").concat(g.TV.backgroundDefault,",0 0 0 10px ").concat(g.TV.accentPrimaryDimmest),borderRadius:g.TV.borderRadius4,scrollPaddingTop:"100px"};function N(e){var n=e.comment,t=e.onReply,a=e.onDelete,f=e.replyToId,v=e.toggleRepliesButton,Z=e.commentsEnabled,g=(0,H.useRouter)().query,b=g.c,C=Number(b),y=(0,m.Z)().showNotice,w=(0,o.Z)((0,s.g)(),2),R=w[0],x=w[1],G=(0,o.Z)((0,s.cq)({variables:{id:n.id},onCompleted:function(){W(null),a(n)}}),2),k=G[0],S=G[1],B=(0,o.Z)((0,s.oY)({variables:{commentId:n.id,isHidden:!n.isHidden}}),1)[0],P=(0,u.useState)(!1),T=P[0],U=P[1],I=(0,u.useState)(null),D=I[0],W=I[1],_=D===X.nQ.Edit,A=n.user;(0,u.useEffect)((function(){var e;D===X.nQ.Hide||D===X.nQ.Show?B():D===X.nQ.CopyLink&&(null===n||void 0===n||null===(e=n.repl)||void 0===e?void 0:e.url)&&(window.navigator.clipboard.writeText(window.location.protocol+"//"+window.location.host+n.repl.url+"?c="+n.id).then((function(){y("Copied!")})),W(null))}),[D,B]);var F=(0,u.useRef)(null),z=C===n.id;if((0,u.useEffect)((function(){(null===F||void 0===F?void 0:F.current)&&z&&F.current.scrollIntoView({behavior:"smooth"})}),[z,g.c]),!A)return null;var N=n.currentUserPermissions,q=Boolean(N);return(0,l.BX)(E.G7,{css:[E.l0.rowWithGap(8),{":hover .actions":{opacity:1},position:"relative"},z?$:null],children:[(0,l.tZ)(E.G7,{innerRef:F,css:[{position:"absolute",top:"-100px",left:"0"}]}),(0,l.tZ)(X.Yt,{user:A}),(0,l.BX)(E.G7,{css:[E.l0.flex.growAndShrink(1),E.l0.colWithGap(4)],children:[(0,l.BX)(E.G7,{css:[E.l0.align.center,E.l0.rowWithGap(16)],children:[(0,l.tZ)(X.wb,{user:A,timeCreated:n.timeCreated}),n.isHidden?(0,l.tZ)(E.u,{tooltip:"This comment is hidden",children:(0,l.tZ)(V.Z,{size:12,"alt-text":"This comment is hidden"})}):null]}),_?(0,l.tZ)(X.EQ,{buttonText:"Save",buttonIcon:(0,l.tZ)(d.Z,{}),initialValue:n.body,onSubmit:function(e){x.loading||(R({variables:{input:{id:n.id,body:e}},optimisticResponse:{updateReplComment:(0,i.Z)((0,r.Z)({},n),{body:e})}}),W(null))},onCancel:function(){return W(null)}}):(0,l.tZ)("div",{className:c().dynamic([["4174ac2fa2210099",[n.isHidden?"var(--foreground-dimmest)":"default"]]])+" comment-container",children:(0,l.tZ)(p.Z,{children:n.body})}),T?(0,l.tZ)(E.G7,{css:[E.l0.pt(12)],children:(0,l.tZ)(M,{initialValue:"@".concat(A.username," "),commentId:f,onReply:function(e){t(e),U(!1)},onCancel:function(){return U(!1)}})}):(0,l.BX)(E.G7,{css:[E.l0.rowWithGap(8),{marginLeft:-4}],children:[q&&!n.isHidden&&Z?(0,l.tZ)(X.g4,{onClick:function(){return U(!0)}}):null,v]})]}),_?null:(0,l.tZ)(E.G7,{css:[T&&{visibility:"hidden"}],children:(0,l.tZ)(X.pl,{className:"actions",canEdit:Boolean(null===N||void 0===N?void 0:N.edit),canReport:Boolean(null===N||void 0===N?void 0:N.report),canEditSettings:!1,canDelete:Boolean(null===N||void 0===N?void 0:N.delete),onAction:W,canHideComment:Boolean(null===N||void 0===N?void 0:N.canHideComment)&&!n.isHidden,canShowComment:Boolean(null===N||void 0===N?void 0:N.canHideComment)&&Boolean(n.isHidden)})}),(0,l.tZ)(E.u_,{isOpen:D===X.nQ.Delete,onRequestClose:function(){return W(null)},children:(0,l.tZ)(h.Z,{delete:function(){S.loading||k({variables:{id:n.id}})},entityType:"comment",hideModal:function(){return W(null)}})}),(0,l.tZ)(E.u_,{isOpen:D===X.nQ.Report,onRequestClose:function(){return W(null)},children:(0,l.tZ)(L,{commentId:n.id,onDone:function(){return W(null)}})}),(0,l.tZ)(c(),{id:"4174ac2fa2210099",dynamic:[n.isHidden?"var(--foreground-dimmest)":"default"],children:".comment-container.__jsx-style-dynamic-selector .rendered-markdown{color:".concat(n.isHidden?"var(--foreground-dimmest)":"default","}")})]})}function q(e){var n=e.initialTitle,t=e.initialBody,r=e.onSubmit,i=e.onCancel,o=(0,u.useState)(n),a=o[0],c=o[1],s=(0,u.useState)(t),m=s[0],p=s[1],h=(0,X.Ex)(),v=(0,C.H)();return(0,l.BX)(X.l0,{css:[E.l0.colWithGap(8),E.l0.mt(8)],onSubmit:function(e){e.preventDefault(),r({title:a,body:m})},children:[(0,l.BX)(E.G7,{css:[E.l0.colWithGap(16)],children:[(0,l.BX)(E.G7,{css:[E.l0.colWithGap(4)],children:[(0,l.tZ)("label",{htmlFor:v("title"),children:(0,l.tZ)(E.xv,{color:"dimmer",variant:"small",children:"Title"})}),(0,l.tZ)(E.II,{value:a,placeholder:"Give your post a title",onChange:function(e){return c(e.currentTarget.value)},id:v("title")})]}),(0,l.tZ)(f.Z,{onKeyDown:function(e){"Enter"===e.key&&e.metaKey&&r({title:a,body:m})},initialValue:m,onChange:p,userSearch:h,autoFocus:!1,showLabel:!0})]}),(0,l.BX)(E.G7,{css:[E.l0.rowWithGap(8),E.l0.justify.end],children:[(0,l.tZ)(E.zx,{text:"Cancel",onClick:i}),(0,l.tZ)(E.zx,{type:"submit",iconLeft:(0,l.tZ)(d.Z,{}),text:"Save",onClick:function(){},colorway:"primary",disabled:t===m&&n===a})]})]})}function O(e){var n=e.post,t=e.comment,a=e.onReply,d=e.onDelete,f=e.replyToId,v=e.toggleRepliesButton,Z=e.commentsEnabled,g=(0,H.useRouter)().query.c,C=Number(g),y=(0,m.Z)(),w=y.showError,R=y.showNotice,x=(0,o.Z)((0,s.kz)({onError:function(e){return w(e.message)}}),2),G=x[0],k=x[1],S=(0,o.Z)((0,s.g)(),2),B=S[0],P=S[1],T=(0,o.Z)((0,s.cq)({variables:{id:t.id},onCompleted:function(){O(null),d(t)}}),2),U=T[0],I=T[1],D=(0,o.Z)((0,s.oY)({variables:{commentId:t.id,isHidden:!t.isHidden}}),1)[0],_=(0,u.useState)(!1),A=_[0],F=_[1],z=(0,u.useState)(null),N=z[0],O=z[1],j=N===X.nQ.Edit,Q=t.user;(0,u.useEffect)((function(){var e;N===X.nQ.Hide||N===X.nQ.Show?D():N===X.nQ.CopyLink&&(null===t||void 0===t||null===(e=t.repl)||void 0===e?void 0:e.url)&&(window.navigator.clipboard.writeText(window.location.protocol+"//"+window.location.host+t.repl.url+"?c="+t.id).then((function(){R("Copied!")})),O(null))}),[N,D]);var Y=(0,u.useRef)(null),K=C===t.id;if((0,u.useEffect)((function(){(null===Y||void 0===Y?void 0:Y.current)&&K&&(null===Y||void 0===Y||Y.current.scrollIntoView({behavior:"smooth"}))}),[K]),!Q)return null;var J=t.currentUserPermissions,ee=Boolean(J),ne=Boolean(n.canPin||n.canChangeBoard||n.canHide);return(0,l.BX)(E.G7,{css:[E.l0.rowWithGap(8),{":hover .actions":{opacity:1},position:"relative"},K?$:null],children:[(0,l.tZ)(E.G7,{innerRef:Y,css:[{position:"absolute",top:"-100px",left:"0"}]}),(0,l.tZ)(X.Yt,{user:Q}),(0,l.BX)(E.G7,{css:[E.l0.flex.growAndShrink(1),E.l0.colWithGap(4),{"& .rendered-markdown":{backgroundColor:"transparent"}}],children:[(0,l.BX)(E.G7,{css:[E.l0.align.center,E.l0.rowWithGap(16)],children:[(0,l.tZ)(X.wb,{user:Q,timeCreated:t.timeCreated,action:"shared an update"}),t.isHidden?(0,l.tZ)(E.u,{tooltip:"This comment is hidden",children:(0,l.tZ)(V.Z,{size:12,"alt-text":"This comment is hidden"})}):null]}),j?(0,l.tZ)(q,{initialTitle:n.title||"",initialBody:t.body,onSubmit:function(e){var o=e.title,l=e.body;P.loading||k.loading||(G({variables:{input:{id:n.id,title:o}},optimisticResponse:{updatePost:{post:(0,i.Z)((0,r.Z)({},n),{title:o})}}}),B({variables:{input:{id:t.id,body:l}},optimisticResponse:{updateReplComment:(0,i.Z)((0,r.Z)({},t),{body:l})}}),O(null))},onCancel:function(){return O(null)}}):(0,l.BX)(l.HY,{children:[n.title?(0,l.tZ)(E.G7,{children:(0,l.tZ)(b,{title:n.title})}):null,(0,l.tZ)("div",{className:c().dynamic([["4174ac2fa2210099",[t.isHidden?"var(--foreground-dimmest)":"default"]]])+" comment-container",children:(0,l.tZ)(p.Z,{children:t.body})})]}),A?(0,l.tZ)(E.G7,{css:[E.l0.pt(12)],children:(0,l.tZ)(M,{initialValue:"@".concat(Q.username," "),commentId:f,onReply:function(e){a(e),F(!1)},onCancel:function(){return F(!1)}})}):(0,l.BX)(E.G7,{css:[E.l0.rowWithGap(2),{marginLeft:-4}],children:[ee&&Z?(0,l.tZ)(X.g4,{onClick:function(){return F(!0)}}):null,v]})]}),j?null:(0,l.tZ)(E.G7,{css:[A&&{visibility:"hidden"}],children:(0,l.tZ)(X.pl,{className:"actions",canEdit:Boolean(null===J||void 0===J?void 0:J.edit),canReport:n.canReport,canEditSettings:ne,canDelete:Boolean(null===J||void 0===J?void 0:J.delete),onAction:O,canHideComment:Boolean(null===J||void 0===J?void 0:J.canHideComment)&&!t.isHidden,canShowComment:Boolean(null===J||void 0===J?void 0:J.canHideComment)&&Boolean(t.isHidden)})}),(0,l.tZ)(E.u_,{isOpen:N===X.nQ.Delete,onRequestClose:function(){return O(null)},children:(0,l.tZ)(h.Z,{delete:function(){I.loading||U({variables:{id:t.id}})},entityType:"post",hideModal:function(){return O(null)}})}),(0,l.tZ)(E.u_,{isOpen:N===X.nQ.Report,onRequestClose:function(){return O(null)},children:(0,l.tZ)(L,{commentId:t.id,onDone:function(){return O(null)}})}),(0,l.tZ)(E.u_,{isOpen:N===X.nQ.Settings,onRequestClose:function(){return O(null)},children:(0,l.tZ)(W,{postId:n.id})}),(0,l.tZ)(c(),{id:"4174ac2fa2210099",dynamic:[t.isHidden?"var(--foreground-dimmest)":"default"],children:".comment-container.__jsx-style-dynamic-selector .rendered-markdown{color:".concat(t.isHidden?"var(--foreground-dimmest)":"default","}")})]})}function j(e){var n,t=e.comment,r=e.onReply,i=e.onDelete,o=e.commentsEnabled,a=(0,H.useRouter)().query.c,c=Number(a),s=t.replies,d=(0,u.useState)(s.some((function(e){return e.id===c}))),m=d[0],p=d[1],h=s.length,f=h?(0,l.tZ)(X.tE,{onClick:function(){return p((function(e){return!e}))},repliesCount:h,isExpanded:m}):null,v=(null===(n=t.post)||void 0===n?void 0:n.title)?t.post:null;return v?(0,l.BX)(E.Tg,{elevated:!0,css:[E.l0.colWithGap(32),E.l0.p(16),E.l0.borderRadius(8)],children:[(0,l.tZ)(O,{replyToId:t.id,post:v,comment:t,toggleRepliesButton:f,onReply:function(e){p(!0),r(e)},onDelete:i,commentsEnabled:o}),m?(0,l.tZ)(E.G7,{css:[E.l0.colWithGap(32),E.l0.pl(32)],children:s.filter((function(e){var n;return Boolean(null===(n=e.currentUserPermissions)||void 0===n?void 0:n.canHideComment)||!e.isHidden})).map((function(e){return(0,l.tZ)(N,{commentsEnabled:o,comment:e,onReply:r,onDelete:i,replyToId:t.id},e.id)}))}):null]}):(0,l.BX)(E.G7,{css:[E.l0.colWithGap(32)],children:[(0,l.tZ)(N,{commentsEnabled:o,replyToId:t.id,comment:t,toggleRepliesButton:f,onReply:function(e){p(!0),r(e)},onDelete:i}),m&&0!==h?(0,l.tZ)(E.G7,{css:[E.l0.colWithGap(32),E.l0.pl(32)],children:s.filter((function(e){var n;return Boolean(null===e||void 0===e||null===(n=e.currentUserPermissions)||void 0===n?void 0:n.canHideComment)||!e.isHidden})).map((function(e){return(0,l.tZ)(N,{commentsEnabled:o,comment:e,onReply:r,onDelete:i,replyToId:t.id},e.id)}))}):null]})}},90473:function(e,n,t){"use strict";t.d(n,{ex:function(){return m}});var r=t(14251),i=t(32692),o=t(31230),l=t(33607),a=t(67620),c=t(37887);function u(){var e=(0,i.Z)(["\n  query ReplViewComments($replId: String!, $count: Int = 100, $after: String) {\n    currentUser {\n      id\n      username\n    }\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        title\n        url\n        owner {\n          ... on User {\n            id\n            ...ReplViewCommentsUser\n          }\n          ... on Team {\n            id\n          }\n        }\n        multiplayers {\n          id\n          ...ReplViewCommentsUser\n        }\n        currentUserPermissions {\n          changeCommentSettings\n        }\n        commentSettings {\n          id\n          enabled\n        }\n        comments(count: $count, after: $after) {\n          items {\n            id\n            ...ReplViewCommentsReplCommentThread\n          }\n          pageInfo {\n            nextCursor\n          }\n        }\n        ...ReplViewReplCommentsHeaderRepl\n      }\n    }\n  }\n  ","\n  ","\n  ","\n"]);return u=function(){return e},e}var s={},d=(0,o.Ps)(u(),l.P9,l.xB,a.d4);function m(e){var n=(0,r.Z)({},s,e);return c.a(d,n)}},38455:function(e,n,t){"use strict";t.d(n,{Z:function(){return B}});var r=t(34727),i=t(67573),o=t(14251),l=t(52875),a=t(69779),c=t(70655),u=t(35944),s=t(67294),d=t(90473),m=t(81255),p=t(11163),h=t(59641),f=t(58057),v=t(9941),Z=t(67620),g=t(69346),b=t(1144),C=t(93058),y=t(34847),w=t(519);function R(e){var n=e.count;return n>0?(0,u.BX)(g.G,{css:[m.l0.rowWithGap(4),m.l0.align.center],children:[(0,u.tZ)(b.x,{children:n}),(0,u.tZ)(b.x,{color:"dimmer",children:(0,y.Z)("comment",n)})]}):(0,u.tZ)(b.x,{color:"dimmer",multiline:!0,children:"No comments yet"})}function x(e){var n,t=e.repl,r=(0,C.Z)(),i=r.showConfirm,a=r.showError,c=(0,v.Z)((0,Z.k2)({onError:function(e){return a(e.message)},onCompleted:function(e){var n,t=e.setReplCommentSettings;"UserError"!==t.__typename?"Repl"===t.__typename&&i("Comments "+((null===(n=t.commentSettings)||void 0===n?void 0:n.enabled)?"enabled":"disabled")):a(t.message)}}),1),s=c[0],d=!(null===t||void 0===t?void 0:t.commentSettings)||t.commentSettings.enabled;return(0,u.BX)(g.G,{css:[m.l0.rowWithGap(8),m.l0.justify.spaceBetween,m.l0.align.center],children:[d?(0,u.tZ)(R,{count:t.commentCount}):(0,u.tZ)(b.x,{color:"dimmer",multiline:!0,children:"Adding comments has been turned off for this Repl."}),(null===(n=t.currentUserPermissions)||void 0===n?void 0:n.changeCommentSettings)?(0,u.BX)(g.G,{css:[m.l0.rowWithGap(8),m.l0.align.center],children:[(0,u.tZ)(b.x,{children:"Allow comments"}),(0,u.tZ)(w.Z,{isOn:d,onChange:function(){return s({variables:{input:{replId:t.id,enabled:!d}},optimisticResponse:{setReplCommentSettings:(0,l.Z)((0,o.Z)({},t),{commentSettings:{__typename:"ReplCommentSetting",id:-1,enabled:!d}})}})}})]}):null]})}var G=t(57249),k=t(54917),S=t(77365);function B(e){var n,t,v,Z=e.replId,g=(0,p.useRouter)().query,b=(0,d.ex)({ssr:!1,variables:{replId:Z,after:g.after?g.after.toString():void 0,count:25}}),C=b.data,y=b.loading,w=b.fetchMore,R=b.refetch,B="Repl"===(null===C||void 0===C?void 0:C.repl.__typename)?C.repl:null,P=!(!B||"User"!==(null===(n=B.owner)||void 0===n?void 0:n.__typename))&&(null===B||void 0===B?void 0:B.owner.isBlockingCurrentUser),T=null===C||void 0===C?void 0:C.currentUser,U=null===B||void 0===B?void 0:B.comments.pageInfo,E=(0,s.useMemo)((function(){return B&&T?function(e){var n,t=e.repl,r=e.currentUser,o="User"===(null===(n=t.owner)||void 0===n?void 0:n.__typename)?(0,i.Z)({},t.owner.username,t.owner):{};return t.comments.items.forEach((function(e){e.user&&(o[e.user.username]=e.user),e.replies&&e.replies.forEach((function(e){(null===e||void 0===e?void 0:e.user)&&(o[e.user.username]=e.user)}))})),t.multiplayers.forEach((function(e){o[e.username]=e})),r&&delete o[r.username],Object.values(o)}({repl:B,currentUser:T}):[]}),[B,T]),I=!(null===B||void 0===B?void 0:B.commentSettings)||B.commentSettings.enabled,D=(v=E,function(){var e=(0,r.Z)((function(e){var n,t;return(0,c.__generator)(this,(function(r){switch(r.label){case 0:return n=null===e||void 0===e?void 0:e.toLowerCase(),(t=v.filter((function(e){return!n||e.username.toLowerCase().includes(n)}))).length<5&&e?[4,(0,G.S)(e)]:[3,2];case 1:r.sent().forEach((function(e){t.some((function(n){return n.username===e.username}))||t.push(e)})),r.label=2;case 2:return[2,t.slice(0,5)]}}))}));return function(n){return e.apply(this,arguments)}}());return(0,u.BX)(h.G7,{css:[m.l0.colWithGap(16)],children:[y?(0,u.BX)(h.G7,{css:[m.l0.rowWithGap(4),m.l0.align.center],children:[(0,u.tZ)(S.Z,{}),(0,u.tZ)(h.xv,{children:"Loading comments..."})]}):null,B&&!P?(0,u.BX)(u.HY,{children:[(0,u.BX)(k.Sh,{value:D,children:[(0,u.tZ)(x,{repl:B}),T&&I?(0,u.tZ)(f.H,{onComment:function(){return R()},replId:B.id,placeholder:B?"Say something about ".concat(B.title):""}):null,null===(t=B.comments)||void 0===t?void 0:t.items.filter((function(e){var n;return Boolean(null===e||void 0===e||null===(n=e.currentUserPermissions)||void 0===n?void 0:n.canHideComment)||!e.isHidden})).map((function(e){return(0,u.tZ)(f.x,{commentsEnabled:I,comment:e,onReply:function(){return R()},onDelete:function(){return R()}},e.id)}))]}),(null===U||void 0===U?void 0:U.nextCursor)&&B?(0,u.tZ)(h.G7,{children:(0,u.tZ)("a",{href:B.url+"?after="+U.nextCursor,onClick:function(e){e.preventDefault(),y||w({variables:{after:U.nextCursor},updateQuery:function(e,n){if(!n||!n.fetchMoreResult)return e;var t="Repl"===e.repl.__typename?e.repl:null;if(!t)return e;var r=n.fetchMoreResult,i="Repl"===r.repl.__typename?r.repl:null;return i?(0,l.Z)((0,o.Z)({},r),{repl:(0,l.Z)((0,o.Z)({},i),{comments:(0,l.Z)((0,o.Z)({},i.comments),{items:(0,a.Z)(t.comments.items).concat((0,a.Z)(i.comments.items))})})}):e}})},children:y?"Loading...":"Load more comments"})}):null]}):null,B&&P?(0,u.BX)(h.G7,{css:[m.l0.colWithGap(24),m.l0.align.center,m.l0.textAlign.center],children:[(0,u.tZ)(h.xv,{variant:"subheadBig",multiline:!0,children:"You\u2019re blocked"}),(0,u.BX)(h.xv,{children:["You can\u2019t follow, comment or see"," ",B.owner&&"User"===B.owner.__typename?B.owner.username:"user","\u2019s Repls on their profile."]})]}):null]})}},67620:function(e,n,t){"use strict";t.d(n,{d4:function(){return s},k2:function(){return m}});var r=t(14251),i=t(32692),o=t(31230),l=t(50319);function a(){var e=(0,i.Z)(["\n  fragment ReplViewReplCommentsHeaderRepl on Repl {\n    id\n    commentCount\n    currentUserPermissions {\n      changeCommentSettings\n    }\n    commentSettings {\n      id\n      enabled\n    }\n  }\n"]);return a=function(){return e},e}function c(){var e=(0,i.Z)(["\n  mutation ReplViewReplCommentsHeaderSetReplCommentSettings(\n    $input: SetReplCommentSettingsInput!\n  ) {\n    setReplCommentSettings(input: $input) {\n      ... on Repl {\n        id\n        ...ReplViewReplCommentsHeaderRepl\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return c=function(){return e},e}var u={},s=(0,o.Ps)(a()),d=(0,o.Ps)(c(),s);function m(e){var n=(0,r.Z)({},u,e);return l.D(d,n)}},49483:function(e,n,t){"use strict";t.d(n,{W:function(){return h},Z:function(){return f}});var r=t(35944),i=t(67294),o=t(53427),l=t(64080),a=t(77365),c=t(60459),u=t(69346),s=t(93160),d=t(49619),m=t(81255),p=t(62722);function h(e){var n=(0,i.useState)(null),t=n[0],r=n[1],o=(0,i.useState)(null),l=o[0],a=o[1],u=(0,c.Z)({onUpload:function(n){var t=n.url;r(null),e(t)},onUploadPreview:function(e){var n=e.dataUrl;a(null),r(n)},onError:function(e){r(null),a(e.message)}}),s=(0,i.useCallback)((function(){return a(null)}),[]);return{uploadImage:u.uploadImage,error:l,clearError:s,previewUrl:t}}function f(e){var n=(0,i.useRef)(null),t=e.size||48;return(0,r.BX)(u.G,{css:[m.l0.position.relative,{cursor:"pointer","&:hover .surface":{opacity:.8},"&:hover .icon":{opacity:1}}],onClick:function(){var e;null===(e=n.current)||void 0===e||e.click()},"aria-label":e.value?"Change icon":"Upload an icon","data-microtip-position":"right",role:"tooltip",children:[e.value?(0,r.BX)(r.HY,{children:[(0,r.tZ)(o.ZP,{iconUrl:e.value,size:e.size,alt:"icon"}),(0,r.tZ)(s.T,{className:"surface",elevated:!0,css:[m.l0.borderRadius(8),m.l0.coverContainer,{opacity:e.isUploading?.8:0}]}),(0,r.tZ)(u.G,{className:"icon",css:[m.l0.coverContainer,m.l0.center,m.l0.color.accentPrimaryDefault,{overflow:"hidden",opacity:e.isUploading?1:0}],children:e.isUploading?(0,r.tZ)(a.Z,{}):(0,r.tZ)(l.Z,{})})]}):(0,r.tZ)(u.G,{css:[m.l0.center,m.l0.width(t),m.l0.height(t),m.l0.borderRadius(8),m.l0.color.foregroundDimmer,{border:"1px dashed "+m.TV.outlineDefault,"&:hover":{color:m.TV.accentPrimaryDefault,borderColor:m.TV.accentPrimaryDefault}}],children:(0,r.tZ)(d.Z,{})}),(0,r.tZ)("input",{css:[[m.l0.coverContainer,{opacity:0,zIndex:-1}]],ref:n,accept:p.W9.join(","),type:"file",onChange:function(n){var t=n.target,r=t.validity,i=t.files;if(r.valid){var o=i?i[0]:null;o&&e.onUpload(o)}}})]})}},25958:function(e,n,t){"use strict";t.d(n,{Z:function(){return f}});var r=t(14251),i=t(52875),o=t(9941),l=t(35944),a=(t(67294),t(48293)),c=t(59641),u=t(88961),s=t(2885),d=t(49483),m=t(53427),p=t(87251),h=t(7657);function f(e){var n=e.repl,t=e.iconEditable,f=e.canModerate,v=e.hideActions,Z=e.small,g=(0,o.Z)((0,a.cu)(),1)[0],b=(0,d.W)((function(e){return g({variables:{input:{id:n.id,iconUrl:e}},optimisticResponse:{updateRepl:{__typename:"UpdateReplPayload",repl:(0,i.Z)((0,r.Z)({},n),{iconUrl:e})}}})}));return(0,l.BX)(c.G7,{css:[c.l0.colWithGap(8)],children:[(0,l.BX)(c.G7,{css:[c.l0.rowWithGap(8),c.l0.align.center],children:[t?null:(0,l.tZ)(m.ZP,{iconUrl:n.iconUrl,alt:"",size:32}),t?(0,l.tZ)(d.Z,{size:32,value:b.previewUrl||n.iconUrl,onUpload:function(e){return b.uploadImage(e,h.N.ReplIcon)},isUploading:Boolean(b.previewUrl)}):null,(0,l.tZ)(c.R_,{children:(0,l.tZ)(c.h4,{variant:Z?"headerDefault":"headerBig",level:1,css:[c.l0.flex.growAndShrink(1),{wordBreak:"break-all"}],children:n.title})}),!v&&(0,l.tZ)(s.Z,{repl:n,canModerate:f,source:"coverPage"})]}),b.error?(0,l.tZ)(c.G7,{css:[c.l0.align.start],children:(0,l.tZ)(p.E,{icon:(0,l.tZ)(u.Z,{}),colorway:"negative",text:b.error,closable:!0,closeAction:b.clearError})}):null]})}},58086:function(e,n,t){"use strict";t.d(n,{p:function(){return r}});var r=1e3},16496:function(e){!function(){var n=["direction","boxSizing","width","height","overflowX","overflowY","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderStyle","paddingTop","paddingRight","paddingBottom","paddingLeft","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","lineHeight","fontFamily","textAlign","textTransform","textIndent","textDecoration","letterSpacing","wordSpacing","tabSize","MozTabSize"],t="undefined"!==typeof window,r=t&&null!=window.mozInnerScreenX;function i(e,i,o){if(!t)throw new Error("textarea-caret-position#getCaretCoordinates should only be called in a browser");var l=o&&o.debug||!1;if(l){var a=document.querySelector("#input-textarea-caret-position-mirror-div");a&&a.parentNode.removeChild(a)}var c=document.createElement("div");c.id="input-textarea-caret-position-mirror-div",document.body.appendChild(c);var u=c.style,s=window.getComputedStyle?window.getComputedStyle(e):e.currentStyle,d="INPUT"===e.nodeName;u.whiteSpace="pre-wrap",d||(u.wordWrap="break-word"),u.position="absolute",l||(u.visibility="hidden"),n.forEach((function(e){d&&"lineHeight"===e?u.lineHeight=s.height:u[e]=s[e]})),r?e.scrollHeight>parseInt(s.height)&&(u.overflowY="scroll"):u.overflow="hidden",c.textContent=e.value.substring(0,i),d&&(c.textContent=c.textContent.replace(/\s/g,"\xa0"));var m=document.createElement("span");m.textContent=e.value.substring(i)||".",c.appendChild(m);var p={top:m.offsetTop+parseInt(s.borderTopWidth),left:m.offsetLeft+parseInt(s.borderLeftWidth),height:parseInt(s.lineHeight)};return l?m.style.backgroundColor="#aaa":document.body.removeChild(c),p}"undefined"!=typeof e.exports?e.exports=i:t&&(window.getCaretCoordinates=i)}()}}]);
//# sourceMappingURL=3064-238b518175660770.js.map