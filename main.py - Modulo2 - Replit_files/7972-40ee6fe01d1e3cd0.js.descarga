"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7972],{38388:function(e,n,t){t.d(n,{M:function(){return l}});var r=t(32692);function i(){var e=(0,r.Z)(["\n  fragment PostsFeedNavTag on Tag {\n    id\n    isOfficial\n  }\n"]);return i=function(){return e},e}var l=(0,t(31230).Ps)(i())},64405:function(e,n,t){t.d(n,{b:function(){return a}});var r=t(32692),i=t(31230),l=t(16092);function o(){var e=(0,r.Z)(["\n  fragment ReplPostRecentCommentUser on User {\n    id\n    username\n    image\n    ...UserLinkUser\n  }\n  ","\n"]);return o=function(){return e},e}var a=(0,i.Ps)(o(),l._)},47174:function(e,n,t){t.d(n,{n:function(){return c}});var r=t(32692),i=t(31230),l=t(17674),o=t(35055),a=t(21767),s=t(38388);function u(){var e=(0,r.Z)(["\n  fragment ReplPostReplCardRepl on Repl {\n    id\n    iconUrl\n    description(plainText: true)\n    ...ReplPostReplInfoRepl\n    ...ReplStatsRepl\n    ...ReplLinkRepl\n    tags {\n      id\n      ...PostsFeedNavTag\n    }\n    owner {\n      ... on Team {\n        id\n        username\n        url\n        image\n      }\n      ... on User {\n        id\n        username\n        url\n        image\n      }\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return u=function(){return e},e}var c=(0,i.Ps)(u(),l.Zs,o.T,a.Y,s.M)},17674:function(e,n,t){t.d(n,{Gz:function(){return g},U5:function(){return Z},Zs:function(){return m},f_:function(){return w},rP:function(){return b}});var r=t(32692),i=t(31230),l=t(6565),o=t(58121),a=t(32399),s=t(35055),u=t(38388),c=t(64405);function d(){var e=(0,r.Z)(["\n  fragment ReplPostReplInfoRepl on Repl {\n    id\n    title\n    description(plainText: true)\n    imageUrl\n    iconUrl\n    templateInfo {\n      label\n      iconUrl\n    }\n  }\n"]);return d=function(){return e},e}function p(){var e=(0,r.Z)(["\n  fragment ReplPostRepl on Repl {\n    id\n    ...ReplPostReplInfoRepl\n    ...LikeButtonRepl\n    ...ReplStatsRepl\n    tags {\n      id\n      ...PostsFeedNavTag\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return p=function(){return e},e}function f(){var e=(0,r.Z)(["\n  fragment ReplPostReplComment on ReplComment {\n    id\n    body\n    timeCreated\n    user {\n      id\n      ...ReplPostRecentCommentUser\n    }\n  }\n  ","\n"]);return f=function(){return e},e}function h(){var e=(0,r.Z)(["\n  fragment ReplPostPost on Post {\n    id\n    title\n    timeCreated\n    isPinned\n    isAnnouncement\n    ...ReplViewPostActionPermissions\n    replComment {\n      id\n      body(removeMarkdown: true)\n    }\n    repl {\n      id\n      ...ReplViewReplActionsPermissions\n      ...ReplPostRepl\n    }\n    user {\n      id\n      ...ReplPostUserPostUser\n    }\n    recentReplComments {\n      id\n      ...ReplPostReplComment\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return h=function(){return e},e}function v(){var e=(0,r.Z)(["\n  fragment ReplPostCurrentUser on CurrentUser {\n    id\n    isModerator: hasRole(role: MODERATOR)\n    isAdmin: hasRole(role: ADMIN)\n    ...LikeButtonCurrentUser\n  }\n  ","\n"]);return v=function(){return e},e}var m=(0,i.Ps)(d()),w=(0,i.Ps)(p(),m,a.R7,s.T,u.M),g=(0,i.Ps)(f(),c.b),Z=(0,i.Ps)(h(),l.K4,l.jN,w,o.n,g),b=(0,i.Ps)(v(),a.wO)},35055:function(e,n,t){t.d(n,{T:function(){return l}});var r=t(32692);function i(){var e=(0,r.Z)(["\n  fragment ReplStatsRepl on Repl {\n    id\n    likeCount\n    runCount\n    commentCount\n  }\n"]);return i=function(){return e},e}var l=(0,t(31230).Ps)(i())},58121:function(e,n,t){t.d(n,{n:function(){return a}});var r=t(32692),i=t(31230),l=t(16092);function o(){var e=(0,r.Z)(["\n  fragment ReplPostUserPostUser on User {\n    id\n    username\n    image\n    ...UserLinkUser\n  }\n  ","\n"]);return o=function(){return e},e}var a=(0,i.Ps)(o(),l._)},49197:function(e,n,t){t.d(n,{G:function(){return b},Z:function(){return R}});var r=t(14251),i=t(52875),l=t(9941),o=t(35944),a=(t(67294),t(70917)),s=t(32399),u=t(69346),c=t(27843),d=t(81255),p=t(60977),f=t(44044),h=t(29163),v=t(59641),m=t(93160),w=t(81456),g=t(1144),Z=t(49412),b=(0,a.iv)([f.gU.filled,d.l0.p(8),{width:"auto",height:"auto"}]);function R(e){var n=e.repl,t=e.currentUser,a=e.surface,f=void 0===a||a,R=(0,l.Z)((0,s.lU)(),2),y=R[0],k=R[1].loading,x=(0,o.BX)(o.HY,{children:[(null===t||void 0===t?void 0:t.isVerified)&&(0,o.tZ)(v.zx,{css:[f&&b],disabled:k,onClick:function(){n.currentUserDidLike||(0,p.j)(p.U3.REACTED_TO_REPL,{replView:"https://replit.com"+n.url,reaction:"heart",isReplTalk:!1,item:"repl",isCommunityPublish:n.wasPosted,isAppPublish:n.wasPublished}),y({variables:{input:{replId:n.id}},optimisticResponse:{toggleReplLike:(0,i.Z)((0,r.Z)({},n),{likeCount:Math.max(0,n.likeCount+(n.currentUserDidLike?-1:1)),currentUserDidLike:!n.currentUserDidLike})}})},iconLeft:n.currentUserDidLike?(0,o.tZ)(Z.Z,{}):(0,o.tZ)(c.Z,{}),text:n.likeCount>0?(0,w.d)(n.likeCount):"Like"}),t&&!t.isVerified&&(0,o.BX)(u.G,{css:[d.l0.flex.row,d.l0.align.center,d.l0.backgroundColor.backgroundHigher,d.l0.borderRadius(8),d.l0.pr(8)],children:[(0,o.tZ)(h.h,{alt:"Verify your email to like",css:f&&b,disabled:!0,children:(0,o.tZ)(c.Z,{})}),(0,o.tZ)(g.x,{color:"dimmer",children:(0,w.d)(n.likeCount)})]}),!t&&(0,o.BX)(u.G,{css:[d.l0.flex.row,d.l0.align.center,d.l0.backgroundColor.backgroundHigher,d.l0.borderRadius(8),d.l0.pr(8)],children:[(0,o.tZ)(h.h,{alt:"Log in to like",css:f&&b,disabled:!0,children:(0,o.tZ)(c.Z,{})}),(0,o.tZ)(g.x,{color:"dimmer",children:(0,w.d)(n.likeCount)})]})]});return f?(0,o.tZ)(m.T,{background:"default",css:[d.l0.borderRadius(8)],children:x}):(0,o.tZ)(u.G,{children:x})}},48293:function(e,n,t){t.d(n,{cu:function(){return f},rv:function(){return d}});var r=t(14251),i=t(32692),l=t(31230),o=t(6565),a=t(50319);function s(){var e=(0,i.Z)(["\n  fragment ReplViewReplTitleRepl on Repl {\n    id\n    title\n    iconUrl\n    templateInfo {\n      iconUrl\n    }\n    owner {\n      ... on User {\n        id\n        username\n      }\n      ... on Team {\n        id\n        username\n      }\n    }\n    ...ReplViewReplActionsPermissions\n  }\n  ","\n"]);return s=function(){return e},e}function u(){var e=(0,i.Z)(["\n  mutation ReplViewReplTitleUpdateRepl($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        ...ReplViewReplTitleRepl\n      }\n    }\n  }\n  ","\n"]);return u=function(){return e},e}var c={},d=(0,l.Ps)(s(),o.jN),p=(0,l.Ps)(u(),d);function f(e){var n=(0,r.Z)({},c,e);return a.D(p,n)}},76876:function(e,n,t){t.d(n,{Q:function(){return d},r:function(){return p}});var r=t(32692),i=t(31230),l=t(29359),o=t(90610),a=t(32399),s=t(9523);function u(){var e=(0,r.Z)(["\n  fragment ReplViewReplViewerRepl on Repl {\n    id\n    publishedAs\n    runCount\n    publicForkCount\n    releasesForkCount\n    prodUrl: hostedUrl(dotty: true)\n    isProject\n    nextPagePathname\n    lang {\n      id\n      header\n      displayName\n    }\n    ...ReplViewerOutputOverlayRepl\n    ...UseReplViewerRepl\n    ...LikeButtonRepl\n  }\n  ","\n  ","\n  ","\n"]);return u=function(){return e},e}function c(){var e=(0,r.Z)(["\n  fragment ReplViewReplViewerCurrentUser on CurrentUser {\n    id\n    ...LikeButtonCurrentUser\n    ...CrosisContextCurrentUser\n  }\n  ","\n  ","\n"]);return c=function(){return e},e}var d=(0,i.Ps)(u(),l.sI,o.gh,a.R7),p=(0,i.Ps)(c(),a.wO,s.D)},94361:function(e,n,t){t.d(n,{y6:function(){return Ye},DZ:function(){return Xe},ZP:function(){return Je}});var r=t(67573),i=t(14251),l=t(9941),o=t(35944),a=t(67294),s=t(54969),u=t(93160),c=t(81255),d=t(69346),p=t(61756),f=t(51995),h=t(1144),v=t(41307),m=t(91759),w=t(57746),g=t(24337),Z=t(60357),b=t.n(Z),R=t(73604),y=t(63872),k=t(93449),x=t(57263),C=x.j.tabletMin,P=t(34727),U=t(70655),E=t(28860),S=t.n(E),T=t(85861),F=function(){var e=(0,P.Z)((function(){return(0,U.__generator)(this,(function(e){return[2,Promise.all([t.e(2738),t.e(4474)]).then(t.t.bind(t,74474,23)).then((function(e){return e.Excalidraw}))]}))}));return function(){return e.apply(this,arguments)}}(),N=S()(F,{ssr:!1,loading:function(){return null}});function I(e){var n=e.contents,t=e.key,r={scrollToContent:!0};try{r=(0,i.Z)({},r,JSON.parse(n||"{}"))}catch(a){}var l=(0,T.Fg)().isDarkColorScheme;return(0,o.BX)("div",{className:"jsx-a3a0d25f100f396c excalidraw-repl-view-wrapper",children:[(0,o.tZ)(N,{viewModeEnabled:!0,initialData:r,theme:l?"dark":"light"}),(0,o.tZ)(b(),{id:"a3a0d25f100f396c",children:".excalidraw-repl-view-wrapper{cursor:all-scroll;height:100%;width:100%}.excalidraw-repl-view-wrapper .excalidraw .App-toolbar-content{display:none}"})]},t)}var D=t(34837),L=t.n(D),V=t(28497);function _(e){var n=e.contents,t=e.isKbmsprite,r=a.useRef(null);return a.useEffect((function(){var e=r.current;if(e){e.width=e.offsetWidth,e.height=e.offsetHeight;var i=JSON.parse(n),l=L()({canvas:e,data:t?(0,V.C)(i):i,readonly:!0});return function(){l.cleanUp()}}}),[n,t]),(0,o.tZ)("canvas",{ref:r,className:"jsx-93826966b3fae22 pedit",children:(0,o.tZ)(b(),{id:"93826966b3fae22",children:".pedit.jsx-93826966b3fae22{width:100%;height:100%}"})})}var A=t(54568),O=t(68928),B=t(78244),G=t(77402),j=t(66681);function M(e){var n=e.fs,t=e.deeplink,r=null===t||void 0===t?void 0:t.path,i=(0,A.Z)({fs:n,path:r});return(0,o.BX)("div",{className:b().dynamic([["bfde0a756867257d",[C]]])+" file-viewer",children:[(0,o.BX)("div",{className:b().dynamic([["bfde0a756867257d",[C]]])+" content",children:[i.result&&i.result.fileViewerType===G.D.Media?(0,o.tZ)("div",{className:b().dynamic([["bfde0a756867257d",[C]]])+" media",children:(0,o.tZ)(y.A,{content:k.Z.from(i.result.content).toString("base64"),mime:(0,R.yC)(i.result.path)})}):null,i.isLoading&&i.fileViewerType===G.D.Media?(0,o.tZ)("div",{className:b().dynamic([["bfde0a756867257d",[C]]])+" file-loader",children:(0,o.tZ)(O.Z,{})}):null,i.result&&i.result.fileViewerType===G.D.Markdown?(0,o.tZ)("div",{className:b().dynamic([["bfde0a756867257d",[C]]])+" markdown",children:(0,o.tZ)(j.Z,{path:i.result.path,source:i.result.content.toString(),fs:n,sourcePos:!1})}):null,i.isLoading&&i.fileViewerType===G.D.Markdown?(0,o.tZ)("div",{className:b().dynamic([["bfde0a756867257d",[C]]])+" file-loader",children:(0,o.tZ)(O.Z,{})}):null,i.result&&i.result.fileViewerType===G.D.Draw?(0,o.tZ)("div",{className:b().dynamic([["bfde0a756867257d",[C]]])+" draw",children:(0,o.tZ)(I,{contents:i.result.content.toString()},i.result.path)}):null,i.isLoading&&i.fileViewerType===G.D.Draw?(0,o.tZ)("div",{className:b().dynamic([["bfde0a756867257d",[C]]])+" file-loader",children:(0,o.tZ)(O.Z,{})}):null,i.result&&i.result.fileViewerType===G.D.Code?(0,o.tZ)(B.ZP,{filePath:i.result.path,code:i.result.content.toString(),fontSize:14}):null,i.isLoading&&i.fileViewerType===G.D.Code?(0,o.tZ)("div",{className:b().dynamic([["bfde0a756867257d",[C]]])+" file-loader",children:(0,o.tZ)(O.Z,{})}):null,i.result&&i.result.fileViewerType===G.D.Pedit?(0,o.tZ)(_,{contents:i.result.content.toString(),isKbmsprite:!!(null===r||void 0===r?void 0:r.endsWith(".kbmsprite"))}):null,!i.isLoading&&i.error?(0,o.tZ)("div",{className:b().dynamic([["bfde0a756867257d",[C]]])+" error",children:(0,o.BX)("div",{className:b().dynamic([["bfde0a756867257d",[C]]]),children:["Could not load ",i.error.path]})}):null]}),(0,o.tZ)(b(),{id:"bfde0a756867257d",dynamic:[C],children:".file-viewer.__jsx-style-dynamic-selector{position:absolute;top:0;left:0;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;align:stretch;height:100%;width:100%}.markdown.__jsx-style-dynamic-selector{word-break:break-word;max-width:840px;margin:0 auto;padding:var(--space-16);overflow-y:auto;position:relative;height:100%}.draw.__jsx-style-dynamic-selector{height:100%;width:100%}.file-tree.__jsx-style-dynamic-selector{background-color:var(--background-root);-webkit-border-radius:var(--border-radius-4);-moz-border-radius:var(--border-radius-4);border-radius:var(--border-radius-4);overflow:auto;display:none}.content.__jsx-style-dynamic-selector{-webkit-box-flex:1;-webkit-flex:1 1 auto;-moz-box-flex:1;-ms-flex:1 1 auto;flex:1 1 auto;width:100%;height:100%;overflow-y:auto;position:relative}.file-loader.__jsx-style-dynamic-selector{width:100%;padding-top:var(--space-8);padding-left:var(--space-8);position:absolute;top:0;left:0;z-index:100;opacity:0;-webkit-animation:fadeIn ease 0s forwards;-moz-animation:fadeIn ease 0s forwards;-o-animation:fadeIn ease 0s forwards;animation:fadeIn ease 0s forwards;-webkit-animation-delay:200ms;-moz-animation-delay:200ms;-o-animation-delay:200ms;animation-delay:200ms}.media.__jsx-style-dynamic-selector,.error.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%}@-webkit-keyframes fadeIn{0%{opacity:0}100%{opacity:1}}@-moz-keyframes fadeIn{0%{opacity:0}100%{opacity:1}}@-o-keyframes fadeIn{0%{opacity:0}100%{opacity:1}}@keyframes fadeIn{0%{opacity:0}100%{opacity:1}}@media screen and (min-width:".concat(C,"px){.file-tree.__jsx-style-dynamic-selector{display:block;width:260px}}")})]})}var z=t(48920),X=t(65967),H=t(39348),W=t(81456),q=t(89224),$=t(83569),K=t(6292),Y=t(92098),J=t(70917),Q=t(46609),ee=t(38935),ne=t(12365),te=t(83043),re=t(8288),ie=t(84810),le=t(15519);function oe(e){return(0,o.tZ)(ne.D,{children:(0,o.tZ)(ae,(0,i.Z)({},e))})}function ae(e){var n=e.activePath,t=e.fs,r=e.language,i=e.onNodeClick,s=(0,l.Z)(a.useState(!1),2),u=s[0],p=s[1],f=function(e){var n=e.language,t=e.areHiddenFilesVisible;return a.useCallback((function(e){return!!(0,re.MF)(e)||!t&&((0,re.uC)(e)||(0,ie.C)(e)||(0,re.yb)(e,n))}),[n,t])}({language:r,areHiddenFilesVisible:u}),v=le.Z.getMainFileName(r),m=a.useCallback((function(e,n){return(0,R.x$)(e,n,v)}),[v]);return(0,ne.S)({flags:{flagFiletreeMultiselect:!1},readOnly:!0,activeFile:n,watchDir:t.watchDir,openFile:function(e){return i({path:e,type:q.Tv.File})},shouldHideFile:f,sortNode:m,onError:function(){},onAction:function(){}}),(0,te.Yc)(),(0,o.tZ)(Q.i.Provider,{value:{fs:t,uploadFiles:function(){},pendingUploads:[],duplicateFile:(0,P.Z)((function(){return(0,U.__generator)(this,(function(e){return[2]}))}))},children:(0,o.tZ)(Y.Z,{children:(0,o.BX)(d.G,{css:[c.l0.flex.column,c.l0.p(8),(0,J.iv)({overflow:"auto",height:"100%"})],children:[(0,o.BX)(d.G,{css:[c.l0.rowWithGap(4),c.l0.p(8),c.l0.justify.spaceBetween],children:[(0,o.tZ)(h.h,{level:3,variant:"subheadDefault",children:"Files"}),(0,o.tZ)(ee.ZP,{actions:[u?ee.st.HideHiddenFiles:ee.st.ShowHiddenFiles],onAction:function(e){switch(e.type){case ee.st.ShowHiddenFiles.type:return void p(!0);case ee.st.HideHiddenFiles.type:p(!1)}}})]}),(0,o.tZ)(K.Z,{siblings:[],readOnly:!0,path:$.Ql})]})})})}var se=t(46702),ue=t(96189),ce=t(49197),de=t(26451),pe=t(29163),fe=t(60977),he=t(35621),ve=t(89295),me=t(94860),we=t(93058);function ge(){return Boolean(function(){var e=document;return e.fullscreenElement||e.webkitFullscreenElement||e.mozFullscreenElement}())}var Ze=t(62794),be=t(3083),Re=t(83241),ye=t(21131),ke=t(44044),xe=t(59641),Ce=t(32692),Pe=t(31230),Ue=t(92600),Ee=t(37887);function Se(){var e=(0,Ce.Z)(["\n  query TotalTipsRepl($id: String!) {\n    repl(id: $id) {\n      ... on Repl {\n        id\n        user {\n          ... on User {\n            id\n            username\n            ...IsTippingAvailableForRecipient\n          }\n        }\n        totalCyclesTips\n      }\n    }\n    currentUser {\n      id\n      ...IsTippingAvailableForSender\n    }\n  }\n  ","\n  ","\n"]);return Se=function(){return e},e}var Te={},Fe=(0,Pe.Ps)(Se(),Ue.R1,Ue.rd);var Ne=t(38164),Ie=t(48474),De=t(85485);function Le(e){var n,t=e.repl,l=function(e){var n=(0,i.Z)({},Te,e);return Ee.a(Fe,n)}({variables:{id:t.id}}),a=l.data;if(l.loading)return null;var s="CurrentUser"===(null===a||void 0===a||null===(n=a.currentUser)||void 0===n?void 0:n.__typename)?a.currentUser:null,d="Repl"===(null===a||void 0===a?void 0:a.repl.__typename)?a.repl:null;return(0,Ie.L)({replOwner:null===d||void 0===d?void 0:d.user,currentUser:s})&&d?(0,o.tZ)(u.T,{background:"default",css:[c.l0.borderRadius(8),(0,r.Z)({},(0,De.EM)("mobileMax"),[c.l0.display.none])],children:(0,o.tZ)(xe.zx,{css:[ke.gU.filled,c.l0.p(8),{width:"auto",height:"auto"}],onClick:function(){(0,fe.j)(fe.U3.TIP_USED,{action:"total-tips-button-clicked",repl:t.url,item:"repl"});var e=document.getElementById("tips");e&&e.scrollIntoView({behavior:"smooth",block:"center"})},iconLeft:(0,o.tZ)(Ne.Z,{}),text:"".concat((0,W.d)(d.totalCyclesTips||0)," tips")})}):null}var Ve=t(23384),_e=t(11163),Ae=t(15902),Oe=t(10693),Be=t(88710),Ge=t(25977),je="1px solid "+c.TV.outlineDimmer;function Me(e){var n=e.children;return(0,o.tZ)(d.G,{tag:"header",css:[{borderBottom:je},c.l0.p(8),c.l0.rowWithGap(8),c.l0.align.center],children:n})}var ze=d.K.a;function Xe(e){var n=e.runCount,t=e.runState,r=e.run,l=e.stop,a=e.publishedAs,u=t===z.A.RUNNING?(0,o.tZ)(X.Z,{fill:"currentColor"}):(0,o.tZ)(f.Z,{fill:"currentColor"}),h=a===s.O2.Template?"Run example":"Run";return t===z.A.RUNNING&&(h="Stop"),(0,o.tZ)(d.G,{css:[c.l0.rowWithGap(8),c.l0.align.center],children:(0,o.tZ)(p.zx,(0,i.Z)({colorway:t===z.A.RUNNING||a===s.O2.Template?void 0:"positive",onClick:function(){switch(t){case z.A.IDLE:case z.A.OFFLINE:r();break;case z.A.RUNNING:l()}},iconLeft:u,text:h},n>0&&{secondaryText:(0,W.d)(n)}))})}function He(e){var n=e.borderless,t=e.innerRef,r=e.children;return(0,o.tZ)(u.T,{elevated:!n,css:n?[]:[{border:je},c.l0.borderRadius(8)],innerRef:t,children:r})}function We(e){var n=e.src;return(0,o.tZ)(d.G,{css:[c.l0.width("100%"),c.l0.height("100%")],children:(0,o.tZ)(d.G,(0,i.Z)({tag:"iframe",src:n,css:[c.l0.width("100%"),c.l0.height("100%"),{borderBottomRightRadius:8,borderBottomLeftRadius:8,position:"absolute",backgroundColor:"white",display:"block",border:"none",top:0,left:0}]},Re.Z))})}function qe(e){var n=e.fs,t=e.isOpen,r=e.language,i=e.activePath,l=e.onNodeClick;return(0,o.tZ)(d.G,{css:[{zIndex:101,position:"absolute",top:0,left:0,height:"100%",overflow:"hidden",borderBottomLeftRadius:8},!t&&{pointerEvents:"none"}],children:(0,o.tZ)(u.T,{elevated:!0,background:"root",css:[{height:"100%",width:200,transition:"transform ".concat(160,"ms"),transform:"translateX(".concat(t?0:-200,"px)")}],children:(0,o.tZ)(oe,{fs:n,language:r,activePath:i,onNodeClick:l})})})}var $e=d.K.div;function Ke(e){var n=e.repl,t=e.currentUser,i=e.enableDeeplinks,s=e.isFromProfile,f=e.hideTotalTips,v=e.hideLike,g=e.borderless,Z=(0,w.Z)({enableDeeplinks:Boolean(i),repl:n,currentUser:t}),b=Z.openFile,R=Z.viewState,y=Z.fs,k=Z.runRepl,C=Z.stopRepl,P=Z.runState,U=Z.bsodId,E=Z.isFileTreeOpen,S=Z.setIsFileTreeOpen,T=Z.showUrlOutput,F=Z.nonBsodUnrecoverableError,N=a.useRef(null),I=(0,we.Z)().showError,D=(0,_e.useRouter)(),L=function(){var e=(0,l.Z)(a.useState(ge()),2),n=e[0],t=e[1];return a.useEffect((function(){var e=function(){t(ge())};return document.addEventListener("fullscreenchange",e),function(){document.removeEventListener("fullscreenchange",e)}})),n}(),V="code"===(null===R||void 0===R?void 0:R.type)&&R.deeplink,_=(0,l.Z)(a.useState(V?V.path:null),2),A=_[0],O=_[1];(0,a.useEffect)((function(){O(V?V.path:null)}),[V,null===R||void 0===R?void 0:R.type]);var B=(0,Ve.D)({controlName:"flag-tip-repl"}),G=!v&&!(0,Ae.Vg)(D),j=!f&&B&&!(0,Ae.Vg)(D);return U?(0,o.tZ)(m.Z,{}):F===Be.G.NotAllowed?(0,o.tZ)(Ge.Z,{isOpen:!0}):(0,o.tZ)(Oe.Z,{bsod:!0,tags:{replviewer:"true"},origin:"replView: ErrorBoundary",children:(0,o.BX)(He,{borderless:g,innerRef:N,children:[(0,o.BX)(Me,{children:[(0,o.BX)(d.G,{css:[c.l0.flex.growAndShrink(1),c.l0.rowWithGap(8)],children:[(0,o.BX)(d.G,{css:[c.l0.rowWithGap(4),c.l0.align.center],children:[(0,o.tZ)(p.zx,{iconLeft:(0,o.tZ)(de.Z,{}),text:E?"Hide files":"Show files",onClick:function(){return S((function(e){return!e}))},css:(0,r.Z)({},"@media (max-width: ".concat(x.j.mobileMax,"px)"),{display:"none"})}),(0,o.tZ)(u.T,{background:"default",css:[c.l0.borderRadius(8),(0,r.Z)({},"@media (min-width: ".concat(x.j.mobileMax+1,"px)"),{display:"none"})],children:(0,o.tZ)(pe.h,{css:ce.G,alt:E?"Hide files":"Show files",onClick:function(){return S((function(e){return!e}))},children:(0,o.tZ)(de.Z,{})})})]}),T||"server"===(null===R||void 0===R?void 0:R.type)?(0,o.tZ)(d.G,{css:[c.l0.center],children:(0,o.BX)(ze,{css:[c.l0.rowWithGap(4),c.l0.color.foregroundDimmer,c.l0.px(4)],href:n.prodUrl,target:"_blank",children:[(0,o.tZ)(se.Z,{}),(0,o.tZ)(h.x,{children:(0,o.tZ)("span",{css:(0,r.Z)({},"@media (max-width: ".concat(x.j.mobileMax+20,"px)"),{display:"none"}),children:"Open website"})})]})}):null]}),(0,o.BX)(d.G,{css:[c.l0.rowWithGap(8),c.l0.align.center],children:[N.current&&document.fullscreenEnabled?(0,o.tZ)(pe.h,{alt:L?"Exit fullscreen":"Enter fullscreen",css:ce.G,onClick:function(){var e=N.current;e?L?function(){var e=document;e.exitFullscreen?e.exitFullscreen():e.mozExitFullScreen?e.mozExitFullScreen():e.webkitExitFullScreen&&e.webkitExitFullScreen()}():(!function(e){var n=e;n.requestFullscreen?n.requestFullscreen():n.mozRequestFullScreen?n.mozRequestFullScreen():n.webkitRequestFullScreen&&n.webkitRequestFullScreen()}(e),(0,fe.j)(fe.U3.REPL_VIEWER_FULLSCREEN_ENTERED,{location:s?"profile":"coverpage"})):I("Failed to enter fullscreen mode")},children:L?(0,o.tZ)(me.Z,{}):(0,o.tZ)(ve.Z,{})}):null,j?(0,o.tZ)(Le,{repl:n}):null,G?(0,o.tZ)(ce.Z,{repl:n,currentUser:t}):null,(0,o.tZ)(Xe,{runCount:n.runCount,runState:P,publishedAs:n.publishedAs,run:k,stop:C})]})]}),(0,o.tZ)(Ye,{repl:n,runRepl:k,viewState:R,activePath:A,isFileTreeOpen:E,setIsFileTreeOpen:S,openFile:b,fs:y})]})})}function Ye(e){var n=e.repl,t=e.runRepl,r=e.viewState,i=e.activePath,l=e.isFileTreeOpen,s=e.setIsFileTreeOpen,u=e.openFile,p=e.fs,f=(0,a.useState)(!1),m=f[0],w=f[1],Z=(0,ue.Z)((function(e){void 0!==e.width&&w(e.width<=500)}));return(0,o.BX)($e,{ref:function(e){Z(e)},css:[c.l0.flex.growAndShrink(1),{position:"relative"}],children:[null===r?(0,o.tZ)(v.Z,{repl:n,onClick:t}):null,"server"===(null===r||void 0===r?void 0:r.type)?(0,o.tZ)(We,{src:r.previewUrl}):null,"vnc"===(null===r||void 0===r?void 0:r.type)?(0,o.tZ)(g.Z,{fs:r.fs,container:r.container}):null,"deprecationNotice"===(null===r||void 0===r?void 0:r.type)?(0,o.BX)(d.G,{css:[c.l0.center,c.l0.p(16),c.l0.height("100%")],children:[(0,o.BX)(h.x,{multiline:!0,variant:"subheadDefault",children:['Running "',n.lang.displayName,'" is no longer supported.'," "]}),(0,o.tZ)(Ze.Z,{feature:be.l.General})]}):null,"terminal"===(null===r||void 0===r?void 0:r.type)?(0,o.tZ)(d.G,{css:[c.l0.height("100%"),c.l0.width("100%"),c.l0.position.relative,{overflow:"hidden",borderBottomLeftRadius:8,borderBottomRightRadius:8}],children:(0,o.tZ)(H.Z,{packager:r.packager,runner:r.runner})}):null,"code"===(null===r||void 0===r?void 0:r.type)?(0,o.tZ)(d.G,{css:[c.l0.height("100%"),c.l0.flex.growAndShrink(1),{position:"relative",overflow:"hidden",borderBottomLeftRadius:8,borderBottomRightRadius:8,transition:"margin ".concat(160,"ms"),marginLeft:l&&!m?200:0}],onClick:function(){m&&s(!1)},children:(0,o.tZ)(M,{fs:r.fs,deeplink:r.deeplink})}):null,(0,o.tZ)(qe,{isOpen:l,language:n.lang.id,activePath:i,onNodeClick:function(e){e.type!==q.Tv.Directory&&(u(e.path),m&&s(!1))},fs:p})]})}function Je(e){var n=e.repl,t=e.currentUser,r=e.enableDeeplinks,i=e.isFromProfile,l=e.hideTotalTips,s=e.hideLike,u=e.borderless,c=(0,a.useState)(!1),d=c[0],p=c[1];(0,a.useEffect)((function(){return p(!0)}),[]);var f=(0,ye.Z)((function(){return{id:n.id,slug:n.slug,language:n.language}}),[n.id,n.language,n.slug]);return d?(0,o.tZ)(he.Z.Provider,{value:f,children:(0,o.tZ)(Ke,{isFromProfile:i,repl:n,currentUser:t,enableDeeplinks:r,hideTotalTips:l,hideLike:s,borderless:u})}):(0,o.tZ)(He,{borderless:u})}},54568:function(e,n,t){t.d(n,{Z:function(){return u}});var r=t(14251),i=t(9941),l=t(67294),o=t(77402);function a(e,n){return(0,r.Z)({},e,n)}var s={isLoading:!1,result:null,error:null,fileViewerType:null};function u(e){var n=e.fs,t=e.path,r=(0,i.Z)(l.useReducer(a,s),2),u=r[0],c=r[1];return l.useEffect((function(){if(t){var e=!1,r=(0,o.V)(t);return c({isLoading:!0,fileViewerType:r}),n.readFile(t).then((function(n){e||(n.error?c({isLoading:!1,result:null,error:{path:t,fileViewerType:r,error:n.error}}):c({isLoading:!1,result:{path:t,fileViewerType:r,content:n.content},error:null}))})),function(){e=!0}}c(s)}),[n,t]),u}},90610:function(e,n,t){t.d(n,{gh:function(){return d},yo:function(){return f}});var r=t(14251),i=t(32692),l=t(31230),o=t(9523),a=t(50319);function s(){var e=(0,i.Z)(["\n  fragment UseReplViewerRepl on Repl {\n    id\n    previewUrl: hostedUrl(dotty: false, dev: false)\n    url\n    wasPosted\n    wasPublished\n    publishedAs\n    isProject\n    lang {\n      id\n      canUseShellRunner\n    }\n    config {\n      isServer\n      isVnc\n    }\n    deployment {\n      id\n      activeRelease {\n        id\n        previewUrl: hostedUrl\n      }\n    }\n    replViewSettings {\n      id\n      defaultView\n      replFile\n    }\n    ...CrosisContextRepl\n  }\n  ","\n"]);return s=function(){return e},e}function u(){var e=(0,i.Z)(["\n  mutation UserReplViewCreateReplRun($replId: String!) {\n    createReplRun(replId: $replId) {\n      ... on Repl {\n        id\n        runCount\n      }\n    }\n  }\n"]);return u=function(){return e},e}var c={},d=(0,l.Ps)(s(),o.C),p=(0,l.Ps)(u());function f(e){var n=(0,r.Z)({},c,e);return a.D(p,n)}},57746:function(e,n,t){t.d(n,{Z:function(){return S}});var r=t(34727),i=t(9941),l=t(70655),o=t(67294),a=t(54969),s=t(90610),u=t(25602),c=t(11887),d=t(48920),p=t(45528),f=t(46679),h=t(52867),v=t(34219),m=t(5743),w=t(38863);var g=t(60977),Z=t(37452),b=t(89224),R=".lesson/lessonplan.md";function y(e){var n=e.fs,t=e.container,r=e.dotReplit,l=e.skip,a=e.preferredFile,s=(0,i.Z)(o.useState(null),2),u=s[0],d=s[1],p=function(e){var n,t=(0,i.Z)(o.useState(null===(n=e.getContext())||void 0===n?void 0:n.repl.id),2),r=t[0],l=t[1];return o.useEffect((function(){return e.onConnectionStateChanged((function(n){var t;n===c.em.CONNECTING&&l(null===(t=e.getContext())||void 0===t?void 0:t.repl.id)}))}),[e]),r}(t);return o.useEffect((function(){if(!l&&p){var e=!1;return Promise.all([(0,Z.W)({replId:p,dotReplit:r,fs:n}),"LessonPlan"===(null===a||void 0===a?void 0:a.type)?n.stat(R):null,"FilePath"===(null===a||void 0===a?void 0:a.type)?n.stat(a.path):null]).then((function(n){var t=(0,i.Z)(n,3),r=t[0],l=r.entrypoint,o=r.readmeFile,s=t[1],u=t[2];e||("LessonPlan"===(null===a||void 0===a?void 0:a.type)&&s&&s.exists&&s.type===b.Tv.File?d(R):"FilePath"===(null===a||void 0===a?void 0:a.type)&&u&&u.exists&&u.type===b.Tv.File?d(a.path):"Readme"===(null===a||void 0===a?void 0:a.type)&&o?d(o):l&&d(l))})),function(){e=!0}}}),[n,r,p,l,a]),u}var k=t(11163),x=t.n(k);var C,P=t(37806),U=t(88710),E=t(93058);function S(e){var n,t,Z=e.currentUser,b=e.repl,R=e.initialViewMode,k=e.enableDeeplinks,S=(0,o.useState)(null),T=S[0],F=S[1],N=(0,i.Z)((0,P.qg)(),2),I=N[0],D=N[1],L=(0,P.ic)(),V=(0,o.useState)(c.em.DISCONNECTED),_=V[0],A=V[1],O=(0,E.Z)().showError,B=(0,o.useState)(d.A.OFFLINE),G=B[0],j=B[1],M=(0,o.useState)((function(){return function(e){var n=e.onUnrecoverableError,t=(0,c.ZP)({onUnrecoverableError:n}),i=(0,f.Z)({container:t}),o=(0,w.Z)({container:t,fs:i}),a=(0,v.Z)({container:t,dotReplit:o}),s=(0,h.Z)({container:t,mode:"shellrunner",beforeRun:(0,r.Z)((function(){return(0,l.__generator)(this,(function(e){switch(e.label){case 0:return[4,(0,m.Z)(t,o)];case 1:return e.sent()?[4,a.installPackages()]:[3,3];case 2:e.sent(),e.label=3;case 3:return[2]}}))}))});return{container:t,fs:i,runner:s,dotReplit:o,packager:a}}({onUnrecoverableError:function(e){var n=(0,U.Z)(e);if(n!==U.G.NotFound)if(n)F(n);else{D({error:e,tags:{replviewer:"true"},origin:"replView: useReplViewer/services/onUnrecoverableError"})}else x().push("/home","~/")}})})),z=M[0],X=z.container,H=z.fs,W=z.dotReplit,q=z.runner,$=z.packager,K=(0,o.useRef)((0,u.u9)()),Y=(null===(n=b.replViewSettings)||void 0===n?void 0:n.defaultView)===a.dZ.ReplFile&&b.replViewSettings.replFile?b.replViewSettings.replFile:void 0,J={type:"Readme"};b.isProject?J={type:"LessonPlan"}:Y&&(J={type:"FilePath",path:Y});var Q=(null===(t=b.replViewSettings)||void 0===t?void 0:t.defaultView)!==a.dZ.ReplImage&&(b.publishedAs===a.O2.Template||b.isProject),ee=(0,o.useState)((function(){return R===C.Code||K.current||Y||Q?{type:"code",fs:H,container:X,dotReplit:W}:null})),ne=ee[0],te=ee[1],re=(0,o.useState)(K.current),ie=re[0],le=re[1],oe=(0,i.Z)(o.useState(null),2),ae=oe[0],se=oe[1],ue=Boolean("code"===(null===ne||void 0===ne?void 0:ne.type)&&!ne.deeplink&&!K.current),ce=y({fs:H,dotReplit:W,container:X,preferredFile:J,skip:!ue});!function(e){var n=e.currentDeeplink,t=e.onChange,i=e.fs,a=e.enabled,s=(0,o.useRef)(!1),c=(0,o.useCallback)((0,r.Z)((function(){var e,n,r,o;return(0,l.__generator)(this,(function(l){switch(l.label){case 0:return s.current?[2]:[4,(0,u.mv)(i)];case 1:return e=l.sent(),n=e.path,r=e.line,o=e.col,n?(t({path:n,line:r,col:o}),[2]):(t(null),[2])}}))})),[i,t]),d=(0,o.useState)(!1),p=d[0],f=d[1];(0,o.useEffect)((function(){p||c().then((function(){return f(!0)}))})),(0,o.useEffect)((function(){if(a)return window.addEventListener("hashchange",c),function(){window.removeEventListener("hashchange",c)}}),[a,c]),(0,o.useEffect)((function(){if(a&&n){var e=(0,u.YM)(n),t=x().asPath;try{t=window.decodeURI(t)}catch(i){}if(!t.endsWith(e)){var r=x().asPath.includes("#")?x().asPath.slice(0,x().asPath.indexOf("#")):x().asPath;s.current=!0,x().push({pathname:x().pathname,query:x().query},"".concat(r).concat(e),{shallow:!0}),s.current=!1}}}),[i,n,a])}({fs:H,currentDeeplink:"code"===(null===ne||void 0===ne?void 0:ne.type)?ne.deeplink:void 0,onChange:function(e){te(e?{deeplink:e,type:"code",container:X,fs:H,dotReplit:W}:null)},enabled:k});var de=(0,i.Z)((0,s.yo)({variables:{replId:b.id}}),1)[0];(0,o.useEffect)((function(){if((0,u.u9)()){var e=!1;return(0,u.mv)(H).then((function(n){var t=n.path,r=n.line,i=n.col;e||t&&te({type:"code",container:X,fs:H,dotReplit:W,deeplink:{path:t,line:r,col:i}})})),function(){e=!0}}}),[X,H,W]),(0,o.useEffect)((function(){ue&&ce&&te({type:"code",container:X,fs:H,dotReplit:W,deeplink:{path:ce}})}),[ue,ce,X,H,W]),(0,o.useEffect)((function(){ae&&te("server"!==ae?{type:"vnc",container:X,fs:H}:{type:"server",previewUrl:b.previewUrl})}),[X,H,ae,b.previewUrl]),(0,o.useEffect)((function(){_!==c.em.CONNECTED&&se(null)}),[_]);var pe=(0,p.b)({repl:b,currentUser:Z}),fe=function(e){return!!["html","web_project","kaboom"].includes(e.lang.id)||Boolean(e.config.isServer)}(b),he=ie||Boolean(ne&&("code"===ne.type||"vnc"===ne.type||"terminal"===ne.type));(0,o.useEffect)((function(){if(he&&pe&&X.getConnectionState()===c.em.DISCONNECTED){X.connect({context:pe});var e=fe?[X.close]:[q.onStateChanged(j),X.onConnectionStateChanged(A),X.onPortOpened((function(e){var n=e.isVnc;se(n?"vnc":"server")})),X.close];return function(){e.forEach((function(e){return e()}))}}}),[he,X,q,pe,fe]);var ve=(0,o.useRef)(!1);return(0,o.useEffect)((function(){function e(){return(e=(0,r.Z)((function(){var e;return(0,l.__generator)(this,(function(n){switch(n.label){case 0:if(G!==d.A.IDLE)return[2];if(!ve.current)return[2];if(ve.current=!1,"terminal"!==(null===ne||void 0===ne?void 0:ne.type))return[2];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,q.run()];case 2:return n.sent(),[3,4];case 3:if(e=n.sent(),!e.toString().includes("Cannot run while state is not IDLE or STOPPING, got state: ".concat(d.A.OFFLINE)))throw e;return O("You are offline. Please check your internet connection."),[3,4];case 4:return[2]}}))}))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[G,ne,q,O]),{fs:H,openFile:function(e){"server"===(null===ne||void 0===ne?void 0:ne.type)&&j(d.A.IDLE),te({type:"code",container:X,fs:H,deeplink:{path:e},dotReplit:W}),q.getRunState()===d.A.RUNNING&&q.stopRun()},viewState:ne,runRepl:function(){if(le(!1),Z&&de(),(0,g.j)(g.U3.REACTED_TO_REPL,{replView:"https://replit.com"+b.url,reaction:"repl_ran",isReplTalk:!1,item:"repl",isCommunityPublish:b.wasPosted,isAppPublish:b.wasPublished}),fe){var e,n,t=(null===(e=b.deployment)||void 0===e||null===(n=e.activeRelease)||void 0===n?void 0:n.previewUrl)||b.previewUrl;return te({type:"server",previewUrl:t}),void j(d.A.RUNNING)}if(b.lang.canUseShellRunner)return te("server"===ae?{type:"server",previewUrl:b.previewUrl}:"vnc"===ae?{type:"vnc",container:X,fs:H}:{type:"terminal",runner:q,packager:$}),q.getRunState()!==d.A.IDLE?void(ve.current=!0):void q.run();te({type:"deprecationNotice"})},stopRepl:function(){te(null),le(!1),j(d.A.IDLE),fe||q.getRunState()===d.A.RUNNING&&q.stopRun()},runState:G,isFileTreeOpen:ie,setIsFileTreeOpen:le,bsodId:null===I||void 0===I?void 0:I.eventId,nonBsodUnrecoverableError:T,showUrlOutput:fe,devClearBsod:function(){L()}}}!function(e){e.Code="Code",e.Output="Output"}(C||(C={}))},28497:function(e,n,t){function r(e){var n=document.createElement("canvas"),t=n.getContext("2d");if(n.width=e.width,n.height=e.height,!t)throw new Error("failed to get canvas ctx");return{version:"1",width:e.width,height:e.height,palette:[[0,0,0,255],[255,255,255,255],[255,255,128,255],[255,128,255,255],[0,128,128,255],[128,0,255,255],[255,0,128,255],[0,255,255,255]],anims:{},frames:e.frames.map((function(r){var i=new window.ImageData(new Uint8ClampedArray(r.pixels),e.width,e.height);return t.putImageData(i,0,0),n.toDataURL()}))}}function i(e){return new Promise((function(n,t){var r=new window.Image;r.src=e,r.onload=function(){n(r)},r.onerror=t}))}function l(e){return new Promise((function(n,t){Promise.all(e.frames.map(i)).then((function(r){var i=document.createElement("canvas");i.width=e.width,i.height=e.height;var l=i.getContext("2d");if(l){var o=r.map((function(n){return l.drawImage(n,0,0),{pixels:Array.from(l.getImageData(0,0,e.width,e.height).data),width:e.width,height:e.height}}));n({frames:o,preview:e.frames[0],width:e.width,height:e.height})}else t(new Error("failed to get canvas ctx"))})).catch(t)}))}t.d(n,{C:function(){return r},u:function(){return l}})}}]);
//# sourceMappingURL=7972-40ee6fe01d1e3cd0.js.map